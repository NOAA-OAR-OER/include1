if(!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("global/window"),require("global/document")):"function"==typeof define&&define.amd?define(["global/window","global/document"],t):(e=e||self).videojs=t(e.window,e.document)}(this,function(y,d){y=y&&y.hasOwnProperty("default")?y.default:y,d=d&&d.hasOwnProperty("default")?d.default:d;var h="7.6.6",l=[],p=function t(i){function n(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];r("log",a,t)}var r,o,s,a="info";return o=i,r=function(e,t,i){var n=s.levels[t],r=new RegExp("^("+n+")$");if("log"!==e&&i.unshift(e.toUpperCase()+":"),i.unshift(o+":"),l&&l.push([].concat(i)),y.console){var a=y.console[e];a||"debug"!==e||(a=y.console.info||y.console.log),a&&n&&r.test(e)&&a[Array.isArray(i)?"apply":"call"](y.console,i)}},(s=n).createLogger=function(e){return t(i+": "+e)},n.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:a},n.level=function(e){if("string"==typeof e){if(!n.levels.hasOwnProperty(e))throw new Error('"'+e+'" in not a valid log level');a=e}return a},(n.history=function(){return l?[].concat(l):[]}).filter=function(t){return(l||[]).filter(function(e){return new RegExp(".*"+t+".*").test(e[0])})},n.history.clear=function(){l&&(l.length=0)},n.history.disable=function(){null!==l&&(l.length=0,l=null)},n.history.enable=function(){null===l&&(l=[])},n.error=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return r("error",a,t)},n.warn=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return r("warn",a,t)},n.debug=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return r("debug",a,t)},n}("VIDEOJS"),f=p.createLogger,t=Object.prototype.toString,r=function(e){return o(e)?Object.keys(e):[]};function a(t,i){r(t).forEach(function(e){return i(t[e],e)})}function g(i){for(var e=arguments.length,t=new Array(1<e?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return Object.assign?Object.assign.apply(Object,[i].concat(t)):(t.forEach(function(e){e&&a(e,function(e,t){i[t]=e})}),i)}function o(e){return!!e&&"object"==typeof e}function s(e){return o(e)&&"[object Object]"===t.call(e)&&e.constructor===Object}function n(e,t){if(!e||!t)return"";if("function"!=typeof y.getComputedStyle)return"";var i=y.getComputedStyle(e);return i?i.getPropertyValue(t)||i[t]:""}function u(e){return"string"==typeof e&&/\S/.test(e)}function i(e){if(/\s/.test(e))throw new Error("class has illegal whitespace characters")}function c(){return d===y.document}function m(e){return o(e)&&1===e.nodeType}function v(){try{return y.parent!==y.self}catch(e){return!0}}function e(n){return function(e,t){if(!u(e))return d[n](null);u(t)&&(t=d.querySelector(t));var i=m(t)?t:d;return i[n]&&i[n](e)}}function b(e,i,t,n){void 0===e&&(e="div"),void 0===i&&(i={}),void 0===t&&(t={});var r=d.createElement(e);return Object.getOwnPropertyNames(i).forEach(function(e){var t=i[e];-1!==e.indexOf("aria-")||"role"===e||"type"===e?(p.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+e+" to "+t+"."),r.setAttribute(e,t)):"textContent"===e?_(r,t):r[e]=t}),Object.getOwnPropertyNames(t).forEach(function(e){r.setAttribute(e,t[e])}),n&&B(r,n),r}function _(e,t){return void 0===e.textContent?e.innerText=t:e.textContent=t,e}function T(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function w(e,t){return i(t),e.classList?e.classList.contains(t):new RegExp("(^|\\s)"+t+"($|\\s)").test(e.className)}function S(e,t){return e.classList?e.classList.add(t):w(e,t)||(e.className=(e.className+" "+t).trim()),e}function k(e,t){return e.classList?e.classList.remove(t):(i(t),e.className=e.className.split(/\s+/).filter(function(e){return e!==t}).join(" ")),e}function C(e,t,i){var n=w(e,t);if("function"==typeof i&&(i=i(e,t)),"boolean"!=typeof i&&(i=!n),i!==n)return(i?S:k)(e,t),e}function E(i,n){Object.getOwnPropertyNames(n).forEach(function(e){var t=n[e];null==t||!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?"":t)})}function x(e){var t={};if(e&&e.attributes&&0<e.attributes.length)for(var i=e.attributes,n=i.length-1;0<=n;n--){var r=i[n].name,a=i[n].value;"boolean"!=typeof e[r]&&-1===",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+r+",")||(a=null!==a),t[r]=a}return t}function A(e,t){return e.getAttribute(t)}function I(e,t,i){e.setAttribute(t,i)}function P(e,t){e.removeAttribute(t)}function O(){d.body.focus(),d.onselectstart=function(){return!1}}function L(){d.onselectstart=function(){return!0}}function D(e){if(e&&e.getBoundingClientRect&&e.parentNode){var t=e.getBoundingClientRect(),i={};return["bottom","height","left","right","top","width"].forEach(function(e){void 0!==t[e]&&(i[e]=t[e])}),i.height||(i.height=parseFloat(n(e,"height"))),i.width||(i.width=parseFloat(n(e,"width"))),i}}function N(e){var t;if(e.getBoundingClientRect&&e.parentNode&&(t=e.getBoundingClientRect()),!t)return{left:0,top:0};var i=d.documentElement,n=d.body,r=i.clientLeft||n.clientLeft||0,a=y.pageXOffset||n.scrollLeft,o=t.left+a-r,s=i.clientTop||n.clientTop||0,l=y.pageYOffset||n.scrollTop,u=t.top+l-s;return{left:Math.round(o),top:Math.round(u)}}function M(e,t){var i={},n=N(e),r=e.offsetWidth,a=e.offsetHeight,o=n.top,s=n.left,l=t.pageY,u=t.pageX;return t.changedTouches&&(u=t.changedTouches[0].pageX,l=t.changedTouches[0].pageY),i.y=Math.max(0,Math.min(1,(o-l+a)/a)),i.x=Math.max(0,Math.min(1,(u-s)/r)),i}function R(e){return o(e)&&3===e.nodeType}function j(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function U(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map(function(e){return"function"==typeof e&&(e=e()),m(e)||R(e)?e:"string"==typeof e&&/\S/.test(e)?d.createTextNode(e):void 0}).filter(function(e){return e})}function B(t,e){return U(e).forEach(function(e){return t.appendChild(e)}),t}function F(e,t){return B(j(e),t)}function $(e){return void 0===e.button&&void 0===e.buttons||0===e.button&&void 0===e.buttons||"mouseup"===e.type&&0===e.button&&0===e.buttons||0===e.button&&1===e.buttons}var H,q=e("querySelector"),W=e("querySelectorAll"),V=Object.freeze({isReal:c,isEl:m,isInFrame:v,createEl:b,textContent:_,prependTo:T,hasClass:w,addClass:S,removeClass:k,toggleClass:C,setAttributes:E,getAttributes:x,getAttribute:A,setAttribute:I,removeAttribute:P,blockTextSelection:O,unblockTextSelection:L,getBoundingClientRect:D,findPosition:N,getPointerPosition:M,isTextNode:R,emptyEl:j,normalizeContent:U,appendContent:B,insertContent:F,isSingleLeftClick:$,$:q,$$:W}),z=!1,G=function(){if(c()&&!1!==H.options.autoSetup){var e=Array.prototype.slice.call(d.getElementsByTagName("video")),t=Array.prototype.slice.call(d.getElementsByTagName("audio")),i=Array.prototype.slice.call(d.getElementsByTagName("video-js")),n=e.concat(t,i);if(n&&0<n.length)for(var r=0,a=n.length;r<a;r++){var o=n[r];if(!o||!o.getAttribute){X(1);break}void 0===o.player&&null!==o.getAttribute("data-setup")&&H(o)}else z||X(1)}};function X(e,t){t&&(H=t),y.setTimeout(G,e)}function K(){z=!0,y.removeEventListener("load",K)}function Y(e){var t=d.createElement("style");return t.className=e,t}function Q(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t}c()&&("complete"===d.readyState?K():y.addEventListener("load",K));var J,Z,ee=3;function te(){return ee++}function ie(){this.vdata="vdata"+Math.floor(y.performance&&y.performance.now()||Date.now()),this.data={}}y.WeakMap||((Z=ie.prototype).set=function(e,t){var i=e[this.vdata]||te();return e[this.vdata]||(e[this.vdata]=i),this.data[i]=t,this},Z.get=function(e){var t=e[this.vdata];if(t)return this.data[t];p("We have no data for this element",e)},Z.has=function(e){return e[this.vdata]in this.data},Z.delete=function(e){var t=e[this.vdata];t&&(delete this.data[t],delete e[this.vdata])},J=ie);var ne=new(y.WeakMap?WeakMap:J);function re(e,t){if(ne.has(e)){var i=ne.get(e);0===i.handlers[t].length&&(delete i.handlers[t],e.removeEventListener?e.removeEventListener(t,i.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,i.dispatcher)),Object.getOwnPropertyNames(i.handlers).length<=0&&(delete i.handlers,delete i.dispatcher,delete i.disabled),0===Object.getOwnPropertyNames(i).length&&ne.delete(e)}}function ae(t,i,e,n){e.forEach(function(e){t(i,e,n)})}function oe(e){function t(){return!0}function i(){return!1}if(!e||!e.isPropagationStopped){var n=e||y.event;for(var r in e={},n)"layerX"!==r&&"layerY"!==r&&"keyLocation"!==r&&"webkitMovementX"!==r&&"webkitMovementY"!==r&&("returnValue"===r&&n.preventDefault||(e[r]=n[r]));if(e.target||(e.target=e.srcElement||d),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){n.preventDefault&&n.preventDefault(),e.returnValue=!1,n.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){n.stopPropagation&&n.stopPropagation(),e.cancelBubble=!0,n.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=i,e.stopImmediatePropagation=function(){n.stopImmediatePropagation&&n.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=i,null!==e.clientX&&void 0!==e.clientX){var a=d.documentElement,o=d.body;e.pageX=e.clientX+(a&&a.scrollLeft||o&&o.scrollLeft||0)-(a&&a.clientLeft||o&&o.clientLeft||0),e.pageY=e.clientY+(a&&a.scrollTop||o&&o.scrollTop||0)-(a&&a.clientTop||o&&o.clientTop||0)}e.which=e.charCode||e.keyCode,null!==e.button&&void 0!==e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e}var se=!1;!function(){try{var e=Object.defineProperty({},"passive",{get:function(){se=!0}});y.addEventListener("test",null,e),y.removeEventListener("test",null,e)}catch(e){}}();var le=["touchstart","touchmove"];function ue(o,e,t){if(Array.isArray(e))return ae(ue,o,e,t);ne.has(o)||ne.set(o,{});var s=ne.get(o);if(s.handlers||(s.handlers={}),s.handlers[e]||(s.handlers[e]=[]),t.guid||(t.guid=te()),s.handlers[e].push(t),s.dispatcher||(s.disabled=!1,s.dispatcher=function(e,t){if(!s.disabled){e=oe(e);var i=s.handlers[e.type];if(i)for(var n=i.slice(0),r=0,a=n.length;r<a&&!e.isImmediatePropagationStopped();r++)try{n[r].call(o,e,t)}catch(e){p.error(e)}}}),1===s.handlers[e].length)if(o.addEventListener){var i=!1;se&&-1<le.indexOf(e)&&(i={passive:!0}),o.addEventListener(e,s.dispatcher,i)}else o.attachEvent&&o.attachEvent("on"+e,s.dispatcher)}function ce(e,t,i){if(ne.has(e)){var n=ne.get(e);if(n.handlers){if(Array.isArray(t))return ae(ce,e,t,i);function r(e,t){n.handlers[t]=[],re(e,t)}if(void 0!==t){var a=n.handlers[t];if(a)if(i){if(i.guid)for(var o=0;o<a.length;o++)a[o].guid===i.guid&&a.splice(o--,1);re(e,t)}else r(e,t)}else for(var s in n.handlers)Object.prototype.hasOwnProperty.call(n.handlers||{},s)&&r(e,s)}}}function de(e,t,i){var n=ne.has(e)?ne.get(e):{},r=e.parentNode||e.ownerDocument;if("string"==typeof t?t={type:t,target:e}:t.target||(t.target=e),t=oe(t),n.dispatcher&&n.dispatcher.call(e,t,i),r&&!t.isPropagationStopped()&&!0===t.bubbles)de.call(null,r,t,i);else if(!r&&!t.defaultPrevented&&t.target&&t.target[t.type]){ne.has(t.target)||ne.set(t.target,{});var a=ne.get(t.target);t.target[t.type]&&(a.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),a.disabled=!1)}return!t.defaultPrevented}function he(e,t,i){if(Array.isArray(t))return ae(he,e,t,i);function n(){ce(e,t,n),i.apply(this,arguments)}n.guid=i.guid=i.guid||te(),ue(e,t,n)}function pe(e,t,i){function n(){ce(e,t,n),i.apply(this,arguments)}n.guid=i.guid=i.guid||te(),ue(e,t,n)}function fe(e,t,i){t.guid||(t.guid=te());var n=t.bind(e);return n.guid=i?i+"_"+t.guid:t.guid,n}function ge(t,i){var n=y.performance.now();return function(){var e=y.performance.now();i<=e-n&&(t.apply(void 0,arguments),n=e)}}function me(){}var ve,ye=Object.freeze({fixEvent:oe,on:ue,off:ce,trigger:de,one:he,any:pe});function be(e){return"string"==typeof e&&/\S/.test(e)||Array.isArray(e)&&e.length}function _e(e){if(!e.nodeName&&!Ce(e))throw new Error("Invalid target; must be a DOM node or evented object.")}function Te(e){if(!be(e))throw new Error("Invalid event type; must be a non-empty string or array.")}function we(e){if("function"!=typeof e)throw new Error("Invalid listener; must be a function.")}function Se(e,t){var i,n,r,a=t.length<3||t[0]===e||t[0]===e.eventBusEl_;return r=a?(i=e.eventBusEl_,3<=t.length&&t.shift(),n=t[0],t[1]):(i=t[0],n=t[1],t[2]),_e(i),Te(n),we(r),{isTargetingSelf:a,target:i,type:n,listener:r=fe(e,r)}}function ke(e,t,i,n){_e(e),e.nodeName?ye[t](e,i,n):e[t](i,n)}me.prototype.allowedEvents_={},me.prototype.addEventListener=me.prototype.on=function(e,t){var i=this.addEventListener;this.addEventListener=function(){},ue(this,e,t),this.addEventListener=i},me.prototype.removeEventListener=me.prototype.off=function(e,t){ce(this,e,t)},me.prototype.one=function(e,t){var i=this.addEventListener;this.addEventListener=function(){},he(this,e,t),this.addEventListener=i},me.prototype.any=function(e,t){var i=this.addEventListener;this.addEventListener=function(){},pe(this,e,t),this.addEventListener=i},me.prototype.dispatchEvent=me.prototype.trigger=function(e){var t=e.type||e;"string"==typeof e&&(e={type:t}),e=oe(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),de(this,e)},me.prototype.queueTrigger=function(e){var t=this;ve=ve||new Map;var i=e.type||e,n=ve.get(this);n||(n=new Map,ve.set(this,n));var r=n.get(i);n.delete(i),y.clearTimeout(r);var a=y.setTimeout(function(){0===n.size&&(n=null,ve.delete(t)),t.trigger(e)},0);n.set(i,a)};var Ce=function(t){return t instanceof me||!!t.eventBusEl_&&["on","one","off","trigger"].every(function(e){return"function"==typeof t[e]})},Ee={on:function(){for(var e=this,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=Se(this,i),a=r.isTargetingSelf,o=r.target,s=r.type,l=r.listener;if(ke(o,"on",s,l),!a){function u(){return e.off(o,s,l)}function c(){return e.off("dispose",u)}u.guid=l.guid,c.guid=l.guid,ke(this,"on","dispose",u),ke(o,"on","dispose",c)}},one:function(){for(var n=this,e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var r=Se(this,t),a=r.isTargetingSelf,o=r.target,s=r.type,l=r.listener;if(a)ke(o,"one",s,l);else{function u(){n.off(o,s,u);for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];l.apply(null,t)}u.guid=l.guid,ke(o,"one",s,u)}},any:function(){for(var n=this,e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var r=Se(this,t),a=r.isTargetingSelf,o=r.target,s=r.type,l=r.listener;if(a)ke(o,"any",s,l);else{function u(){n.off(o,s,u);for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];l.apply(null,t)}u.guid=l.guid,ke(o,"any",s,u)}},off:function(e,t,i){if(!e||be(e))ce(this.eventBusEl_,e,t);else{var n=e,r=t;_e(n),Te(r),we(i),i=fe(this,i),this.off("dispose",i),n.nodeName?(ce(n,r,i),ce(n,"dispose",i)):Ce(n)&&(n.off(r,i),n.off("dispose",i))}},trigger:function(e,t){return de(this.eventBusEl_,e,t)}};function xe(e,t){void 0===t&&(t={});var i=t.eventBusKey;if(i){if(!e[i].nodeName)throw new Error('The eventBusKey "'+i+'" does not refer to an element.');e.eventBusEl_=e[i]}else e.eventBusEl_=b("span",{className:"vjs-event-bus"});return g(e,Ee),e.eventedCallbacks&&e.eventedCallbacks.forEach(function(e){e()}),e.on("dispose",function(){e.off(),y.setTimeout(function(){e.eventBusEl_=null},0)}),e}var Ae={state:{},setState:function(e){var i,n=this;return"function"==typeof e&&(e=e()),a(e,function(e,t){n.state[t]!==e&&((i=i||{})[t]={from:n.state[t],to:e}),n.state[t]=e}),i&&Ce(this)&&this.trigger({changes:i,type:"statechanged"}),i}};function Ie(e,t){return g(e,Ae),e.state=g({},e.state,t),"function"==typeof e.handleStateChanged&&Ce(e)&&e.on("statechanged",e.handleStateChanged),e}function Pe(e){return"string"!=typeof e?e:e.replace(/./,function(e){return e.toLowerCase()})}function Oe(e){return"string"!=typeof e?e:e.replace(/./,function(e){return e.toUpperCase()})}function Le(){for(var i={},e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.forEach(function(e){e&&a(e,function(e,t){s(e)?(s(i[t])||(i[t]={}),i[t]=Le(i[t],e)):i[t]=e})}),i}var De,Ne=((De=Me.prototype).dispose=function(){if(this.trigger({type:"dispose",bubbles:!1}),this.children_)for(var e=this.children_.length-1;0<=e;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),ne.has(this.el_)&&ne.delete(this.el_),this.el_=null),this.player_=null},De.player=function(){return this.player_},De.options=function(e){return e&&(this.options_=Le(this.options_,e)),this.options_},De.el=function(){return this.el_},De.createEl=function(e,t,i){return b(e,t,i)},De.localize=function(e,r,t){void 0===t&&(t=e);var i=this.player_.language&&this.player_.language(),n=this.player_.languages&&this.player_.languages(),a=n&&n[i],o=i&&i.split("-")[0],s=n&&n[o],l=t;return a&&a[e]?l=a[e]:s&&s[e]&&(l=s[e]),r&&(l=l.replace(/\{(\d+)\}/g,function(e,t){var i=r[t-1],n=i;return void 0===i&&(n=e),n})),l},De.contentEl=function(){return this.contentEl_||this.el_},De.id=function(){return this.id_},De.name=function(){return this.name_},De.children=function(){return this.children_},De.getChildById=function(e){return this.childIndex_[e]},De.getChild=function(e){if(e)return this.childNameIndex_[e]},De.addChild=function(e,t,i){var n,r;if(void 0===t&&(t={}),void 0===i&&(i=this.children_.length),"string"==typeof e){r=Oe(e);var a=t.componentClass||r;t.name=r;var o=Me.getComponent(a);if(!o)throw new Error("Component "+a+" does not exist");if("function"!=typeof o)return null;n=new o(this.player_||this,t)}else n=e;if(n.parentComponent_&&n.parentComponent_.removeChild(n),this.children_.splice(i,0,n),n.parentComponent_=this,"function"==typeof n.id&&(this.childIndex_[n.id()]=n),(r=r||n.name&&Oe(n.name()))&&(this.childNameIndex_[r]=n,this.childNameIndex_[Pe(r)]=n),"function"==typeof n.el&&n.el()){var s=this.contentEl().children[i]||null;this.contentEl().insertBefore(n.el(),s)}return n},De.removeChild=function(e){if("string"==typeof e&&(e=this.getChild(e)),e&&this.children_){for(var t=!1,i=this.children_.length-1;0<=i;i--)if(this.children_[i]===e){t=!0,this.children_.splice(i,1);break}if(t){e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[Oe(e.name())]=null,this.childNameIndex_[Pe(e.name())]=null;var n=e.el();n&&n.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}}},De.initChildren=function(){var r=this,n=this.options_.children;if(n){var e,a=this.options_,i=Me.getComponent("Tech");(e=Array.isArray(n)?n:Object.keys(n)).concat(Object.keys(this.options_).filter(function(t){return!e.some(function(e){return"string"==typeof e?t===e:t===e.name})})).map(function(e){var t,i;return i="string"==typeof e?n[t=e]||r.options_[t]||{}:(t=e.name,e),{name:t,opts:i}}).filter(function(e){var t=Me.getComponent(e.opts.componentClass||Oe(e.name));return t&&!i.isTech(t)}).forEach(function(e){var t=e.name,i=e.opts;if(void 0!==a[t]&&(i=a[t]),!1!==i){!0===i&&(i={}),i.playerOptions=r.options_.playerOptions;var n=r.addChild(t,i);n&&(r[t]=n)}})}},De.buildCSSClass=function(){return""},De.ready=function(e,t){if(void 0===t&&(t=!1),e)return this.isReady_?void(t?e.call(this):this.setTimeout(e,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e))},De.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var e=this.readyQueue_;this.readyQueue_=[],e&&0<e.length&&e.forEach(function(e){e.call(this)},this),this.trigger("ready")},1)},De.$=function(e,t){return q(e,t||this.contentEl())},De.$$=function(e,t){return W(e,t||this.contentEl())},De.hasClass=function(e){return w(this.el_,e)},De.addClass=function(e){S(this.el_,e)},De.removeClass=function(e){k(this.el_,e)},De.toggleClass=function(e,t){C(this.el_,e,t)},De.show=function(){this.removeClass("vjs-hidden")},De.hide=function(){this.addClass("vjs-hidden")},De.lockShowing=function(){this.addClass("vjs-lock-showing")},De.unlockShowing=function(){this.removeClass("vjs-lock-showing")},De.getAttribute=function(e){return A(this.el_,e)},De.setAttribute=function(e,t){I(this.el_,e,t)},De.removeAttribute=function(e){P(this.el_,e)},De.width=function(e,t){return this.dimension("width",e,t)},De.height=function(e,t){return this.dimension("height",e,t)},De.dimensions=function(e,t){this.width(e,!0),this.height(t)},De.dimension=function(e,t,i){if(void 0!==t)return null!==t&&t==t||(t=0),-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?this.el_.style[e]=t:this.el_.style[e]="auto"===t?"":t+"px",void(i||this.trigger("componentresize"));if(!this.el_)return 0;var n=this.el_.style[e],r=n.indexOf("px");return-1!==r?parseInt(n.slice(0,r),10):parseInt(this.el_["offset"+Oe(e)],10)},De.currentDimension=function(e){var t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");if(t=n(this.el_,e),0===(t=parseFloat(t))||isNaN(t)){var i="offset"+Oe(e);t=this.el_[i]}return t},De.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},De.currentWidth=function(){return this.currentDimension("width")},De.currentHeight=function(){return this.currentDimension("height")},De.focus=function(){this.el_.focus()},De.blur=function(){this.el_.blur()},De.handleKeyDown=function(e){this.player_&&(e.stopPropagation(),this.player_.handleKeyDown(e))},De.handleKeyPress=function(e){this.handleKeyDown(e)},De.emitTapEvents=function(){var n,t=0,r=null;function e(){n=!1}this.on("touchstart",function(e){1===e.touches.length&&(r={pageX:e.touches[0].pageX,pageY:e.touches[0].pageY},t=y.performance.now(),n=!0)}),this.on("touchmove",function(e){if(1<e.touches.length)n=!1;else if(r){var t=e.touches[0].pageX-r.pageX,i=e.touches[0].pageY-r.pageY;10<Math.sqrt(t*t+i*i)&&(n=!1)}}),this.on("touchleave",e),this.on("touchcancel",e),this.on("touchend",function(e){!(r=null)===n&&y.performance.now()-t<200&&(e.preventDefault(),this.trigger("tap"))})},De.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var t,i=fe(this.player(),this.player().reportUserActivity);function e(e){i(),this.clearInterval(t)}this.on("touchstart",function(){i(),this.clearInterval(t),t=this.setInterval(i,250)}),this.on("touchmove",i),this.on("touchend",e),this.on("touchcancel",e)}},De.setTimeout=function(e,t){var i,n=this;return e=fe(this,e),this.clearTimersOnDispose_(),i=y.setTimeout(function(){n.setTimeoutIds_.has(i)&&n.setTimeoutIds_.delete(i),e()},t),this.setTimeoutIds_.add(i),i},De.clearTimeout=function(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),y.clearTimeout(e)),e},De.setInterval=function(e,t){e=fe(this,e),this.clearTimersOnDispose_();var i=y.setInterval(e,t);return this.setIntervalIds_.add(i),i},De.clearInterval=function(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),y.clearInterval(e)),e},De.requestAnimationFrame=function(e){var t,i=this;return this.supportsRaf_?(this.clearTimersOnDispose_(),e=fe(this,e),t=y.requestAnimationFrame(function(){i.rafIds_.has(t)&&i.rafIds_.delete(t),e()}),this.rafIds_.add(t),t):this.setTimeout(e,1e3/60)},De.cancelAnimationFrame=function(e){return this.supportsRaf_?(this.rafIds_.has(e)&&(this.rafIds_.delete(e),y.cancelAnimationFrame(e)),e):this.clearTimeout(e)},De.clearTimersOnDispose_=function(){var n=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(e){var t=e[0],i=e[1];n[t].forEach(n[i],n)}),n.clearingTimersOnDispose_=!1}))},Me.registerComponent=function(e,t){if("string"!=typeof e||!e)throw new Error('Illegal component name, "'+e+'"; must be a non-empty string.');var i=Me.getComponent("Tech"),n=i&&i.isTech(t),r=Me===t||Me.prototype.isPrototypeOf(t.prototype);if(n||!r)throw new Error('Illegal component, "'+e+'"; '+(n?"techs must be registered using Tech.registerTech()":"must be a Component subclass")+".");e=Oe(e),Me.components_||(Me.components_={});var a=Me.getComponent("Player");if("Player"===e&&a&&a.players){var o=a.players,s=Object.keys(o);if(o&&0<s.length&&s.map(function(e){return o[e]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return Me.components_[e]=t,Me.components_[Pe(e)]=t},Me.getComponent=function(e){if(e&&Me.components_)return Me.components_[e]},Me);function Me(e,t,i){if(!e&&this.play?this.player_=e=this:this.player_=e,this.parentComponent_=null,this.options_=Le({},this.options_),t=this.options_=Le(this.options_,t),this.id_=t.id||t.el&&t.el.id,!this.id_){var n=e&&e.id&&e.id()||"no_player";this.id_=n+"_component_"+te()}var r,a;function o(){this.set_={}}this.name_=t.name||null,t.el?this.el_=t.el:!1!==t.createEl&&(this.el_=this.createEl()),!1!==t.evented&&xe(this,{eventBusKey:this.el_?"el_":null}),Ie(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},y.Set||((a=o.prototype).has=function(e){return e in this.set_},a.delete=function(e){var t=this.has(e);return delete this.set_[e],t},a.add=function(e){return this.set_[e]=1,this},a.forEach=function(e,t){for(var i in this.set_)e.call(t,i,i,this)},r=o),this.setTimeoutIds_=new(y.Set?Set:r),this.setIntervalIds_=new(y.Set?Set:r),this.rafIds_=new(y.Set?Set:r),(this.clearingTimersOnDispose_=!1)!==t.initChildren&&this.initChildren(),this.ready(i),!1!==t.reportTouchActivity&&this.enableTouchActivity()}function Re(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function je(e,t){return(je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ue(e,t,i){return(Ue=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}}()?Reflect.construct:function(e,t,i){var n=[null];n.push.apply(n,t);var r=new(Function.bind.apply(e,n));return i&&je(r,i.prototype),r}).apply(null,arguments)}function Be(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}Ne.prototype.supportsRaf_="function"==typeof y.requestAnimationFrame&&"function"==typeof y.cancelAnimationFrame,Ne.registerComponent("Component",Ne);var Fe,$e,He,qe,We=y.navigator&&y.navigator.userAgent||"",Ve=/AppleWebKit\/([\d.]+)/i.exec(We),ze=Ve?parseFloat(Ve.pop()):null,Ge=/iPad/i.test(We),Xe=/iPhone/i.test(We)&&!Ge,Ke=/iPod/i.test(We),Ye=Xe||Ge||Ke,Qe=(Fe=We.match(/OS (\d+)_/i))&&Fe[1]?Fe[1]:null,Je=/Android/i.test(We),Ze=function(){var e=We.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),i=e[2]&&parseFloat(e[2]);return t&&i?parseFloat(e[1]+"."+e[2]):t||null}(),et=Je&&Ze<5&&ze<537,tt=/Firefox/i.test(We),it=/Edge/i.test(We),nt=!it&&(/Chrome/i.test(We)||/CriOS/i.test(We)),rt=($e=We.match(/(Chrome|CriOS)\/(\d+)/))&&$e[2]?parseFloat($e[2]):null,at=(!(qe=(He=/MSIE\s(\d+)\.\d/.exec(We))&&parseFloat(He[1]))&&/Trident\/7.0/i.test(We)&&/rv:11.0/.test(We)&&(qe=11),qe),ot=/Safari/i.test(We)&&!nt&&!Je&&!it,st=(ot||Ye)&&!nt,lt=/Windows/i.test(We),ut=c()&&("ontouchstart"in y||y.navigator.maxTouchPoints||y.DocumentTouch&&y.document instanceof y.DocumentTouch),ct=Object.freeze({IS_IPAD:Ge,IS_IPHONE:Xe,IS_IPOD:Ke,IS_IOS:Ye,IOS_VERSION:Qe,IS_ANDROID:Je,ANDROID_VERSION:Ze,IS_NATIVE_ANDROID:et,IS_FIREFOX:tt,IS_EDGE:it,IS_CHROME:nt,CHROME_VERSION:rt,IE_VERSION:at,IS_SAFARI:ot,IS_ANY_SAFARI:st,IS_WINDOWS:lt,TOUCH_ENABLED:ut});function dt(e,t,i,n){return function(e,t){if("number"!=typeof n||n<0||t<n)throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+n+") is non-numeric or out of bounds (0-"+t+").")}(e,i.length-1),i[n][t]}function ht(e){return void 0===e||0===e.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:dt.bind(null,"start",0,e),end:dt.bind(null,"end",1,e)}}function pt(e,t){return Array.isArray(e)?ht(e):void 0===e||void 0===t?ht():ht([[e,t]])}function ft(e,t){var i,n,r=0;if(!t)return 0;e&&e.length||(e=pt(0,0));for(var a=0;a<e.length;a++)i=e.start(a),t<(n=e.end(a))&&(n=t),r+=n-i;return r/t}for(var gt,mt={prefixed:!0},vt=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],yt=vt[0],bt=0;bt<vt.length;bt++)if(vt[bt][1]in d){gt=vt[bt];break}if(gt){for(var _t=0;_t<gt.length;_t++)mt[yt[_t]]=gt[_t];mt.prefixed=gt[0]!==yt[0]}function Tt(e){if(e instanceof Tt)return e;"number"==typeof e?this.code=e:"string"==typeof e?this.message=e:o(e)&&("number"==typeof e.code&&(this.code=e.code),g(this,e)),this.message||(this.message=Tt.defaultMessages[this.code]||"")}Tt.prototype.code=0,Tt.prototype.message="",Tt.prototype.status=null,Tt.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],Tt.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var wt=0;wt<Tt.errorTypes.length;wt++)Tt[Tt.errorTypes[wt]]=wt,Tt.prototype[Tt.errorTypes[wt]]=wt;function St(e){return null!=e&&"function"==typeof e.then}function kt(e){St(e)&&e.then(null,function(e){})}function Ct(n){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(e,t,i){return n[t]&&(e[t]=n[t]),e},{cues:n.cues&&Array.prototype.map.call(n.cues,function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}})})}function Et(e,t){return e(t={exports:{}},t.exports),t.exports}var xt=Et(function(e,t){function i(e){if(e&&"object"==typeof e){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if("number"==typeof e)return o[e];var i,n=String(e);return(i=r[n.toLowerCase()])?i:(i=a[n.toLowerCase()])||(1===n.length?n.charCodeAt(0):void 0)}i.isEventKey=function(e,t){if(e&&"object"==typeof e){var i=e.which||e.keyCode||e.charCode;if(null==i)return!1;if("string"==typeof t){var n;if(n=r[t.toLowerCase()])return n===i;if(n=a[t.toLowerCase()])return n===i}else if("number"==typeof t)return t===i;return!1}};var r=(t=e.exports=i).code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},a=t.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(n=97;n<123;n++)r[String.fromCharCode(n)]=n-32;for(var n=48;n<58;n++)r[n-48]=n;for(n=1;n<13;n++)r["f"+n]=n+111;for(n=0;n<10;n++)r["numpad "+n]=n+96;var o=t.names=t.title={};for(n in r)o[r[n]]=n;for(var s in a)r[s]=a[s]}),At=(xt.code,xt.codes,xt.aliases,xt.names,xt.title,"vjs-modal-dialog"),It=function(n){function e(e,t){var i;return(i=n.call(this,e,t)||this).opened_=i.hasBeenOpened_=i.hasBeenFilled_=!1,i.closeable(!i.options_.uncloseable),i.content(i.options_.content),i.contentEl_=b("div",{className:At+"-content"},{role:"document"}),i.descEl_=b("p",{className:At+"-description vjs-control-text",id:i.el().getAttribute("aria-describedby")}),_(i.descEl_,i.description()),i.el_.appendChild(i.descEl_),i.el_.appendChild(i.contentEl_),i}Re(e,n);var t=e.prototype;return t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},t.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,n.prototype.dispose.call(this)},t.buildCSSClass=function(){return At+" vjs-hidden "+n.prototype.buildCSSClass.call(this)},t.label=function(){return this.localize(this.options_.label||"Modal Window")},t.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},t.open=function(){if(!this.opened_){var e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,!this.options_.fillAlways&&(this.hasBeenOpened_||this.hasBeenFilled_)||this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},t.opened=function(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_},t.close=function(){if(this.opened_){var e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},t.closeable=function(e){if("boolean"==typeof e){var t=this.closeable_=!!e,i=this.getChild("closeButton");if(t&&!i){var n=this.contentEl_;this.contentEl_=this.el_,i=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=n,this.on(i,"close",this.close)}!t&&i&&(this.off(i,"close",this.close),this.removeChild(i),i.dispose())}return this.closeable_},t.fill=function(){this.fillWith(this.content())},t.fillWith=function(e){var t=this.contentEl(),i=t.parentNode,n=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,i.removeChild(t),this.empty(),F(t,e),this.trigger("modalfill"),n?i.insertBefore(t,n):i.appendChild(t);var r=this.getChild("closeButton");r&&i.appendChild(r.el_)},t.empty=function(){this.trigger("beforemodalempty"),j(this.contentEl()),this.trigger("modalempty")},t.content=function(e){return void 0!==e&&(this.content_=e),this.content_},t.conditionalFocus_=function(){var e=d.activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,!t.contains(e)&&t!==e||(this.previouslyActiveEl_=e,this.focus())},t.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},t.handleKeyDown=function(e){if(e.stopPropagation(),xt.isEventKey(e,"Escape")&&this.closeable())return e.preventDefault(),void this.close();if(xt.isEventKey(e,"Tab")){for(var t,i=this.focusableEls_(),n=this.el_.querySelector(":focus"),r=0;r<i.length;r++)if(n===i[r]){t=r;break}d.activeElement===this.el_&&(t=0),e.shiftKey&&0===t?(i[i.length-1].focus(),e.preventDefault()):e.shiftKey||t!==i.length-1||(i[0].focus(),e.preventDefault())}},t.focusableEls_=function(){var e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,function(e){return(e instanceof y.HTMLAnchorElement||e instanceof y.HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof y.HTMLInputElement||e instanceof y.HTMLSelectElement||e instanceof y.HTMLTextAreaElement||e instanceof y.HTMLButtonElement)&&!e.hasAttribute("disabled")||e instanceof y.HTMLIFrameElement||e instanceof y.HTMLObjectElement||e instanceof y.HTMLEmbedElement||e.hasAttribute("tabindex")&&-1!==e.getAttribute("tabindex")||e.hasAttribute("contenteditable")})},e}(Ne);It.prototype.options_={pauseOnOpen:!0,temporary:!0},Ne.registerComponent("ModalDialog",It);var Pt=function(n){function e(e){var t;void 0===e&&(e=[]),(t=n.call(this)||this).tracks_=[],Object.defineProperty(Be(t),"length",{get:function(){return this.tracks_.length}});for(var i=0;i<e.length;i++)t.addTrack(e[i]);return t}Re(e,n);var t=e.prototype;return t.addTrack=function(e){var t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.tracks_[t]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this}))},t.removeTrack=function(e){for(var t,i=0,n=this.length;i<n;i++)if(this[i]===e){(t=this[i]).off&&t.off(),this.tracks_.splice(i,1);break}t&&this.trigger({track:t,type:"removetrack",target:this})},t.getTrackById=function(e){for(var t=null,i=0,n=this.length;i<n;i++){var r=this[i];if(r.id===e){t=r;break}}return t},e}(me);for(var Ot in Pt.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"},Pt.prototype.allowedEvents_)Pt.prototype["on"+Ot]=null;function Lt(e,t){for(var i=0;i<e.length;i++)Object.keys(e[i]).length&&t.id!==e[i].id&&(e[i].enabled=!1)}function Dt(e,t){for(var i=0;i<e.length;i++)Object.keys(e[i]).length&&t.id!==e[i].id&&(e[i].selected=!1)}function Nt(e){var t=["protocol","hostname","port","pathname","search","hash","host"],i=d.createElement("a");i.href=e;var n,r=""===i.host&&"file:"!==i.protocol;r&&((n=d.createElement("div")).innerHTML='<a href="'+e+'"></a>',i=n.firstChild,n.setAttribute("style","display:none; position:absolute;"),d.body.appendChild(n));for(var a={},o=0;o<t.length;o++)a[t[o]]=i[t[o]];return"http:"===a.protocol&&(a.host=a.host.replace(/:80$/,"")),"https:"===a.protocol&&(a.host=a.host.replace(/:443$/,"")),a.protocol||(a.protocol=y.location.protocol),r&&d.body.removeChild(n),a}function Mt(e){if(!e.match(/^https?:\/\//)){var t=d.createElement("div");t.innerHTML='<a href="'+e+'">x</a>',e=t.firstChild.href}return e}function Rt(e){if("string"==typeof e){var t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(e);if(t)return t.pop().toLowerCase()}return""}function jt(e){var t=y.location,i=Nt(e);return(":"===i.protocol?t.protocol:i.protocol)+i.host!==t.protocol+t.host}var Ut,Bt,Ft,$t=function(n){function e(e){var t;void 0===e&&(e=[]);for(var i=e.length-1;0<=i;i--)if(e[i].enabled){Lt(e,e[i]);break}return(t=n.call(this,e)||this).changing_=!1,t}Re(e,n);var t=e.prototype;return t.addTrack=function(e){var t=this;e.enabled&&Lt(this,e),n.prototype.addTrack.call(this,e),e.addEventListener&&(e.enabledChange_=function(){t.changing_||(t.changing_=!0,Lt(t,e),t.changing_=!1,t.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))},t.removeTrack=function(e){n.prototype.removeTrack.call(this,e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)},e}(Pt),Ht=function(n){function e(e){var t;void 0===e&&(e=[]);for(var i=e.length-1;0<=i;i--)if(e[i].selected){Dt(e,e[i]);break}return(t=n.call(this,e)||this).changing_=!1,Object.defineProperty(Be(t),"selectedIndex",{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function(){}}),t}Re(e,n);var t=e.prototype;return t.addTrack=function(e){var t=this;e.selected&&Dt(this,e),n.prototype.addTrack.call(this,e),e.addEventListener&&(e.selectedChange_=function(){t.changing_||(t.changing_=!0,Dt(t,e),t.changing_=!1,t.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))},t.removeTrack=function(e){n.prototype.removeTrack.call(this,e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)},e}(Pt),qt=function(i){function e(){return i.apply(this,arguments)||this}Re(e,i);var t=e.prototype;return t.addTrack=function(e){var t=this;i.prototype.addTrack.call(this,e),this.queueChange_||(this.queueChange_=function(){return t.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return t.trigger("selectedlanguagechange")}),e.addEventListener("modechange",this.queueChange_),-1===["metadata","chapters"].indexOf(e.kind)&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)},t.removeTrack=function(e){i.prototype.removeTrack.call(this,e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},e}(Pt),Wt=((Ft=ii.prototype).addTrackElement_=function(e){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)},Ft.getTrackElementByTrack_=function(e){for(var t,i=0,n=this.trackElements_.length;i<n;i++)if(e===this.trackElements_[i].track){t=this.trackElements_[i];break}return t},Ft.removeTrackElement_=function(e){for(var t=0,i=this.trackElements_.length;t<i;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&"function"==typeof this.trackElements_[t].track.off&&this.trackElements_[t].track.off(),"function"==typeof this.trackElements_[t].off&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}},ii),Vt=((Bt=ti.prototype).setCues_=function(e){var t=this.length||0,i=0,n=e.length;function r(e){""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})}if(this.cues_=e,this.length_=e.length,t<n)for(i=t;i<n;i++)r.call(this,i)},Bt.getCueById=function(e){for(var t=null,i=0,n=this.length;i<n;i++){var r=this[i];if(r.id===e){t=r;break}}return t},ti),zt={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Gt={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Xt={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Kt={disabled:"disabled",hidden:"hidden",showing:"showing"},Yt=(Re(ei,Ut=me),ei),Qt=Object.freeze({parseUrl:Nt,getAbsoluteURL:Mt,getFileExtension:Rt,isCrossOrigin:jt}),Jt=function(e){var t=Zt.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)},Zt=Object.prototype.toString;function ei(e){var t;function i(e){Object.defineProperty(Be(t),e,{get:function(){return n[e]},set:function(){}})}void 0===e&&(e={}),t=Ut.call(this)||this;var n={id:e.id||"vjs_track_"+te(),kind:e.kind||"",label:e.label||"",language:e.language||""};for(var r in n)i(r);return t}function ti(e){ti.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get:function(){return this.length_}})}function ii(e){void 0===e&&(e=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var t=0,i=e.length;t<i;t++)this.addTrackElement_(e[t])}function ni(e){var t=li.call(e),i="[object Arguments]"===t;return i||"[object Array]"!==t&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&0<=e.length&&"[object Function]"===li.call(e.callee)}var ri,ai=Array.prototype.slice,oi=Object.prototype.toString,si=Function.prototype.bind||function(t){var i=this;if("function"!=typeof i||"[object Function]"!==oi.call(i))throw new TypeError("Function.prototype.bind called on incompatible "+i);for(var n,r=ai.call(arguments,1),e=Math.max(0,i.length-r.length),a=[],o=0;o<e;o++)a.push("$"+o);if(n=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof n){var e=i.apply(this,r.concat(ai.call(arguments)));return Object(e)===e?e:this}return i.apply(t,r.concat(ai.call(arguments)))}),i.prototype){function s(){}s.prototype=i.prototype,n.prototype=new s,s.prototype=null}return n},li=Object.prototype.toString;if(!Object.keys){function ui(e){var t=e.constructor;return t&&t.prototype===e}var ci=Object.prototype.hasOwnProperty,di=Object.prototype.toString,hi=ni,pi=Object.prototype.propertyIsEnumerable,fi=!pi.call({toString:null},"toString"),gi=pi.call(function(){},"prototype"),mi=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],vi={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},yi=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!vi["$"+e]&&ci.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{ui(window[e])}catch(e){return!0}}catch(e){return!0}return!1}();ri=function(e){var t=null!==e&&"object"==typeof e,i="[object Function]"===di.call(e),n=hi(e),r=t&&"[object String]"===di.call(e),a=[];if(!t&&!i&&!n)throw new TypeError("Object.keys called on a non-object");var o=gi&&i;if(r&&0<e.length&&!ci.call(e,0))for(var s=0;s<e.length;++s)a.push(String(s));if(n&&0<e.length)for(var l=0;l<e.length;++l)a.push(String(l));else for(var u in e)o&&"prototype"===u||!ci.call(e,u)||a.push(String(u));if(fi)for(var c=function(e){if("undefined"==typeof window||!yi)return ui(e);try{return ui(e)}catch(e){return!1}}(e),d=0;d<mi.length;++d)c&&"constructor"===mi[d]||!ci.call(e,mi[d])||a.push(mi[d]);return a}}var bi=ri,_i=Array.prototype.slice,Ti=Object.keys,wi=Ti?function(e){return Ti(e)}:bi,Si=Object.keys;function ki(e,t,i){var n,r,a,o,s=2<arguments.length?i:{},l=Ci(t);Ei&&(l=Ai.call(l,Object.getOwnPropertySymbols(t)));for(var u=0;u<l.length;u+=1)n=e,r=l[u],a=t[l[u]],o=s[l[u]],r in n&&("function"!=typeof o||"[object Function]"!==xi.call(o)||!o())||(Pi?Ii(n,r,{configurable:!0,enumerable:!1,value:a,writable:!0}):n[r]=a)}wi.shim=function(){return Object.keys?function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2)||(Object.keys=function(e){return ni(e)?Si(_i.call(e)):Si(e)}):Object.keys=wi,Object.keys||wi};var Ci=wi,Ei="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),xi=Object.prototype.toString,Ai=Array.prototype.concat,Ii=Object.defineProperty,Pi=Ii&&function(){var e={};try{for(var t in Ii(e,"x",{enumerable:!1,value:e}),e)return!1;return e.x===e}catch(e){return!1}}();function Oi(e,t){if(1<arguments.length&&"boolean"!=typeof t)throw new TypeError('"allowMissing" argument must be a boolean');var i="$ "+e;if(!(i in zi))throw new SyntaxError("intrinsic "+e+" does not exist!");if(void 0===zi[i]&&!t)throw new TypeError("intrinsic "+e+" exists, but is not available. Please file an issue!");return zi[i]}function Li(e,t,i,n){var r=Yi[t];if("function"!=typeof r)throw new Ki("unknown record type: "+t);if(!r(e,n))throw new Xi(i+" must be a "+t)}function Di(e){return 0<=e?1:-1}function Ni(e){try{var t=en.call(e);return tn.test(t)}catch(e){return}}function Mi(e){if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if("function"==typeof e&&!e.prototype)return!0;if(rn)return function(e){try{return!Ni(e)&&(en.call(e),!0)}catch(e){return!1}}(e);if(Ni(e))return!1;var t=nn.call(e);return"[object Function]"===t||"[object GeneratorFunction]"===t}function Ri(e){return null===e||"function"!=typeof e&&"object"!=typeof e}function ji(){var e=un.ToString(un.CheckObjectCoercible(this));return cn(cn(e,dn,""),hn,"")}function Ui(){return String.prototype.trim&&"​"==="​".trim()?String.prototype.trim:ji}ki.supportsDescriptors=!!Pi;function Bi(e,t){var i;if((i=1<arguments.length?t:"[object Date]"===an.call(e)?String:Number)!==String&&i!==Number)throw new TypeError("invalid [[DefaultValue]] hint supplied");var n,r,a=i===String?["toString","valueOf"]:["valueOf","toString"];for(r=0;r<a.length;++r)if(Mi(e[a[r]])&&Ri(n=e[a[r]]()))return n;throw new TypeError("No default value")}var Fi,$i=ki,Hi=Object.getOwnPropertyDescriptor?function(){return Object.getOwnPropertyDescriptor(arguments,"callee").get}():function(){throw new TypeError},qi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,Wi=Object.getPrototypeOf||function(e){return e.__proto__},Vi="undefined"==typeof Uint8Array?Fi:Wi(Uint8Array),zi={"$ %Array%":Array,"$ %ArrayBuffer%":"undefined"==typeof ArrayBuffer?Fi:ArrayBuffer,"$ %ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?Fi:ArrayBuffer.prototype,"$ %ArrayIteratorPrototype%":qi?Wi([][Symbol.iterator]()):Fi,"$ %ArrayPrototype%":Array.prototype,"$ %ArrayProto_entries%":Array.prototype.entries,"$ %ArrayProto_forEach%":Array.prototype.forEach,"$ %ArrayProto_keys%":Array.prototype.keys,"$ %ArrayProto_values%":Array.prototype.values,"$ %AsyncFromSyncIteratorPrototype%":Fi,"$ %AsyncFunction%":void 0,"$ %AsyncFunctionPrototype%":Fi,"$ %AsyncGenerator%":Fi,"$ %AsyncGeneratorFunction%":void 0,"$ %AsyncGeneratorPrototype%":Fi,"$ %AsyncIteratorPrototype%":Fi,"$ %Atomics%":"undefined"==typeof Atomics?Fi:Atomics,"$ %Boolean%":Boolean,"$ %BooleanPrototype%":Boolean.prototype,"$ %DataView%":"undefined"==typeof DataView?Fi:DataView,"$ %DataViewPrototype%":"undefined"==typeof DataView?Fi:DataView.prototype,"$ %Date%":Date,"$ %DatePrototype%":Date.prototype,"$ %decodeURI%":decodeURI,"$ %decodeURIComponent%":decodeURIComponent,"$ %encodeURI%":encodeURI,"$ %encodeURIComponent%":encodeURIComponent,"$ %Error%":Error,"$ %ErrorPrototype%":Error.prototype,"$ %eval%":eval,"$ %EvalError%":EvalError,"$ %EvalErrorPrototype%":EvalError.prototype,"$ %Float32Array%":"undefined"==typeof Float32Array?Fi:Float32Array,"$ %Float32ArrayPrototype%":"undefined"==typeof Float32Array?Fi:Float32Array.prototype,"$ %Float64Array%":"undefined"==typeof Float64Array?Fi:Float64Array,"$ %Float64ArrayPrototype%":"undefined"==typeof Float64Array?Fi:Float64Array.prototype,"$ %Function%":Function,"$ %FunctionPrototype%":Function.prototype,"$ %Generator%":Fi,"$ %GeneratorFunction%":void 0,"$ %GeneratorPrototype%":Fi,"$ %Int8Array%":"undefined"==typeof Int8Array?Fi:Int8Array,"$ %Int8ArrayPrototype%":"undefined"==typeof Int8Array?Fi:Int8Array.prototype,"$ %Int16Array%":"undefined"==typeof Int16Array?Fi:Int16Array,"$ %Int16ArrayPrototype%":"undefined"==typeof Int16Array?Fi:Int8Array.prototype,"$ %Int32Array%":"undefined"==typeof Int32Array?Fi:Int32Array,"$ %Int32ArrayPrototype%":"undefined"==typeof Int32Array?Fi:Int32Array.prototype,"$ %isFinite%":isFinite,"$ %isNaN%":isNaN,"$ %IteratorPrototype%":qi?Wi(Wi([][Symbol.iterator]())):Fi,"$ %JSON%":JSON,"$ %JSONParse%":JSON.parse,"$ %Map%":"undefined"==typeof Map?Fi:Map,"$ %MapIteratorPrototype%":"undefined"!=typeof Map&&qi?Wi((new Map)[Symbol.iterator]()):Fi,"$ %MapPrototype%":"undefined"==typeof Map?Fi:Map.prototype,"$ %Math%":Math,"$ %Number%":Number,"$ %NumberPrototype%":Number.prototype,"$ %Object%":Object,"$ %ObjectPrototype%":Object.prototype,"$ %ObjProto_toString%":Object.prototype.toString,"$ %ObjProto_valueOf%":Object.prototype.valueOf,"$ %parseFloat%":parseFloat,"$ %parseInt%":parseInt,"$ %Promise%":"undefined"==typeof Promise?Fi:Promise,"$ %PromisePrototype%":"undefined"==typeof Promise?Fi:Promise.prototype,"$ %PromiseProto_then%":"undefined"==typeof Promise?Fi:Promise.prototype.then,"$ %Promise_all%":"undefined"==typeof Promise?Fi:Promise.all,"$ %Promise_reject%":"undefined"==typeof Promise?Fi:Promise.reject,"$ %Promise_resolve%":"undefined"==typeof Promise?Fi:Promise.resolve,"$ %Proxy%":"undefined"==typeof Proxy?Fi:Proxy,"$ %RangeError%":RangeError,"$ %RangeErrorPrototype%":RangeError.prototype,"$ %ReferenceError%":ReferenceError,"$ %ReferenceErrorPrototype%":ReferenceError.prototype,"$ %Reflect%":"undefined"==typeof Reflect?Fi:Reflect,"$ %RegExp%":RegExp,"$ %RegExpPrototype%":RegExp.prototype,"$ %Set%":"undefined"==typeof Set?Fi:Set,"$ %SetIteratorPrototype%":"undefined"!=typeof Set&&qi?Wi((new Set)[Symbol.iterator]()):Fi,"$ %SetPrototype%":"undefined"==typeof Set?Fi:Set.prototype,"$ %SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?Fi:SharedArrayBuffer,"$ %SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?Fi:SharedArrayBuffer.prototype,"$ %String%":String,"$ %StringIteratorPrototype%":qi?Wi(""[Symbol.iterator]()):Fi,"$ %StringPrototype%":String.prototype,"$ %Symbol%":qi?Symbol:Fi,"$ %SymbolPrototype%":qi?Symbol.prototype:Fi,"$ %SyntaxError%":SyntaxError,"$ %SyntaxErrorPrototype%":SyntaxError.prototype,"$ %ThrowTypeError%":Hi,"$ %TypedArray%":Vi,"$ %TypedArrayPrototype%":Vi?Vi.prototype:Fi,"$ %TypeError%":TypeError,"$ %TypeErrorPrototype%":TypeError.prototype,"$ %Uint8Array%":"undefined"==typeof Uint8Array?Fi:Uint8Array,"$ %Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?Fi:Uint8Array.prototype,"$ %Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?Fi:Uint8ClampedArray,"$ %Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?Fi:Uint8ClampedArray.prototype,"$ %Uint16Array%":"undefined"==typeof Uint16Array?Fi:Uint16Array,"$ %Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?Fi:Uint16Array.prototype,"$ %Uint32Array%":"undefined"==typeof Uint32Array?Fi:Uint32Array,"$ %Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?Fi:Uint32Array.prototype,"$ %URIError%":URIError,"$ %URIErrorPrototype%":URIError.prototype,"$ %WeakMap%":"undefined"==typeof WeakMap?Fi:WeakMap,"$ %WeakMapPrototype%":"undefined"==typeof WeakMap?Fi:WeakMap.prototype,"$ %WeakSet%":"undefined"==typeof WeakSet?Fi:WeakSet,"$ %WeakSetPrototype%":"undefined"==typeof WeakSet?Fi:WeakSet.prototype},Gi=si.call(Function.call,Object.prototype.hasOwnProperty),Xi=Oi("%TypeError%"),Ki=Oi("%SyntaxError%"),Yi={"Property Descriptor":function(e,t){if("Object"!==e.Type(t))return!1;var i={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var n in t)if(Gi(t,n)&&!i[n])return!1;var r=Gi(t,"[[Value]]"),a=Gi(t,"[[Get]]")||Gi(t,"[[Set]]");if(r&&a)throw new Xi("Property Descriptors may not be both accessor and data descriptors");return!0}},Qi=Number.isNaN||function(e){return e!=e},Ji=Number.isNaN||function(e){return e!=e},Zi=Number.isFinite||function(e){return"number"==typeof e&&!Ji(e)&&e!==1/0&&e!==-1/0},en=Function.prototype.toString,tn=/^\s*class\b/,nn=Object.prototype.toString,rn="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,an=Object.prototype.toString,on=Oi("%Object%"),sn=Oi("%TypeError%"),ln=Oi("%String%"),un={ToPrimitive:function(e,t){return Ri(e)?e:1<arguments.length?Bi(e,t):Bi(e)},ToBoolean:function(e){return!!e},ToNumber:function(e){return+e},ToInteger:function(e){var t=this.ToNumber(e);return Qi(t)?0:0!==t&&Zi(t)?Di(t)*Math.floor(Math.abs(t)):t},ToInt32:function(e){return this.ToNumber(e)>>0},ToUint32:function(e){return this.ToNumber(e)>>>0},ToUint16:function(e){var t,i=this.ToNumber(e);return Qi(i)||0===i||!Zi(i)?0:(t=Di(i)*Math.floor(Math.abs(i))%65536,Math.floor(0<=t?t:65536+t))},ToString:function(e){return ln(e)},ToObject:function(e){return this.CheckObjectCoercible(e),on(e)},CheckObjectCoercible:function(e,t){if(null==e)throw new sn(t||"Cannot call method on "+e);return e},IsCallable:Mi,SameValue:function(e,t){return e===t?0!==e||1/e==1/t:Qi(e)&&Qi(t)},Type:function(e){return null===e?"Null":void 0===e?"Undefined":"function"==typeof e||"object"==typeof e?"Object":"number"==typeof e?"Number":"boolean"==typeof e?"Boolean":"string"==typeof e?"String":void 0},IsPropertyDescriptor:function(e){if("Object"!==this.Type(e))return!1;var t={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var i in e)if(Gi(e,i)&&!t[i])return!1;var n=Gi(e,"[[Value]]"),r=Gi(e,"[[Get]]")||Gi(e,"[[Set]]");if(n&&r)throw new sn("Property Descriptors may not be both accessor and data descriptors");return!0},IsAccessorDescriptor:function(e){return void 0!==e&&(Li(this,"Property Descriptor","Desc",e),!(!Gi(e,"[[Get]]")&&!Gi(e,"[[Set]]")))},IsDataDescriptor:function(e){return void 0!==e&&(Li(this,"Property Descriptor","Desc",e),!(!Gi(e,"[[Value]]")&&!Gi(e,"[[Writable]]")))},IsGenericDescriptor:function(e){return void 0!==e&&(Li(this,"Property Descriptor","Desc",e),!this.IsAccessorDescriptor(e)&&!this.IsDataDescriptor(e))},FromPropertyDescriptor:function(e){if(void 0===e)return e;if(Li(this,"Property Descriptor","Desc",e),this.IsDataDescriptor(e))return{value:e["[[Value]]"],writable:!!e["[[Writable]]"],enumerable:!!e["[[Enumerable]]"],configurable:!!e["[[Configurable]]"]};if(this.IsAccessorDescriptor(e))return{get:e["[[Get]]"],set:e["[[Set]]"],enumerable:!!e["[[Enumerable]]"],configurable:!!e["[[Configurable]]"]};throw new sn("FromPropertyDescriptor must be called with a fully populated Property Descriptor")},ToPropertyDescriptor:function(e){if("Object"!==this.Type(e))throw new sn("ToPropertyDescriptor requires an object");var t={};if(Gi(e,"enumerable")&&(t["[[Enumerable]]"]=this.ToBoolean(e.enumerable)),Gi(e,"configurable")&&(t["[[Configurable]]"]=this.ToBoolean(e.configurable)),Gi(e,"value")&&(t["[[Value]]"]=e.value),Gi(e,"writable")&&(t["[[Writable]]"]=this.ToBoolean(e.writable)),Gi(e,"get")){var i=e.get;if(void 0!==i&&!this.IsCallable(i))throw new TypeError("getter must be a function");t["[[Get]]"]=i}if(Gi(e,"set")){var n=e.set;if(void 0!==n&&!this.IsCallable(n))throw new sn("setter must be a function");t["[[Set]]"]=n}if((Gi(t,"[[Get]]")||Gi(t,"[[Set]]"))&&(Gi(t,"[[Value]]")||Gi(t,"[[Writable]]")))throw new sn("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return t}},cn=si.call(Function.call,String.prototype.replace),dn=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,hn=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/,pn=si.call(Function.call,Ui());$i(pn,{getPolyfill:Ui,implementation:ji,shim:function(){var e=Ui();return $i(String.prototype,{trim:e},{trim:function(){return String.prototype.trim!==e}}),e}});var fn=pn,gn=Object.prototype.toString,mn=Object.prototype.hasOwnProperty,vn=function(e){if(!e)return{};var a={};return function(e,t,i){if(!Mi(t))throw new TypeError("iterator must be a function");var n;3<=arguments.length&&(n=i),("[object Array]"===gn.call(e)?function(e,t,i){for(var n=0,r=e.length;n<r;n++)mn.call(e,n)&&(null==i?t(e[n],n,e):t.call(i,e[n],n,e))}:"string"==typeof e?function(e,t,i){for(var n=0,r=e.length;n<r;n++)null==i?t(e.charAt(n),n,e):t.call(i,e.charAt(n),n,e)}:function(e,t,i){for(var n in e)mn.call(e,n)&&(null==i?t(e[n],n,e):t.call(i,e[n],n,e))})(e,t,n)}(fn(e).split("\n"),function(e){var t,i=e.indexOf(":"),n=fn(e.slice(0,i)).toLowerCase(),r=fn(e.slice(i+1));void 0===a[n]?a[n]=r:(t=a[n],"[object Array]"!==Object.prototype.toString.call(t)?a[n]=[a[n],r]:a[n].push(r))}),a},yn=function(){for(var e={},t=0;t<arguments.length;t++){var i=arguments[t];for(var n in i)bn.call(i,n)&&(e[n]=i[n])}return e},bn=Object.prototype.hasOwnProperty,_n=wn;function Tn(e,t,i){var n=e;return Jt(t)?(i=t,"string"==typeof e&&(n={uri:e})):n=yn(t,{uri:e}),n.callback=i,n}function wn(e,t,i){return Sn(t=Tn(e,t,i))}function Sn(n){if(void 0===n.callback)throw new Error("callback argument missing");function r(e,t,i){a||(a=!0,n.callback(e,t,i))}var a=!1;function t(e){return clearTimeout(s),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,r(e,g)}function e(){if(!o){var e;clearTimeout(s),e=n.useXDR&&void 0===l.status?200:1223===l.status?204:l.status;var t=g,i=null;return 0!==e?(t={body:function(){var e=void 0;if(e=l.response?l.response:l.responseText||function(){if("document"===l.responseType)return l.responseXML;var e=l.responseXML&&"parsererror"===l.responseXML.documentElement.nodeName;return""!==l.responseType||e?null:l.responseXML}(),f)try{e=JSON.parse(e)}catch(e){}return e}(),statusCode:e,method:c,headers:{},url:u,rawRequest:l},l.getAllResponseHeaders&&(t.headers=vn(l.getAllResponseHeaders()))):i=new Error("Internal XMLHttpRequest Error"),r(i,t,t.body)}}var i,o,s,l=n.xhr||null,u=(l=l||(n.cors||n.useXDR?new wn.XDomainRequest:new wn.XMLHttpRequest)).url=n.uri||n.url,c=l.method=n.method||"GET",d=n.body||n.data,h=l.headers=n.headers||{},p=!!n.sync,f=!1,g={body:void 0,headers:{},statusCode:0,method:c,url:u,rawRequest:l};if("json"in n&&!1!==n.json&&(f=!0,h.accept||h.Accept||(h.Accept="application/json"),"GET"!==c&&"HEAD"!==c&&(h["content-type"]||h["Content-Type"]||(h["Content-Type"]="application/json"),d=JSON.stringify(!0===n.json?d:n.json))),l.onreadystatechange=function(){4===l.readyState&&setTimeout(e,0)},l.onload=e,l.onerror=t,l.onprogress=function(){},l.onabort=function(){o=!0},l.ontimeout=t,l.open(c,u,!p,n.username,n.password),p||(l.withCredentials=!!n.withCredentials),!p&&0<n.timeout&&(s=setTimeout(function(){if(!o){o=!0,l.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",t(e)}},n.timeout)),l.setRequestHeader)for(i in h)h.hasOwnProperty(i)&&l.setRequestHeader(i,h[i]);else if(n.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return;return 1}(n.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in n&&(l.responseType=n.responseType),"beforeSend"in n&&"function"==typeof n.beforeSend&&n.beforeSend(l),l.send(d||null),l}function kn(e,t){var i=new y.WebVTT.Parser(y,y.vttjs,y.WebVTT.StringDecoder()),n=[];i.oncue=function(e){t.addCue(e)},i.onparsingerror=function(e){n.push(e)},i.onflush=function(){t.trigger({type:"loadeddata",target:t})},i.parse(e),0<n.length&&(y.console&&y.console.groupCollapsed&&y.console.groupCollapsed("Text Track parsing errors for "+t.src),n.forEach(function(e){return p.error(e)}),y.console&&y.console.groupEnd&&y.console.groupEnd()),i.flush()}wn.XMLHttpRequest=y.XMLHttpRequest||function(){},wn.XDomainRequest="withCredentials"in new wn.XMLHttpRequest?wn.XMLHttpRequest:y.XDomainRequest,function(e,t){for(var i=0;i<e.length;i++)t(e[i])}(["get","put","post","patch","head","delete"],function(n){wn["delete"===n?"del":n]=function(e,t,i){return(t=Tn(e,t,i)).method=n.toUpperCase(),Sn(t)}});var Cn=function(u){function e(e){var t;if(void 0===e&&(e={}),!e.tech)throw new Error("A tech was not provided.");var i=Le(e,{kind:Xt[e.kind]||"subtitles",language:e.language||e.srclang||""}),n=Kt[i.mode]||"disabled",r=i.default;"metadata"!==i.kind&&"chapters"!==i.kind||(n="hidden"),(t=u.call(this,i)||this).tech_=i.tech,t.cues_=[],t.activeCues_=[];var a=new Vt(t.cues_),o=new Vt(t.activeCues_),s=!1,l=fe(Be(t),function(){this.activeCues=this.activeCues,s&&(this.trigger("cuechange"),s=!1)});return"disabled"!==n&&t.tech_.ready(function(){t.tech_.on("timeupdate",l)},!0),Object.defineProperties(Be(t),{default:{get:function(){return r},set:function(){}},mode:{get:function(){return n},set:function(e){var t=this;Kt[e]&&("disabled"!==(n=e)?this.tech_.ready(function(){t.tech_.on("timeupdate",l)},!0):this.tech_.off("timeupdate",l),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?a:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return o;for(var e=this.tech_.currentTime(),t=[],i=0,n=this.cues.length;i<n;i++){var r=this.cues[i];(r.startTime<=e&&r.endTime>=e||r.startTime===r.endTime&&r.startTime<=e&&r.startTime+.5>=e)&&t.push(r)}if(s=!1,t.length!==this.activeCues_.length)s=!0;else for(var a=0;a<t.length;a++)-1===this.activeCues_.indexOf(t[a])&&(s=!0);return this.activeCues_=t,o.setCues_(this.activeCues_),o},set:function(){}}}),i.src?(t.src=i.src,function(e,n){var t={uri:e},i=jt(e);i&&(t.cors=i),_n(t,fe(this,function(e,t,i){if(e)return p.error(e,t);n.loaded_=!0,"function"!=typeof y.WebVTT?n.tech_&&n.tech_.any(["vttjsloaded","vttjserror"],function(e){if("vttjserror"!==e.type)return kn(i,n);p.error("vttjs failed to load, stopping trying to process "+n.src)}):kn(i,n)}))}(i.src,Be(t))):t.loaded_=!0,t}Re(e,u);var t=e.prototype;return t.addCue=function(e){var t=e;if(y.vttjs&&!(e instanceof y.vttjs.VTTCue)){for(var i in t=new y.vttjs.VTTCue(e.startTime,e.endTime,e.text),e)i in t||(t[i]=e[i]);t.id=e.id,t.originalCue_=e}for(var n=this.tech_.textTracks(),r=0;r<n.length;r++)n[r]!==this&&n[r].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)},t.removeCue=function(e){for(var t=this.cues_.length;t--;){var i=this.cues_[t];if(i===e||i.originalCue_&&i.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}},e}(Yt);Cn.prototype.allowedEvents_={cuechange:"cuechange"};var En,xn,An,In=(Re(Nn,An=Yt),Nn),Pn=(Re(Dn,xn=Yt),Dn),On=(Re(Ln,En=me),Ln);function Ln(e){var t,i;void 0===e&&(e={}),t=En.call(this)||this;var n=new Cn(e);return t.kind=n.kind,t.src=n.src,t.srclang=n.language,t.label=n.label,t.default=n.default,Object.defineProperties(Be(t),{readyState:{get:function(){return i}},track:{get:function(){return n}}}),i=0,n.addEventListener("loadeddata",function(){i=2,t.trigger({type:"load",target:Be(t)})}),t}function Dn(e){var t;void 0===e&&(e={});var i=Le(e,{kind:zt[e.kind]||""});t=xn.call(this,i)||this;var n=!1;return Object.defineProperty(Be(t),"selected",{get:function(){return n},set:function(e){"boolean"==typeof e&&e!==n&&(n=e,this.trigger("selectedchange"))}}),i.selected&&(t.selected=i.selected),t}function Nn(e){var t;void 0===e&&(e={});var i=Le(e,{kind:Gt[e.kind]||""});t=An.call(this,i)||this;var n=!1;return Object.defineProperty(Be(t),"enabled",{get:function(){return n},set:function(e){"boolean"==typeof e&&e!==n&&(n=e,this.trigger("enabledchange"))}}),i.enabled&&(t.enabled=i.enabled),t.loaded_=!0,t}On.prototype.allowedEvents_={load:"load"},On.NONE=0,On.LOADING=1,On.LOADED=2,On.ERROR=3;var Mn={audio:{ListClass:$t,TrackClass:In,capitalName:"Audio"},video:{ListClass:Ht,TrackClass:Pn,capitalName:"Video"},text:{ListClass:qt,TrackClass:Cn,capitalName:"Text"}};Object.keys(Mn).forEach(function(e){Mn[e].getterName=e+"Tracks",Mn[e].privateName=e+"Tracks_"});var Rn={remoteText:{ListClass:qt,TrackClass:Cn,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:Wt,TrackClass:On,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},jn=Le(Mn,Rn);Rn.names=Object.keys(Rn),Mn.names=Object.keys(Mn),jn.names=[].concat(Rn.names).concat(Mn.names);var Un=Object.create||function(e){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return Bn.prototype=e,new Bn};function Bn(){}function Fn(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function $n(e){function t(e,t,i,n){return 3600*(0|e)+60*(0|t)+(0|i)+(0|n)/1e3}var i=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return i?i[3]?t(i[1],i[2],i[3].replace(":",""),i[4]):59<i[1]?t(i[1],i[2],0,i[4]):t(0,i[1],i[2],i[4]):null}function Hn(){this.values=Un(null)}function qn(e,t,i,n){var r=n?e.split(n):[e];for(var a in r)if("string"==typeof r[a]){var o=r[a].split(i);2===o.length&&t(o[0],o[1])}}function Wn(t,e,a){var i,n,o,r=t;function s(){var e=$n(t);if(null===e)throw new Fn(Fn.Errors.BadTimeStamp,"Malformed timestamp: "+r);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function l(){t=t.replace(/^\s+/,"")}if(l(),e.startTime=s(),l(),"--\x3e"!==t.substr(0,3))throw new Fn(Fn.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);t=t.substr(3),l(),e.endTime=s(),l(),i=t,n=e,o=new Hn,qn(i,function(e,t){switch(e){case"region":for(var i=a.length-1;0<=i;i--)if(a[i].id===t){o.set(e,a[i].region);break}break;case"vertical":o.alt(e,t,["rl","lr"]);break;case"line":var n=t.split(","),r=n[0];o.integer(e,r),o.percent(e,r)&&o.set("snapToLines",!1),o.alt(e,r,["auto"]),2===n.length&&o.alt("lineAlign",n[1],["start","middle","end"]);break;case"position":n=t.split(","),o.percent(e,n[0]),2===n.length&&o.alt("positionAlign",n[1],["start","middle","end"]);break;case"size":o.percent(e,t);break;case"align":o.alt(e,t,["start","middle","end","left","right"])}},/:/,/\s/),n.region=o.get("region",null),n.vertical=o.get("vertical",""),n.line=o.get("line","auto"),n.lineAlign=o.get("lineAlign","start"),n.snapToLines=o.get("snapToLines",!0),n.size=o.get("size",100),n.align=o.get("align","middle"),n.position=o.get("position",{start:0,left:0,middle:50,end:100,right:100},n.align),n.positionAlign=o.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},n.align)}((Fn.prototype=Un(Error.prototype)).constructor=Fn).Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},Hn.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,i){return i?this.has(e)?this.values[e]:t[i]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,i){for(var n=0;n<i.length;++n)if(t===i[n]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(t=parseFloat(t))&&t<=100)&&(this.set(e,t),!0)}};var Vn={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"‎","&rlm;":"‏","&nbsp;":" "},zn={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},Gn={v:"title",lang:"lang"},Xn={rt:"ruby"};function Kn(a,i){function e(){if(!i)return null;var e,t=i.match(/^([^<]*)(<[^>]*>?)?/);return e=t[1]?t[1]:t[2],i=i.substr(e.length),e}function t(e){return Vn[e]}function n(e){for(;h=e.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)e=e.replace(h[0],t);return e}function r(e,t){var i=zn[e];if(!i)return null;var n=a.document.createElement(i);n.localName=i;var r=Gn[e];return r&&t&&(n[r]=t.trim()),n}for(var o,s=a.document.createElement("div"),l=s,u=[];null!==(o=e());)if("<"!==o[0])l.appendChild(a.document.createTextNode(n(o)));else{if("/"===o[1]){u.length&&u[u.length-1]===o.substr(2).replace(">","")&&(u.pop(),l=l.parentNode);continue}var c,d=$n(o.substr(1,o.length-2));if(d){c=a.document.createProcessingInstruction("timestamp",d),l.appendChild(c);continue}var h=o.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!h)continue;if(!(c=r(h[1],h[3])))continue;if(Xn[c.localName]&&Xn[c.localName]!==l.localName)continue;h[2]&&(c.className=h[2].substr(1).replace("."," ")),u.push(h[1]),l.appendChild(c),l=c}return s}var Yn=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function Qn(e){for(var t=0;t<Yn.length;t++){var i=Yn[t];if(e>=i[0]&&e<=i[1])return 1}}function Jn(){}function Zn(e,t,i){Jn.call(this),this.cue=t,this.cueDiv=Kn(e,t.text);var n={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(n,this.cueDiv),this.div=e.document.createElement("div"),n={direction:function(e){var t=[],i="";if(!e||!e.childNodes)return"ltr";function r(e,t){for(var i=t.childNodes.length-1;0<=i;i--)e.push(t.childNodes[i])}function a(e){if(!e||!e.length)return null;var t=e.pop(),i=t.textContent||t.innerText;if(i){var n=i.match(/^.*(\n|\r)/);return n?n[e.length=0]:i}return"ruby"===t.tagName?a(e):t.childNodes?(r(e,t),a(e)):void 0}for(r(t,e);i=a(t);)for(var n=0;n<i.length;n++)if(Qn(i.charCodeAt(n)))return"rtl";return"ltr"}(this.cueDiv),writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===t.align?"center":t.align,font:i.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(n),this.div.appendChild(this.cueDiv);var r=0;switch(t.positionAlign){case"start":r=t.position;break;case"middle":r=t.position-t.size/2;break;case"end":r=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(r,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(r,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function er(e){var t,i,n,r;if(e.div){i=e.div.offsetHeight,n=e.div.offsetWidth,r=e.div.offsetTop;var a=(a=e.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();e=e.div.getBoundingClientRect(),t=a?Math.max(a[0]&&a[0].height||0,e.height/a.length):0}this.left=e.left,this.right=e.right,this.top=e.top||r,this.height=e.height||i,this.bottom=e.bottom||r+(e.height||i),this.width=e.width||n,this.lineHeight=void 0!==t?t:e.lineHeight}function tr(e,t,s,l){var i=new er(t),r=t.cue,n=function(){if("number"==typeof r.line&&(r.snapToLines||0<=r.line&&r.line<=100))return r.line;if(!r.track||!r.track.textTrackList||!r.track.textTrackList.mediaElement)return-1;for(var e=r.track,t=e.textTrackList,i=0,n=0;n<t.length&&t[n]!==e;n++)"showing"===t[n].mode&&i++;return-1*++i}(),a=[];if(r.snapToLines){var o;switch(r.vertical){case"":a=["+y","-y"],o="height";break;case"rl":a=["+x","-x"],o="width";break;case"lr":a=["-x","+x"],o="width"}var u=i.lineHeight,c=u*Math.round(n),d=s[o]+u,h=a[0];Math.abs(c)>d&&(c=c<0?-1:1,c*=Math.ceil(d/u)*u),n<0&&(c+=""===r.vertical?s.height:s.width,a=a.reverse()),i.move(h,c)}else{var p=i.lineHeight/s.height*100;switch(r.lineAlign){case"middle":n-=p/2;break;case"end":n-=p}switch(r.vertical){case"":t.applyStyles({top:t.formatStyle(n,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(n,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(n,"%")})}a=["+y","-x","+x","-y"],i=new er(t)}var f=function(e,t){for(var i,n=new er(e),r=1,a=0;a<t.length;a++){for(;e.overlapsOppositeAxis(s,t[a])||e.within(s)&&e.overlapsAny(l);)e.move(t[a]);if(e.within(s))return e;var o=e.intersectPercentage(s);o<r&&(i=new er(e),r=o),e=new er(n)}return i||n}(i,a);t.move(f.toCSSCompatValues(s))}function ir(){}Jn.prototype.applyStyles=function(e,t){for(var i in t=t||this.div,e)e.hasOwnProperty(i)&&(t.style[i]=e[i])},Jn.prototype.formatStyle=function(e,t){return 0===e?0:e+t},(Zn.prototype=Un(Jn.prototype)).constructor=Zn,er.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},er.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},er.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},er.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},er.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},er.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},er.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},er.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,i=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,n=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||n,height:e.height||t,bottom:e.bottom||n+(e.height||t),width:e.width||i}},ir.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},ir.convertCueToDOMTree=function(e,t){return e&&t?Kn(e,t):null},ir.processCues=function(n,r,e){if(!n||!r||!e)return null;for(;e.firstChild;)e.removeChild(e.firstChild);var a=n.document.createElement("div");if(a.style.position="absolute",a.style.left="0",a.style.right="0",a.style.top="0",a.style.bottom="0",a.style.margin="1.5%",e.appendChild(a),function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return 1}(r)){var o=[],s=er.getSimpleBoxPosition(a),l={font:Math.round(.05*s.height*100)/100+"px sans-serif"};!function(){for(var e,t,i=0;i<r.length;i++)t=r[i],e=new Zn(n,t,l),a.appendChild(e.div),tr(0,e,s,o),t.displayState=e.div,o.push(er.getSimpleBoxPosition(e))}()}else for(var t=0;t<r.length;t++)a.appendChild(r[t].displayState)},(ir.Parser=function(e,t,i){i||(i=t,t={}),t=t||{},this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=i||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(e){if(!(e instanceof Fn))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){var a=this;function t(){for(var e=a.buffer,t=0;t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var i=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,a.buffer=e.substr(t),i}function i(e){e.match(/X-TIMESTAMP-MAP/)?qn(e,function(e,t){switch(e){case"X-TIMESTAMP-MAP":i=t,n=new Hn,qn(i,function(e,t){switch(e){case"MPEGT":n.integer(e+"S",t);break;case"LOCA":n.set(e+"L",$n(t))}},/[^\d]:/,/,/),a.ontimestampmap&&a.ontimestampmap({MPEGTS:n.get("MPEGTS"),LOCAL:n.get("LOCAL")})}var i,n},/=/):qn(e,function(e,t){switch(e){case"Region":!function(e){var r=new Hn;if(qn(e,function(e,t){switch(e){case"id":r.set(e,t);break;case"width":r.percent(e,t);break;case"lines":r.integer(e,t);break;case"regionanchor":case"viewportanchor":var i=t.split(",");if(2!==i.length)break;var n=new Hn;if(n.percent("x",i[0]),n.percent("y",i[1]),!n.has("x")||!n.has("y"))break;r.set(e+"X",n.get("x")),r.set(e+"Y",n.get("y"));break;case"scroll":r.alt(e,t,["up"])}},/=/,/\s/),r.has("id")){var t=new(a.vttjs.VTTRegion||a.window.VTTRegion);t.width=r.get("width",100),t.lines=r.get("lines",3),t.regionAnchorX=r.get("regionanchorX",0),t.regionAnchorY=r.get("regionanchorY",100),t.viewportAnchorX=r.get("viewportanchorX",0),t.viewportAnchorY=r.get("viewportanchorY",100),t.scroll=r.get("scroll",""),a.onregion&&a.onregion(t),a.regionList.push({id:r.get("id"),region:t})}}(t)}},/:/)}e&&(a.buffer+=a.decoder.decode(e,{stream:!0}));try{var n;if("INITIAL"===a.state){if(!/\r\n|\n/.test(a.buffer))return this;var r=(n=t()).match(/^WEBVTT([ \t].*)?$/);if(!r||!r[0])throw new Fn(Fn.Errors.BadSignature);a.state="HEADER"}for(var o=!1;a.buffer;){if(!/\r\n|\n/.test(a.buffer))return this;switch(o?o=!1:n=t(),a.state){case"HEADER":/:/.test(n)?i(n):n||(a.state="ID");continue;case"NOTE":n||(a.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(n)){a.state="NOTE";break}if(!n)continue;if(a.cue=new(a.vttjs.VTTCue||a.window.VTTCue)(0,0,""),a.state="CUE",-1===n.indexOf("--\x3e")){a.cue.id=n;continue}case"CUE":try{Wn(n,a.cue,a.regionList)}catch(e){a.reportOrThrowError(e),a.cue=null,a.state="BADCUE";continue}a.state="CUETEXT";continue;case"CUETEXT":var s=-1!==n.indexOf("--\x3e");if(!n||s&&(o=!0)){a.oncue&&a.oncue(a.cue),a.cue=null,a.state="ID";continue}a.cue.text&&(a.cue.text+="\n"),a.cue.text+=n;continue;case"BADCUE":n||(a.state="ID");continue}}}catch(e){a.reportOrThrowError(e),"CUETEXT"===a.state&&a.cue&&a.oncue&&a.oncue(a.cue),a.cue=null,a.state="INITIAL"===a.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),!t.cue&&"HEADER"!==t.state||(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state)throw new Fn(Fn.Errors.BadSignature)}catch(e){t.reportOrThrowError(e)}return t.onflush&&t.onflush(),this}};var nr=ir,rr={"":1,lr:1,rl:1},ar={start:1,middle:1,end:1,left:1,right:1};function or(e){return"string"==typeof e&&!!ar[e.toLowerCase()]&&e.toLowerCase()}function sr(e,t,i){this.hasBeenReset=!1;var n="",r=!1,a=e,o=t,s=i,l=null,u="",c=!0,d="auto",h="start",p=50,f="middle",g=50,m="middle";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return n},set:function(e){n=""+e}},pauseOnExit:{enumerable:!0,get:function(){return r},set:function(e){r=!!e}},startTime:{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");a=e,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");o=e,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return s},set:function(e){s=""+e,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return l},set:function(e){l=e,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return u},set:function(e){var t,i="string"==typeof(t=e)&&!!rr[t.toLowerCase()]&&t.toLowerCase();if(!1===i)throw new SyntaxError("An invalid or illegal string was specified.");u=i,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return c},set:function(e){c=!!e,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return d},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");d=e,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return h},set:function(e){var t=or(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");h=t,this.hasBeenReset=!0}},position:{enumerable:!0,get:function(){return p},set:function(e){if(e<0||100<e)throw new Error("Position must be between 0 and 100.");p=e,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return f},set:function(e){var t=or(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");f=t,this.hasBeenReset=!0}},size:{enumerable:!0,get:function(){return g},set:function(e){if(e<0||100<e)throw new Error("Size must be between 0 and 100.");g=e,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return m},set:function(e){var t=or(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");m=t,this.hasBeenReset=!0}}}),this.displayState=void 0}sr.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var lr=sr,ur={"":!0,up:!0};function cr(e){return"number"==typeof e&&0<=e&&e<=100}function dr(){var t=100,i=3,n=0,r=100,a=0,o=100,s="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return t},set:function(e){if(!cr(e))throw new Error("Width must be between 0 and 100.");t=e}},lines:{enumerable:!0,get:function(){return i},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");i=e}},regionAnchorY:{enumerable:!0,get:function(){return r},set:function(e){if(!cr(e))throw new Error("RegionAnchorX must be between 0 and 100.");r=e}},regionAnchorX:{enumerable:!0,get:function(){return n},set:function(e){if(!cr(e))throw new Error("RegionAnchorY must be between 0 and 100.");n=e}},viewportAnchorY:{enumerable:!0,get:function(){return o},set:function(e){if(!cr(e))throw new Error("ViewportAnchorY must be between 0 and 100.");o=e}},viewportAnchorX:{enumerable:!0,get:function(){return a},set:function(e){if(!cr(e))throw new Error("ViewportAnchorX must be between 0 and 100.");a=e}},scroll:{enumerable:!0,get:function(){return s},set:function(e){var t,i="string"==typeof(t=e)&&!!ur[t.toLowerCase()]&&t.toLowerCase();if(!1===i)throw new SyntaxError("An invalid or illegal string was specified.");s=i}}})}var hr=Et(function(e){var t=e.exports={WebVTT:nr,VTTCue:lr,VTTRegion:dr};y.vttjs=t,y.WebVTT=t.WebVTT;var i=t.VTTCue,n=t.VTTRegion,r=y.VTTCue,a=y.VTTRegion;t.shim=function(){y.VTTCue=i,y.VTTRegion=n},t.restore=function(){y.VTTCue=r,y.VTTRegion=a},y.VTTCue||t.shim()});hr.WebVTT,hr.VTTCue,hr.VTTRegion;var pr=function(t){function i(i,e){var n;return void 0===i&&(i={}),void 0===e&&(e=function(){}),i.reportTouchActivity=!1,(n=t.call(this,null,i,e)||this).hasStarted_=!1,n.on("playing",function(){this.hasStarted_=!0}),n.on("loadstart",function(){this.hasStarted_=!1}),jn.names.forEach(function(e){var t=jn[e];i&&i[t.getterName]&&(n[t.privateName]=i[t.getterName])}),n.featuresProgressEvents||n.manualProgressOn(),n.featuresTimeupdateEvents||n.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(e){!1===i["native"+e+"Tracks"]&&(n["featuresNative"+e+"Tracks"]=!1)}),!1===i.nativeCaptions||!1===i.nativeTextTracks?n.featuresNativeTextTracks=!1:!0!==i.nativeCaptions&&!0!==i.nativeTextTracks||(n.featuresNativeTextTracks=!0),n.featuresNativeTextTracks||n.emulateTextTracks(),n.autoRemoteTextTracks_=new jn.text.ListClass,n.initTrackListeners(),i.nativeControlsForTouch||n.emitTapEvents(),n.constructor&&(n.name_=n.constructor.name||"Unknown Tech"),n}Re(i,t);var e=i.prototype;return e.triggerSourceset=function(e){var t=this;this.isReady_||this.one("ready",function(){return t.setTimeout(function(){return t.triggerSourceset(e)},1)}),this.trigger({src:e,type:"sourceset"})},e.manualProgressOn=function(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},e.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},e.trackProgress=function(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(fe(this,function(){var e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),1===(this.bufferedPercent_=e)&&this.stopTrackingProgress()}),500)},e.onDurationChange=function(e){this.duration_=this.duration()},e.buffered=function(){return pt(0,0)},e.bufferedPercent=function(){return ft(this.buffered(),this.duration_)},e.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},e.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},e.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},e.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},e.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},e.dispose=function(){this.clearTracks(Mn.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),t.prototype.dispose.call(this)},e.clearTracks=function(e){var r=this;(e=[].concat(e)).forEach(function(e){for(var t=r[e+"Tracks"]()||[],i=t.length;i--;){var n=t[i];"text"===e&&r.removeRemoteTextTrack(n),t.removeTrack(n)}})},e.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],t=e.length;t--;){var i=e[t];this.removeRemoteTextTrack(i)}},e.reset=function(){},e.error=function(e){return void 0!==e&&(this.error_=new Tt(e),this.trigger("error")),this.error_},e.played=function(){return this.hasStarted_?pt(0,0):pt()},e.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},e.initTrackListeners=function(){var r=this;Mn.names.forEach(function(e){function t(){r.trigger(e+"trackchange")}var i=Mn[e],n=r[i.getterName]();n.addEventListener("removetrack",t),n.addEventListener("addtrack",t),r.on("dispose",function(){n.removeEventListener("removetrack",t),n.removeEventListener("addtrack",t)})})},e.addWebVttScript_=function(){var e=this;if(!y.WebVTT)if(d.body.contains(this.el())){if(!this.options_["vtt.js"]&&s(hr)&&0<Object.keys(hr).length)return void this.trigger("vttjsloaded");var t=d.createElement("script");t.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",t.onload=function(){e.trigger("vttjsloaded")},t.onerror=function(){e.trigger("vttjserror")},this.on("dispose",function(){t.onload=null,t.onerror=null}),y.WebVTT=!0,this.el().parentNode.appendChild(t)}else this.ready(this.addWebVttScript_)},e.emulateTextTracks=function(){function t(e){return n.addTrack(e.track)}function i(e){return n.removeTrack(e.track)}var e=this,n=this.textTracks(),r=this.remoteTextTracks();function a(){return e.trigger("texttrackchange")}function o(){a();for(var e=0;e<n.length;e++){var t=n[e];t.removeEventListener("cuechange",a),"showing"===t.mode&&t.addEventListener("cuechange",a)}}r.on("addtrack",t),r.on("removetrack",i),this.addWebVttScript_(),o(),n.addEventListener("change",o),n.addEventListener("addtrack",o),n.addEventListener("removetrack",o),this.on("dispose",function(){r.off("addtrack",t),r.off("removetrack",i),n.removeEventListener("change",o),n.removeEventListener("addtrack",o),n.removeEventListener("removetrack",o);for(var e=0;e<n.length;e++)n[e].removeEventListener("cuechange",a)})},e.addTextTrack=function(e,t,i){if(!e)throw new Error("TextTrack kind is required but was not provided");return function(e,t,i,n,r){void 0===r&&(r={});var a=e.textTracks();r.kind=t,i&&(r.label=i),n&&(r.language=n),r.tech=e;var o=new jn.text.TrackClass(r);return a.addTrack(o),o}(this,e,t,i)},e.createRemoteTextTrack=function(e){var t=Le(e,{tech:this});return new Rn.remoteTextEl.TrackClass(t)},e.addRemoteTextTrack=function(e,t){var i=this;void 0===e&&(e={});var n=this.createRemoteTextTrack(e);return!0!==t&&!1!==t&&(p.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),t=!0),this.remoteTextTrackEls().addTrackElement_(n),this.remoteTextTracks().addTrack(n.track),!0!==t&&this.ready(function(){return i.autoRemoteTextTracks_.addTrack(n.track)}),n},e.removeRemoteTextTrack=function(e){var t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)},e.getVideoPlaybackQuality=function(){return{}},e.requestPictureInPicture=function(){var e=this.options_.Promise||y.Promise;if(e)return e.reject()},e.setPoster=function(){},e.playsinline=function(){},e.setPlaysinline=function(){},e.overrideNativeAudioTracks=function(){},e.overrideNativeVideoTracks=function(){},e.canPlayType=function(){return""},i.canPlayType=function(){return""},i.canPlaySource=function(e,t){return i.canPlayType(e.type)},i.isTech=function(e){return e.prototype instanceof i||e instanceof i||e===i},i.registerTech=function(e,t){if(i.techs_||(i.techs_={}),!i.isTech(t))throw new Error("Tech "+e+" must be a Tech");if(!i.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!i.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=Oe(e),i.techs_[e]=t,i.techs_[Pe(e)]=t,"Tech"!==e&&i.defaultTechOrder_.push(e),t},i.getTech=function(e){if(e)return i.techs_&&i.techs_[e]?i.techs_[e]:(e=Oe(e),y&&y.videojs&&y.videojs[e]?(p.warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),y.videojs[e]):void 0)},i}(Ne);jn.names.forEach(function(e){var t=jn[e];pr.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}}),pr.prototype.featuresVolumeControl=!0,pr.prototype.featuresMuteControl=!0,pr.prototype.featuresFullscreenResize=!1,pr.prototype.featuresPlaybackRate=!1,pr.prototype.featuresProgressEvents=!1,pr.prototype.featuresSourceset=!1,pr.prototype.featuresTimeupdateEvents=!1,pr.prototype.featuresNativeTextTracks=!1,pr.withSourceHandlers=function(r){r.registerSourceHandler=function(e,t){var i=r.sourceHandlers;i=i||(r.sourceHandlers=[]),void 0===t&&(t=i.length),i.splice(t,0,e)},r.canPlayType=function(e){for(var t,i=r.sourceHandlers||[],n=0;n<i.length;n++)if(t=i[n].canPlayType(e))return t;return""},r.selectSourceHandler=function(e,t){for(var i=r.sourceHandlers||[],n=0;n<i.length;n++)if(i[n].canHandleSource(e,t))return i[n];return null},r.canPlaySource=function(e,t){var i=r.selectSourceHandler(e,t);return i?i.canHandleSource(e,t):""},["seekable","seeking","duration"].forEach(function(e){var t=this[e];"function"==typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})},r.prototype),r.prototype.setSource=function(e){var t=r.selectSourceHandler(e,this.options_);t||(r.nativeSourceHandler?t=r.nativeSourceHandler:p.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),t!==r.nativeSourceHandler&&(this.currentSource_=e),this.sourceHandler_=t.handleSource(e,this,this.options_),this.one("dispose",this.disposeSourceHandler)},r.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},Ne.registerComponent("Tech",pr),pr.registerTech("Tech",pr),pr.defaultTechOrder_=[];var fr={},gr={},mr={};function vr(e,t,i){e.setTimeout(function(){return function i(n,e,r,a,o,s){void 0===n&&(n={}),void 0===e&&(e=[]),void 0===o&&(o=[]),void 0===s&&(s=!1);var t=e[0],l=e.slice(1);if("string"==typeof t)i(n,fr[t],r,a,o,s);else if(t){var u=function(e,t){var i=gr[e.id()],n=null;if(null==i)return n=t(e),gr[e.id()]=[[t,n]],n;for(var r=0;r<i.length;r++){var a=i[r],o=a[0],s=a[1];o===t&&(n=s)}return null===n&&(n=t(e),i.push([t,n])),n}(a,t);if(!u.setSource)return o.push(u),i(n,l,r,a,o,s);u.setSource(g({},n),function(e,t){if(e)return i(n,l,r,a,o,s);o.push(u),i(t,n.type===t.type?l:fr[t.type],r,a,o,s)})}else l.length?i(n,l,r,a,o,s):s?r(n,o):i(n,fr["*"],r,a,o,!0)}(t,fr[t.type],i,e)},1)}function yr(e,t,i,n){void 0===n&&(n=null);var r="call"+Oe(i),a=e.reduce(wr(r),n),o=a===mr,s=o?null:t[i](a);return function(e,t,i,n){for(var r=e.length-1;0<=r;r--){var a=e[r];a[t]&&a[t](n,i)}}(e,i,s,o),s}var br={buffered:1,currentTime:1,duration:1,seekable:1,played:1,paused:1,volume:1},_r={setCurrentTime:1,setVolume:1},Tr={play:1,pause:1};function wr(i){return function(e,t){return e===mr?mr:t[i]?t[i](e):e}}function Sr(e){void 0===e&&(e="");var t=Rt(e);return kr[t.toLowerCase()]||""}var kr={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",oga:"audio/ogg",m3u8:"application/x-mpegURL",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"};function Cr(e){if(!e.type){var t=Sr(e.src);t&&(e.type=t)}return e}var Er,xr=(Re(Ar,Er=Ne),Ar);function Ar(e,t,i){var n,r=Le({createEl:!1},t);if(n=Er.call(this,e,r,i)||this,t.playerOptions.sources&&0!==t.playerOptions.sources.length)e.src(t.playerOptions.sources);else for(var a=0,o=t.playerOptions.techOrder;a<o.length;a++){var s=Oe(o[a]),l=pr.getTech(s);if(s||(l=Ne.getComponent(s)),l&&l.isSupported()){e.loadTech_(s);break}}return n}Ne.registerComponent("MediaLoader",xr);var Ir=function(r){function e(e,t){var i;return(i=r.call(this,e,t)||this).emitTapEvents(),i.enable(),i}Re(e,r);var t=e.prototype;return t.createEl=function(e,t,i){void 0===e&&(e="div"),void 0===t&&(t={}),void 0===i&&(i={}),t=g({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},t),"button"===e&&p.error("Creating a ClickableComponent with an HTML element of "+e+" is not supported; use a Button instead."),i=g({role:"button"},i),this.tabIndex_=t.tabIndex;var n=r.prototype.createEl.call(this,e,t,i);return this.createControlTextEl(n),n},t.dispose=function(){this.controlTextEl_=null,r.prototype.dispose.call(this)},t.createControlTextEl=function(e){return this.controlTextEl_=b("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},t.controlText=function(e,t){if(void 0===t&&(t=this.el()),void 0===e)return this.controlText_||"Need Text";var i=this.localize(e);this.controlText_=e,_(this.controlTextEl_,i),this.nonIconControl||t.setAttribute("title",i)},t.buildCSSClass=function(){return"vjs-control vjs-button "+r.prototype.buildCSSClass.call(this)},t.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("keydown",this.handleKeyDown))},t.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver),this.off("mouseout",this.handleMouseOut),this.off(["tap","click"],this.handleClick),this.off("keydown",this.handleKeyDown)},t.handleClick=function(e){},t.handleKeyDown=function(e){xt.isEventKey(e,"Space")||xt.isEventKey(e,"Enter")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):r.prototype.handleKeyDown.call(this,e)},e}(Ne);Ne.registerComponent("ClickableComponent",Ir);var Pr=function(n){function e(e,t){var i;return(i=n.call(this,e,t)||this).update(),e.on("posterchange",fe(Be(i),i.update)),i}Re(e,n);var t=e.prototype;return t.dispose=function(){this.player().off("posterchange",this.update),n.prototype.dispose.call(this)},t.createEl=function(){return b("div",{className:"vjs-poster",tabIndex:-1})},t.update=function(e){var t=this.player().poster();this.setSrc(t),t?this.show():this.hide()},t.setSrc=function(e){var t="";e&&(t='url("'+e+'")'),this.el_.style.backgroundImage=t},t.handleClick=function(e){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?kt(this.player_.play()):this.player_.pause())},e}(Ir);Ne.registerComponent("PosterImage",Pr);var Or="#222",Lr={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function Dr(e,t){var i;if(4===e.length)i=e[1]+e[1]+e[2]+e[2]+e[3]+e[3];else{if(7!==e.length)throw new Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.");i=e.slice(1)}return"rgba("+parseInt(i.slice(0,2),16)+","+parseInt(i.slice(2,4),16)+","+parseInt(i.slice(4,6),16)+","+t+")"}function Nr(e,t,i){try{e.style[t]=i}catch(e){return}}var Mr=function(a){function e(i,e,t){var n,r=fe(Be(n=a.call(this,i,e,t)||this),n.updateDisplay);return i.on("loadstart",fe(Be(n),n.toggleDisplay)),i.on("texttrackchange",r),i.on("loadedmetadata",fe(Be(n),n.preselectTrack)),i.ready(fe(Be(n),function(){if(i.tech_&&i.tech_.featuresNativeTextTracks)this.hide();else{i.on("fullscreenchange",r),i.on("playerresize",r),y.addEventListener("orientationchange",r),i.on("dispose",function(){return y.removeEventListener("orientationchange",r)});for(var e=this.options_.playerOptions.tracks||[],t=0;t<e.length;t++)this.player_.addRemoteTextTrack(e[t],!0);this.preselectTrack()}})),n}Re(e,a);var t=e.prototype;return t.preselectTrack=function(){for(var e,t,i,n={captions:1,subtitles:1},r=this.player_.textTracks(),a=this.player_.cache_.selectedLanguage,o=0;o<r.length;o++){var s=r[o];a&&a.enabled&&a.language&&a.language===s.language&&s.kind in n?i=s.kind!==a.kind&&i||s:a&&!a.enabled?t=e=i=null:s.default&&("descriptions"!==s.kind||e?s.kind in n&&!t&&(t=s):e=s)}i?i.mode="showing":t?t.mode="showing":e&&(e.mode="showing")},t.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},t.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},t.clearDisplay=function(){"function"==typeof y.WebVTT&&y.WebVTT.processCues(y,[],this.el_)},t.updateDisplay=function(){var e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){for(var i=[],n=0;n<e.length;++n){var r=e[n];"showing"===r.mode&&i.push(r)}this.updateForTrack(i)}else{for(var a=null,o=null,s=e.length;s--;){var l=e[s];"showing"===l.mode&&("descriptions"===l.kind?a=l:o=l)}o?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(o)):a&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(a))}},t.updateDisplayState=function(e){for(var t=this.player_.textTrackSettings.getValues(),i=e.activeCues,n=i.length;n--;){var r=i[n];if(r){var a=r.displayState;if(t.color&&(a.firstChild.style.color=t.color),t.textOpacity&&Nr(a.firstChild,"color",Dr(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(a.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&Nr(a.firstChild,"backgroundColor",Dr(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?Nr(a,"backgroundColor",Dr(t.windowColor,t.windowOpacity)):a.style.backgroundColor=t.windowColor),t.edgeStyle&&("dropshadow"===t.edgeStyle?a.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px "+Or:"raised"===t.edgeStyle?a.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px "+Or:"depressed"===t.edgeStyle?a.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px "+Or:"uniform"===t.edgeStyle&&(a.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px "+Or)),t.fontPercent&&1!==t.fontPercent){var o=y.parseFloat(a.style.fontSize);a.style.fontSize=o*t.fontPercent+"px",a.style.height="auto",a.style.top="auto",a.style.bottom="2px"}t.fontFamily&&"default"!==t.fontFamily&&("small-caps"===t.fontFamily?a.firstChild.style.fontVariant="small-caps":a.firstChild.style.fontFamily=Lr[t.fontFamily])}}},t.updateForTrack=function(e){if(Array.isArray(e)||(e=[e]),"function"==typeof y.WebVTT&&!e.every(function(e){return!e.activeCues})){for(var t=[],i=0;i<e.length;++i)for(var n=e[i],r=0;r<n.activeCues.length;++r)t.push(n.activeCues[r]);y.WebVTT.processCues(y,t,this.el_);for(var a=0;a<e.length;++a){for(var o=e[a],s=0;s<o.activeCues.length;++s){var l=o.activeCues[s].displayState;S(l,"vjs-text-track-cue"),S(l,"vjs-text-track-cue-"+(o.language?o.language:a))}this.player_.textTrackSettings&&this.updateDisplayState(o)}}},e}(Ne);Ne.registerComponent("TextTrackDisplay",Mr);var Rr,jr=(Re(Ur,Rr=Ne),Ur.prototype.createEl=function(){var e=this.player_.isAudio(),t=this.localize(e?"Audio Player":"Video Player"),i=b("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[t])}),n=Rr.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return n.appendChild(i),n},Ur);function Ur(){return Rr.apply(this,arguments)||this}Ne.registerComponent("LoadingSpinner",jr);var Br=function(t){function e(){return t.apply(this,arguments)||this}Re(e,t);var i=e.prototype;return i.createEl=function(e,t,i){void 0===t&&(t={}),void 0===i&&(i={}),t=g({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},t),i=g({type:"button"},i);var n=Ne.prototype.createEl.call(this,"button",t,i);return this.createControlTextEl(n),n},i.addChild=function(e,t){void 0===t&&(t={});var i=this.constructor.name;return p.warn("Adding an actionable (user controllable) child to a Button ("+i+") is not supported; use a ClickableComponent instead."),Ne.prototype.addChild.call(this,e,t)},i.enable=function(){t.prototype.enable.call(this),this.el_.removeAttribute("disabled")},i.disable=function(){t.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},i.handleKeyDown=function(e){xt.isEventKey(e,"Space")||xt.isEventKey(e,"Enter")?e.stopPropagation():t.prototype.handleKeyDown.call(this,e)},e}(Ir);Ne.registerComponent("Button",Br);var Fr=function(n){function e(e,t){var i;return(i=n.call(this,e,t)||this).mouseused_=!1,i.on("mousedown",i.handleMouseDown),i}Re(e,n);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-big-play-button"},t.handleClick=function(e){var t=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY)return kt(t),void(this.player_.tech(!0)&&this.player_.tech(!0).focus());var i=this.player_.getChild("controlBar"),n=i&&i.getChild("playToggle");if(n){function r(){return n.focus()}St(t)?t.then(r,function(){}):this.setTimeout(r,1)}else this.player_.tech(!0).focus()},t.handleKeyDown=function(e){this.mouseused_=!1,n.prototype.handleKeyDown.call(this,e)},t.handleMouseDown=function(e){this.mouseused_=!0},e}(Br);Fr.prototype.controlText_="Play Video",Ne.registerComponent("BigPlayButton",Fr);var $r=function(n){function e(e,t){var i;return(i=n.call(this,e,t)||this).controlText(t&&t.controlText||i.localize("Close")),i}Re(e,n);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-close-button "+n.prototype.buildCSSClass.call(this)},t.handleClick=function(e){this.trigger({type:"close",bubbles:!1})},t.handleKeyDown=function(e){xt.isEventKey(e,"Esc")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):n.prototype.handleKeyDown.call(this,e)},e}(Br);Ne.registerComponent("CloseButton",$r);var Hr=function(n){function e(e,t){var i;return void 0===t&&(t={}),i=n.call(this,e,t)||this,t.replay=void 0===t.replay||t.replay,i.on(e,"play",i.handlePlay),i.on(e,"pause",i.handlePause),t.replay&&i.on(e,"ended",i.handleEnded),i}Re(e,n);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-play-control "+n.prototype.buildCSSClass.call(this)},t.handleClick=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},t.handleSeeked=function(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)},t.handlePlay=function(e){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},t.handlePause=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},t.handleEnded=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",this.handleSeeked)},e}(Br);function qr(e,t){e=e<0?0:e;var i=Math.floor(e%60),n=Math.floor(e/60%60),r=Math.floor(e/3600),a=Math.floor(t/60%60),o=Math.floor(t/3600);return!isNaN(e)&&e!==1/0||(r=n=i="-"),(r=0<r||0<o?r+":":"")+(n=((r||10<=a)&&n<10?"0"+n:n)+":")+(i<10?"0"+i:i)}Hr.prototype.controlText_="Play",Ne.registerComponent("PlayToggle",Hr);var Wr=qr;function Vr(e,t){return void 0===t&&(t=e),Wr(e,t)}var zr=function(n){function e(e,t){var i;return(i=n.call(this,e,t)||this).throttledUpdateContent=ge(fe(Be(i),i.updateContent),30),i.on(e,"timeupdate",i.throttledUpdateContent),i}Re(e,n);var t=e.prototype;return t.createEl=function(){var e=this.buildCSSClass(),t=n.prototype.createEl.call(this,"div",{className:e+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text" role="presentation">'+this.localize(this.labelText_)+" </span>"});return this.contentEl_=b("span",{className:e+"-display"},{"aria-live":"off",role:"presentation"}),this.updateTextNode_(),t.appendChild(this.contentEl_),t},t.dispose=function(){this.contentEl_=null,this.textNode_=null,n.prototype.dispose.call(this)},t.updateTextNode_=function(){if(this.contentEl_){for(;this.contentEl_.firstChild;)this.contentEl_.removeChild(this.contentEl_.firstChild);this.textNode_=d.createTextNode(this.formattedTime_||this.formatTime_(0)),this.contentEl_.appendChild(this.textNode_)}},t.formatTime_=function(e){return Vr(e)},t.updateFormattedTime_=function(e){var t=this.formatTime_(e);t!==this.formattedTime_&&(this.formattedTime_=t,this.requestAnimationFrame(this.updateTextNode_))},t.updateContent=function(e){},e}(Ne);zr.prototype.labelText_="Time",zr.prototype.controlText_="Time",Ne.registerComponent("TimeDisplay",zr);var Gr=function(n){function e(e,t){var i;return(i=n.call(this,e,t)||this).on(e,"ended",i.handleEnded),i}Re(e,n);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-current-time"},t.updateContent=function(e){var t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.updateFormattedTime_(t)},t.handleEnded=function(e){this.player_.duration()&&this.updateFormattedTime_(this.player_.duration())},e}(zr);Gr.prototype.labelText_="Current Time",Gr.prototype.controlText_="Current Time",Ne.registerComponent("CurrentTimeDisplay",Gr);var Xr=function(n){function e(e,t){var i;return(i=n.call(this,e,t)||this).on(e,"durationchange",i.updateContent),i.on(e,"loadstart",i.updateContent),i.on(e,"loadedmetadata",i.throttledUpdateContent),i}Re(e,n);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-duration"},t.updateContent=function(e){var t=this.player_.duration();this.duration_!==t&&(this.duration_=t,this.updateFormattedTime_(t))},e}(zr);Xr.prototype.labelText_="Duration",Xr.prototype.controlText_="Duration",Ne.registerComponent("DurationDisplay",Xr);var Kr,Yr=(Re(Qr,Kr=Ne),Qr.prototype.createEl=function(){return Kr.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"},{"aria-hidden":!0})},Qr);function Qr(){return Kr.apply(this,arguments)||this}Ne.registerComponent("TimeDivider",Yr);var Jr=function(n){function e(e,t){var i;return(i=n.call(this,e,t)||this).on(e,"durationchange",i.throttledUpdateContent),i.on(e,"ended",i.handleEnded),i}Re(e,n);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-remaining-time"},t.createEl=function(){var e=n.prototype.createEl.call(this);return e.insertBefore(b("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e},t.updateContent=function(e){"number"==typeof this.player_.duration()&&(this.player_.remainingTimeDisplay?this.updateFormattedTime_(this.player_.remainingTimeDisplay()):this.updateFormattedTime_(this.player_.remainingTime()))},t.handleEnded=function(e){this.player_.duration()&&this.updateFormattedTime_(0)},e}(zr);Jr.prototype.labelText_="Remaining Time",Jr.prototype.controlText_="Remaining Time",Ne.registerComponent("RemainingTimeDisplay",Jr);var Zr=function(n){function e(e,t){var i;return(i=n.call(this,e,t)||this).updateShowing(),i.on(i.player(),"durationchange",i.updateShowing),i}Re(e,n);var t=e.prototype;return t.createEl=function(){var e=n.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=b("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+" </span>"+this.localize("LIVE")},{"aria-live":"off"}),e.appendChild(this.contentEl_),e},t.dispose=function(){this.contentEl_=null,n.prototype.dispose.call(this)},t.updateShowing=function(e){this.player().duration()===1/0?this.show():this.hide()},e}(Ne);Ne.registerComponent("LiveDisplay",Zr);var ea=function(n){function e(e,t){var i;return(i=n.call(this,e,t)||this).updateLiveEdgeStatus(),i.player_.liveTracker&&i.on(i.player_.liveTracker,"liveedgechange",i.updateLiveEdgeStatus),i}Re(e,n);var t=e.prototype;return t.createEl=function(){var e=n.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=b("span",{className:"vjs-seek-to-live-text",innerHTML:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e},t.updateLiveEdgeStatus=function(e){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},t.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},t.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatus),this.textEl_=null,n.prototype.dispose.call(this)},e}(Br);ea.prototype.controlText_="Seek to live, currently playing live",Ne.registerComponent("SeekToLive",ea);var ta=function(n){function e(e,t){var i;return(i=n.call(this,e,t)||this).bar=i.getChild(i.options_.barName),i.vertical(!!i.options_.vertical),i.enable(),i}Re(e,n);var t=e.prototype;return t.enabled=function(){return this.enabled_},t.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown),this.on("touchstart",this.handleMouseDown),this.on("keydown",this.handleKeyDown),this.on("click",this.handleClick),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},t.disable=function(){if(this.enabled()){var e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown),this.off("touchstart",this.handleMouseDown),this.off("keydown",this.handleKeyDown),this.off("click",this.handleClick),this.off(this.player_,"controlsvisible",this.update),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},t.createEl=function(e,t,i){return void 0===t&&(t={}),void 0===i&&(i={}),t.className=t.className+" vjs-slider",t=g({tabIndex:0},t),i=g({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},i),n.prototype.createEl.call(this,e,t,i)},t.handleMouseDown=function(e){var t=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"!==e.type||nt||e.preventDefault(),O(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchmove",this.handleMouseMove),this.on(t,"touchend",this.handleMouseUp),this.handleMouseMove(e)},t.handleMouseMove=function(e){},t.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;L(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.update()},t.update=function(){if(this.el_){var e=this.getPercent(),t=this.bar;if(t){("number"!=typeof e||e!=e||e<0||e===1/0)&&(e=0);var i=(100*e).toFixed(2)+"%",n=t.el().style,r=this.vertical()?"height":"width";return n[r]!==i&&(n[r]=i),e}}},t.calculateDistance=function(e){var t=M(this.el_,e);return this.vertical()?t.y:t.x},t.handleKeyDown=function(e){xt.isEventKey(e,"Left")||xt.isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepBack()):xt.isEventKey(e,"Right")||xt.isEventKey(e,"Up")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):n.prototype.handleKeyDown.call(this,e)},t.handleClick=function(e){e.stopPropagation(),e.preventDefault()},t.vertical=function(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},e}(Ne);Ne.registerComponent("Slider",ta);var ia=function(n){function e(e,t){var i;return(i=n.call(this,e,t)||this).partEls_=[],i.on(e,"progress",i.update),i}Re(e,n);var t=e.prototype;return t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+'</span>: <span class="vjs-control-text-loaded-percentage">0%</span></span>'})},t.dispose=function(){this.partEls_=null,n.prototype.dispose.call(this)},t.update=function(e){function t(e,t,i){var n=e/t||0;return n=100*(1<=n?1:n),i&&(n=n.toFixed(2)),n+"%"}var i=this.player_.liveTracker,n=this.player_.buffered(),r=i&&i.isLive()?i.seekableEnd():this.player_.duration(),a=this.player_.bufferedEnd(),o=this.partEls_,s=this.$(".vjs-control-text-loaded-percentage");this.el_.style.width=t(a,r),_(s,t(a,r,!0));for(var l=0;l<n.length;l++){var u=n.start(l),c=n.end(l),d=o[l];d||(d=this.el_.appendChild(b()),o[l]=d),d.style.left=t(u,a),d.style.width=t(c-u,a)}for(var h=o.length;h>n.length;h--)this.el_.removeChild(o[h-1]);o.length=n.length},e}(Ne);Ne.registerComponent("LoadProgressBar",ia);var na=function(n){function e(e,t){var i;return(i=n.call(this,e,t)||this).update=ge(fe(Be(i),i.update),30),i}Re(e,n);var t=e.prototype;return t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},t.update=function(e,t,i){var n=D(this.el_),r=D(this.player_.el()),a=e.width*t;if(r&&n){var o=e.left-r.left+a,s=e.width-a+(r.right-e.right),l=n.width/2;o<l?l+=l-o:s<l&&(l=s),l<0?l=0:l>n.width&&(l=n.width),this.el_.style.right="-"+l+"px",this.write(i)}},t.write=function(e){_(this.el_,e)},t.updateTime=function(r,a,o,s){var l=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame(function(){var e,t=l.player_.duration();if(l.player_.liveTracker&&l.player_.liveTracker.isLive()){var i=l.player_.liveTracker.liveWindow(),n=i-a*i;e=(n<1?"":"-")+Vr(n,i)}else e=Vr(o,t);l.update(r,a,e),s&&s()})},e}(Ne);Ne.registerComponent("TimeTooltip",na);var ra=function(n){function e(e,t){var i;return(i=n.call(this,e,t)||this).update=ge(fe(Be(i),i.update),30),i}Re(e,n);var t=e.prototype;return t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},t.update=function(e,t){var i=this.getChild("timeTooltip");if(i){var n=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();i.updateTime(e,t,n)}},e}(Ne);ra.prototype.options_={children:[]},Ye||Je||ra.prototype.options_.children.push("timeTooltip"),Ne.registerComponent("PlayProgressBar",ra);var aa=function(n){function e(e,t){var i;return(i=n.call(this,e,t)||this).update=ge(fe(Be(i),i.update),30),i}Re(e,n);var t=e.prototype;return t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},t.update=function(e,t){var i=this,n=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,n,function(){i.el_.style.left=e.width*t+"px"})},e}(Ne);aa.prototype.options_={children:["timeTooltip"]},Ne.registerComponent("MouseTimeDisplay",aa);var oa=function(n){function e(e,t){var i;return(i=n.call(this,e,t)||this).setEventHandlers_(),i}Re(e,n);var t=e.prototype;return t.setEventHandlers_=function(){this.update=ge(fe(this,this.update),30),this.on(this.player_,"timeupdate",this.update),this.on(this.player_,"ended",this.handleEnded),this.on(this.player_,"durationchange",this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.on(this.player_,["playing"],this.enableInterval_),this.on(this.player_,["ended","pause","waiting"],this.disableInterval_),"hidden"in d&&"visibilityState"in d&&this.on(d,"visibilitychange",this.toggleVisibility_)},t.toggleVisibility_=function(e){d.hidden?this.disableInterval_(e):(this.enableInterval_(),this.requestAnimationFrame(this.update))},t.enableInterval_=function(){var e=this;this.clearInterval(this.updateInterval),this.updateInterval=this.setInterval(function(){e.requestAnimationFrame(e.update)},30)},t.disableInterval_=function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&"ended"!==e.type||this.clearInterval(this.updateInterval)},t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},t.update_=function(e,t){var i=this.player_.liveTracker,n=this.player_.duration();i&&i.isLive()&&(n=this.player_.liveTracker.liveCurrentTime()),this.el_.setAttribute("aria-valuenow",(100*t).toFixed(2)),this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[Vr(e,n),Vr(n,n)],"{1} of {2}")),this.bar&&this.bar.update(D(this.el_),t)},t.update=function(e){if(null!==this.el().offsetParent){var t=n.prototype.update.call(this);return this.update_(this.getCurrentTime_(),t),t}},t.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},t.handleEnded=function(e){this.update_(this.player_.duration(),1)},t.getPercent=function(){var e,t=this.getCurrentTime_(),i=this.player_.liveTracker;return i&&i.isLive()?(e=(t-i.seekableStart())/i.liveWindow(),i.atLiveEdge()&&(e=1)):e=t/this.player_.duration(),1<=e?1:e||0},t.handleMouseDown=function(e){$(e)&&(e.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),n.prototype.handleMouseDown.call(this,e))},t.handleMouseMove=function(e){if($(e)){var t,i=this.calculateDistance(e),n=this.player_.liveTracker;if(n&&n.isLive()){var r=n.seekableStart(),a=n.liveCurrentTime();if(a<=(t=r+i*n.liveWindow())&&(t=a),t<=r&&(t=r+.1),t===1/0)return}else(t=i*this.player_.duration())===this.player_.duration()&&(t-=.1);this.player_.currentTime(t)}},t.enable=function(){n.prototype.enable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.show()},t.disable=function(){n.prototype.disable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.hide()},t.handleMouseUp=function(e){n.prototype.handleMouseUp.call(this,e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying&&kt(this.player_.play())},t.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)},t.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)},t.handleAction=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},t.handleKeyDown=function(e){if(xt.isEventKey(e,"Space")||xt.isEventKey(e,"Enter"))e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if(xt.isEventKey(e,"Home"))e.preventDefault(),e.stopPropagation(),this.player_.currentTime(0);else if(xt.isEventKey(e,"End"))e.preventDefault(),e.stopPropagation(),this.player_.currentTime(this.player_.duration());else if(/^[0-9]$/.test(xt(e))){e.preventDefault(),e.stopPropagation();var t=10*(xt.codes[xt(e)]-xt.codes[0])/100;this.player_.currentTime(this.player_.duration()*t)}else xt.isEventKey(e,"PgDn")?(e.preventDefault(),e.stopPropagation(),this.player_.currentTime(this.player_.currentTime()-60)):xt.isEventKey(e,"PgUp")?(e.preventDefault(),e.stopPropagation(),this.player_.currentTime(this.player_.currentTime()+60)):n.prototype.handleKeyDown.call(this,e)},e}(ta);oa.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},Ye||Je||oa.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),Ne.registerComponent("SeekBar",oa);var sa=function(n){function e(e,t){var i;return(i=n.call(this,e,t)||this).handleMouseMove=ge(fe(Be(i),i.handleMouseMove),30),i.throttledHandleMouseSeek=ge(fe(Be(i),i.handleMouseSeek),30),i.enable(),i}Re(e,n);var t=e.prototype;return t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},t.handleMouseMove=function(e){var t=this.getChild("seekBar");if(t){var i=t.getChild("mouseTimeDisplay"),n=t.el(),r=D(n),a=M(n,e).x;1<a?a=1:a<0&&(a=0),i&&i.update(r,a)}},t.handleMouseSeek=function(e){var t=this.getChild("seekBar");t&&t.handleMouseMove(e)},t.enabled=function(){return this.enabled_},t.disable=function(){this.children().forEach(function(e){return e.disable&&e.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDown),this.off(this.el_,"mousemove",this.handleMouseMove),this.handleMouseUp(),this.addClass("disabled"),this.enabled_=!1)},t.enable=function(){this.children().forEach(function(e){return e.enable&&e.enable()}),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDown),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},t.handleMouseDown=function(e){var t=this.el_.ownerDocument,i=this.getChild("seekBar");i&&i.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchend",this.handleMouseUp)},t.handleMouseUp=function(e){var t=this.el_.ownerDocument,i=this.getChild("seekBar");i&&i.handleMouseUp(e),this.off(t,"mousemove",this.throttledHandleMouseSeek),this.off(t,"touchmove",this.throttledHandleMouseSeek),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchend",this.handleMouseUp)},e}(Ne);sa.prototype.options_={children:["seekBar"]},Ne.registerComponent("ProgressControl",sa);var la=function(n){function e(e,t){var i;return(i=n.call(this,e,t)||this).on(e,["enterpictureinpicture","leavepictureinpicture"],i.handlePictureInPictureChange),d.pictureInPictureEnabled||i.disable(),i}Re(e,n);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-picture-in-picture-control "+n.prototype.buildCSSClass.call(this)},t.handlePictureInPictureChange=function(e){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture")},t.handleClick=function(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},e}(Br);la.prototype.controlText_="Picture-in-Picture",Ne.registerComponent("PictureInPictureToggle",la);var ua=function(n){function e(e,t){var i;return(i=n.call(this,e,t)||this).on(e,"fullscreenchange",i.handleFullscreenChange),!1===d[e.fsApi_.fullscreenEnabled]&&i.disable(),i}Re(e,n);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-fullscreen-control "+n.prototype.buildCSSClass.call(this)},t.handleFullscreenChange=function(e){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},t.handleClick=function(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},e}(Br);ua.prototype.controlText_="Fullscreen",Ne.registerComponent("FullscreenToggle",ua);var ca,da=(Re(ha,ca=Ne),ha.prototype.createEl=function(){return ca.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},ha);function ha(){return ca.apply(this,arguments)||this}Ne.registerComponent("VolumeLevel",da);var pa=function(n){function e(e,t){var i;return(i=n.call(this,e,t)||this).on("slideractive",i.updateLastVolume_),i.on(e,"volumechange",i.updateARIAAttributes),e.ready(function(){return i.updateARIAAttributes()}),i}Re(e,n);var t=e.prototype;return t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},t.handleMouseDown=function(e){$(e)&&n.prototype.handleMouseDown.call(this,e)},t.handleMouseMove=function(e){$(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))},t.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},t.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},t.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},t.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},t.updateARIAAttributes=function(e){var t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")},t.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},t.updateLastVolume_=function(){var e=this,t=this.player_.volume();this.one("sliderinactive",function(){0===e.player_.volume()&&e.player_.lastVolume_(t)})},e}(ta);pa.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},pa.prototype.playerEvent="volumechange",Ne.registerComponent("VolumeBar",pa);var fa=function(a){function e(e,t){var i,n,r;return void 0===t&&(t={}),t.vertical=t.vertical||!1,void 0!==t.volumeBar&&!s(t.volumeBar)||(t.volumeBar=t.volumeBar||{},t.volumeBar.vertical=t.vertical),n=Be(i=a.call(this,e,t)||this),(r=e).tech_&&!r.tech_.featuresVolumeControl&&n.addClass("vjs-hidden"),n.on(r,"loadstart",function(){r.tech_.featuresVolumeControl?n.removeClass("vjs-hidden"):n.addClass("vjs-hidden")}),i.throttledHandleMouseMove=ge(fe(Be(i),i.handleMouseMove),30),i.on("mousedown",i.handleMouseDown),i.on("touchstart",i.handleMouseDown),i.on(i.volumeBar,["focus","slideractive"],function(){i.volumeBar.addClass("vjs-slider-active"),i.addClass("vjs-slider-active"),i.trigger("slideractive")}),i.on(i.volumeBar,["blur","sliderinactive"],function(){i.volumeBar.removeClass("vjs-slider-active"),i.removeClass("vjs-slider-active"),i.trigger("sliderinactive")}),i}Re(e,a);var t=e.prototype;return t.createEl=function(){var e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),a.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+e})},t.handleMouseDown=function(e){var t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchend",this.handleMouseUp)},t.handleMouseUp=function(e){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchend",this.handleMouseUp)},t.handleMouseMove=function(e){this.volumeBar.handleMouseMove(e)},e}(Ne);fa.prototype.options_={children:["volumeBar"]},Ne.registerComponent("VolumeControl",fa);var ga=function(a){function e(e,t){var i,n,r;return n=Be(i=a.call(this,e,t)||this),(r=e).tech_&&!r.tech_.featuresMuteControl&&n.addClass("vjs-hidden"),n.on(r,"loadstart",function(){r.tech_.featuresMuteControl?n.removeClass("vjs-hidden"):n.addClass("vjs-hidden")}),i.on(e,["loadstart","volumechange"],i.update),i}Re(e,a);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-mute-control "+a.prototype.buildCSSClass.call(this)},t.handleClick=function(e){var t=this.player_.volume(),i=this.player_.lastVolume_();if(0===t){var n=i<.1?.1:i;this.player_.volume(n),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},t.update=function(e){this.updateIcon_(),this.updateControlText_()},t.updateIcon_=function(){var e=this.player_.volume(),t=3;Ye&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===e||this.player_.muted()?t=0:e<.33?t=1:e<.67&&(t=2);for(var i=0;i<4;i++)k(this.el_,"vjs-vol-"+i);S(this.el_,"vjs-vol-"+t)},t.updateControlText_=function(){var e=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==e&&this.controlText(e)},e}(Br);ga.prototype.controlText_="Mute",Ne.registerComponent("MuteToggle",ga);var ma=function(n){function e(e,t){var i;return void 0===t&&(t={}),void 0!==t.inline?t.inline=t.inline:t.inline=!0,void 0!==t.volumeControl&&!s(t.volumeControl)||(t.volumeControl=t.volumeControl||{},t.volumeControl.vertical=!t.inline),(i=n.call(this,e,t)||this).on(e,["loadstart"],i.volumePanelState_),i.on(i.muteToggle,"keyup",i.handleKeyPress),i.on(i.volumeControl,"keyup",i.handleVolumeControlKeyUp),i.on("keydown",i.handleKeyPress),i.on("mouseover",i.handleMouseOver),i.on("mouseout",i.handleMouseOut),i.on(i.volumeControl,["slideractive"],i.sliderActive_),i.on(i.volumeControl,["sliderinactive"],i.sliderInactive_),i}Re(e,n);var t=e.prototype;return t.sliderActive_=function(){this.addClass("vjs-slider-active")},t.sliderInactive_=function(){this.removeClass("vjs-slider-active")},t.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},t.createEl=function(){var e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),n.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+e})},t.dispose=function(){this.handleMouseOut(),n.prototype.dispose.call(this)},t.handleVolumeControlKeyUp=function(e){xt.isEventKey(e,"Esc")&&this.muteToggle.focus()},t.handleMouseOver=function(e){this.addClass("vjs-hover"),ue(d,"keyup",fe(this,this.handleKeyPress))},t.handleMouseOut=function(e){this.removeClass("vjs-hover"),ce(d,"keyup",fe(this,this.handleKeyPress))},t.handleKeyPress=function(e){xt.isEventKey(e,"Esc")&&this.handleMouseOut()},e}(Ne);ma.prototype.options_={children:["muteToggle","volumeControl"]},Ne.registerComponent("VolumePanel",ma);var va=function(n){function e(e,t){var i;return i=n.call(this,e,t)||this,t&&(i.menuButton_=t.menuButton),i.focusedChild_=-1,i.on("keydown",i.handleKeyDown),i.boundHandleBlur_=fe(Be(i),i.handleBlur),i.boundHandleTapClick_=fe(Be(i),i.handleTapClick),i}Re(e,n);var t=e.prototype;return t.addEventListenerForItem=function(e){e instanceof Ne&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))},t.removeEventListenerForItem=function(e){e instanceof Ne&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))},t.removeChild=function(e){"string"==typeof e&&(e=this.getChild(e)),this.removeEventListenerForItem(e),n.prototype.removeChild.call(this,e)},t.addItem=function(e){var t=this.addChild(e);t&&this.addEventListenerForItem(t)},t.createEl=function(){var e=this.options_.contentElType||"ul";this.contentEl_=b(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var t=n.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return t.appendChild(this.contentEl_),ue(t,"click",function(e){e.preventDefault(),e.stopImmediatePropagation()}),t},t.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,n.prototype.dispose.call(this)},t.handleBlur=function(e){var t=e.relatedTarget||d.activeElement;if(!this.children().some(function(e){return e.el()===t})){var i=this.menuButton_;i&&i.buttonPressed_&&t!==i.el().firstChild&&i.unpressButton()}},t.handleTapClick=function(t){if(this.menuButton_){this.menuButton_.unpressButton();var e=this.children();if(!Array.isArray(e))return;var i=e.filter(function(e){return e.el()===t.target})[0];if(!i)return;"CaptionSettingsMenuItem"!==i.name()&&this.menuButton_.focus()}},t.handleKeyDown=function(e){xt.isEventKey(e,"Left")||xt.isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(xt.isEventKey(e,"Right")||xt.isEventKey(e,"Up"))&&(e.preventDefault(),e.stopPropagation(),this.stepBack())},t.stepForward=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)},t.stepBack=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)},t.focus=function(e){void 0===e&&(e=0);var t=this.children().slice();t.length&&t[0].className&&/vjs-menu-title/.test(t[0].className)&&t.shift(),0<t.length&&(e<0?e=0:e>=t.length&&(e=t.length-1),t[this.focusedChild_=e].el_.focus())},e}(Ne);Ne.registerComponent("Menu",va);var ya=function(r){function e(e,t){var i;void 0===t&&(t={}),(i=r.call(this,e,t)||this).menuButton_=new Br(e,t),i.menuButton_.controlText(i.controlText_),i.menuButton_.el_.setAttribute("aria-haspopup","true");var n=Br.prototype.buildCSSClass();return i.menuButton_.el_.className=i.buildCSSClass()+" "+n,i.menuButton_.removeClass("vjs-control"),i.addChild(i.menuButton_),i.update(),i.enabled_=!0,i.on(i.menuButton_,"tap",i.handleClick),i.on(i.menuButton_,"click",i.handleClick),i.on(i.menuButton_,"keydown",i.handleKeyDown),i.on(i.menuButton_,"mouseenter",function(){i.addClass("vjs-hover"),i.menu.show(),ue(d,"keyup",fe(Be(i),i.handleMenuKeyUp))}),i.on("mouseleave",i.handleMouseLeave),i.on("keydown",i.handleSubmenuKeyDown),i}Re(e,r);var t=e.prototype;return t.update=function(){var e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},t.createMenu=function(){var e=new va(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var t=b("li",{className:"vjs-menu-title",innerHTML:Oe(this.options_.title),tabIndex:-1});this.hideThreshold_+=1;var i=new Ne(this.player_,{el:t});e.addItem(i)}if(this.items=this.createItems(),this.items)for(var n=0;n<this.items.length;n++)e.addItem(this.items[n]);return e},t.createItems=function(){},t.createEl=function(){return r.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},t.buildWrapperCSSClass=function(){var e="vjs-menu-button";return!0===this.options_.inline?e+="-inline":e+="-popup","vjs-menu-button "+e+" "+Br.prototype.buildCSSClass()+" "+r.prototype.buildCSSClass.call(this)},t.buildCSSClass=function(){var e="vjs-menu-button";return!0===this.options_.inline?e+="-inline":e+="-popup","vjs-menu-button "+e+" "+r.prototype.buildCSSClass.call(this)},t.controlText=function(e,t){return void 0===t&&(t=this.menuButton_.el()),this.menuButton_.controlText(e,t)},t.dispose=function(){this.handleMouseLeave(),r.prototype.dispose.call(this)},t.handleClick=function(e){this.buttonPressed_?this.unpressButton():this.pressButton()},t.handleMouseLeave=function(e){this.removeClass("vjs-hover"),ce(d,"keyup",fe(this,this.handleMenuKeyUp))},t.focus=function(){this.menuButton_.focus()},t.blur=function(){this.menuButton_.blur()},t.handleKeyDown=function(e){xt.isEventKey(e,"Esc")||xt.isEventKey(e,"Tab")?(this.buttonPressed_&&this.unpressButton(),xt.isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus())):(xt.isEventKey(e,"Up")||xt.isEventKey(e,"Down"))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))},t.handleMenuKeyUp=function(e){(xt.isEventKey(e,"Esc")||xt.isEventKey(e,"Tab"))&&this.removeClass("vjs-hover")},t.handleSubmenuKeyPress=function(e){this.handleSubmenuKeyDown(e)},t.handleSubmenuKeyDown=function(e){(xt.isEventKey(e,"Esc")||xt.isEventKey(e,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),xt.isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus()))},t.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Ye&&v())return;this.menu.focus()}},t.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},t.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},t.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},e}(Ne);Ne.registerComponent("MenuButton",ya);var ba,_a=(Re(Ta,ba=ya),Ta);function Ta(e,t){var i,n=t.tracks;if((i=ba.call(this,e,t)||this).items.length<=1&&i.hide(),!n)return Be(i);var r=fe(Be(i),i.update);return n.addEventListener("removetrack",r),n.addEventListener("addtrack",r),i.player_.on("ready",r),i.player_.on("dispose",function(){n.removeEventListener("removetrack",r),n.removeEventListener("addtrack",r)}),i}Ne.registerComponent("TrackButton",_a);var wa=["Tab","Esc","Up","Down","Right","Left"],Sa=function(n){function e(e,t){var i;return(i=n.call(this,e,t)||this).selectable=t.selectable,i.isSelected_=t.selected||!1,i.multiSelectable=t.multiSelectable,i.selected(i.isSelected_),i.selectable?i.multiSelectable?i.el_.setAttribute("role","menuitemcheckbox"):i.el_.setAttribute("role","menuitemradio"):i.el_.setAttribute("role","menuitem"),i}Re(e,n);var t=e.prototype;return t.createEl=function(e,t,i){return this.nonIconControl=!0,n.prototype.createEl.call(this,"li",g({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},t),i)},t.handleKeyDown=function(t){wa.some(function(e){return xt.isEventKey(t,e)})||n.prototype.handleKeyDown.call(this,t)},t.handleClick=function(e){this.selected(!0)},t.selected=function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},e}(Ir);Ne.registerComponent("MenuItem",Sa);var ka=function(l){function e(e,t){var n,i,r=t.track,a=e.textTracks();function o(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n.handleTracksChange.apply(Be(n),t)}function s(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n.handleSelectedLanguageChange.apply(Be(n),t)}return t.label=r.label||r.language||"Unknown",t.selected="showing"===r.mode,(n=l.call(this,e,t)||this).track=r,n.kinds=(t.kinds||[t.kind||n.track.kind]).filter(Boolean),e.on(["loadstart","texttrackchange"],o),a.addEventListener("change",o),a.addEventListener("selectedlanguagechange",s),n.on("dispose",function(){e.off(["loadstart","texttrackchange"],o),a.removeEventListener("change",o),a.removeEventListener("selectedlanguagechange",s)}),void 0===a.onchange&&n.on(["tap","click"],function(){if("object"!=typeof y.Event)try{i=new y.Event("change")}catch(e){}i||(i=d.createEvent("Event")).initEvent("change",!0,!0),a.dispatchEvent(i)}),n.handleTracksChange(),n}Re(e,l);var t=e.prototype;return t.handleClick=function(e){var t=this.track,i=this.player_.textTracks();if(l.prototype.handleClick.call(this,e),i)for(var n=0;n<i.length;n++){var r=i[n];-1!==this.kinds.indexOf(r.kind)&&(r===t?"showing"!==r.mode&&(r.mode="showing"):"disabled"!==r.mode&&(r.mode="disabled"))}},t.handleTracksChange=function(e){var t="showing"===this.track.mode;t!==this.isSelected_&&this.selected(t)},t.handleSelectedLanguageChange=function(e){if("showing"===this.track.mode){var t=this.player_.cache_.selectedLanguage;if(t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},t.dispose=function(){this.track=null,l.prototype.dispose.call(this)},e}(Sa);Ne.registerComponent("TextTrackMenuItem",ka);var Ca=function(i){function e(e,t){return t.track={player:e,kind:t.kind,kinds:t.kinds,default:!1,mode:"disabled"},t.kinds||(t.kinds=[t.kind]),t.label?t.track.label=t.label:t.track.label=t.kinds.join(" and ")+" off",t.selectable=!0,t.multiSelectable=!1,i.call(this,e,t)||this}Re(e,i);var t=e.prototype;return t.handleTracksChange=function(e){for(var t=this.player().textTracks(),i=!0,n=0,r=t.length;n<r;n++){var a=t[n];if(-1<this.options_.kinds.indexOf(a.kind)&&"showing"===a.mode){i=!1;break}}i!==this.isSelected_&&this.selected(i)},t.handleSelectedLanguageChange=function(e){for(var t=this.player().textTracks(),i=!0,n=0,r=t.length;n<r;n++){var a=t[n];if(-1<["captions","descriptions","subtitles"].indexOf(a.kind)&&"showing"===a.mode){i=!1;break}}i&&(this.player_.cache_.selectedLanguage={enabled:!1})},e}(ka);Ne.registerComponent("OffTextTrackMenuItem",Ca);var Ea,xa=(Re(Aa,Ea=_a),Aa.prototype.createItems=function(e,t){var i;void 0===e&&(e=[]),void 0===t&&(t=ka),this.label_&&(i=this.label_+" off"),e.push(new Ca(this.player_,{kinds:this.kinds_,kind:this.kind_,label:i})),this.hideThreshold_+=1;var n=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var r=0;r<n.length;r++){var a=n[r];if(-1<this.kinds_.indexOf(a.kind)){var o=new t(this.player_,{track:a,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});o.addClass("vjs-"+a.kind+"-menu-item"),e.push(o)}}return e},Aa);function Aa(e,t){return void 0===t&&(t={}),t.tracks=e.textTracks(),Ea.call(this,e,t)||this}Ne.registerComponent("TextTrackButton",xa);var Ia=function(o){function e(e,t){var i,n=t.track,r=t.cue,a=e.currentTime();return t.selectable=!0,t.multiSelectable=!1,t.label=r.text,t.selected=r.startTime<=a&&a<r.endTime,(i=o.call(this,e,t)||this).track=n,i.cue=r,n.addEventListener("cuechange",fe(Be(i),i.update)),i}Re(e,o);var t=e.prototype;return t.handleClick=function(e){o.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},t.update=function(e){var t=this.cue,i=this.player_.currentTime();this.selected(t.startTime<=i&&i<t.endTime)},e}(Sa);Ne.registerComponent("ChaptersTrackMenuItem",Ia);var Pa=function(n){function e(e,t,i){return n.call(this,e,t,i)||this}Re(e,n);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-chapters-button "+n.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-chapters-button "+n.prototype.buildWrapperCSSClass.call(this)},t.update=function(e){this.track_&&(!e||"addtrack"!==e.type&&"removetrack"!==e.type)||this.setTrack(this.findChaptersTrack()),n.prototype.update.call(this)},t.setTrack=function(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";var i=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);i&&i.addEventListener("load",this.updateHandler_)}}},t.findChaptersTrack=function(){for(var e=this.player_.textTracks()||[],t=e.length-1;0<=t;t--){var i=e[t];if(i.kind===this.kind_)return i}},t.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(Oe(this.kind_))},t.createMenu=function(){return this.options_.title=this.getMenuCaption(),n.prototype.createMenu.call(this)},t.createItems=function(){var e=[];if(!this.track_)return e;var t=this.track_.cues;if(!t)return e;for(var i=0,n=t.length;i<n;i++){var r=t[i],a=new Ia(this.player_,{track:this.track_,cue:r});e.push(a)}return e},e}(xa);Pa.prototype.kind_="chapters",Pa.prototype.controlText_="Chapters",Ne.registerComponent("ChaptersButton",Pa);var Oa=function(o){function e(e,t,i){var n;n=o.call(this,e,t,i)||this;var r=e.textTracks(),a=fe(Be(n),n.handleTracksChange);return r.addEventListener("change",a),n.on("dispose",function(){r.removeEventListener("change",a)}),n}Re(e,o);var t=e.prototype;return t.handleTracksChange=function(e){for(var t=this.player().textTracks(),i=!1,n=0,r=t.length;n<r;n++){var a=t[n];if(a.kind!==this.kind_&&"showing"===a.mode){i=!0;break}}i?this.disable():this.enable()},t.buildCSSClass=function(){return"vjs-descriptions-button "+o.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+o.prototype.buildWrapperCSSClass.call(this)},e}(xa);Oa.prototype.kind_="descriptions",Oa.prototype.controlText_="Descriptions",Ne.registerComponent("DescriptionsButton",Oa);var La=function(n){function e(e,t,i){return n.call(this,e,t,i)||this}Re(e,n);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-subtitles-button "+n.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+n.prototype.buildWrapperCSSClass.call(this)},e}(xa);La.prototype.kind_="subtitles",La.prototype.controlText_="Subtitles",Ne.registerComponent("SubtitlesButton",La);var Da,Na=(Re(Ma,Da=ka),Ma.prototype.handleClick=function(e){this.player().getChild("textTrackSettings").open()},Ma);function Ma(e,t){var i;return t.track={player:e,kind:t.kind,label:t.kind+" settings",selectable:!1,default:!1,mode:"disabled"},t.selectable=!1,t.name="CaptionSettingsMenuItem",(i=Da.call(this,e,t)||this).addClass("vjs-texttrack-settings"),i.controlText(", opens "+t.kind+" settings dialog"),i}Ne.registerComponent("CaptionSettingsMenuItem",Na);var Ra=function(n){function e(e,t,i){return n.call(this,e,t,i)||this}Re(e,n);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-captions-button "+n.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-captions-button "+n.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(){var e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new Na(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),n.prototype.createItems.call(this,e)},e}(xa);Ra.prototype.kind_="captions",Ra.prototype.controlText_="Captions",Ne.registerComponent("CaptionsButton",Ra);var ja,Ua=(Re(Ba,ja=ka),Ba.prototype.createEl=function(e,t,i){var n='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"captions"===this.options_.track.kind&&(n+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"</span>\n      "),n+="</span>",ja.prototype.createEl.call(this,e,g({innerHTML:n},t),i)},Ba);function Ba(){return ja.apply(this,arguments)||this}Ne.registerComponent("SubsCapsMenuItem",Ua);var Fa=function(n){function e(e,t){var i;return void 0===t&&(t={}),(i=n.call(this,e,t)||this).label_="subtitles",-1<["en","en-us","en-ca","fr-ca"].indexOf(i.player_.language_)&&(i.label_="captions"),i.menuButton_.controlText(Oe(i.label_)),i}Re(e,n);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-subs-caps-button "+n.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+n.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(){var e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new Na(this.player_,{kind:this.label_})),this.hideThreshold_+=1),n.prototype.createItems.call(this,e,Ua)},e}(xa);Fa.prototype.kinds_=["captions","subtitles"],Fa.prototype.controlText_="Subtitles",Ne.registerComponent("SubsCapsButton",Fa);var $a=function(o){function e(e,t){var n,i=t.track,r=e.audioTracks();function a(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n.handleTracksChange.apply(Be(n),t)}return t.label=i.label||i.language||"Unknown",t.selected=i.enabled,(n=o.call(this,e,t)||this).track=i,n.addClass("vjs-"+i.kind+"-menu-item"),r.addEventListener("change",a),n.on("dispose",function(){r.removeEventListener("change",a)}),n}Re(e,o);var t=e.prototype;return t.createEl=function(e,t,i){var n='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"main-desc"===this.options_.track.kind&&(n+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Descriptions")+"</span>\n      "),n+="</span>",o.prototype.createEl.call(this,e,g({innerHTML:n},t),i)},t.handleClick=function(e){var t=this.player_.audioTracks();o.prototype.handleClick.call(this,e);for(var i=0;i<t.length;i++){var n=t[i];n.enabled=n===this.track}},t.handleTracksChange=function(e){this.selected(this.track.enabled)},e}(Sa);Ne.registerComponent("AudioTrackMenuItem",$a);var Ha=function(i){function e(e,t){return void 0===t&&(t={}),t.tracks=e.audioTracks(),i.call(this,e,t)||this}Re(e,i);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-audio-button "+i.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-audio-button "+i.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(e){void 0===e&&(e=[]),this.hideThreshold_=1;for(var t=this.player_.audioTracks(),i=0;i<t.length;i++){var n=t[i];e.push(new $a(this.player_,{track:n,selectable:!0,multiSelectable:!1}))}return e},e}(_a);Ha.prototype.controlText_="Audio Track",Ne.registerComponent("AudioTrackButton",Ha);var qa=function(a){function e(e,t){var i,n=t.rate,r=parseFloat(n,10);return t.label=n,t.selected=1===r,t.selectable=!0,t.multiSelectable=!1,(i=a.call(this,e,t)||this).label=n,i.rate=r,i.on(e,"ratechange",i.update),i}Re(e,a);var t=e.prototype;return t.handleClick=function(e){a.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},t.update=function(e){this.selected(this.player().playbackRate()===this.rate)},e}(Sa);qa.prototype.contentElType="button",Ne.registerComponent("PlaybackRateMenuItem",qa);var Wa=function(n){function e(e,t){var i;return(i=n.call(this,e,t)||this).updateVisibility(),i.updateLabel(),i.on(e,"loadstart",i.updateVisibility),i.on(e,"ratechange",i.updateLabel),i}Re(e,n);var t=e.prototype;return t.createEl=function(){var e=n.prototype.createEl.call(this);return this.labelEl_=b("div",{className:"vjs-playback-rate-value",innerHTML:"1x"}),e.appendChild(this.labelEl_),e},t.dispose=function(){this.labelEl_=null,n.prototype.dispose.call(this)},t.buildCSSClass=function(){return"vjs-playback-rate "+n.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-playback-rate "+n.prototype.buildWrapperCSSClass.call(this)},t.createMenu=function(){var e=new va(this.player()),t=this.playbackRates();if(t)for(var i=t.length-1;0<=i;i--)e.addChild(new qa(this.player(),{rate:t[i]+"x"}));return e},t.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},t.handleClick=function(e){for(var t=this.player().playbackRate(),i=this.playbackRates(),n=i[0],r=0;r<i.length;r++)if(i[r]>t){n=i[r];break}this.player().playbackRate(n)},t.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},t.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&0<this.playbackRates().length},t.updateVisibility=function(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},t.updateLabel=function(e){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},e}(ya);Wa.prototype.controlText_="Playback Rate",Ne.registerComponent("PlaybackRateMenuButton",Wa);var Va=function(e){function t(){return e.apply(this,arguments)||this}Re(t,e);var i=t.prototype;return i.buildCSSClass=function(){return"vjs-spacer "+e.prototype.buildCSSClass.call(this)},i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},t}(Ne);Ne.registerComponent("Spacer",Va);var za=function(t){function e(){return t.apply(this,arguments)||this}Re(e,t);var i=e.prototype;return i.buildCSSClass=function(){return"vjs-custom-control-spacer "+t.prototype.buildCSSClass.call(this)},i.createEl=function(){var e=t.prototype.createEl.call(this,{className:this.buildCSSClass()});return e.innerHTML=" ",e},e}(Va);Ne.registerComponent("CustomControlSpacer",za);var Ga,Xa=(Re(Ka,Ga=Ne),Ka.prototype.createEl=function(){return Ga.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},Ka);function Ka(){return Ga.apply(this,arguments)||this}Xa.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in d&&Xa.prototype.options_.children.splice(Xa.prototype.options_.children.length-1,0,"pictureInPictureToggle"),Ne.registerComponent("ControlBar",Xa);var Ya=function(n){function e(e,t){var i;return(i=n.call(this,e,t)||this).on(e,"error",i.open),i}Re(e,n);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-error-display "+n.prototype.buildCSSClass.call(this)},t.content=function(){var e=this.player().error();return e?this.localize(e.message):""},e}(It);Ya.prototype.options_=Le(It.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),Ne.registerComponent("ErrorDisplay",Ya);var Qa="vjs-text-track-settings",Ja=["#000","Black"],Za=["#00F","Blue"],eo=["#0FF","Cyan"],to=["#0F0","Green"],io=["#F0F","Magenta"],no=["#F00","Red"],ro=["#FFF","White"],ao=["#FF0","Yellow"],oo=["1","Opaque"],so=["0.5","Semi-Transparent"],lo=["0","Transparent"],uo={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Ja,ro,no,to,Za,ao,io,eo]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[oo,so,lo]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[ro,Ja,no,to,Za,ao,io,eo]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return"1.00"===e?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[oo,so]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[lo,so,oo]}};function co(e,t){if(t&&(e=t(e)),e&&"none"!==e)return e}uo.windowColor.options=uo.backgroundColor.options;var ho=function(n){function e(e,t){var i;return t.temporary=!1,(i=n.call(this,e,t)||this).updateDisplay=fe(Be(i),i.updateDisplay),i.fill(),i.hasBeenOpened_=i.hasBeenFilled_=!0,i.endDialog=b("p",{className:"vjs-control-text",textContent:i.localize("End of dialog window.")}),i.el().appendChild(i.endDialog),i.setDefaults(),void 0===t.persistTextTrackSettings&&(i.options_.persistTextTrackSettings=i.options_.playerOptions.persistTextTrackSettings),i.on(i.$(".vjs-done-button"),"click",function(){i.saveSettings(),i.close()}),i.on(i.$(".vjs-default-button"),"click",function(){i.setDefaults(),i.updateDisplay()}),a(uo,function(e){i.on(i.$(e.selector),"change",i.updateDisplay)}),i.options_.persistTextTrackSettings&&i.restoreSettings(),i}Re(e,n);var t=e.prototype;return t.dispose=function(){this.endDialog=null,n.prototype.dispose.call(this)},t.createElSelect_=function(e,t,i){var n=this;void 0===t&&(t=""),void 0===i&&(i="label");var r=uo[e],a=r.id.replace("%s",this.id_),o=[t,a].join(" ").trim();return["<"+i+' id="'+a+'" class="'+("label"===i?"vjs-label":"")+'">',this.localize(r.label),"</"+i+">",'<select aria-labelledby="'+o+'">'].concat(r.options.map(function(e){var t=a+"-"+e[1].replace(/\W+/g,"");return['<option id="'+t+'" value="'+e[0]+'" ','aria-labelledby="'+o+" "+t+'">',n.localize(e[1]),"</option>"].join("")})).concat("</select>").join("")},t.createElFgColor_=function(){var e="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")},t.createElBgColor_=function(){var e="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")},t.createElWinColor_=function(){var e="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")},t.createElColors_=function(){return b("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},t.createElFont_=function(){return b("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},t.createElControls_=function(){var e=this.localize("restore all settings to the default values");return b("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+e+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+e+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},t.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},t.label=function(){return this.localize("Caption Settings Dialog")},t.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},t.buildCSSClass=function(){return n.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},t.getValues=function(){var o,e,s=this;return void 0===(e={})&&(e=0),r(o=uo).reduce(function(e,t){return i=e,n=o[t],r=t,void 0!==(a=function(e,t){return co(e.options[e.options.selectedIndex].value,t)}(s.$(n.selector),n.parser))&&(i[r]=a),i;var i,n,r,a},e)},t.setValues=function(i){var n=this;a(uo,function(e,t){!function(e,t,i){if(t)for(var n=0;n<e.options.length;n++)if(co(e.options[n].value,i)===t){e.selectedIndex=n;break}}(n.$(e.selector),i[t],e.parser)})},t.setDefaults=function(){var i=this;a(uo,function(e){var t=e.hasOwnProperty("default")?e.default:0;i.$(e.selector).selectedIndex=t})},t.restoreSettings=function(){var e;try{e=JSON.parse(y.localStorage.getItem(Qa))}catch(e){p.warn(e)}e&&this.setValues(e)},t.saveSettings=function(){if(this.options_.persistTextTrackSettings){var e=this.getValues();try{Object.keys(e).length?y.localStorage.setItem(Qa,JSON.stringify(e)):y.localStorage.removeItem(Qa)}catch(e){p.warn(e)}}},t.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},t.conditionalBlur_=function(){this.previouslyActiveEl_=null;var e=this.player_.controlBar,t=e&&e.subsCapsButton,i=e&&e.captionsButton;t?t.focus():i&&i.focus()},e}(It);Ne.registerComponent("TextTrackSettings",ho);var po=function(u){function e(e,t){var i,n=t.ResizeObserver||y.ResizeObserver;null===t.ResizeObserver&&(n=!1);var r,a,o,s=Le({createEl:!n,reportTouchActivity:!1},t);return(i=u.call(this,e,s)||this).ResizeObserver=t.ResizeObserver||y.ResizeObserver,i.loadListener_=null,i.resizeObserver_=null,i.debouncedHandler_=(r=function(){i.resizeHandler()},void 0===(a=Be(i))&&(a=y),l.cancel=function(){a.clearTimeout(o),o=null},l),n?(i.resizeObserver_=new i.ResizeObserver(i.debouncedHandler_),i.resizeObserver_.observe(e.el())):(i.loadListener_=function(){if(i.el_&&i.el_.contentWindow){var e=i.debouncedHandler_,t=i.unloadListener_=function(){ce(this,"resize",e),ce(this,"unload",t),t=null};ue(i.el_.contentWindow,"unload",t),ue(i.el_.contentWindow,"resize",e)}},i.one("load",i.loadListener_)),i;function l(){var e=this,t=arguments,i=function(){i=o=null,r.apply(e,t)};a.clearTimeout(o),o=a.setTimeout(i,100)}}Re(e,u);var t=e.prototype;return t.createEl=function(){return u.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1},{"aria-hidden":"true"})},t.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},t.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,u.prototype.dispose.call(this)},e}(Ne);Ne.registerComponent("ResizeManager",po);var fo=function(r){function e(e,t){var i,n=Le({createEl:!1},t);return(i=r.call(this,e,n)||this).reset_(),i.on(i.player_,"durationchange",i.handleDurationchange),at&&"hidden"in d&&"visibilityState"in d&&i.on(d,"visibilitychange",i.handleVisibilityChange),i}Re(e,r);var t=e.prototype;return t.handleVisibilityChange=function(){this.player_.duration()===1/0&&(d.hidden?this.stopTracking():this.startTracking())},t.isBehind_=function(){if(!this.timeupdateSeen_)return!1;var e=this.liveCurrentTime(),t=this.player_.currentTime(),i=2*this.seekableIncrement_+.07;return e!==1/0&&t<=e-i},t.trackLive_=function(){this.pastSeekEnd_=this.pastSeekEnd_;var e,t,i,n=this.player_.seekable();if(n&&n.length){var r=this.seekableEnd();r!==this.lastSeekEnd_&&(this.lastSeekEnd_&&(this.seekableIncrementList_=this.seekableIncrementList_.slice(-11),this.seekableIncrementList_.push(Math.abs(r-this.lastSeekEnd_)),3<this.seekableIncrementList_.length&&(this.seekableIncrement_=(e=this.seekableIncrementList_,t=Math.floor(e.length/2),i=[].concat(e).sort(function(e,t){return e-t}),e.length%2!=0?i[t]:(i[t-1]+i[t])/2))),this.pastSeekEnd_=0,this.lastSeekEnd_=r,this.trigger("seekableendchange")),this.pastSeekEnd_=this.pastSeekEnd()+.03,this.isBehind_()!==this.behindLiveEdge()&&(this.behindLiveEdge_=this.isBehind_(),this.trigger("liveedgechange"))}},t.handleDurationchange=function(){this.player_.duration()===1/0?this.startTracking():this.stopTracking()},t.startTracking=function(){var e=this;this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLive_,30),this.trackLive_(),this.on(this.player_,"play",this.trackLive_),this.on(this.player_,"pause",this.trackLive_),this.timeupdateSeen_||(this.one(this.player_,"play",this.handlePlay),this.handleTimeupdate=function(){e.timeupdateSeen_=!0,e.handleTimeupdate=null},this.one(this.player_,"timeupdate",this.handleTimeupdate)))},t.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge)},t.reset_=function(){this.pastSeekEnd_=0,this.lastSeekEnd_=null,this.behindLiveEdge_=null,this.timeupdateSeen_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.seekableIncrement_=12,this.seekableIncrementList_=[],this.off(this.player_,"play",this.trackLive_),this.off(this.player_,"pause",this.trackLive_),this.off(this.player_,"play",this.handlePlay),this.off(this.player_,"timeupdate",this.seekToLiveEdge),this.handleTimeupdate&&(this.off(this.player_,"timeupdate",this.handleTimeupdate),this.handleTimeupdate=null)},t.stopTracking=function(){this.isTracking()&&this.reset_()},t.seekableEnd=function(){for(var e=this.player_.seekable(),t=[],i=e?e.length:0;i--;)t.push(e.end(i));return t.length?t.sort()[t.length-1]:1/0},t.seekableStart=function(){for(var e=this.player_.seekable(),t=[],i=e?e.length:0;i--;)t.push(e.start(i));return t.length?t.sort()[0]:0},t.liveWindow=function(){var e=this.liveCurrentTime();return e===1/0?1/0:e-this.seekableStart()},t.isLive=function(){return this.isTracking()},t.atLiveEdge=function(){return!this.behindLiveEdge()},t.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},t.pastSeekEnd=function(){return this.pastSeekEnd_},t.behindLiveEdge=function(){return this.behindLiveEdge_},t.isTracking=function(){return"number"==typeof this.trackingInterval_},t.seekToLiveEdge=function(){this.atLiveEdge()||(this.player_.currentTime(this.liveCurrentTime()),this.player_.paused()&&this.player_.play())},t.dispose=function(){this.stopTracking(),r.prototype.dispose.call(this)},e}(Ne);function go(e){var t=e.el();if(t.hasAttribute("src"))return e.triggerSourceset(t.src),1;var i=e.$$("source"),n=[],r="";if(i.length){for(var a=0;a<i.length;a++){var o=i[a].src;o&&-1===n.indexOf(o)&&n.push(o)}return n.length&&(1===n.length&&(r=n[0]),e.triggerSourceset(r),1)}}function mo(e,t){for(var i={},n=0;n<e.length&&!((i=Object.getOwnPropertyDescriptor(e[n],t))&&i.set&&i.get);n++);return i.enumerable=!0,i.configurable=!0,i}function vo(a){var o=a.el();if(!o.resetSourceWatch_){function t(r){return function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=r.apply(o,t);return go(a),n}}var i={},e=mo([a.el(),y.HTMLMediaElement.prototype,y.Element.prototype,yo],"innerHTML");["append","appendChild","insertAdjacentHTML"].forEach(function(e){o[e]&&(i[e]=o[e],o[e]=t(i[e]))}),Object.defineProperty(o,"innerHTML",Le(e,{set:t(e.set)})),o.resetSourceWatch_=function(){o.resetSourceWatch_=null,Object.keys(i).forEach(function(e){o[e]=i[e]}),Object.defineProperty(o,"innerHTML",e)},a.one("sourceset",o.resetSourceWatch_)}}Ne.registerComponent("LiveTracker",fo);var yo=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(e){var t=d.createElement(this.nodeName.toLowerCase());t.innerHTML=e;for(var i=d.createDocumentFragment();t.childNodes.length;)i.appendChild(t.childNodes[0]);return this.innerText="",y.Element.prototype.appendChild.call(this,i),this.innerHTML}}),bo=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?Mt(y.Element.prototype.getAttribute.call(this,"src")):""},set:function(e){return y.Element.prototype.setAttribute.call(this,"src",e),e}}),_o=function(c){function s(e,t){var i;i=c.call(this,e,t)||this;var n=e.source,r=!1;if(n&&(i.el_.currentSrc!==n.src||e.tag&&3===e.tag.initNetworkState_)?i.setSource(n):i.handleLateInit_(i.el_),e.enableSourceset&&i.setupSourcesetHandling_(),i.el_.hasChildNodes()){for(var a=i.el_.childNodes,o=a.length,s=[];o--;){var l=a[o];"track"===l.nodeName.toLowerCase()&&(i.featuresNativeTextTracks?(i.remoteTextTrackEls().addTrackElement_(l),i.remoteTextTracks().addTrack(l.track),i.textTracks().addTrack(l.track),r||i.el_.hasAttribute("crossorigin")||!jt(l.src)||(r=!0)):s.push(l))}for(var u=0;u<s.length;u++)i.el_.removeChild(s[u])}return i.proxyNativeTracks_(),i.featuresNativeTextTracks&&r&&p.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),i.restoreMetadataTracksInIOSNativePlayer_(),(ut||Xe||et)&&!0===e.nativeControlsForTouch&&i.setControls(!0),i.proxyWebkitFullscreen_(),i.triggerReady(),i}Re(s,c);var e=s.prototype;return e.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),s.disposeMediaElement(this.el_),this.options_=null,c.prototype.dispose.call(this)},e.setupSourcesetHandling_=function(){!function(n){if(n.featuresSourceset){var r=n.el();if(!r.resetSourceset_){var i=mo([n.el(),y.HTMLMediaElement.prototype,bo],"src"),a=r.setAttribute,t=r.load;Object.defineProperty(r,"src",Le(i,{set:function(e){var t=i.set.call(r,e);return n.triggerSourceset(r.src),t}})),r.setAttribute=function(e,t){var i=a.call(r,e,t);return/src/i.test(e)&&n.triggerSourceset(r.src),i},r.load=function(){var e=t.call(r);return go(n)||(n.triggerSourceset(""),vo(n)),e},r.currentSrc?n.triggerSourceset(r.currentSrc):go(n)||vo(n),r.resetSourceset_=function(){r.resetSourceset_=null,r.load=t,r.setAttribute=a,Object.defineProperty(r,"src",i),r.resetSourceWatch_&&r.resetSourceWatch_()}}}}(this)},e.restoreMetadataTracksInIOSNativePlayer_=function(){function e(){i=[];for(var e=0;e<n.length;e++){var t=n[e];"metadata"===t.kind&&i.push({track:t,storedMode:t.mode})}}var i,n=this.textTracks();function r(){for(var e=0;e<i.length;e++){var t=i[e];"disabled"===t.track.mode&&t.track.mode!==t.storedMode&&(t.track.mode=t.storedMode)}n.removeEventListener("change",r)}e(),n.addEventListener("change",e),this.on("dispose",function(){return n.removeEventListener("change",e)}),this.on("webkitbeginfullscreen",function(){n.removeEventListener("change",e),n.removeEventListener("change",r),n.addEventListener("change",r)}),this.on("webkitendfullscreen",function(){n.removeEventListener("change",e),n.addEventListener("change",e),n.removeEventListener("change",r)})},e.overrideNative_=function(e,t){var i=this;if(t===this["featuresNative"+e+"Tracks"]){var n=e.toLowerCase();this[n+"TracksListeners_"]&&Object.keys(this[n+"TracksListeners_"]).forEach(function(e){i.el()[n+"Tracks"].removeEventListener(e,i[n+"TracksListeners_"][e])}),this["featuresNative"+e+"Tracks"]=!t,this[n+"TracksListeners_"]=null,this.proxyNativeTracksForType_(n)}},e.overrideNativeAudioTracks=function(e){this.overrideNative_("Audio",e)},e.overrideNativeVideoTracks=function(e){this.overrideNative_("Video",e)},e.proxyNativeTracksForType_=function(e){var n=this,t=Mn[e],r=this.el()[t.getterName],a=this[t.getterName]();if(this["featuresNative"+t.capitalName+"Tracks"]&&r&&r.addEventListener){function i(){for(var e=[],t=0;t<a.length;t++){for(var i=!1,n=0;n<r.length;n++)if(r[n]===a[t]){i=!0;break}i||e.push(a[t])}for(;e.length;)a.removeTrack(e.shift())}var o={change:function(e){a.trigger({type:"change",target:a,currentTarget:a,srcElement:a})},addtrack:function(e){a.addTrack(e.track)},removetrack:function(e){a.removeTrack(e.track)}};this[t.getterName+"Listeners_"]=o,Object.keys(o).forEach(function(t){var i=o[t];r.addEventListener(t,i),n.on("dispose",function(e){return r.removeEventListener(t,i)})}),this.on("loadstart",i),this.on("dispose",function(e){return n.off("loadstart",i)})}},e.proxyNativeTracks_=function(){var t=this;Mn.names.forEach(function(e){t.proxyNativeTracksForType_(e)})},e.createEl=function(){var e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){var t=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(t,e),s.disposeMediaElement(e),e=t}else{e=d.createElement("video");var i=Le({},this.options_.tag&&x(this.options_.tag));ut&&!0===this.options_.nativeControlsForTouch||delete i.controls,E(e,g(i,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}void 0!==this.options_.preload&&I(e,"preload",this.options_.preload);for(var n=["loop","muted","playsinline","autoplay"],r=0;r<n.length;r++){var a=n[r],o=this.options_[a];void 0!==o&&(o?I(e,a,a):P(e,a),e[a]=o)}return e},e.handleLateInit_=function(e){if(0!==e.networkState&&3!==e.networkState){if(0===e.readyState){function t(){i=!0}var i=!1;function n(){i||this.trigger("loadstart")}return this.on("loadstart",t),this.on("loadedmetadata",n),void this.ready(function(){this.off("loadstart",t),this.off("loadedmetadata",n),i||this.trigger("loadstart")})}var r=["loadstart"];r.push("loadedmetadata"),2<=e.readyState&&r.push("loadeddata"),3<=e.readyState&&r.push("canplay"),4<=e.readyState&&r.push("canplaythrough"),this.ready(function(){r.forEach(function(e){this.trigger(e)},this)})}},e.setCurrentTime=function(e){try{this.el_.currentTime=e}catch(e){p(e,"Video is not ready. (Video.js)")}},e.duration=function(){var t=this;return this.el_.duration===1/0&&Je&&nt&&0===this.el_.currentTime?(this.on("timeupdate",function e(){0<t.el_.currentTime&&(t.el_.duration===1/0&&t.trigger("durationchange"),t.off("timeupdate",e))}),NaN):this.el_.duration||NaN},e.width=function(){return this.el_.offsetWidth},e.height=function(){return this.el_.offsetHeight},e.proxyWebkitFullscreen_=function(){var e=this;if("webkitDisplayingFullscreen"in this.el_){function t(){this.trigger("fullscreenchange",{isFullscreen:!1})}function i(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",t),this.trigger("fullscreenchange",{isFullscreen:!0}))}this.on("webkitbeginfullscreen",i),this.on("dispose",function(){e.off("webkitbeginfullscreen",i),e.off("webkitendfullscreen",t)})}},e.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var e=y.navigator&&y.navigator.userAgent||"";if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1},e.enterFullScreen=function(){var e=this.el_;e.paused&&e.networkState<=e.HAVE_METADATA?(this.el_.play(),this.setTimeout(function(){e.pause(),e.webkitEnterFullScreen()},0)):e.webkitEnterFullScreen()},e.exitFullScreen=function(){this.el_.webkitExitFullScreen()},e.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},e.src=function(e){if(void 0===e)return this.el_.src;this.setSrc(e)},e.reset=function(){s.resetMediaElement(this.el_)},e.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},e.setControls=function(e){this.el_.controls=!!e},e.addTextTrack=function(e,t,i){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,t,i):c.prototype.addTextTrack.call(this,e,t,i)},e.createRemoteTextTrack=function(e){if(!this.featuresNativeTextTracks)return c.prototype.createRemoteTextTrack.call(this,e);var t=d.createElement("track");return e.kind&&(t.kind=e.kind),e.label&&(t.label=e.label),(e.language||e.srclang)&&(t.srclang=e.language||e.srclang),e.default&&(t.default=e.default),e.id&&(t.id=e.id),e.src&&(t.src=e.src),t},e.addRemoteTextTrack=function(e,t){var i=c.prototype.addRemoteTextTrack.call(this,e,t);return this.featuresNativeTextTracks&&this.el().appendChild(i),i},e.removeRemoteTextTrack=function(e){if(c.prototype.removeRemoteTextTrack.call(this,e),this.featuresNativeTextTracks)for(var t=this.$$("track"),i=t.length;i--;)e!==t[i]&&e!==t[i].track||this.el().removeChild(t[i])},e.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var e={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),y.performance&&"function"==typeof y.performance.now?e.creationTime=y.performance.now():y.performance&&y.performance.timing&&"number"==typeof y.performance.timing.navigationStart&&(e.creationTime=y.Date.now()-y.performance.timing.navigationStart),e},s}(pr);if(c()){_o.TEST_VID=d.createElement("video");var To=d.createElement("track");To.kind="captions",To.srclang="en",To.label="English",_o.TEST_VID.appendChild(To)}_o.isSupported=function(){try{_o.TEST_VID.volume=.5}catch(e){return!1}return!(!_o.TEST_VID||!_o.TEST_VID.canPlayType)},_o.canPlayType=function(e){return _o.TEST_VID.canPlayType(e)},_o.canPlaySource=function(e,t){return _o.canPlayType(e.type)},_o.canControlVolume=function(){try{var e=_o.TEST_VID.volume;return _o.TEST_VID.volume=e/2+.1,e!==_o.TEST_VID.volume}catch(e){return!1}},_o.canMuteVolume=function(){try{var e=_o.TEST_VID.muted;return _o.TEST_VID.muted=!e,_o.TEST_VID.muted?I(_o.TEST_VID,"muted","muted"):P(_o.TEST_VID,"muted"),e!==_o.TEST_VID.muted}catch(e){return!1}},_o.canControlPlaybackRate=function(){if(Je&&nt&&rt<58)return!1;try{var e=_o.TEST_VID.playbackRate;return _o.TEST_VID.playbackRate=e/2+.1,e!==_o.TEST_VID.playbackRate}catch(e){return!1}},_o.canOverrideAttributes=function(){try{function e(){}Object.defineProperty(d.createElement("video"),"src",{get:e,set:e}),Object.defineProperty(d.createElement("audio"),"src",{get:e,set:e}),Object.defineProperty(d.createElement("video"),"innerHTML",{get:e,set:e}),Object.defineProperty(d.createElement("audio"),"innerHTML",{get:e,set:e})}catch(e){return!1}return!0},_o.supportsNativeTextTracks=function(){return st||Ye&&nt},_o.supportsNativeVideoTracks=function(){return!(!_o.TEST_VID||!_o.TEST_VID.videoTracks)},_o.supportsNativeAudioTracks=function(){return!(!_o.TEST_VID||!_o.TEST_VID.audioTracks)},_o.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],_o.prototype.featuresVolumeControl=_o.canControlVolume(),_o.prototype.featuresMuteControl=_o.canMuteVolume(),_o.prototype.featuresPlaybackRate=_o.canControlPlaybackRate(),_o.prototype.featuresSourceset=_o.canOverrideAttributes(),_o.prototype.movingMediaElementInDOM=!Ye,_o.prototype.featuresFullscreenResize=!0,_o.prototype.featuresProgressEvents=!0,_o.prototype.featuresTimeupdateEvents=!0,_o.prototype.featuresNativeTextTracks=_o.supportsNativeTextTracks(),_o.prototype.featuresNativeVideoTracks=_o.supportsNativeVideoTracks(),_o.prototype.featuresNativeAudioTracks=_o.supportsNativeAudioTracks();var wo=_o.TEST_VID&&_o.TEST_VID.constructor.prototype.canPlayType,So=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;_o.patchCanPlayType=function(){4<=Ze&&!tt&&!nt&&(_o.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&So.test(e)?"maybe":wo.call(this,e)})},_o.unpatchCanPlayType=function(){var e=_o.TEST_VID.constructor.prototype.canPlayType;return _o.TEST_VID.constructor.prototype.canPlayType=wo,e},_o.patchCanPlayType(),_o.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},_o.resetMediaElement=function(e){if(e){for(var t=e.querySelectorAll("source"),i=t.length;i--;)e.removeChild(t[i]);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(e){_o.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(t){_o.prototype["set"+Oe(t)]=function(e){(this.el_[t]=e)?this.el_.setAttribute(t,t):this.el_.removeAttribute(t)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","played","networkState","readyState","videoWidth","videoHeight"].forEach(function(e){_o.prototype[e]=function(){return this.el_[e]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate"].forEach(function(t){_o.prototype["set"+Oe(t)]=function(e){this.el_[t]=e}}),["pause","load","play"].forEach(function(e){_o.prototype[e]=function(){return this.el_[e]()}}),pr.withSourceHandlers(_o),_o.nativeSourceHandler={},_o.nativeSourceHandler.canPlayType=function(e){try{return _o.TEST_VID.canPlayType(e)}catch(e){return""}},_o.nativeSourceHandler.canHandleSource=function(e,t){if(e.type)return _o.nativeSourceHandler.canPlayType(e.type);if(e.src){var i=Rt(e.src);return _o.nativeSourceHandler.canPlayType("video/"+i)}return""},_o.nativeSourceHandler.handleSource=function(e,t,i){t.setSrc(e.src)},_o.nativeSourceHandler.dispose=function(){},_o.registerSourceHandler(_o.nativeSourceHandler),pr.registerTech("Html5",_o);var ko=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Co={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Eo=["tiny","xsmall","small","medium","large","xlarge","huge"],xo={};Eo.forEach(function(e){var t="x"===e.charAt(0)?"x-"+e.substring(1):e;xo[e]="vjs-layout-"+t});var Ao={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},Io=function(c){function u(e,t,i){var n;if(e.id=e.id||t.id||"vjs_video_"+te(),(t=g(u.getTagSettings(e),t)).initChildren=!1,t.createEl=!1,t.evented=!1,t.reportTouchActivity=!1,!t.language)if("function"==typeof e.closest){var r=e.closest("[lang]");r&&r.getAttribute&&(t.language=r.getAttribute("lang"))}else for(var a=e;a&&1===a.nodeType;){if(x(a).hasOwnProperty("lang")){t.language=a.getAttribute("lang");break}a=a.parentNode}if((n=c.call(this,null,t,i)||this).boundDocumentFullscreenChange_=fe(Be(n),n.documentFullscreenChange_),n.boundFullWindowOnEscKey_=fe(Be(n),n.fullWindowOnEscKey),n.log=f(n.id_),n.fsApi_=mt,n.isPosterFromTech_=!1,n.queuedCallbacks_=[],n.isReady_=!1,n.hasStarted_=!1,n.userActive_=!1,!n.options_||!n.options_.techOrder||!n.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(n.tag=e,n.tagAttributes=e&&x(e),n.language(n.options_.language),t.languages){var o={};Object.getOwnPropertyNames(t.languages).forEach(function(e){o[e.toLowerCase()]=t.languages[e]}),n.languages_=o}else n.languages_=u.prototype.options_.languages;n.resetCache_(),n.poster_=t.poster||"",n.controls_=!!t.controls,e.controls=!1,e.removeAttribute("controls"),n.changingSrc_=!1,n.playCallbacks_=[],n.playTerminatedQueue_=[],e.hasAttribute("autoplay")?n.autoplay(!0):n.autoplay(n.options_.autoplay),t.plugins&&Object.keys(t.plugins).forEach(function(e){if("function"!=typeof n[e])throw new Error('plugin "'+e+'" does not exist')}),n.scrubbing_=!1,n.el_=n.createEl(),xe(Be(n),{eventBusKey:"el_"}),n.fluid_&&n.on("playerreset",n.updateStyleEl_);var s=Le(n.options_);t.plugins&&Object.keys(t.plugins).forEach(function(e){n[e](t.plugins[e])}),n.options_.playerOptions=s,n.middleware_=[],n.initChildren(),n.isAudio("audio"===e.nodeName.toLowerCase()),n.controls()?n.addClass("vjs-controls-enabled"):n.addClass("vjs-controls-disabled"),n.el_.setAttribute("role","region"),n.isAudio()?n.el_.setAttribute("aria-label",n.localize("Audio Player")):n.el_.setAttribute("aria-label",n.localize("Video Player")),n.isAudio()&&n.addClass("vjs-audio"),n.flexNotSupported_()&&n.addClass("vjs-no-flex"),ut&&n.addClass("vjs-touch-enabled"),Ye||n.addClass("vjs-workinghover"),u.players[n.id_]=Be(n);var l=h.split(".")[0];return n.addClass("vjs-v"+l),n.userActive(!0),n.reportUserActivity(),n.one("play",n.listenForUserActivity_),n.on("stageclick",n.handleStageClick_),n.on("keydown",n.handleKeyDown),n.breakpoints(n.options_.breakpoints),n.responsive(n.options_.responsive),n}Re(u,c);var e=u.prototype;return e.dispose=function(){var n=this;this.trigger("dispose"),this.off("dispose"),ce(d,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),ce(d,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),u.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),gr[this.id()]=null,jn.names.forEach(function(e){var t=jn[e],i=n[t.getterName]();i&&i.off&&i.off()}),c.prototype.dispose.call(this)},e.createEl=function(){var t,i=this.tag,e=this.playerElIngest_=i.parentNode&&i.parentNode.hasAttribute&&i.parentNode.hasAttribute("data-vjs-player"),n="video-js"===this.tag.tagName.toLowerCase();e?t=this.el_=i.parentNode:n||(t=this.el_=c.prototype.createEl.call(this,"div"));var r=x(i);if(n){for(t=this.el_=i,i=this.tag=d.createElement("video");t.children.length;)i.appendChild(t.firstChild);w(t,"video-js")||S(t,"video-js"),t.appendChild(i),e=this.playerElIngest_=t,Object.keys(t).forEach(function(e){try{i[e]=t[e]}catch(e){}})}if(i.setAttribute("tabindex","-1"),r.tabindex="-1",(at||nt&&lt)&&(i.setAttribute("role","application"),r.role="application"),i.removeAttribute("width"),i.removeAttribute("height"),"width"in r&&delete r.width,"height"in r&&delete r.height,Object.getOwnPropertyNames(r).forEach(function(e){n&&"class"===e||t.setAttribute(e,r[e]),n&&i.setAttribute(e,r[e])}),i.playerId=i.id,i.id+="_html5_api",i.className="vjs-tech",i.player=t.player=this,this.addClass("vjs-paused"),!0!==y.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=Y("vjs-styles-dimensions");var a=q(".vjs-styles-defaults"),o=q("head");o.insertBefore(this.styleEl_,a?a.nextSibling:o.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio);for(var s=i.getElementsByTagName("a"),l=0;l<s.length;l++){var u=s.item(l);S(u,"vjs-hidden"),u.setAttribute("hidden","hidden")}return i.initNetworkState_=i.networkState,i.parentNode&&!e&&i.parentNode.insertBefore(t,i),T(i,t),this.children_.unshift(i),this.el_.setAttribute("lang",this.language_),this.el_=t},e.width=function(e){return this.dimension("width",e)},e.height=function(e){return this.dimension("height",e)},e.dimension=function(e,t){var i=e+"_";if(void 0===t)return this[i]||0;if(""===t)return this[i]=void 0,void this.updateStyleEl_();var n=parseFloat(t);isNaN(n)?p.error('Improper value "'+t+'" supplied for for '+e):(this[i]=n,this.updateStyleEl_())},e.fluid=function(e){if(void 0===e)return!!this.fluid_;var t;this.fluid_=!!e,Ce(this)&&this.off("playerreset",this.updateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),Ce(t=function(){this.on("playerreset",this.updateStyleEl_)})?(void 0)():(t.eventedCallbacks||(t.eventedCallbacks=[]),t.eventedCallbacks.push(void 0))):this.removeClass("vjs-fluid"),this.updateStyleEl_()},e.fill=function(e){if(void 0===e)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},e.aspectRatio=function(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},e.updateStyleEl_=function(){if(!0!==y.VIDEOJS_NO_DYNAMIC_STYLE){var e,t,i,n=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:0<this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),r=n[1]/n[0];e=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/r:this.videoWidth()||300,t=void 0!==this.height_?this.height_:e*r,i=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(i),Q(this.styleEl_,"\n      ."+i+" {\n        width: "+e+"px;\n        height: "+t+"px;\n      }\n\n      ."+i+".vjs-fluid {\n        padding-top: "+100*r+"%;\n      }\n    ")}else{var a="number"==typeof this.width_?this.width_:this.options_.width,o="number"==typeof this.height_?this.height_:this.options_.height,s=this.tech_&&this.tech_.el();s&&(0<=a&&(s.width=a),0<=o&&(s.height=o))}},e.loadTech_=function(e,t){var i=this;this.tech_&&this.unloadTech_();var n=Oe(e),r=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==n&&this.tag&&(pr.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=n,this.isReady_=!1;var a={source:t,autoplay:"string"!=typeof this.autoplay()&&this.autoplay(),nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+r+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};jn.names.forEach(function(e){var t=jn[e];a[t.getterName]=i[t.privateName]}),g(a,this.options_[n]),g(a,this.options_[r]),g(a,this.options_[e.toLowerCase()]),this.tag&&(a.tag=this.tag),t&&t.src===this.cache_.src&&0<this.cache_.currentTime&&(a.startTime=this.cache_.currentTime);var o,s,l=pr.getTech(e);if(!l)throw new Error("No Tech named '"+n+"' exists! '"+n+"' should be registered using videojs.registerTech()'");this.tech_=new l(a),this.tech_.ready(fe(this,this.handleTechReady_),!0),o=this.textTracksJson_||[],s=this.tech_,o.forEach(function(e){var t=s.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach(function(e){return t.addCue(e)})}),s.textTracks(),ko.forEach(function(e){i.on(i.tech_,e,i["handleTech"+Oe(e)+"_"])}),Object.keys(Co).forEach(function(t){i.on(i.tech_,t,function(e){0===i.tech_.playbackRate()&&i.tech_.seeking()?i.queuedCallbacks_.push({callback:i["handleTech"+Co[t]+"_"].bind(i),event:e}):i["handleTech"+Co[t]+"_"](e)})}),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"sourceset",this.handleTechSourceset_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"enterpictureinpicture",this.handleTechEnterPictureInPicture_),this.on(this.tech_,"leavepictureinpicture",this.handleTechLeavePictureInPicture_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.on(this.tech_,"textdata",this.handleTechTextData_),this.on(this.tech_,"ratechange",this.handleTechRateChange_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===n&&this.tag||T(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},e.unloadTech_=function(){var e,t,i,n=this;jn.names.forEach(function(e){var t=jn[e];n[t.privateName]=n[t.getterName]()}),this.textTracksJson_=(e=this.tech_,t=e.$$("track"),i=Array.prototype.map.call(t,function(e){return e.track}),Array.prototype.map.call(t,function(e){var t=Ct(e.track);return e.src&&(t.src=e.src),t}).concat(Array.prototype.filter.call(e.textTracks(),function(e){return-1===i.indexOf(e)}).map(Ct))),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},e.tech=function(e){return void 0===e&&p.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},e.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"mouseup",this.handleTechClick_),this.on(this.tech_,"dblclick",this.handleTechDoubleClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},e.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mouseup",this.handleTechClick_),this.off(this.tech_,"dblclick",this.handleTechDoubleClick_)},e.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},e.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay())},e.manualAutoplay_=function(t){var n=this;if(this.tech_&&"string"==typeof t){function e(){var e=n.muted();function t(){n.muted(e)}n.muted(!0),n.playTerminatedQueue_.push(t);var i=n.play();if(St(i))return i.catch(t)}var i;if("any"===t&&!0!==this.muted()?St(i=this.play())&&(i=i.catch(e)):i="muted"===t&&!0!==this.muted()?e():this.play(),St(i))return i.then(function(){n.trigger({type:"autoplay-success",autoplay:t})}).catch(function(e){n.trigger({type:"autoplay-failure",autoplay:t})})}},e.updateSourceCaches_=function(e){void 0===e&&(e="");var t=e,i="";"string"!=typeof t&&(t=e.src,i=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!i&&(i=function(e,t){if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;var i=e.cache_.sources.filter(function(e){return e.src===t});if(i.length)return i[0].type;for(var n=e.$$("source"),r=0;r<n.length;r++){var a=n[r];if(a.type&&a.src&&a.src===t)return a.type}return Sr(t)}(this,t)),this.cache_.source=Le({},e,{src:t,type:i});for(var n=this.cache_.sources.filter(function(e){return e.src&&e.src===t}),r=[],a=this.$$("source"),o=[],s=0;s<a.length;s++){var l=x(a[s]);r.push(l),l.src&&l.src===t&&o.push(l.src)}o.length&&!n.length?this.cache_.sources=r:n.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t},e.handleTechSourceset_=function(e){var i=this;if(!this.changingSrc_){var t=function(e){return i.updateSourceCaches_(e)},n=this.currentSource().src,r=e.src;n&&!/^blob:/.test(n)&&/^blob:/.test(r)&&(this.lastSource_&&(this.lastSource_.tech===r||this.lastSource_.player===n)||(t=function(){})),t(r),e.src||this.tech_.any(["sourceset","loadstart"],function(e){if("sourceset"!==e.type){var t=i.techGet("currentSrc");i.lastSource_.tech=t,i.updateSourceCaches_(t)}})}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})},e.hasStarted=function(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},e.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},e.handleTechRateChange_=function(){0<this.tech_.playbackRate()&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(e){return e.callback(e.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},e.handleTechWaiting_=function(){var t=this;this.addClass("vjs-waiting"),this.trigger("waiting");var i=this.currentTime();this.on("timeupdate",function e(){i!==t.currentTime()&&(t.removeClass("vjs-waiting"),t.off("timeupdate",e))})},e.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},e.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},e.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},e.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},e.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},e.handleTechFirstPlay_=function(){this.options_.starttime&&(p.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},e.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},e.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},e.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},e.handleTechClick_=function(e){$(e)&&this.controls_&&(this.paused()?kt(this.play()):this.pause())},e.handleTechDoubleClick_=function(t){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(e){return e.contains(t.target)})||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,t):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},e.handleTechTap_=function(){this.userActive(!this.userActive())},e.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},e.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},e.handleTechTouchEnd_=function(e){e.preventDefault()},e.handleStageClick_=function(){this.reportUserActivity()},e.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},e.documentFullscreenChange_=function(e){var t=this.el(),i=d[this.fsApi_.fullscreenElement]===t;!i&&t.matches?i=t.matches(":"+this.fsApi_.fullscreen):!i&&t.msMatchesSelector&&(i=t.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(i),!1===this.isFullscreen()&&ce(d,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.fsApi_.prefixed&&this.trigger("fullscreenchange")},e.handleTechFullscreenChange_=function(e,t){t&&this.isFullscreen(t.isFullscreen),this.trigger("fullscreenchange")},e.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},e.handleTechEnterPictureInPicture_=function(e){this.isInPictureInPicture(!0)},e.handleTechLeavePictureInPicture_=function(e){this.isInPictureInPicture(!1)},e.handleTechError_=function(){var e=this.tech_.error();this.error(e)},e.handleTechTextData_=function(e,t){var i=null;1<arguments.length&&(i=t),this.trigger("textdata",i)},e.getCache=function(){return this.cache_},e.resetCache_=function(){this.cache_={currentTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],volume:1}},e.techCall_=function(n,r){this.ready(function(){if(n in _r)return e=this.middleware_,t=this.tech_,i=r,t[n](e.reduce(wr(n),i));var e,t,i;if(n in Tr)return yr(this.middleware_,this.tech_,n,r);try{this.tech_&&this.tech_[n](r)}catch(e){throw p(e),e}},!0)},e.techGet_=function(t){if(this.tech_&&this.tech_.isReady_){if(t in br)return e=this.middleware_,i=this.tech_,e.reduceRight(wr(t),i[t]());if(t in Tr)return yr(this.middleware_,this.tech_,t);try{return this.tech_[t]()}catch(e){if(void 0===this.tech_[t])throw p("Video.js: "+t+" method not defined for "+this.techName_+" playback technology.",e),e;if("TypeError"===e.name)throw p("Video.js: "+t+" unavailable on "+this.techName_+" playback technology element.",e),this.tech_.isReady_=!1,e;throw p(e),e}}var e,i},e.play=function(){var t=this,e=this.options_.Promise||y.Promise;return e?new e(function(e){t.play_(e)}):this.play_()},e.play_=function(e){var t=this;void 0===e&&(e=kt),this.playCallbacks_.push(e);var i=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!i)return this.waitToPlay_=function(e){t.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(i||!st&&!Ye||this.load());var n=this.techGet_("play");null===n?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(n)},e.runPlayTerminatedQueue_=function(){var e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(e){e()})},e.runPlayCallbacks_=function(t){var e=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],e.forEach(function(e){e(t)})},e.pause=function(){this.techCall_("pause")},e.paused=function(){return!1!==this.techGet_("paused")},e.played=function(){return this.techGet_("played")||pt(0,0)},e.scrubbing=function(e){if(void 0===e)return this.scrubbing_;this.scrubbing_=!!e,e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},e.currentTime=function(e){return void 0!==e?(e<0&&(e=0),void this.techCall_("setCurrentTime",e)):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},e.duration=function(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(e=parseFloat(e))<0&&(e=1/0),e!==this.cache_.duration&&((this.cache_.duration=e)===1/0?(this.addClass("vjs-live"),this.options_.liveui&&this.player_.liveTracker&&this.addClass("vjs-liveui")):(this.removeClass("vjs-live"),this.removeClass("vjs-liveui")),isNaN(e)||this.trigger("durationchange"))},e.remainingTime=function(){return this.duration()-this.currentTime()},e.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},e.buffered=function(){var e=this.techGet_("buffered");return e&&e.length||(e=pt(0,0)),e},e.bufferedPercent=function(){return ft(this.buffered(),this.duration())},e.bufferedEnd=function(){var e=this.buffered(),t=this.duration(),i=e.end(e.length-1);return t<i&&(i=t),i},e.volume=function(e){var t;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),void(0<t&&this.lastVolume_(t))):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)},e.muted=function(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)},e.defaultMuted=function(e){return void 0!==e?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1},e.lastVolume_=function(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e},e.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},e.isFullscreen=function(e){return void 0!==e?(this.isFullscreen_=!!e,void this.toggleFullscreenClass_()):!!this.isFullscreen_},e.requestFullscreen=function(e){var t;this.isFullscreen(!0),this.fsApi_.requestFullscreen?(ue(d,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.fsApi_.prefixed||(t=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==e&&(t=e)),kt(this.el_[this.fsApi_.requestFullscreen](t))):this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange"))},e.exitFullscreen=function(){this.isFullscreen(!1),this.fsApi_.requestFullscreen?kt(d[this.fsApi_.exitFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange"))},e.enterFullWindow=function(){this.isFullWindow=!0,this.docOrigOverflow=d.documentElement.style.overflow,ue(d,"keydown",this.boundFullWindowOnEscKey_),d.documentElement.style.overflow="hidden",S(d.body,"vjs-full-window"),this.trigger("enterFullWindow")},e.fullWindowOnEscKey=function(e){xt.isEventKey(e,"Esc")&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())},e.exitFullWindow=function(){this.isFullWindow=!1,ce(d,"keydown",this.boundFullWindowOnEscKey_),d.documentElement.style.overflow=this.docOrigOverflow,k(d.body,"vjs-full-window"),this.trigger("exitFullWindow")},e.isInPictureInPicture=function(e){return void 0!==e?(this.isInPictureInPicture_=!!e,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},e.requestPictureInPicture=function(){if("pictureInPictureEnabled"in d)return this.techGet_("requestPictureInPicture")},e.exitPictureInPicture=function(){if("pictureInPictureEnabled"in d)return d.exitPictureInPicture()},e.handleKeyDown=function(e){var t,i,n=this.options_.userActions;n&&n.hotkeys&&(t=this.el_.ownerDocument.activeElement,i=t.tagName.toLowerCase(),t.isContentEditable||("input"===i?-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(t.type):-1!==["textarea"].indexOf(i))||("function"==typeof n.hotkeys?n.hotkeys.call(this,e):this.handleHotkeys(e)))},e.handleHotkeys=function(e){var t=this.options_.userActions?this.options_.userActions.hotkeys:{},i=t.fullscreenKey,n=void 0===i?function(e){return xt.isEventKey(e,"f")}:i,r=t.muteKey,a=void 0===r?function(e){return xt.isEventKey(e,"m")}:r,o=t.playPauseKey,s=void 0===o?function(e){return xt.isEventKey(e,"k")||xt.isEventKey(e,"Space")}:o;if(n.call(this,e)){e.preventDefault(),e.stopPropagation();var l=Ne.getComponent("FullscreenToggle");!1!==d[this.fsApi_.fullscreenEnabled]&&l.prototype.handleClick.call(this,e)}else a.call(this,e)?(e.preventDefault(),e.stopPropagation(),Ne.getComponent("MuteToggle").prototype.handleClick.call(this,e)):s.call(this,e)&&(e.preventDefault(),e.stopPropagation(),Ne.getComponent("PlayToggle").prototype.handleClick.call(this,e))},e.canPlayType=function(e){for(var t,i=0,n=this.options_.techOrder;i<n.length;i++){var r=n[i],a=pr.getTech(r);if(a=a||Ne.getComponent(r)){if(a.isSupported()&&(t=a.canPlayType(e)))return t}else p.error('The "'+r+'" tech is undefined. Skipped browser support check for that tech.')}return""},e.selectSource=function(e){function t(e,i,n){var r;return e.some(function(t){return i.some(function(e){if(r=n(t,e))return!0})}),r}function i(e,t){var i=e[0];if(e[1].canPlaySource(t,r.options_[i.toLowerCase()]))return{source:t,tech:i}}var n,r=this,a=this.options_.techOrder.map(function(e){return[e,pr.getTech(e)]}).filter(function(e){var t=e[0],i=e[1];return i?i.isSupported():(p.error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.'),!1)});return(this.options_.sourceOrder?t(e,a,(n=i,function(e,t){return n(t,e)})):t(a,e,i))||!1},e.src=function(e){var r=this;if(void 0===e)return this.cache_.src||"";var a=function t(e){if(Array.isArray(e)){var i=[];e.forEach(function(e){e=t(e),Array.isArray(e)?i=i.concat(e):o(e)&&i.push(e)}),e=i}else e="string"==typeof e&&e.trim()?[Cr({src:e})]:o(e)&&"string"==typeof e.src&&e.src&&e.src.trim()?[Cr(e)]:[];return e}(e);a.length?(this.changingSrc_=!0,this.cache_.sources=a,this.updateSourceCaches_(a[0]),vr(this,a[0],function(e,t){if(r.middleware_=t,r.cache_.sources=a,r.updateSourceCaches_(e),r.src_(e))return 1<a.length?r.src(a.slice(1)):(r.changingSrc_=!1,r.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),void r.triggerReady());var i,n;i=t,n=r.tech_,i.forEach(function(e){return e.setTech&&e.setTech(n)})})):this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0)},e.src_=function(e){var t,i,n=this,r=this.selectSource([e]);return!r||(t=r.tech,i=this.techName_,Oe(t)===Oe(i)?this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0):(this.changingSrc_=!0,this.loadTech_(r.tech,r.source),this.tech_.ready(function(){n.changingSrc_=!1})),!1)},e.load=function(){this.techCall_("load")},e.reset=function(){var e=this,t=this.options_.Promise||y.Promise;this.paused()||!t?this.doReset_():kt(this.play().then(function(){return e.doReset_()}))},e.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),Ce(this)&&this.trigger("playerreset")},e.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},e.resetProgressBar_=function(){this.currentTime(0);var e=this.controlBar,t=e.durationDisplay,i=e.remainingTimeDisplay;t&&t.updateContent(),i&&i.updateContent()},e.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},e.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},e.currentSources=function(){var e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t},e.currentSource=function(){return this.cache_.source||{}},e.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},e.currentType=function(){return this.currentSource()&&this.currentSource().type||""},e.preload=function(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")},e.autoplay=function(e){if(void 0===e)return this.options_.autoplay||!1;var t;"string"==typeof e&&/(any|play|muted)/.test(e)?(this.options_.autoplay=e,this.manualAutoplay_(e),t=!1):this.options_.autoplay=!!e,t=void 0===t?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)},e.playsinline=function(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")},e.loop=function(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")},e.poster=function(e){if(void 0===e)return this.poster_;(e=e||"")!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))},e.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},e.controls=function(e){if(void 0===e)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},e.usingNativeControls=function(e){if(void 0===e)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},e.error=function(e){if(void 0===e)return this.error_||null;if(this.options_.suppressNotSupportedError&&e&&e.message&&e.message===this.localize(this.options_.notSupportedMessage)){function t(){this.error(e)}return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],t),void this.one("loadstart",function(){this.off(["click","touchstart"],t)})}if(null===e)return this.error_=e,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new Tt(e),this.addClass("vjs-error"),p.error("(CODE:"+this.error_.code+" "+Tt.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error")},e.reportUserActivity=function(e){this.userActivity_=!0},e.userActive=function(e){if(void 0===e)return this.userActive_;if((e=!!e)!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(e){e.stopPropagation(),e.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},e.listenForUserActivity_=function(){var t,i,n,r=fe(this,this.reportUserActivity);this.on("mousedown",function(){r(),this.clearInterval(t),t=this.setInterval(r,250)}),this.on("mousemove",function(e){e.screenX===i&&e.screenY===n||(i=e.screenX,n=e.screenY,r())}),this.on("mouseup",function(e){r(),this.clearInterval(t)});var a,e=this.getChild("controlBar");!e||Ye||Je||(e.on("mouseenter",function(e){this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout,this.player().options_.inactivityTimeout=0}),e.on("mouseleave",function(e){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",r),this.on("keyup",r),this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(a);var e=this.options_.inactivityTimeout;e<=0||(a=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},e))}},250)},e.playbackRate=function(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)},e.defaultPlaybackRate=function(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},e.isAudio=function(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e},e.addTextTrack=function(e,t,i){if(this.tech_)return this.tech_.addTextTrack(e,t,i)},e.addRemoteTextTrack=function(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)},e.removeRemoteTextTrack=function(e){void 0===e&&(e={});var t=e.track;if(t=t||e,this.tech_)return this.tech_.removeRemoteTextTrack(t)},e.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},e.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},e.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},e.language=function(e){if(void 0===e)return this.language_;this.language_=String(e).toLowerCase()},e.languages=function(){return Le(u.prototype.options_.languages,this.languages_)},e.toJSON=function(){var e=Le(this.options_),t=e.tracks;e.tracks=[];for(var i=0;i<t.length;i++){var n=t[i];(n=Le(n)).player=void 0,e.tracks[i]=n}return e},e.createModal=function(e,t){var i=this;(t=t||{}).content=e||"";var n=new It(this,t);return this.addChild(n),n.on("dispose",function(){i.removeChild(n)}),n.open(),n},e.updateCurrentBreakpoint_=function(){if(this.responsive())for(var e=this.currentBreakpoint(),t=this.currentWidth(),i=0;i<Eo.length;i++){var n=Eo[i];if(t<=this.breakpoints_[n]){if(e===n)return;e&&this.removeClass(xo[e]),this.addClass(xo[n]),this.breakpoint_=n;break}}},e.removeCurrentBreakpoint_=function(){var e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)},e.breakpoints=function(e){return void 0===e||(this.breakpoint_="",this.breakpoints_=g({},Ao,e),this.updateCurrentBreakpoint_()),g(this.breakpoints_)},e.responsive=function(e){return void 0===e?this.responsive_:(e=Boolean(e))!==this.responsive_?((this.responsive_=e)?(this.on("playerresize",this.updateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.updateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e):void 0},e.currentBreakpoint=function(){return this.breakpoint_},e.currentBreakpointClass=function(){return xo[this.breakpoint_]||""},e.loadMedia=function(e,t){var i=this;if(e&&"object"==typeof e){this.reset(),this.cache_.media=Le(e);var n=this.cache_.media,r=n.artwork,a=n.poster,o=n.src,s=n.textTracks;!r&&a&&(this.cache_.media.artwork=[{src:a,type:Sr(a)}]),o&&this.src(o),a&&this.poster(a),Array.isArray(s)&&s.forEach(function(e){return i.addRemoteTextTrack(e,!1)}),this.ready(t)}},e.getMedia=function(){if(this.cache_.media)return Le(this.cache_.media);var e=this.poster(),t={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),function(e){return{kind:e.kind,label:e.label,language:e.language,src:e.src}})};return e&&(t.poster=e,t.artwork=[{src:t.poster,type:Sr(t.poster)}]),t},u.getTagSettings=function(e){var t={sources:[],tracks:[]},i=x(e),n=i["data-setup"];if(w(e,"vjs-fill")&&(i.fill=!0),w(e,"vjs-fluid")&&(i.fluid=!0),null!==n){var r=function(e,t){var i,n=null;try{i=JSON.parse(e,t)}catch(e){n=e}return[n,i]}(n||"{}"),a=r[0],o=r[1];a&&p.error(a),g(i,o)}if(g(t,i),e.hasChildNodes())for(var s=e.childNodes,l=0,u=s.length;l<u;l++){var c=s[l],d=c.nodeName.toLowerCase();"source"===d?t.sources.push(x(c)):"track"===d&&t.tracks.push(x(c))}return t},e.flexNotSupported_=function(){var e=d.createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},u}(Ne);jn.names.forEach(function(e){var t=jn[e];Io.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}}),Io.players={};var Po=y.navigator;function Oo(e){return Bo.hasOwnProperty(e)}function Lo(e){return Oo(e)?Bo[e]:void 0}function Do(e,t){e[Uo]=e[Uo]||{},e[Uo][t]=!0}function No(e,t,i){var n=(i?"before":"")+"pluginsetup";e.trigger(n,t),e.trigger(n+":"+t.name,t)}function Mo(r,a){return a.prototype.name=r,function(){No(this,{name:r,plugin:a,instance:null},!0);for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=Ue(a,[this].concat(t));return this[r]=function(){return n},No(this,n.getEventHash()),n}}Io.prototype.options_={techOrder:pr.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Po&&(Po.languages&&Po.languages[0]||Po.userLanguage||Po.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1},["ended","seeking","seekable","networkState","readyState"].forEach(function(e){Io.prototype[e]=function(){return this.techGet_(e)}}),ko.forEach(function(e){Io.prototype["handleTech"+Oe(e)+"_"]=function(){return this.trigger(e)}}),Ne.registerComponent("Player",Io);var Ro,jo="plugin",Uo="activePlugins_",Bo={},Fo=((Ro=$o.prototype).version=function(){return this.constructor.VERSION},Ro.getEventHash=function(e){return void 0===e&&(e={}),e.name=this.name,e.plugin=this.constructor,e.instance=this,e},Ro.trigger=function(e,t){return void 0===t&&(t={}),de(this.eventBusEl_,e,this.getEventHash(t))},Ro.handleStateChanged=function(e){},Ro.dispose=function(){var e=this.name,t=this.player;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[Uo][e]=!1,this.player=this.state=null,t[e]=Mo(e,Bo[e])},$o.isBasic=function(e){var t="string"==typeof e?Lo(e):e;return"function"==typeof t&&!$o.prototype.isPrototypeOf(t.prototype)},$o.registerPlugin=function(e,t){if("string"!=typeof e)throw new Error('Illegal plugin name, "'+e+'", must be a string, was '+typeof e+".");if(Oo(e))p.warn('A plugin named "'+e+'" already exists. You may want to avoid re-registering plugins!');else if(Io.prototype.hasOwnProperty(e))throw new Error('Illegal plugin name, "'+e+'", cannot share a name with an existing player method!');if("function"!=typeof t)throw new Error('Illegal plugin for "'+e+'", must be a function, was '+typeof t+".");return Bo[e]=t,e!==jo&&($o.isBasic(t)?Io.prototype[e]=(n=e,r=t,Object.keys(r).forEach(function(e){i[e]=r[e]}),i):Io.prototype[e]=Mo(e,t)),t;function i(){No(this,{name:n,plugin:r,instance:null},!0);var e=r.apply(this,arguments);return Do(this,n),No(this,{name:n,plugin:r,instance:e}),e}var n,r},$o.deregisterPlugin=function(e){if(e===jo)throw new Error("Cannot de-register base plugin.");Oo(e)&&(delete Bo[e],delete Io.prototype[e])},$o.getPlugins=function(e){var i;return void 0===e&&(e=Object.keys(Bo)),e.forEach(function(e){var t=Lo(e);t&&((i=i||{})[e]=t)}),i},$o.getPluginVersion=function(e){var t=Lo(e);return t&&t.VERSION||""},$o);function $o(e){if(this.constructor===$o)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,xe(this),delete this.trigger,Ie(this,this.constructor.defaultState),Do(e,this.name),this.dispose=fe(this,this.dispose),e.on("dispose",this.dispose)}Fo.getPlugin=Lo,Fo.BASE_PLUGIN_NAME=jo,Fo.registerPlugin(jo,Fo),Io.prototype.usingPlugin=function(e){return!!this[Uo]&&!0===this[Uo][e]},Io.prototype.hasPlugin=function(e){return!!Oo(e)};var Ho=function(e){return 0===e.indexOf("#")?e.slice(1):e};function qo(e,i,t){var n=qo.getPlayer(e);if(n)return i&&p.warn('Player "'+e+'" is already initialised. Options will not be applied.'),t&&n.ready(t),n;var r="string"==typeof e?q("#"+Ho(e)):e;if(!m(r))throw new TypeError("The element or ID supplied is not valid. (videojs)");r.ownerDocument.defaultView&&r.ownerDocument.body.contains(r)||p.warn("The element supplied is not included in the DOM"),i=i||{},qo.hooks("beforesetup").forEach(function(e){var t=e(r,Le(i));o(t)&&!Array.isArray(t)?i=Le(i,t):p.error("please return an object in beforesetup hooks")});var a=Ne.getComponent("Player");return n=new a(r,i,t),qo.hooks("setup").forEach(function(e){return e(n)}),n}if(qo.hooks_={},qo.hooks=function(e,t){return qo.hooks_[e]=qo.hooks_[e]||[],t&&(qo.hooks_[e]=qo.hooks_[e].concat(t)),qo.hooks_[e]},qo.hook=function(e,t){qo.hooks(e,t)},qo.hookOnce=function(i,e){qo.hooks(i,[].concat(e).map(function(t){return function e(){return qo.removeHook(i,e),t.apply(void 0,arguments)}}))},qo.removeHook=function(e,t){var i=qo.hooks(e).indexOf(t);return!(i<=-1||(qo.hooks_[e]=qo.hooks_[e].slice(),qo.hooks_[e].splice(i,1),0))},!0!==y.VIDEOJS_NO_DYNAMIC_STYLE&&c()){var Wo=q(".vjs-styles-defaults");if(!Wo){Wo=Y("vjs-styles-defaults");var Vo=q("head");Vo&&Vo.insertBefore(Wo,Vo.firstChild),Q(Wo,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}X(1,qo),qo.VERSION=h,qo.options=Io.prototype.options_,qo.getPlayers=function(){return Io.players},qo.getPlayer=function(e){var t,i=Io.players;if("string"==typeof e){var n=Ho(e),r=i[n];if(r)return r;t=q("#"+n)}else t=e;if(m(t)){var a=t.player,o=t.playerId;if(a||i[o])return a||i[o]}},qo.getAllPlayers=function(){return Object.keys(Io.players).map(function(e){return Io.players[e]}).filter(Boolean)},qo.players=Io.players,qo.getComponent=Ne.getComponent,qo.registerComponent=function(e,t){pr.isTech(t)&&p.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),Ne.registerComponent.call(Ne,e,t)},qo.getTech=pr.getTech,qo.registerTech=pr.registerTech,qo.use=function(e,t){fr[e]=fr[e]||[],fr[e].push(t)},Object.defineProperty(qo,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(qo.middleware,"TERMINATOR",{value:mr,writeable:!1,enumerable:!0}),qo.browser=ct,qo.TOUCH_ENABLED=ut,qo.extend=function(e,t){void 0===t&&(t={});var i=function(){e.apply(this,arguments)},n={};for(var r in"object"==typeof t?(t.constructor!==Object.prototype.constructor&&(i=t.constructor),n=t):"function"==typeof t&&(i=t),function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.super_=t)}(i,e),n)n.hasOwnProperty(r)&&(i.prototype[r]=n[r]);return i},qo.mergeOptions=Le,qo.bind=fe,qo.registerPlugin=Fo.registerPlugin,qo.deregisterPlugin=Fo.deregisterPlugin,qo.plugin=function(e,t){return p.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Fo.registerPlugin(e,t)},qo.getPlugins=Fo.getPlugins,qo.getPlugin=Fo.getPlugin,qo.getPluginVersion=Fo.getPluginVersion,qo.addLanguage=function(e,t){var i;return e=(""+e).toLowerCase(),qo.options.languages=Le(qo.options.languages,((i={})[e]=t,i)),qo.options.languages[e]},qo.log=p,qo.createLogger=f,qo.createTimeRange=qo.createTimeRanges=pt,qo.formatTime=Vr,qo.setFormatTime=function(e){Wr=e},qo.resetFormatTime=function(){Wr=qr},qo.parseUrl=Nt,qo.isCrossOrigin=jt,qo.EventTarget=me,qo.on=ue,qo.one=he,qo.off=ce,qo.trigger=de,qo.xhr=_n,qo.TextTrack=Cn,qo.AudioTrack=In,qo.VideoTrack=Pn,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(e){qo[e]=function(){return p.warn("videojs."+e+"() is deprecated; use videojs.dom."+e+"() instead"),V[e].apply(null,arguments)}}),qo.computedStyle=n,qo.dom=V,qo.url=Qt;var zo=Et(function(e,t){var i,c,n,r,d;i=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,c=/^([^\/?#]*)(.*)$/,n=/(?:\/|^)\.(?=\/)/g,r=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,d={buildAbsoluteURL:function(e,t,i){if(i=i||{},e=e.trim(),!(t=t.trim())){if(!i.alwaysNormalize)return e;var n=d.parseURL(e);if(!n)throw new Error("Error trying to parse base URL.");return n.path=d.normalizePath(n.path),d.buildURLFromParts(n)}var r=d.parseURL(t);if(!r)throw new Error("Error trying to parse relative URL.");if(r.scheme)return i.alwaysNormalize?(r.path=d.normalizePath(r.path),d.buildURLFromParts(r)):t;var a=d.parseURL(e);if(!a)throw new Error("Error trying to parse base URL.");if(!a.netLoc&&a.path&&"/"!==a.path[0]){var o=c.exec(a.path);a.netLoc=o[1],a.path=o[2]}a.netLoc&&!a.path&&(a.path="/");var s={scheme:a.scheme,netLoc:r.netLoc,path:null,params:r.params,query:r.query,fragment:r.fragment};if(!r.netLoc&&(s.netLoc=a.netLoc,"/"!==r.path[0]))if(r.path){var l=a.path,u=l.substring(0,l.lastIndexOf("/")+1)+r.path;s.path=d.normalizePath(u)}else s.path=a.path,r.params||(s.params=a.params,r.query||(s.query=a.query));return null===s.path&&(s.path=i.alwaysNormalize?d.normalizePath(r.path):r.path),d.buildURLFromParts(s)},parseURL:function(e){var t=i.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(n,"");e.length!==(e=e.replace(r,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=d});function Go(){return(Go=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function Xo(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function Ko(e){for(var t,i=e.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),n={},r=i.length;r--;)""!==i[r]&&((t=/([^=]*)=(.*)/.exec(i[r]).slice(1))[0]=t[0].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^['"](.*)['"]$/g,"$1"),n[t[0]]=t[1]);return n}var Yo,Qo,Jo=((Qo=is.prototype).on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},Qo.off=function(e,t){if(!this.listeners[e])return!1;var i=this.listeners[e].indexOf(t);return this.listeners[e].splice(i,1),-1<i},Qo.trigger=function(e,t){var i,n,r,a=this.listeners[e];if(a)if(2===arguments.length)for(n=a.length,i=0;i<n;++i)a[i].call(this,t);else for(r=Array.prototype.slice.call(arguments,1),n=a.length,i=0;i<n;++i)a[i].apply(this,r)},Qo.dispose=function(){this.listeners={}},Qo.pipe=function(t){this.on("data",function(e){t.push(e)})},is),Zo=(Xo(ts,Yo=Jo),ts.prototype.push=function(e){var t;for(this.buffer+=e,t=this.buffer.indexOf("\n");-1<t;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},ts),es=function(t){function e(){var e;return(e=t.call(this)||this).customParsers=[],e.tagMappers=[],e}Xo(e,t);var i=e.prototype;return i.push=function(n){var l,u,c=this;0!==(n=n.trim()).length&&("#"===n[0]?this.tagMappers.reduce(function(e,t){var i=t(n);return i===n?e:e.concat([i])},[n]).forEach(function(e){for(var t=0;t<c.customParsers.length;t++)if(c.customParsers[t].call(c,e))return;if(0===e.indexOf("#EXT"))if(e=e.replace("\r",""),l=/^#EXTM3U/.exec(e))c.trigger("data",{type:"tag",tagType:"m3u"});else{if(l=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e))return u={type:"tag",tagType:"inf"},l[1]&&(u.duration=parseFloat(l[1])),l[2]&&(u.title=l[2]),void c.trigger("data",u);if(l=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e))return u={type:"tag",tagType:"targetduration"},l[1]&&(u.duration=parseInt(l[1],10)),void c.trigger("data",u);if(l=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(e))return u={type:"tag",tagType:"totalduration"},l[1]&&(u.duration=parseInt(l[1],10)),void c.trigger("data",u);if(l=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e))return u={type:"tag",tagType:"version"},l[1]&&(u.version=parseInt(l[1],10)),void c.trigger("data",u);if(l=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return u={type:"tag",tagType:"media-sequence"},l[1]&&(u.number=parseInt(l[1],10)),void c.trigger("data",u);if(l=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return u={type:"tag",tagType:"discontinuity-sequence"},l[1]&&(u.number=parseInt(l[1],10)),void c.trigger("data",u);if(l=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e))return u={type:"tag",tagType:"playlist-type"},l[1]&&(u.playlistType=l[1]),void c.trigger("data",u);if(l=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(e))return u={type:"tag",tagType:"byterange"},l[1]&&(u.length=parseInt(l[1],10)),l[2]&&(u.offset=parseInt(l[2],10)),void c.trigger("data",u);if(l=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e))return u={type:"tag",tagType:"allow-cache"},l[1]&&(u.allowed=!/NO/.test(l[1])),void c.trigger("data",u);if(l=/^#EXT-X-MAP:?(.*)$/.exec(e)){if(u={type:"tag",tagType:"map"},l[1]){var i=Ko(l[1]);if(i.URI&&(u.uri=i.URI),i.BYTERANGE){var n=i.BYTERANGE.split("@"),r=n[0],a=n[1];u.byterange={},r&&(u.byterange.length=parseInt(r,10)),a&&(u.byterange.offset=parseInt(a,10))}}c.trigger("data",u)}else if(l=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e)){if(u={type:"tag",tagType:"stream-inf"},l[1]){if(u.attributes=Ko(l[1]),u.attributes.RESOLUTION){var o=u.attributes.RESOLUTION.split("x"),s={};o[0]&&(s.width=parseInt(o[0],10)),o[1]&&(s.height=parseInt(o[1],10)),u.attributes.RESOLUTION=s}u.attributes.BANDWIDTH&&(u.attributes.BANDWIDTH=parseInt(u.attributes.BANDWIDTH,10)),u.attributes["PROGRAM-ID"]&&(u.attributes["PROGRAM-ID"]=parseInt(u.attributes["PROGRAM-ID"],10))}c.trigger("data",u)}else{if(l=/^#EXT-X-MEDIA:?(.*)$/.exec(e))return u={type:"tag",tagType:"media"},l[1]&&(u.attributes=Ko(l[1])),void c.trigger("data",u);if(l=/^#EXT-X-ENDLIST/.exec(e))c.trigger("data",{type:"tag",tagType:"endlist"});else if(l=/^#EXT-X-DISCONTINUITY/.exec(e))c.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(l=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e))return u={type:"tag",tagType:"program-date-time"},l[1]&&(u.dateTimeString=l[1],u.dateTimeObject=new Date(l[1])),void c.trigger("data",u);if(l=/^#EXT-X-KEY:?(.*)$/.exec(e))return u={type:"tag",tagType:"key"},l[1]&&(u.attributes=Ko(l[1]),u.attributes.IV&&("0x"===u.attributes.IV.substring(0,2).toLowerCase()&&(u.attributes.IV=u.attributes.IV.substring(2)),u.attributes.IV=u.attributes.IV.match(/.{8}/g),u.attributes.IV[0]=parseInt(u.attributes.IV[0],16),u.attributes.IV[1]=parseInt(u.attributes.IV[1],16),u.attributes.IV[2]=parseInt(u.attributes.IV[2],16),u.attributes.IV[3]=parseInt(u.attributes.IV[3],16),u.attributes.IV=new Uint32Array(u.attributes.IV))),void c.trigger("data",u);if(l=/^#EXT-X-START:?(.*)$/.exec(e))return u={type:"tag",tagType:"start"},l[1]&&(u.attributes=Ko(l[1]),u.attributes["TIME-OFFSET"]=parseFloat(u.attributes["TIME-OFFSET"]),u.attributes.PRECISE=/YES/.test(u.attributes.PRECISE)),void c.trigger("data",u);if(l=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e))return u={type:"tag",tagType:"cue-out-cont"},l[1]?u.data=l[1]:u.data="",void c.trigger("data",u);if(l=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(e))return u={type:"tag",tagType:"cue-out"},l[1]?u.data=l[1]:u.data="",void c.trigger("data",u);if(l=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e))return u={type:"tag",tagType:"cue-in"},l[1]?u.data=l[1]:u.data="",void c.trigger("data",u);c.trigger("data",{type:"tag",data:e.slice(4)})}}}else c.trigger("data",{type:"comment",text:e.slice(1)})}):this.trigger("data",{type:"uri",uri:n}))},i.addParser=function(e){var t=this,i=e.expression,n=e.customType,r=e.dataParser,a=e.segment;"function"!=typeof r&&(r=function(e){return e}),this.customParsers.push(function(e){if(i.exec(e))return t.trigger("data",{type:"custom",data:r(e),customType:n,segment:a}),!0})},i.addTagMapper=function(e){var t=e.expression,i=e.map;this.tagMappers.push(function(e){return t.test(e)?i(e):e})},e}(Jo);function ts(){var e;return(e=Yo.call(this)||this).buffer="",e}function is(){this.listeners={}}function ns(e){return e&&"object"==typeof e}function rs(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.reduce(function(t,i){return Object.keys(i).forEach(function(e){Array.isArray(t[e])&&Array.isArray(i[e])?t[e]=t[e].concat(i[e]):ns(t[e])&&ns(i[e])?t[e]=rs(t[e],i[e]):t[e]=i[e]}),t},{})}function as(e){return e.reduce(function(e,t){return e.concat(t)},[])}function os(e){if(!e.length)return[];for(var t=[],i=0;i<e.length;i++)t.push(e[i]);return t}var ss=function(t){function e(){var e;(e=t.call(this)||this).lineStream=new Zo,e.parseStream=new es,e.lineStream.pipe(e.parseStream);var r,a,o=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e),s=[],l={},u={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},c=0;return e.manifest={allowCache:!0,discontinuityStarts:[],segments:[]},e.parseStream.on("data",function(t){var i,n;({tag:function(){({"allow-cache":function(){this.manifest.allowCache=t.allowed,"allowed"in t||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var e={};"length"in t&&((l.byterange=e).length=t.length,"offset"in t||(this.trigger("info",{message:"defaulting offset to zero"}),t.offset=0)),"offset"in t&&((l.byterange=e).offset=t.offset)},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),0<t.duration&&(l.duration=t.duration),0===t.duration&&(l.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=s},key:function(){if(t.attributes)if("NONE"!==t.attributes.METHOD)if(t.attributes.URI){if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===t.attributes.KEYFORMAT)return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(t.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===t.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==t.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):t.attributes.KEYID&&"0x"===t.attributes.KEYID.substring(0,2)?void(this.manifest.contentProtection={"com.widevine.alpha":{attributes:{schemeIdUri:t.attributes.KEYFORMAT,keyId:t.attributes.KEYID.substring(2)},pssh:function(e){for(var t=y.atob(e||""),i=new Uint8Array(t.length),n=0;n<t.length;n++)i[n]=t.charCodeAt(n);return i}(t.attributes.URI.split(",")[1])}}):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}));t.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),a={method:t.attributes.METHOD||"AES-128",uri:t.attributes.URI},void 0!==t.attributes.IV&&(a.iv=t.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else a=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(t.number)?this.manifest.mediaSequence=t.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+t.number})},"discontinuity-sequence":function(){isFinite(t.number)?(this.manifest.discontinuitySequence=t.number,c=t.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+t.number})},"playlist-type":function(){/VOD|EVENT/.test(t.playlistType)?this.manifest.playlistType=t.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+t.playlist})},map:function(){r={},t.uri&&(r.uri=t.uri),t.byterange&&(r.byterange=t.byterange)},"stream-inf":function(){this.manifest.playlists=s,this.manifest.mediaGroups=this.manifest.mediaGroups||u,t.attributes?(l.attributes||(l.attributes={}),Go(l.attributes,t.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||u,t.attributes&&t.attributes.TYPE&&t.attributes["GROUP-ID"]&&t.attributes.NAME){var e=this.manifest.mediaGroups[t.attributes.TYPE];e[t.attributes["GROUP-ID"]]=e[t.attributes["GROUP-ID"]]||{},i=e[t.attributes["GROUP-ID"]],(n={default:/yes/i.test(t.attributes.DEFAULT)}).default?n.autoselect=!0:n.autoselect=/yes/i.test(t.attributes.AUTOSELECT),t.attributes.LANGUAGE&&(n.language=t.attributes.LANGUAGE),t.attributes.URI&&(n.uri=t.attributes.URI),t.attributes["INSTREAM-ID"]&&(n.instreamId=t.attributes["INSTREAM-ID"]),t.attributes.CHARACTERISTICS&&(n.characteristics=t.attributes.CHARACTERISTICS),t.attributes.FORCED&&(n.forced=/yes/i.test(t.attributes.FORCED)),i[t.attributes.NAME]=n}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){c+=1,l.discontinuity=!0,this.manifest.discontinuityStarts.push(s.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=t.dateTimeString,this.manifest.dateTimeObject=t.dateTimeObject),l.dateTimeString=t.dateTimeString,l.dateTimeObject=t.dateTimeObject},targetduration:function(){!isFinite(t.duration)||t.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+t.duration}):this.manifest.targetDuration=t.duration},totalduration:function(){!isFinite(t.duration)||t.duration<0?this.trigger("warn",{message:"ignoring invalid total duration: "+t.duration}):this.manifest.totalDuration=t.duration},start:function(){t.attributes&&!isNaN(t.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:t.attributes["TIME-OFFSET"],precise:t.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){l.cueOut=t.data},"cue-out-cont":function(){l.cueOutCont=t.data},"cue-in":function(){l.cueIn=t.data}}[t.tagType]||function(){}).call(o)},uri:function(){l.uri=t.uri,s.push(l),!this.manifest.targetDuration||"duration"in l||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),l.duration=this.manifest.targetDuration),a&&(l.key=a),l.timeline=c,r&&(l.map=r),l={}},comment:function(){},custom:function(){t.segment?(l.custom=l.custom||{},l.custom[t.customType]=t.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[t.customType]=t.data)}})[t.type].call(o)}),e}Xo(e,t);var i=e.prototype;return i.push=function(e){this.lineStream.push(e)},i.end=function(){this.lineStream.push("\n")},i.addParser=function(e){this.parseStream.addParser(e)},i.addTagMapper=function(e){this.parseStream.addTagMapper(e)},e}(Jo),ls="INVALID_NUMBER_OF_PERIOD",us="DASH_EMPTY_MANIFEST",cs="DASH_INVALID_XML",ds="NO_BASE_URL",hs="SEGMENT_TIME_UNSPECIFIED";function ps(e,t){return/^[a-z]+:/i.test(t)?t:(/\/\//i.test(e)||(e=Us.buildAbsoluteURL(y.location.href,e)),Us.buildAbsoluteURL(e,t))}function fs(e){var t=e.baseUrl,i=void 0===t?"":t,n=e.source,r=void 0===n?"":n,a=e.range,o=void 0===a?"":a,s=e.indexRange,l=void 0===s?"":s,u={uri:r,resolvedUri:ps(i||"",r)};if(o||l){var c=(o||l).split("-"),d=parseInt(c[0],10),h=parseInt(c[1],10);u.byterange={length:h-d+1,offset:d}}return u}function gs(e){var s,t=e.type,i=void 0===t?"static":t,n=e.duration,r=e.timescale,a=void 0===r?1:r,o=e.sourceDuration,l=Bs[i](e),u=function(e,t){for(var i=[],n=e;n<t;n++)i.push(n);return i}(l.start,l.end).map((s=e,function(e,t){var i=s.duration,n=s.timescale,r=void 0===n?1:n,a=s.periodIndex,o=s.startNumber;return{number:(void 0===o?1:o)+e,duration:i/r,timeline:a,time:t*i}}));if("static"===i){var c=u.length-1;u[c].duration=o-n/a*c}return u}function ms(e){var t=e.baseUrl,i=e.initialization,n=void 0===i?{}:i,r=e.sourceDuration,a=e.timescale,o=void 0===a?1:a,s=e.indexRange,l=void 0===s?"":s,u=e.duration;if(!t)throw new Error(ds);var c=fs({baseUrl:t,source:n.sourceURL,range:n.range}),d=fs({baseUrl:t,source:t,indexRange:l});if(d.map=c,u){var h=gs(e);h.length&&(d.duration=h[0].duration,d.timeline=h[0].timeline)}else r&&(d.duration=r/o,d.timeline=0);return d.number=0,[d]}function vs(e,t,i){for(var n=e.sidx.map?e.sidx.map:null,r=e.sidx.duration,a=e.timeline||0,o=e.sidx.byterange,s=o.offset+o.length,l=t.timescale,u=t.references.filter(function(e){return 1!==e.referenceType}),c=[],d=s+t.firstOffset,h=0;h<u.length;h++){var p=t.references[h],f=p.referencedSize,g=ms({baseUrl:i,timescale:l,timeline:a,periodIndex:a,duration:p.subsegmentDuration,sourceDuration:r,indexRange:d+"-"+(d+f-1)})[0];n&&(g.map=n),c.push(g),d+=f}return e.segments=c,e}function ys(e){return t=e.reduce(function(e,t){var i,n=t.attributes.id+(t.attributes.lang||"");return e[n]?(t.segments[0]&&(t.segments[0].discontinuity=!0),(i=e[n].segments).push.apply(i,t.segments),t.attributes.contentProtection&&(e[n].attributes.contentProtection=t.attributes.contentProtection)):e[n]=t,e},{}),Object.keys(t).map(function(e){return t[e]}).map(function(e){return e.discontinuityStarts=e.segments.reduce(function(e,t,i){return t.discontinuity&&e.push(i),e},[]),e});var t}function bs(e,t){if(void 0===t&&(t={}),!Object.keys(t).length)return e;for(var i in e){var n=e[i];if(n.sidx){var r=n.sidx.uri+"-"+(s=(o=n.sidx.byterange).offset+o.length-1,o.offset+"-"+s),a=t[r]&&t[r].sidx;n.sidx&&a&&vs(n,a,n.sidx.resolvedUri)}}var o,s;return e}function _s(e){var t,i=e.attributes,n=e.segments,r=e.sidx,a={attributes:((t={NAME:i.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:i.width,height:i.height},CODECS:i.codecs,BANDWIDTH:i.bandwidth})["PROGRAM-ID"]=1,t),uri:"",endList:"static"===(i.type||"static"),timeline:i.periodIndex,resolvedUri:"",targetDuration:i.duration,segments:n,mediaSequence:n.length?n[0].number:1};return i.contentProtection&&(a.contentProtection=i.contentProtection),r&&(a.sidx=r),a}function Ts(e,t){var i;if(void 0===t&&(t={}),!e.length)return{};var o,n=e[0].attributes,r=n.sourceDuration,a=n.minimumUpdatePeriod,s=void 0===a?0:a,l=ys(e.filter(function(e){var t=e.attributes;return"video/mp4"===t.mimeType||"video"===t.contentType})).map(_s),u=ys(e.filter(function(e){var t=e.attributes;return"audio/mp4"===t.mimeType||"audio"===t.contentType})),c=e.filter(function(e){var t=e.attributes;return"text/vtt"===t.mimeType||"text"===t.contentType}),d={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:((i={AUDIO:{},VIDEO:{}})["CLOSED-CAPTIONS"]={},i.SUBTITLES={},i),uri:"",duration:r,playlists:bs(l,t),minimumUpdatePeriod:1e3*s};return u.length&&(d.mediaGroups.AUDIO.audio=function(d){var h;void 0===d&&(d={});var e=u.reduce(function(e,t){var i,n,r,a,o,s=t.attributes.role&&t.attributes.role.value||"",l=t.attributes.lang||"",u="main";if(l){var c=s?" ("+s+")":"";u=t.attributes.lang+c}return e[u]&&e[u].playlists[0].attributes.BANDWIDTH>t.attributes.bandwidth||(e[u]={language:l,autoselect:!0,default:"main"===s,playlists:bs([(n=t.attributes,r=t.segments,a=t.sidx,o={attributes:((i={NAME:n.id,BANDWIDTH:n.bandwidth,CODECS:n.codecs})["PROGRAM-ID"]=1,i),uri:"",endList:"static"===(n.type||"static"),timeline:n.periodIndex,resolvedUri:"",targetDuration:n.duration,segments:r,mediaSequence:r.length?r[0].number:1},n.contentProtection&&(o.contentProtection=n.contentProtection),a&&(o.sidx=a),o)],d),uri:""},void 0===h&&"main"===s&&((h=t).default=!0)),e},{});return h||(e[Object.keys(e)[0]].default=!0),e}(t)),c.length&&(d.mediaGroups.SUBTITLES.subs=(void 0===(o=t)&&(o={}),c.reduce(function(e,t){var i,n,r,a=t.attributes.lang||"text";return e[a]||(e[a]={language:a,default:!1,autoselect:!1,playlists:bs([(n=t.attributes,void 0===(r=t.segments)&&(r=[{uri:n.baseUrl,timeline:n.periodIndex,resolvedUri:n.baseUrl||"",duration:n.sourceDuration,number:0}],n.duration=n.sourceDuration),{attributes:((i={NAME:n.id,BANDWIDTH:n.bandwidth})["PROGRAM-ID"]=1,i),uri:"",endList:"static"===(n.type||"static"),timeline:n.periodIndex,resolvedUri:n.baseUrl||"",targetDuration:n.duration,segments:r,mediaSequence:r.length?r[0].number:1})],o),uri:""}),e},{}))),d}function ws(e,t){for(var i,n,r,a,o,s,l,u,c,d=e.type,h=void 0===d?"static":d,p=e.minimumUpdatePeriod,f=void 0===p?0:p,g=e.media,m=void 0===g?"":g,v=e.sourceDuration,y=e.timescale,b=void 0===y?1:y,_=e.startNumber,T=void 0===_?1:_,w=e.periodIndex,S=[],k=-1,C=0;C<t.length;C++){var E=t[C],x=E.d,A=E.r||0,I=E.t||0;k<0&&(k=I),I&&k<I&&(k=I);var P=void 0;if(A<0){var O=C+1;P=O===t.length?"dynamic"===h&&0<f&&0<m.indexOf("$Number$")?(i=e.NOW,n=e.clientOffset,r=e.availabilityStartTime,o=void 0===(a=e.timescale)?1:a,l=void 0===(s=e.start)?0:s,c=(i+n)/1e3+(void 0===(u=e.minimumUpdatePeriod)?0:u)-(r+l),Math.ceil((c*o-k)/x)):(v*b-k)/x:(t[O].t-k)/x}else P=A+1;for(var L=T+S.length+P,D=T+S.length;D<L;)S.push({number:D,duration:x/b,time:k,timeline:w}),k+=x,D++}return S}function Ss(e,t){return e.replace(Fs,(a=t,function(e,t,i,n){if("$$"===e)return"$";if(void 0===a[t])return e;var r=""+a[t];return"RepresentationID"===t||(n=i?parseInt(n,10):1)<=r.length?r:new Array(n-r.length+1).join("0")+r}));var a}function ks(i,e){var t,n,r={RepresentationID:i.id,Bandwidth:i.bandwidth||0},a=i.initialization,o=void 0===a?{sourceURL:"",range:""}:a,s=fs({baseUrl:i.baseUrl,source:Ss(o.sourceURL,r),range:o.range});return n=e,((t=i).duration||n?t.duration?gs(t):ws(t,n):[{number:t.startNumber||1,duration:t.sourceDuration,time:0,timeline:t.periodIndex}]).map(function(e){r.Number=e.number,r.Time=e.time;var t=Ss(i.media||"",r);return{uri:t,timeline:e.timeline,duration:e.duration,resolvedUri:ps(i.baseUrl||"",t),map:s,number:e.number}})}function Cs(s,e){var t=s.duration,i=s.segmentUrls,n=void 0===i?[]:i;if(!t&&!e||t&&e)throw new Error(hs);var r,a=n.map(function(e){return t=e,i=s.baseUrl,n=s.initialization,a=fs({baseUrl:i,source:(r=void 0===n?{}:n).sourceURL,range:r.range}),(o=fs({baseUrl:i,source:t.media,range:t.mediaRange})).map=a,o;var t,i,n,r,a,o});return t&&(r=gs(s)),e&&(r=ws(s,e)),r.map(function(e,t){if(a[t]){var i=a[t];return i.timeline=e.timeline,i.duration=e.duration,i.number=e.number,i}}).filter(function(e){return e})}function Es(e){var t,i,n=e.attributes,r=e.segmentInfo;r.template?(i=ks,t=rs(n,r.template)):r.base?(i=ms,t=rs(n,r.base)):r.list&&(i=Cs,t=rs(n,r.list));var a={attributes:n};if(!i)return a;var o=i(t,r.timeline);if(t.duration){var s=t.duration,l=t.timescale,u=void 0===l?1:l;t.duration=s/u}else o.length?t.duration=o.reduce(function(e,t){return Math.max(e,Math.ceil(t.duration))},0):t.duration=0;return a.attributes=t,a.segments=o,r.base&&t.indexRange&&(a.sidx=o[0],a.segments=[]),a}function xs(e,t){return os(e.childNodes).filter(function(e){return e.tagName===t})}function As(e){return e.textContent.trim()}function Is(e){var t=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(e);if(!t)return 0;var i=t.slice(1),n=i[0],r=i[1],a=i[2],o=i[3],s=i[4],l=i[5];return 31536e3*parseFloat(n||0)+2592e3*parseFloat(r||0)+86400*parseFloat(a||0)+3600*parseFloat(o||0)+60*parseFloat(s||0)+parseFloat(l||0)}function Ps(e){return e&&e.attributes?os(e.attributes).reduce(function(e,t){var i=$s[t.name]||$s.DEFAULT;return e[t.name]=i(t.value),e},{}):{}}var Os,Ls,Ds,Ns,Ms,Rs,js,Us=(Ls=Os={exports:{}},Ds=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,Ns=/^([^\/?#]*)(.*)$/,Ms=/(?:\/|^)\.(?=\/)/g,Rs=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,js={buildAbsoluteURL:function(e,t,i){if(i=i||{},e=e.trim(),!(t=t.trim())){if(!i.alwaysNormalize)return e;var n=js.parseURL(e);if(!n)throw new Error("Error trying to parse base URL.");return n.path=js.normalizePath(n.path),js.buildURLFromParts(n)}var r=js.parseURL(t);if(!r)throw new Error("Error trying to parse relative URL.");if(r.scheme)return i.alwaysNormalize?(r.path=js.normalizePath(r.path),js.buildURLFromParts(r)):t;var a=js.parseURL(e);if(!a)throw new Error("Error trying to parse base URL.");if(!a.netLoc&&a.path&&"/"!==a.path[0]){var o=Ns.exec(a.path);a.netLoc=o[1],a.path=o[2]}a.netLoc&&!a.path&&(a.path="/");var s={scheme:a.scheme,netLoc:r.netLoc,path:null,params:r.params,query:r.query,fragment:r.fragment};if(!r.netLoc&&(s.netLoc=a.netLoc,"/"!==r.path[0]))if(r.path){var l=a.path,u=l.substring(0,l.lastIndexOf("/")+1)+r.path;s.path=js.normalizePath(u)}else s.path=a.path,r.params||(s.params=a.params,r.query||(s.query=a.query));return null===s.path&&(s.path=i.alwaysNormalize?js.normalizePath(r.path):r.path),js.buildURLFromParts(s)},parseURL:function(e){var t=Ds.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(Ms,"");e.length!==(e=e.replace(Rs,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},Ls.exports=js,Os.exports),Bs={static:function(e){var t=e.duration,i=e.timescale,n=void 0===i?1:i,r=e.sourceDuration;return{start:0,end:Math.ceil(r/(t/n))}},dynamic:function(e){var t=e.NOW,i=e.clientOffset,n=e.availabilityStartTime,r=e.timescale,a=void 0===r?1:r,o=e.duration,s=e.start,l=void 0===s?0:s,u=e.minimumUpdatePeriod,c=void 0===u?0:u,d=e.timeShiftBufferDepth,h=void 0===d?1/0:d,p=(t+i)/1e3,f=n+l,g=p+c-f,m=Math.ceil(g*a/o),v=Math.floor((p-f-h)*a/o),y=Math.floor((p-f)*a/o);return{start:Math.max(0,v),end:Math.min(m,y)}}},Fs=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,$s={mediaPresentationDuration:function(e){return Is(e)},availabilityStartTime:function(e){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t=e)&&(t+="Z"),Date.parse(t)/1e3;var t},minimumUpdatePeriod:function(e){return Is(e)},timeShiftBufferDepth:function(e){return Is(e)},start:function(e){return Is(e)},width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},duration:function(e){var t=parseInt(e,10);return isNaN(t)?Is(e):t},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}};function Hs(e,i){return i.length?as(e.map(function(t){return i.map(function(e){return ps(t,As(e))})})):e}function qs(e){var t=xs(e,"SegmentTemplate")[0],i=xs(e,"SegmentList")[0],n=i&&xs(i,"SegmentURL").map(function(e){return rs({tag:"SegmentURL"},Ps(e))}),r=xs(e,"SegmentBase")[0],a=i||t,o=a&&xs(a,"SegmentTimeline")[0],s=i||r||t,l=s&&xs(s,"Initialization")[0],u=t&&Ps(t);u&&l?u.initialization=l&&Ps(l):u&&u.initialization&&(u.initialization={sourceURL:u.initialization});var c={template:u,timeline:o&&xs(o,"S").map(function(e){return Ps(e)}),list:i&&rs(Ps(i),{segmentUrls:n,initialization:Ps(l)}),base:r&&rs(Ps(r),{initialization:Ps(l)})};return Object.keys(c).forEach(function(e){c[e]||delete c[e]}),c}function Ws(h,p,f){return function(e){var t=Ps(e),i=Hs(p,xs(e,"BaseURL")),n={role:Ps(xs(e,"Role")[0])},r=rs(h,t,n),a=xs(e,"ContentProtection").reduce(function(e,t){var i=Ps(t),n=il[i.schemeIdUri];if(n){e[n]={attributes:i};var r=xs(t,"cenc:pssh")[0];if(r){var a=As(r),o=a&&function(e){for(var t=y.atob(e),i=new Uint8Array(t.length),n=0;n<t.length;n++)i[n]=t.charCodeAt(n);return i}(a);e[n].pssh=o}}return e},{});Object.keys(a).length&&(r=rs(r,{contentProtection:a}));var o,s,l,u=qs(e),c=xs(e,"Representation"),d=rs(f,u);return as(c.map((o=r,s=i,l=d,function(e){var t=xs(e,"BaseURL"),i=Hs(s,t),n=rs(o,Ps(e)),r=qs(e);return i.map(function(e){return{segmentInfo:rs(l,r),attributes:rs(n,{baseUrl:e})}})})))}}function Vs(e,t){void 0===t&&(t={});var i=t,n=i.manifestUri,r=void 0===n?"":n,a=i.NOW,o=void 0===a?Date.now():a,s=i.clientOffset,l=void 0===s?0:s,u=xs(e,"Period");if(!u.length)throw new Error(ls);var c,d,h=Ps(e),p=Hs([r],xs(e,"BaseURL"));return h.sourceDuration=h.mediaPresentationDuration||0,h.NOW=o,h.clientOffset=l,as(u.map((c=h,d=p,function(e,t){var i=Hs(d,xs(e,"BaseURL")),n=Ps(e),r=parseInt(n.id,10),a=y.isNaN(r)?t:r,o=rs(c,{periodIndex:a}),s=xs(e,"AdaptationSet"),l=qs(e);return as(s.map(Ws(o,i,l)))})))}function zs(e){if(""===e)throw new Error(us);var t=(new y.DOMParser).parseFromString(e,"application/xml"),i=t&&"MPD"===t.documentElement.tagName?t.documentElement:null;if(!i||i&&0<i.getElementsByTagName("parsererror").length)throw new Error(cs);return i}function Gs(e,t){return void 0===t&&(t={}),Ts(Vs(zs(e),t).map(Es),t.sidxMapping)}function Xs(e){return e>>>0}function Ks(e){return("00"+e.toString(16)).slice(-2)}var Ys,Qs,Js,Zs,el,tl,il={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"};function nl(e){return new Date(1e3*e-20828448e5)}function rl(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}}function al(){this.init=function(){var a={};this.on=function(e,t){a[e]||(a[e]=[]),a[e]=a[e].concat(t)},this.off=function(e,t){var i;return!!a[e]&&(i=a[e].indexOf(t),a[e]=a[e].slice(),a[e].splice(i,1),-1<i)},this.trigger=function(e){var t,i,n,r;if(t=a[e])if(2===arguments.length)for(n=t.length,i=0;i<n;++i)t[i].call(this,arguments[1]);else{for(r=[],i=arguments.length,i=1;i<arguments.length;++i)r.push(arguments[i]);for(n=t.length,i=0;i<n;++i)t[i].apply(this,r)}},this.dispose=function(){a={}}}}Js=function(e){return Ys(e,["moov","trak"]).reduce(function(e,t){var i,n,r,a,o;return(i=Ys(t,["tkhd"])[0])?(n=i[0],a=Xs(i[r=0===n?12:20]<<24|i[r+1]<<16|i[r+2]<<8|i[r+3]),(o=Ys(t,["mdia","mdhd"])[0])?(r=0===(n=o[0])?12:20,e[a]=Xs(o[r]<<24|o[r+1]<<16|o[r+2]<<8|o[r+3]),e):null):null},{})},Zs=function(r,e){var t,i,n;return t=Ys(e,["moof","traf"]),i=[].concat.apply([],t.map(function(n){return Ys(n,["tfhd"]).map(function(e){var t,i;return t=Xs(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),i=r[t]||9e4,(Ys(n,["tfdt"]).map(function(e){var t,i;return t=e[0],i=Xs(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),1===t&&(i*=Math.pow(2,32),i+=Xs(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),i})[0]||1/0)/i})})),n=Math.min.apply(null,i),isFinite(n)?n:0},el=function(e){var t=Ys(e,["moov","trak"]),s=[];return t.forEach(function(e){var t=Ys(e,["mdia","hdlr"]),o=Ys(e,["tkhd"]);t.forEach(function(e,t){var i,n,r=Qs(e.subarray(8,12)),a=o[t];"vide"===r&&(n=0===(i=new DataView(a.buffer,a.byteOffset,a.byteLength)).getUint8(0)?i.getUint32(12):i.getUint32(20),s.push(n))})}),s},tl=function(e){var t=Ys(e,["moov","trak"]),p=[];return t.forEach(function(e){var t,i,n={},r=Ys(e,["tkhd"])[0];r&&(i=(t=new DataView(r.buffer,r.byteOffset,r.byteLength)).getUint8(0),n.id=0===i?t.getUint32(12):t.getUint32(20));var a=Ys(e,["mdia","hdlr"])[0];if(a){var o=Qs(a.subarray(8,12));n.type="vide"===o?"video":"soun"===o?"audio":o}var s=Ys(e,["mdia","minf","stbl","stsd"])[0];if(s){var l=s.subarray(8);n.codec=Qs(l.subarray(4,8));var u,c=Ys(l,[n.codec])[0];c&&(/^[a-z]vc[1-9]$/i.test(n.codec)?(u=c.subarray(78),"avcC"===Qs(u.subarray(4,8))&&11<u.length?(n.codec+=".",n.codec+=Ks(u[9]),n.codec+=Ks(u[10]),n.codec+=Ks(u[11])):n.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(n.codec)&&(u=c.subarray(28),"esds"===Qs(u.subarray(4,8))&&20<u.length&&0!==u[19]?(n.codec+="."+Ks(u[19]),n.codec+="."+Ks(u[20]>>>2&63).replace(/^0/,"")):n.codec="mp4a.40.2"))}var d=Ys(e,["mdia","mdhd"])[0];if(d&&r){var h=0===i?12:20;n.timescale=Xs(d[h]<<24|d[1+h]<<16|d[2+h]<<8|d[3+h])}p.push(n)}),p};var ol,sl,ll={findBox:Ys=function(e,t){var i,n,r,a,o,s=[];if(!t.length)return null;for(i=0;i<e.byteLength;)n=Xs(e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3]),r=Qs(e.subarray(i+4,i+8)),a=1<n?i+n:e.byteLength,r===t[0]&&(1===t.length?s.push(e.subarray(i+8,a)):(o=Ys(e.subarray(i+8,a),t.slice(1))).length&&(s=s.concat(o))),i=a;return s},parseType:Qs=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),(t+=String.fromCharCode(e[2]))+String.fromCharCode(e[3])},timescale:Js,startTime:Zs,videoTrackIds:el,tracks:tl},ul=ll.parseType,cl={avc1:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{dataReferenceIndex:t.getUint16(6),width:t.getUint16(24),height:t.getUint16(26),horizresolution:t.getUint16(28)+t.getUint16(30)/16,vertresolution:t.getUint16(32)+t.getUint16(34)/16,frameCount:t.getUint16(40),depth:t.getUint16(74),config:ol(e.subarray(78,e.byteLength))}},avcC:function(e){var t,i,n,r,a=new DataView(e.buffer,e.byteOffset,e.byteLength),o={configurationVersion:e[0],avcProfileIndication:e[1],profileCompatibility:e[2],avcLevelIndication:e[3],lengthSizeMinusOne:3&e[4],sps:[],pps:[]},s=31&e[5];for(n=6,r=0;r<s;r++)i=a.getUint16(n),n+=2,o.sps.push(new Uint8Array(e.subarray(n,n+i))),n+=i;for(t=e[n],n++,r=0;r<t;r++)i=a.getUint16(n),n+=2,o.pps.push(new Uint8Array(e.subarray(n,n+i))),n+=i;return o},btrt:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{bufferSizeDB:t.getUint32(0),maxBitrate:t.getUint32(4),avgBitrate:t.getUint32(8)}},esds:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),esId:e[6]<<8|e[7],streamPriority:31&e[8],decoderConfig:{objectProfileIndication:e[11],streamType:e[12]>>>2&63,bufferSize:e[13]<<16|e[14]<<8|e[15],maxBitrate:e[16]<<24|e[17]<<16|e[18]<<8|e[19],avgBitrate:e[20]<<24|e[21]<<16|e[22]<<8|e[23],decoderConfigDescriptor:{tag:e[24],length:e[25],audioObjectType:e[26]>>>3&31,samplingFrequencyIndex:(7&e[26])<<1|e[27]>>>7&1,channelConfiguration:e[27]>>>3&15}}}},ftyp:function(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i={majorBrand:ul(e.subarray(0,4)),minorVersion:t.getUint32(4),compatibleBrands:[]},n=8;n<e.byteLength;)i.compatibleBrands.push(ul(e.subarray(n,n+4))),n+=4;return i},dinf:function(e){return{boxes:ol(e)}},dref:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),dataReferences:ol(e.subarray(8))}},hdlr:function(e){var t={version:new DataView(e.buffer,e.byteOffset,e.byteLength).getUint8(0),flags:new Uint8Array(e.subarray(1,4)),handlerType:ul(e.subarray(8,12)),name:""},i=8;for(i=24;i<e.byteLength;i++){if(0===e[i]){i++;break}t.name+=String.fromCharCode(e[i])}return t.name=decodeURIComponent(escape(t.name)),t},mdat:function(e){return{byteLength:e.byteLength,nals:function(e){var t,i,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r=[];for(t=0;t+4<e.length;t+=i)if(i=n.getUint32(t),t+=4,i<=0)r.push("<span style='color:red;'>MALFORMED DATA</span>");else switch(31&e[t]){case 1:r.push("slice_layer_without_partitioning_rbsp");break;case 5:r.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:r.push("sei_rbsp");break;case 7:r.push("seq_parameter_set_rbsp");break;case 8:r.push("pic_parameter_set_rbsp");break;case 9:r.push("access_unit_delimiter_rbsp");break;default:r.push("UNKNOWN NAL - "+e[t]&31)}return r}(e)}},mdhd:function(e){var t,i=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,r={version:i.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),language:""};return 1===r.version?(n+=4,r.creationTime=nl(i.getUint32(n)),n+=8,r.modificationTime=nl(i.getUint32(n)),n+=4,r.timescale=i.getUint32(n),n+=8):(r.creationTime=nl(i.getUint32(n)),n+=4,r.modificationTime=nl(i.getUint32(n)),n+=4,r.timescale=i.getUint32(n),n+=4),r.duration=i.getUint32(n),n+=4,t=i.getUint16(n),r.language+=String.fromCharCode(96+(t>>10)),r.language+=String.fromCharCode(96+((992&t)>>5)),r.language+=String.fromCharCode(96+(31&t)),r},mdia:function(e){return{boxes:ol(e)}},mfhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sequenceNumber:e[4]<<24|e[5]<<16|e[6]<<8|e[7]}},minf:function(e){return{boxes:ol(e)}},mp4a:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i={dataReferenceIndex:t.getUint16(6),channelcount:t.getUint16(16),samplesize:t.getUint16(18),samplerate:t.getUint16(24)+t.getUint16(26)/65536};return 28<e.byteLength&&(i.streamDescriptor=ol(e.subarray(28))[0]),i},moof:function(e){return{boxes:ol(e)}},moov:function(e){return{boxes:ol(e)}},mvex:function(e){return{boxes:ol(e)}},mvhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i=4,n={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===n.version?(i+=4,n.creationTime=nl(t.getUint32(i)),i+=8,n.modificationTime=nl(t.getUint32(i)),i+=4,n.timescale=t.getUint32(i),i+=8):(n.creationTime=nl(t.getUint32(i)),i+=4,n.modificationTime=nl(t.getUint32(i)),i+=4,n.timescale=t.getUint32(i),i+=4),n.duration=t.getUint32(i),i+=4,n.rate=t.getUint16(i)+t.getUint16(i+2)/16,i+=4,n.volume=t.getUint8(i)+t.getUint8(i+1)/8,i+=2,i+=2,i+=8,n.matrix=new Uint32Array(e.subarray(i,i+36)),i+=36,i+=24,n.nextTrackId=t.getUint32(i),n},pdin:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),rate:t.getUint32(4),initialDelay:t.getUint32(8)}},sdtp:function(e){var t,i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]};for(t=4;t<e.byteLength;t++)i.samples.push({dependsOn:(48&e[t])>>4,isDependedOn:(12&e[t])>>2,hasRedundancy:3&e[t]});return i},sidx:function(e){var t,i=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:i.getUint32(4),timescale:i.getUint32(8),earliestPresentationTime:i.getUint32(12),firstOffset:i.getUint32(16)},r=i.getUint16(22);for(t=24;r;t+=12,r--)n.references.push({referenceType:(128&e[t])>>>7,referencedSize:2147483647&i.getUint32(t),subsegmentDuration:i.getUint32(t+4),startsWithSap:!!(128&e[t+8]),sapType:(112&e[t+8])>>>4,sapDeltaTime:268435455&i.getUint32(t+8)});return n},smhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),balance:e[4]+e[5]/256}},stbl:function(e){return{boxes:ol(e)}},stco:function(e){var t,i=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),chunkOffsets:[]},r=i.getUint32(4);for(t=8;r;t+=4,r--)n.chunkOffsets.push(i.getUint32(t));return n},stsc:function(e){var t,i=new DataView(e.buffer,e.byteOffset,e.byteLength),n=i.getUint32(4),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleToChunks:[]};for(t=8;n;t+=12,n--)r.sampleToChunks.push({firstChunk:i.getUint32(t),samplesPerChunk:i.getUint32(t+4),sampleDescriptionIndex:i.getUint32(t+8)});return r},stsd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleDescriptions:ol(e.subarray(8))}},stsz:function(e){var t,i=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleSize:i.getUint32(4),entries:[]};for(t=12;t<e.byteLength;t+=4)n.entries.push(i.getUint32(t));return n},stts:function(e){var t,i=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),timeToSamples:[]},r=i.getUint32(4);for(t=8;r;t+=8,r--)n.timeToSamples.push({sampleCount:i.getUint32(t),sampleDelta:i.getUint32(t+4)});return n},styp:function(e){return cl.ftyp(e)},tfdt:function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),baseMediaDecodeTime:e[4]<<24|e[5]<<16|e[6]<<8|e[7]};return 1===t.version&&(t.baseMediaDecodeTime*=Math.pow(2,32),t.baseMediaDecodeTime+=e[8]<<24|e[9]<<16|e[10]<<8|e[11]),t},tfhd:function(e){var t,i=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:i.getUint32(4)},r=1&n.flags[2],a=2&n.flags[2],o=8&n.flags[2],s=16&n.flags[2],l=32&n.flags[2],u=65536&n.flags[0],c=131072&n.flags[0];return t=8,r&&(t+=4,n.baseDataOffset=i.getUint32(12),t+=4),a&&(n.sampleDescriptionIndex=i.getUint32(t),t+=4),o&&(n.defaultSampleDuration=i.getUint32(t),t+=4),s&&(n.defaultSampleSize=i.getUint32(t),t+=4),l&&(n.defaultSampleFlags=i.getUint32(t)),u&&(n.durationIsEmpty=!0),!r&&c&&(n.baseDataOffsetIsMoof=!0),n},tkhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i=4,n={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===n.version?(i+=4,n.creationTime=nl(t.getUint32(i)),i+=8,n.modificationTime=nl(t.getUint32(i)),i+=4,n.trackId=t.getUint32(i),i+=4,i+=8):(n.creationTime=nl(t.getUint32(i)),i+=4,n.modificationTime=nl(t.getUint32(i)),i+=4,n.trackId=t.getUint32(i),i+=4,i+=4),n.duration=t.getUint32(i),i+=4,i+=8,n.layer=t.getUint16(i),i+=2,n.alternateGroup=t.getUint16(i),i+=2,n.volume=t.getUint8(i)+t.getUint8(i+1)/8,i+=2,i+=2,n.matrix=new Uint32Array(e.subarray(i,i+36)),i+=36,n.width=t.getUint16(i)+t.getUint16(i+2)/16,i+=4,n.height=t.getUint16(i)+t.getUint16(i+2)/16,n},traf:function(e){return{boxes:ol(e)}},trak:function(e){return{boxes:ol(e)}},trex:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:t.getUint32(4),defaultSampleDescriptionIndex:t.getUint32(8),defaultSampleDuration:t.getUint32(12),defaultSampleSize:t.getUint32(16),sampleDependsOn:3&e[20],sampleIsDependedOn:(192&e[21])>>6,sampleHasRedundancy:(48&e[21])>>4,samplePaddingValue:(14&e[21])>>1,sampleIsDifferenceSample:!!(1&e[21]),sampleDegradationPriority:t.getUint16(22)}},trun:function(e){var t,i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},n=new DataView(e.buffer,e.byteOffset,e.byteLength),r=1&i.flags[2],a=4&i.flags[2],o=1&i.flags[1],s=2&i.flags[1],l=4&i.flags[1],u=8&i.flags[1],c=n.getUint32(4),d=8;for(r&&(i.dataOffset=n.getInt32(d),d+=4),a&&c&&(t={flags:rl(e.subarray(d,d+4))},d+=4,o&&(t.duration=n.getUint32(d),d+=4),s&&(t.size=n.getUint32(d),d+=4),u&&(t.compositionTimeOffset=n.getUint32(d),d+=4),i.samples.push(t),c--);c--;)t={},o&&(t.duration=n.getUint32(d),d+=4),s&&(t.size=n.getUint32(d),d+=4),l&&(t.flags=rl(e.subarray(d,d+4)),d+=4),u&&(t.compositionTimeOffset=n.getUint32(d),d+=4),i.samples.push(t);return i},"url ":function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4))}},vmhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),graphicsmode:t.getUint16(4),opcolor:new Uint16Array([t.getUint16(6),t.getUint16(8),t.getUint16(10)])}}},dl={inspect:ol=function(e){for(var t,i,n,r,a,o=0,s=[],l=new ArrayBuffer(e.length),u=new Uint8Array(l),c=0;c<e.length;++c)u[c]=e[c];for(t=new DataView(l);o<e.byteLength;)i=t.getUint32(o),n=ul(e.subarray(o+4,o+8)),r=1<i?o+i:e.byteLength,(a=(cl[n]||function(e){return{data:e}})(e.subarray(o+8,r))).size=i,a.type=n,s.push(a),o=r;return s},textify:sl=function(e,t){var a;return t=t||0,a=new Array(2*t+1).join(" "),e.map(function(r,e){return a+r.type+"\n"+Object.keys(r).filter(function(e){return"type"!==e&&"boxes"!==e}).map(function(e){var t=a+"  "+e+": ",i=r[e];if(i instanceof Uint8Array||i instanceof Uint32Array){var n=Array.prototype.slice.call(new Uint8Array(i.buffer,i.byteOffset,i.byteLength)).map(function(e){return" "+("00"+e.toString(16)).slice(-2)}).join("").match(/.{1,24}/g);return n?1===n.length?t+"<"+n.join("").slice(1)+">":t+"<\n"+n.map(function(e){return a+"  "+e}).join("\n")+"\n"+a+"  >":t+"<>"}return t+JSON.stringify(i,null,2).split("\n").map(function(e,t){return 0===t?e:a+"  "+e}).join("\n")}).join("\n")+(r.boxes?"\n"+sl(r.boxes,t+1):"")}).join("\n")},parseTfdt:cl.tfdt,parseHdlr:cl.hdlr,parseTfhd:cl.tfhd,parseTrun:cl.trun,parseSidx:cl.sidx};function hl(){hl.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new yl(0,0),new yl(0,1),new yl(1,0),new yl(1,1)],this.reset(),this.ccStreams_.forEach(function(e){e.on("data",this.trigger.bind(this,"data")),e.on("partialdone",this.trigger.bind(this,"partialdone")),e.on("done",this.trigger.bind(this,"done"))},this)}al.prototype.pipe=function(t){return this.on("data",function(e){t.push(e)}),this.on("done",function(e){t.flush(e)}),this.on("partialdone",function(e){t.partialFlush(e)}),this.on("endedtimeline",function(e){t.endTimeline(e)}),this.on("reset",function(e){t.reset(e)}),t},al.prototype.push=function(e){this.trigger("data",e)},al.prototype.flush=function(e){this.trigger("done",e)},al.prototype.partialFlush=function(e){this.trigger("partialdone",e)},al.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},al.prototype.reset=function(e){this.trigger("reset",e)};var pl=al;function fl(e){return null===e?"":(e=ml[e]||e,String.fromCharCode(e))}function gl(){for(var e=[],t=15;t--;)e.push("");return e}(hl.prototype=new pl).push=function(e){var t,i,n,r;if("sei_rbsp"===e.nalUnitType&&4===(t=function(e){for(var t=0,i={payloadType:-1,payloadSize:0},n=0,r=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)n+=255,t++;for(n+=e[t++];255===e[t];)r+=255,t++;if(r+=e[t++],!i.payload&&4===n){i.payloadType=n,i.payloadSize=r,i.payload=e.subarray(t,t+r);break}t+=r,r=n=0}return i}(e.escapedRBSP)).payloadType&&(i=181!==(r=t).payload[0]||49!=(r.payload[1]<<8|r.payload[2])||"GA94"!==String.fromCharCode(r.payload[3],r.payload[4],r.payload[5],r.payload[6])||3!==r.payload[7]?null:r.payload.subarray(8,r.payload.length-1)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));n=function(e,t){var i,n,r,a,o=[];if(!(64&t[0]))return o;for(n=31&t[0],i=0;i<n;i++)a={type:3&t[2+(r=3*i)],pts:e},4&t[2+r]&&(a.ccData=t[3+r]<<8|t[4+r],o.push(a));return o}(e.pts,i),this.captionPackets_=this.captionPackets_.concat(n),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},hl.prototype.flushCCStreams=function(t){this.ccStreams_.forEach(function(e){return"flush"===t?e.flush():e.partialFlush()},this)},hl.prototype.flushStream=function(e){this.captionPackets_.length&&(this.captionPackets_.forEach(function(e,t){e.presortIndex=t}),this.captionPackets_.sort(function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts}),this.captionPackets_.forEach(function(e){e.type<2&&this.dispatchCea608Packet(e)},this),this.captionPackets_.length=0),this.flushCCStreams(e)},hl.prototype.flush=function(){return this.flushStream("flush")},hl.prototype.partialFlush=function(){return this.flushStream("partialFlush")},hl.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(e){e.reset()})},hl.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},hl.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},hl.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)},hl.prototype.setsTextOrXDSActive=function(e){return 256==(28928&e.ccData)||4138==(30974&e.ccData)||6186==(30974&e.ccData)};var ml={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},vl=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],yl=function e(t,i){e.prototype.init.call(this),this.field_=t||0,this.dataChannel_=i||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,i,n,r,a;if((t=32639&e.ccData)!==this.lastControlCode_){if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),n=t>>>8,r=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),i=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=i,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=gl();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=gl();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=gl()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(n,r))a=fl((n=(3&n)<<8)|r),this[this.mode_](e.pts,a),this.column_++;else if(this.isExtCharacter(n,r))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),a=fl((n=(3&n)<<8)|r),this[this.mode_](e.pts,a),this.column_++;else if(this.isMidRowCode(n,r))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&r)&&this.addFormatting(e.pts,["i"]),1==(1&r)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(n,r))this.column_+=3&r;else if(this.isPAC(n,r)){var o=vl.indexOf(7968&t);"rollUp"===this.mode_&&(o-this.rollUpRows_+1<0&&(o=this.rollUpRows_-1),this.setRollUp(e.pts,o)),o!==this.row_&&(this.clearFormatting(e.pts),this.row_=o),1&r&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(r)&&14==(14&r)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(n)&&(0===r&&(r=null),a=fl(n),a+=fl(r),this[this.mode_](e.pts,a),this.column_+=a.length)}else this.lastControlCode_=null}};function bl(e,t){for(var i=e,n=0;n<t.length;n++){var r=t[n];if(i<r.size)return r;i-=r.size}return null}function _l(e,m){var n=ll.findBox(e,["moof","traf"]),t=ll.findBox(e,["mdat"]),v={},r=[];return t.forEach(function(e,t){var i=n[t];r.push({mdat:e,traf:i})}),r.forEach(function(e){var t,i,n,r,a,o,s,l=e.mdat,u=e.traf,c=ll.findBox(u,["tfhd"]),d=dl.parseTfhd(c[0]),h=d.trackId,p=ll.findBox(u,["tfdt"]),f=0<p.length?dl.parseTfdt(p[0]).baseMediaDecodeTime:0,g=ll.findBox(u,["trun"]);m===h&&0<g.length&&(t=function(e,t,i){var n,r,a,o,s=new DataView(e.buffer,e.byteOffset,e.byteLength),l=[];for(r=0;r+4<e.length;r+=a)if(a=s.getUint32(r),r+=4,!(a<=0))switch(31&e[r]){case 6:var u=e.subarray(r+1,r+1+a),c=bl(r,t);n={nalUnitType:"sei_rbsp",size:a,data:u,escapedRBSP:Tl(u),trackId:i},c?(n.pts=c.pts,n.dts=c.dts,o=c):(n.pts=o.pts,n.dts=o.dts),l.push(n)}return l}(l,(i=g,n=f,r=d.defaultSampleDuration||0,a=d.defaultSampleSize||0,o=d.trackId,s=[],i.forEach(function(e){var t=dl.parseTrun(e).samples;t.forEach(function(e){void 0===e.duration&&(e.duration=r),void 0===e.size&&(e.size=a),e.trackId=o,e.dts=n,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),e.pts=n+e.compositionTimeOffset,n+=e.duration}),s=s.concat(t)}),s),h),v[h]||(v[h]=[]),v[h]=v[h].concat(t))}),v}yl.prototype=new pl,yl.prototype.flushDisplayed=function(e){var t=this.displayed_.map(function(e){try{return e.trim()}catch(e){return""}}).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},yl.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=gl(),this.nonDisplayed_=gl(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},yl.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},yl.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&48<=t&&t<=63},yl.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&32<=t&&t<=63},yl.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&32<=t&&t<=47},yl.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&33<=t&&t<=35},yl.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&64<=t&&t<=127},yl.prototype.isColorPAC=function(e){return 64<=e&&e<=79||96<=e&&e<=127},yl.prototype.isNormalChar=function(e){return 32<=e&&e<=127},yl.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=gl(),this.displayed_=gl()),void 0!==t&&t!==this.row_)for(var i=0;i<this.rollUpRows_;i++)this.displayed_[t-i]=this.displayed_[this.row_-i],this.displayed_[this.row_-i]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},yl.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var i=t.reduce(function(e,t){return e+"<"+t+">"},"");this[this.mode_](e,i)},yl.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce(function(e,t){return e+"</"+t+">"},"");this.formatting_=[],this[this.mode_](e,t)}},yl.prototype.popOn=function(e,t){var i=this.nonDisplayed_[this.row_];i+=t,this.nonDisplayed_[this.row_]=i},yl.prototype.rollUp=function(e,t){var i=this.displayed_[this.row_];i+=t,this.displayed_[this.row_]=i},yl.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<15;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},yl.prototype.paintOn=function(e,t){var i=this.displayed_[this.row_];i+=t,this.displayed_[this.row_]=i};var Tl=function(e){for(var t,i,n=e.byteLength,r=[],a=1;a<n-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return e;t=n-r.length,i=new Uint8Array(t);var o=0;for(a=0;a<t;o++,a++)o===r[0]&&(o++,r.shift()),i[a]=e[o];return i},wl=hl,Sl=function(){var t,s,l,u,c,i,n=!1;this.isInitialized=function(){return n},this.init=function(e){t=new wl,n=!0,i=!!e&&e.isPartial,t.on("data",function(e){e.startTime=e.startPts/u,e.endTime=e.endPts/u,c.captions.push(e),c.captionStreams[e.stream]=!0})},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"==typeof t&&0===Object.keys(t).length||l===e[0]&&u===t[l])},this.parse=function(e,t,i){var n,r,a;if(!this.isInitialized())return null;if(!t||!i)return null;if(this.isNewInit(t,i))l=t[0],u=i[l];else if(null===l||!u)return s.push(e),null;for(;0<s.length;){var o=s.shift();this.parse(o,t,i)}return null!==(a=u,n=null===(r=l)?null:{seiNals:_l(e,r)[r],timescale:a})&&n.seiNals?(this.pushNals(n.seiNals),this.flushStream(),c):null},this.pushNals=function(e){if(!this.isInitialized()||!e||0===e.length)return null;e.forEach(function(e){t.push(e)})},this.flushStream=function(){if(!this.isInitialized())return null;i?t.partialFlush():t.flush()},this.clearParsedCaptions=function(){c.captions=[],c.captionStreams={}},this.resetCaptionStream=function(){if(!this.isInitialized())return null;t.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){s=[],u=l=null,c?this.clearParsedCaptions():c={captions:[],captionStreams:{}},this.resetCaptionStream()},this.reset()};function kl(e){var t=31&e[1];return(t<<=8)|e[2]}function Cl(e){return!!(64&e[1])}function El(e){var t=0;return 1<(48&e[3])>>>4&&(t+=e[4]+1),t}function xl(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}}function Al(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]}new pl;var Il={parseType:function(e,t){var i=kl(e);return 0===i?"pat":i===t?"pmt":t?"pes":null},parsePat:function(e){var t=Cl(e),i=4+El(e);return t&&(i+=e[i]+1),(31&e[i+10])<<8|e[i+11]},parsePmt:function(e){var t={},i=Cl(e),n=4+El(e);if(i&&(n+=e[n]+1),1&e[n+5]){var r;r=3+((15&e[n+1])<<8|e[n+2])-4;for(var a=12+((15&e[n+10])<<8|e[n+11]);a<r;){var o=n+a;t[(31&e[o+1])<<8|e[o+2]]=e[o],a+=5+((15&e[o+3])<<8|e[o+4])}return t}},parsePayloadUnitStartIndicator:Cl,parsePesType:function(e,t){switch(t[kl(e)]){case 27:return"video";case 15:return"audio";case 21:return"timed-metadata";default:return null}},parsePesTime:function(e){if(!Cl(e))return null;var t=4+El(e);if(t>=e.byteLength)return null;var i,n=null;return 192&(i=e[t+7])&&((n={}).pts=(14&e[t+9])<<27|(255&e[t+10])<<20|(254&e[t+11])<<12|(255&e[t+12])<<5|(254&e[t+13])>>>3,n.pts*=4,n.pts+=(6&e[t+13])>>>1,n.dts=n.pts,64&i&&(n.dts=(14&e[t+14])<<27|(255&e[t+15])<<20|(254&e[t+16])<<12|(255&e[t+17])<<5|(254&e[t+18])>>>3,n.dts*=4,n.dts+=(6&e[t+18])>>>1)),n},videoPacketContainsKeyFrame:function(e){for(var t=4+El(e),i=e.subarray(t),n=0,r=0,a=!1;r<i.byteLength-3;r++)if(1===i[r+2]){n=r+5;break}for(;n<i.byteLength;)switch(i[n]){case 0:if(0!==i[n-1]){n+=2;break}if(0!==i[n-2]){n++;break}for(r+3!==n-2&&"slice_layer_without_partitioning_rbsp_idr"===xl(31&i[r+3])&&(a=!0);1!==i[++n]&&n<i.length;);r=n-2,n+=3;break;case 1:if(0!==i[n-1]||0!==i[n-2]){n+=3;break}"slice_layer_without_partitioning_rbsp_idr"===xl(31&i[r+3])&&(a=!0),r=n-2,n+=3;break;default:n+=3}return i=i.subarray(r),n-=r,r=0,i&&3<i.byteLength&&"slice_layer_without_partitioning_rbsp_idr"===xl(31&i[r+3])&&(a=!0),a}},Pl=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Ol={isLikelyAacData:function(e){return e[0]==="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)},parseId3TagSize:function(e,t){var i=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?20+i:10+i},parseAdtsSize:function(e,t){var i=(224&e[t+5])>>5,n=e[t+4]<<3;return 6144&e[t+3]|n|i},parseType:function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&240==(240&e[t+1])?"audio":null},parseSampleRate:function(e){for(var t=0;t+5<e.length;){if(255===e[t]&&240==(246&e[t+1]))return Pl[(60&e[t+2])>>>2];t++}return null},parseAacTimestamp:function(e){var t,i,n;t=10,64&e[5]&&(t+=4,t+=Al(e.subarray(10,14)));do{if((i=Al(e.subarray(t+4,t+8)))<1)return null;if("PRIV"===String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3])){n=e.subarray(t+10,t+i+10);for(var r=0;r<n.byteLength;r++)if(0===n[r]){if("com.apple.streaming.transportStreamTimestamp"!==unescape(function(e,t){var i,n="";for(i=0;i<t;i++)n+="%"+("00"+e[i].toString(16)).slice(-2);return n}(n,r)))break;var a=n.subarray(r+1),o=(1&a[3])<<30|a[4]<<22|a[5]<<14|a[6]<<6|a[7]>>>2;return(o*=4)+(3&a[7])}}t+=10,t+=i}while(t<e.byteLength);return null}},Ll=function(e,t){var i=1;for(t<e&&(i=-1);4294967296<Math.abs(t-e);)e+=8589934592*i;return e},Dl={};function Nl(e,t,i){for(var n,r,a,o,s=0,l=Rl,u=!1;l<=e.byteLength;)if(71!==e[s]||71!==e[l]&&l!==e.byteLength)s++,l++;else{switch(n=e.subarray(s,l),Dl.ts.parseType(n,t.pid)){case"pes":r=Dl.ts.parsePesType(n,t.table),a=Dl.ts.parsePayloadUnitStartIndicator(n),"audio"===r&&a&&(o=Dl.ts.parsePesTime(n))&&(o.type="audio",i.audio.push(o),u=!0)}if(u)break;s+=Rl,l+=Rl}for(s=(l=e.byteLength)-Rl,u=!1;0<=s;)if(71!==e[s]||71!==e[l]&&l!==e.byteLength)s--,l--;else{switch(n=e.subarray(s,l),Dl.ts.parseType(n,t.pid)){case"pes":r=Dl.ts.parsePesType(n,t.table),a=Dl.ts.parsePayloadUnitStartIndicator(n),"audio"===r&&a&&(o=Dl.ts.parsePesTime(n))&&(o.type="audio",i.audio.push(o),u=!0)}if(u)break;s-=Rl,l-=Rl}}function Ml(e,t,i){for(var n,r,a,o,s,l,u,c=0,d=Rl,h=!1,p={data:[],size:0};d<e.byteLength;)if(71!==e[c]||71!==e[d])c++,d++;else{switch(n=e.subarray(c,d),Dl.ts.parseType(n,t.pid)){case"pes":if(r=Dl.ts.parsePesType(n,t.table),a=Dl.ts.parsePayloadUnitStartIndicator(n),"video"===r&&(a&&!h&&(o=Dl.ts.parsePesTime(n))&&(o.type="video",i.video.push(o),h=!0),!i.firstKeyFrame)){if(a&&0!==p.size){for(s=new Uint8Array(p.size),l=0;p.data.length;)u=p.data.shift(),s.set(u,l),l+=u.byteLength;if(Dl.ts.videoPacketContainsKeyFrame(s)){var f=Dl.ts.parsePesTime(s);f&&(i.firstKeyFrame=f,i.firstKeyFrame.type="video")}p.size=0}p.data.push(n),p.size+=n.byteLength}}if(h&&i.firstKeyFrame)break;c+=Rl,d+=Rl}for(c=(d=e.byteLength)-Rl,h=!1;0<=c;)if(71!==e[c]||71!==e[d])c--,d--;else{switch(n=e.subarray(c,d),Dl.ts.parseType(n,t.pid)){case"pes":r=Dl.ts.parsePesType(n,t.table),a=Dl.ts.parsePayloadUnitStartIndicator(n),"video"===r&&a&&(o=Dl.ts.parsePesTime(n))&&(o.type="video",i.video.push(o),h=!0)}if(h)break;c-=Rl,d-=Rl}}Dl.ts=Il,Dl.aac=Ol;var Rl=188;function jl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ul(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Bl=null,Fl=($l.prototype.decrypt=function(e,t,i,n,r,a){var o=this._key[1],s=e^o[0],l=n^o[1],u=i^o[2],c=t^o[3],d=void 0,h=void 0,p=void 0,f=o.length/4-2,g=void 0,m=4,v=this._tables[1],y=v[0],b=v[1],_=v[2],T=v[3],w=v[4];for(g=0;g<f;g++)d=y[s>>>24]^b[l>>16&255]^_[u>>8&255]^T[255&c]^o[m],h=y[l>>>24]^b[u>>16&255]^_[c>>8&255]^T[255&s]^o[m+1],p=y[u>>>24]^b[c>>16&255]^_[s>>8&255]^T[255&l]^o[m+2],c=y[c>>>24]^b[s>>16&255]^_[l>>8&255]^T[255&u]^o[m+3],m+=4,s=d,l=h,u=p;for(g=0;g<4;g++)r[(3&-g)+a]=w[s>>>24]<<24^w[l>>16&255]<<16^w[u>>8&255]<<8^w[255&c]^o[m++],d=s,s=l,l=u,u=c,c=d},$l);function $l(e){jl(this,$l),Bl=Bl||function(){var e=[[[],[],[],[],[]],[[],[],[],[],[]]],t=e[0],i=e[1],n=t[4],r=i[4],a=void 0,o=void 0,s=void 0,l=[],u=[],c=void 0,d=void 0,h=void 0,p=void 0,f=void 0;for(a=0;a<256;a++)u[(l[a]=a<<1^283*(a>>7))^a]=a;for(o=s=0;!n[o];o^=c||1,s=u[s]||1)for(h=(h=s^s<<1^s<<2^s<<3^s<<4)>>8^255&h^99,f=16843009*l[d=l[c=l[r[n[o]=h]=o]]]^65537*d^257*c^16843008*o,p=257*l[h]^16843008*h,a=0;a<4;a++)t[a][o]=p=p<<24^p>>>8,i[a][h]=f=f<<24^f>>>8;for(a=0;a<5;a++)t[a]=t[a].slice(0),i[a]=i[a].slice(0);return e}(),this._tables=[[Bl[0][0].slice(),Bl[0][1].slice(),Bl[0][2].slice(),Bl[0][3].slice(),Bl[0][4].slice()],[Bl[1][0].slice(),Bl[1][1].slice(),Bl[1][2].slice(),Bl[1][3].slice(),Bl[1][4].slice()]];var t=void 0,i=void 0,n=void 0,r=void 0,a=void 0,o=this._tables[0][4],s=this._tables[1],l=e.length,u=1;if(4!==l&&6!==l&&8!==l)throw new Error("Invalid aes key size");for(r=e.slice(0),a=[],this._key=[r,a],t=l;t<4*l+28;t++)n=r[t-1],(t%l==0||8===l&&t%l==4)&&(n=o[n>>>24]<<24^o[n>>16&255]<<16^o[n>>8&255]<<8^o[255&n],t%l==0&&(n=n<<8^n>>>24^u<<24,u=u<<1^283*(u>>7))),r[t]=r[t-l]^n;for(i=0;t;i++,t--)n=r[3&i?t:t-4],a[i]=t<=4||i<4?n:s[0][o[n>>>24]]^s[1][o[n>>16&255]]^s[2][o[n>>8&255]]^s[3][o[255&n]]}var Hl=(ql.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},ql.prototype.off=function(e,t){if(!this.listeners[e])return!1;var i=this.listeners[e].indexOf(t);return this.listeners[e].splice(i,1),-1<i},ql.prototype.trigger=function(e,t){var i=this.listeners[e];if(i)if(2===arguments.length)for(var n=i.length,r=0;r<n;++r)i[r].call(this,t);else for(var a=Array.prototype.slice.call(arguments,1),o=i.length,s=0;s<o;++s)i[s].apply(this,a)},ql.prototype.dispose=function(){this.listeners={}},ql.prototype.pipe=function(t){this.on("data",function(e){t.push(e)})},ql);function ql(){jl(this,ql),this.listeners={}}var Wl,Vl=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(zl,Wl=Hl),zl.prototype.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},zl.prototype.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},zl);function zl(){jl(this,zl);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Wl.call(this,Hl));return e.jobs=[],e.delay=1,e.timeout_=null,e}function Gl(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}function Xl(e,t,i){var n=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),r=new Fl(Array.prototype.slice.call(t)),a=new Uint8Array(e.byteLength),o=new Int32Array(a.buffer),s=void 0,l=void 0,u=void 0,c=void 0,d=void 0,h=void 0,p=void 0,f=void 0,g=void 0;for(s=i[0],l=i[1],u=i[2],c=i[3],g=0;g<n.length;g+=4)d=Gl(n[g]),h=Gl(n[g+1]),p=Gl(n[g+2]),f=Gl(n[g+3]),r.decrypt(d,h,p,f,o,g),o[g]=Gl(o[g]^s),o[g+1]=Gl(o[g+1]^l),o[g+2]=Gl(o[g+2]^u),o[g+3]=Gl(o[g+3]^c),s=d,l=h,u=p,c=f;return a}var Kl,Yl,Ql,Jl=(Zl.prototype.decryptChunk_=function(t,i,n,r){return function(){var e=Xl(t,i,n);r.set(e,t.byteOffset)}},Kl=Zl,Ql=[{key:"STEP",get:function(){return 32e3}}],(Yl=null)&&Ul(Kl.prototype,Yl),Ql&&Ul(Kl,Ql),Zl);function Zl(e,t,i,n){jl(this,Zl);var r=Zl.STEP,a=new Int32Array(e.buffer),o=new Uint8Array(e.byteLength),s=0;for(this.asyncStream_=new Vl,this.asyncStream_.push(this.decryptChunk_(a.subarray(s,s+r),t,i,o)),s=r;s<a.length;s+=r)i=new Uint32Array([Gl(a[s-4]),Gl(a[s-3]),Gl(a[s-2]),Gl(a[s-1])]),this.asyncStream_.push(this.decryptChunk_(a.subarray(s,s+r),t,i,o));this.asyncStream_.push(function(){n(null,o.subarray(0,o.byteLength-o[o.byteLength-1]))})}function eu(e,t){return/^[a-z]+:/i.test(t)?t:(/\/\//i.test(e)||(e=zo.buildAbsoluteURL(y.location.href,e)),zo.buildAbsoluteURL(e,t))}function tu(e,t,i){return e&&i.responseURL&&t!==i.responseURL?i.responseURL:t}function iu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nu(e,t,i){return t&&ru(e.prototype,t),i&&ru(e,i),e}function ru(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function au(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function ou(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function su(r,a){["AUDIO","SUBTITLES"].forEach(function(e){for(var t in r.mediaGroups[e])for(var i in r.mediaGroups[e][t]){var n=r.mediaGroups[e][t][i];a(n,e,t,i)}})}function lu(e,t){var i=pu(e,{}),n=i.playlists[t.uri];if(!n)return null;if(n.segments&&t.segments&&n.segments.length===t.segments.length&&n.endList===t.endList&&n.mediaSequence===t.mediaSequence)return null;var r=pu(n,t);n.segments&&(r.segments=function(e,t,i){var n=t.slice();i=i||0;for(var r=Math.min(e.length,t.length+i),a=i;a<r;a++)n[a-i]=pu(e[a],n[a-i]);return n}(n.segments,t.segments,t.mediaSequence-n.mediaSequence)),r.segments.forEach(function(e){var t,i;t=e,i=r.resolvedUri,t.resolvedUri||(t.resolvedUri=eu(i,t.uri)),t.key&&!t.key.resolvedUri&&(t.key.resolvedUri=eu(i,t.key.uri)),t.map&&!t.map.resolvedUri&&(t.map.resolvedUri=eu(i,t.map.uri))});for(var a=0;a<i.playlists.length;a++)i.playlists[a].uri===t.uri&&(i.playlists[a]=r);return i.playlists[t.uri]=r,i}function uu(e){for(var t=e.playlists.length;t--;){var i=e.playlists[t];(e.playlists[i.uri]=i).resolvedUri=eu(e.uri,i.uri),i.id=t,i.attributes||(i.attributes={},fu.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute."))}}function cu(t){su(t,function(e){e.uri&&(e.resolvedUri=eu(t.uri,e.uri))})}function du(e,t){var i=e.segments[e.segments.length-1];return t&&i&&i.duration?1e3*i.duration:500*(e.targetDuration||10)}function hu(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],n=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){r=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw a}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}var pu=qo.mergeOptions,fu=qo.log,gu=(au(mu,qo.EventTarget),nu(mu,[{key:"playlistRequestError",value:function(e,t,i){this.request=null,i&&(this.state=i),this.error={playlist:this.master.playlists[t],status:e.status,message:"HLS playlist request error at URL: "+t+".",responseText:e.responseText,code:500<=e.status?4:2},this.trigger("error")}},{key:"haveMetadata",value:function(e,t){var i=this;this.request=null,this.state="HAVE_METADATA";var n=new ss;this.customTagParsers.forEach(function(e){return n.addParser(e)}),this.customTagMappers.forEach(function(e){return n.addTagMapper(e)}),n.push(e.responseText),n.end(),n.manifest.uri=t,n.manifest.attributes=n.manifest.attributes||{};var r=lu(this.master,n.manifest);this.targetDuration=n.manifest.targetDuration,r?(this.master=r,this.media_=this.master.playlists[n.manifest.uri]):this.trigger("playlistunchanged"),this.media().endList||(y.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=y.setTimeout(function(){i.trigger("mediaupdatetimeout")},du(this.media(),!!r))),this.trigger("loadedplaylist")}},{key:"dispose",value:function(){this.stopRequest(),y.clearTimeout(this.mediaUpdateTimeout),y.clearTimeout(this.finalRenditionTimeout)}},{key:"stopRequest",value:function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}},{key:"media",value:function(i,e){var n=this;if(!i)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof i){if(!this.master.playlists[i])throw new Error("Unknown playlist URI: "+i);i=this.master.playlists[i]}if(y.clearTimeout(this.finalRenditionTimeout),e){var t=i.targetDuration/2*1e3||5e3;this.finalRenditionTimeout=y.setTimeout(this.media.bind(this,i,!1),t)}else{var r=this.state,a=!this.media_||i.uri!==this.media_.uri;if(this.master.playlists[i.uri].endList)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=i,void(a&&(this.trigger("mediachanging"),this.trigger("mediachange")));if(a){if(this.state="SWITCHING_MEDIA",this.request){if(i.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.request=this.hls_.xhr({uri:i.resolvedUri,withCredentials:this.withCredentials},function(e,t){if(n.request){if(i.resolvedUri=tu(n.handleManifestRedirects,i.resolvedUri,t),e)return n.playlistRequestError(n.request,i.uri,r);n.haveMetadata(t,i.uri),"HAVE_MASTER"===r?n.trigger("loadedmetadata"):n.trigger("mediachange")}})}}}},{key:"pause",value:function(){this.stopRequest(),y.clearTimeout(this.mediaUpdateTimeout),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}},{key:"load",value:function(e){var t=this;y.clearTimeout(this.mediaUpdateTimeout);var i=this.media();if(e){var n=i?i.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=y.setTimeout(function(){return t.load()},n)}else this.started?i&&!i.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}},{key:"start",value:function(){var n=this;this.started=!0,this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(e,t){if(n.request){if(n.request=null,e)return n.error={status:t.status,message:"HLS playlist request error at URL: "+n.srcUrl+".",responseText:t.responseText,code:2},"HAVE_NOTHING"===n.state&&(n.started=!1),n.trigger("error");var i=new ss;return n.customTagParsers.forEach(function(e){return i.addParser(e)}),n.customTagMappers.forEach(function(e){return i.addTagMapper(e)}),i.push(t.responseText),i.end(),n.state="HAVE_MASTER",n.srcUrl=tu(n.handleManifestRedirects,n.srcUrl,t),i.manifest.uri=n.srcUrl,i.manifest.playlists?(n.master=i.manifest,uu(n.master),cu(n.master),n.trigger("loadedplaylist"),void(n.request||n.media(i.manifest.playlists[0]))):(n.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:y.location.href,playlists:[{uri:n.srcUrl,id:0,resolvedUri:n.srcUrl,attributes:{}}]},n.master.playlists[n.srcUrl]=n.master.playlists[0],n.haveMetadata(t,n.srcUrl),n.trigger("loadedmetadata"))}})}}]),mu);function mu(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};iu(this,mu);var n=ou(this,(mu.__proto__||Object.getPrototypeOf(mu)).call(this)),r=i.withCredentials,a=void 0!==r&&r,o=i.handleManifestRedirects,s=void 0!==o&&o;n.srcUrl=e,n.hls_=t,n.withCredentials=a,n.handleManifestRedirects=s;var l=t.options_;if(n.customTagParsers=l&&l.customTagParsers||[],n.customTagMappers=l&&l.customTagMappers||[],!n.srcUrl)throw new Error("A non-empty playlist URL is required");return n.state="HAVE_NOTHING",n.on("mediaupdatetimeout",function(){"HAVE_METADATA"===n.state&&(n.state="HAVE_CURRENT_METADATA",n.request=n.hls_.xhr({uri:eu(n.master.uri,n.media().uri),withCredentials:n.withCredentials},function(e,t){if(n.request)return e?n.playlistRequestError(n.request,n.media().uri,"HAVE_METADATA"):void n.haveMetadata(n.request,n.media().uri)}))}),n}function vu(e,r,t){var i,n;return void 0===r&&(r=e.mediaSequence+e.segments.length),r<e.mediaSequence?0:(i=function(e){var t=0,i=r-e.mediaSequence,n=e.segments[i];if(n){if(void 0!==n.start)return{result:n.start,precise:!0};if(void 0!==n.end)return{result:n.end-n.duration,precise:!0}}for(;i--;){if(void 0!==(n=e.segments[i]).end)return{result:t+n.end,precise:!0};if(t+=n.duration,void 0!==n.start)return{result:t+n.start,precise:!0}}return{result:t,precise:!1}}(e)).precise?i.result:(n=function(e){for(var t=0,i=void 0,n=r-e.mediaSequence;n<e.segments.length;n++){if(void 0!==(i=e.segments[n]).start)return{result:i.start-t,precise:!0};if(t+=i.duration,void 0!==i.end)return{result:i.end-t,precise:!0}}return{result:-1,precise:!1}}(e)).precise?n.result:i.result+t}function yu(e,t,i){if(!e)return 0;if("number"!=typeof i&&(i=0),void 0===t){if(e.totalDuration)return e.totalDuration;if(!e.endList)return y.Infinity}return vu(e,t,i)}function bu(e,t,i){var n=0;if(i<t){var r=[i,t];t=r[0],i=r[1]}if(t<0){for(var a=t;a<Math.min(0,i);a++)n+=e.targetDuration;t=0}for(var o=t;o<i;o++)n+=e.segments[o].duration;return n}function _u(e){if(!e.segments.length)return 0;for(var t=e.segments.length-1,i=e.segments[t].duration||e.targetDuration,n=i+2*e.targetDuration;t--&&!(n<=(i+=e.segments[t].duration)););return Math.max(0,t)}function Tu(e,t,i){if(!e||!e.segments)return null;if(e.endList)return yu(e);if(null===t)return null;t=t||0;var n=i?_u(e):e.segments.length;return vu(e,e.mediaSequence+n,t)}function wu(e){return e-Math.floor(e)==0}function Su(e,t){if(wu(t))return t+.1*e;for(var i=t.toString().split(".")[1].length,n=1;n<=i;n++){var r=Math.pow(10,n),a=t*r;if(wu(a)||n===i)return(a+e)/r}}function ku(e){return e.excludeUntil&&e.excludeUntil>Date.now()}function Cu(e){return e.excludeUntil&&e.excludeUntil===1/0}function Eu(e){var t=ku(e);return!e.disabled&&!t}function xu(e,t){return t.attributes&&t.attributes[e]}function Au(e,t){if(1===e.playlists.length)return!0;var i=t.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===e.playlists.filter(function(e){return!!Eu(e)&&(e.attributes.BANDWIDTH||0)<i}).length}function Iu(){return function e(t,n){t=Qu({timeout:45e3},t);var i=e.beforeRequest||qo.Hls.xhr.beforeRequest;if(i&&"function"==typeof i){var r=i(t);r&&(t=r)}var a=Yu(t,function(e,t){var i=a.response;!e&&i&&(a.responseTime=Date.now(),a.roundTripTime=a.responseTime-a.requestTime,a.bytesReceived=i.byteLength||i.length,a.bandwidth||(a.bandwidth=Math.floor(a.bytesReceived/a.roundTripTime*8*1e3))),t.headers&&(a.responseHeaders=t.headers),e&&"ETIMEDOUT"===e.code&&(a.timedout=!0),e||a.aborted||200===t.statusCode||206===t.statusCode||0===t.statusCode||(e=new Error("XHR Failed with a response of: "+(a&&(i||a.responseText)))),n(e,a)}),o=a.abort;return a.abort=function(){return a.aborted=!0,o.apply(a,arguments)},a.uri=t.uri,a.requestTime=Date.now(),a}}function Pu(e){var t,i,n={};return e.byterange&&(n.Range=(t=e.byterange,i=t.offset+t.length-1,"bytes="+t.offset+"-"+i)),n}function Ou(e,t){var i=e.toString(16);return"00".substring(0,2-i.length)+i+(t%2?" ":"")}function Lu(e){return 32<=e&&e<126?String.fromCharCode(e):"."}function Du(i){var n={};return Object.keys(i).forEach(function(e){var t=i[e];ArrayBuffer.isView(t)?n[e]={bytes:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength}:n[e]=t}),n}function Nu(e){var t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")}function Mu(e){return e.resolvedUri}function Ru(e){for(var t=Array.prototype.slice.call(e),i="",n=0;n<t.length/16;n++)i+=t.slice(16*n,16*n+16).map(Ou).join("")+" "+t.slice(16*n,16*n+16).map(Lu).join("")+"\n";return i}function ju(e){var t=e.programTime,i=e.playlist,n=e.retryCount,r=void 0===n?2:n,a=e.seekTo,o=e.pauseAfterSeek,s=void 0===o||o,l=e.tech,u=e.callback;if(!u)throw new Error("seekToProgramTime: callback must be provided");if(void 0===t||!i||!a)return u({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!i.endList&&!l.hasStarted_)return u({message:"player must be playing a live stream to start buffering"});if(!function(e){if(e.segments&&0!==e.segments.length){for(var t=0;t<e.segments.length;t++)if(!e.segments[t].dateTimeObject)return;return 1}}(i))return u({message:"programDateTime tags must be provided in the manifest "+i.resolvedUri});var c=function(e,t){var i=void 0;try{i=new Date(e)}catch(e){return null}if(!t||!t.segments||0===t.segments.length)return null;var n=t.segments[0];if(i<n.dateTimeObject)return null;for(var r=0;r<t.segments.length-1&&(n=t.segments[r],!(i<t.segments[r+1].dateTimeObject));r++);var a,o=t.segments[t.segments.length-1],s=o.dateTimeObject,l=o.videoTimingInfo?(a=o.videoTimingInfo).transmuxedPresentationEnd-a.transmuxedPresentationStart-a.transmuxerPrependedSeconds:o.duration+.25*o.duration;return new Date(s.getTime()+1e3*l)<i?null:(s<i&&(n=o),{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:Ku.duration(t,t.mediaSequence+t.segments.indexOf(n)),type:n.videoTimingInfo?"accurate":"estimate"})}(t,i);if(!c)return u({message:t+" was not found in the stream"});var d=c.segment,h=function(e,t){var i=void 0,n=void 0;try{i=new Date(e),n=new Date(t)}catch(e){}var r=i.getTime();return(n.getTime()-r)/1e3}(d.dateTimeObject,t);if("estimate"===c.type)return 0===r?u({message:t+" is not buffered yet. Try again"}):(a(c.estimatedStart+h),void l.one("seeked",function(){ju({programTime:t,playlist:i,retryCount:r-1,seekTo:a,pauseAfterSeek:s,tech:l,callback:u})}));var p=d.start+h;l.one("seeked",function(){return u(null,l.currentTime())}),s&&l.pause(),a(p)}function Uu(e,t){var i=[],n=void 0;if(e&&e.length)for(n=0;n<e.length;n++)t(e.start(n),e.end(n))&&i.push([e.start(n),e.end(n)]);return qo.createTimeRanges(i)}function Bu(e,i){return Uu(e,function(e,t){return e-.1<=i&&i<=t+.1})}function Fu(e,t){return Uu(e,function(e){return t<=e-1/30})}function $u(e){var t=[];if(!e||!e.length)return"";for(var i=0;i<e.length;i++)t.push(e.start(i)+" => "+e.end(i));return t.join(", ")}function Hu(e){for(var t=[],i=0;i<e.length;i++)t.push({start:e.start(i),end:e.end(i)});return t}function qu(e,t,i){var n=void 0,r=void 0;if(i&&i.cues)for(n=i.cues.length;n--;)(r=i.cues[n]).startTime<=t&&r.endTime>=e&&i.removeCue(r)}function Wu(e){return isNaN(e)||Math.abs(e)===1/0?Number.MAX_VALUE:e}function Vu(e,t,i){var r=y.WebKitDataCue||y.VTTCue;if(t&&t.forEach(function(e){var t=e.stream;this.inbandTextTracks_[t].addCue(new r(e.startTime+this.timestampOffset,e.endTime+this.timestampOffset,e.text))},e),i){var a=Wu(e.mediaSource_.duration);if(i.forEach(function(e){var n=e.cueTime+this.timestampOffset;!("number"!=typeof n||y.isNaN(n)||n<0)&&n<1/0&&e.frames.forEach(function(e){var t,i=new r(n,n,e.value||e.url||e.data||"");i.frame=e,i.value=e,t=i,Object.defineProperties(t.frame,{id:{get:function(){return qo.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),t.value.key}},value:{get:function(){return qo.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),t.value.data}},privateData:{get:function(){return qo.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),t.value.data}}}),this.metadataTrack_.addCue(i)},this)},e),e.metadataTrack_&&e.metadataTrack_.cues&&e.metadataTrack_.cues.length){for(var n=e.metadataTrack_.cues,o=[],s=0;s<n.length;s++)n[s]&&o.push(n[s]);var l=o.reduce(function(e,t){var i=e[t.startTime]||[];return i.push(t),e[t.startTime]=i,e},{}),u=Object.keys(l).sort(function(e,t){return Number(e)-Number(t)});u.forEach(function(e,t){var i=l[e],n=Number(u[t+1])||a;i.forEach(function(e){e.endTime=n})})}}}var zu=qo.createTimeRange,Gu=Su.bind(null,1),Xu=Su.bind(null,-1),Ku={duration:yu,seekable:function(e,t){var i=t||0,n=Tu(e,t,!0);return null===n?zu():zu(i,n)},safeLiveIndex:_u,getMediaInfoForTime:function(e,t,i,n){var r=void 0,a=void 0,o=e.segments.length,s=t-n;if(s<0){if(0<i)for(r=i-1;0<=r;r--)if(a=e.segments[r],0<(s+=Xu(a.duration)))return{mediaIndex:r,startTime:n-bu(e,i,r)};return{mediaIndex:0,startTime:t}}if(i<0){for(r=i;r<0;r++)if((s-=e.targetDuration)<0)return{mediaIndex:0,startTime:t};i=0}for(r=i;r<o;r++)if(a=e.segments[r],(s-=Gu(a.duration))<0)return{mediaIndex:r,startTime:n+bu(e,i,r)};return{mediaIndex:o-1,startTime:t}},isEnabled:Eu,isDisabled:function(e){return e.disabled},isBlacklisted:ku,isIncompatible:Cu,playlistEnd:Tu,isAes:function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},isFmp4:function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].map)return!0;return!1},hasAttribute:xu,estimateSegmentRequestTime:function(e,t,i,n){var r=3<arguments.length&&void 0!==n?n:0;return xu("BANDWIDTH",i)?(e*i.attributes.BANDWIDTH-8*r)/t:NaN},isLowestEnabledRendition:Au},Yu=qo.xhr,Qu=qo.mergeOptions,Ju=Object.freeze({createTransferableMessage:Du,initSegmentId:Nu,segmentKeyId:Mu,hexDump:Ru,tagDump:function(e){return Ru(e.bytes)},textRanges:function(e){var t,i,n="",r=void 0;for(r=0;r<e.length;r++)n+=(i=r,(t=e).start(i)+"-"+t.end(i)+" ");return n}}),Zu="undefined"!=typeof window?window:{},ec="undefined"==typeof Symbol?"__target":Symbol(),tc="application/javascript",ic=Zu.BlobBuilder||Zu.WebKitBlobBuilder||Zu.MozBlobBuilder||Zu.MSBlobBuilder,nc=Zu.URL||Zu.webkitURL||nc&&nc.msURL,rc=Zu.Worker;function ac(r,a){return function(e){var t=this;if(!a)return new rc(r);if(rc&&!e){var i=uc(a.toString().replace(/^function.+?{/,"").slice(0,-1));return this[ec]=new rc(i),function(e){if(e&&i){var t=e.terminate;e.objURL=i,e.terminate=function(){e.objURL&&nc.revokeObjectURL(e.objURL),t.call(e)}}}(this[ec]),this[ec]}var n={postMessage:function(e){t.onmessage&&setTimeout(function(){t.onmessage({data:e,target:n})})}};a.call(n),this.postMessage=function(e){setTimeout(function(){n.onmessage({data:e,target:t})})},this.isThisThread=!0}}if(rc){var oc,sc=uc("self.onmessage = function () {}"),lc=new Uint8Array(1);try{(oc=new rc(sc)).postMessage(lc,[lc.buffer])}catch(e){rc=null}finally{nc.revokeObjectURL(sc),oc&&oc.terminate()}}function uc(t){try{return nc.createObjectURL(new Blob([t],{type:tc}))}catch(e){var i=new ic;return i.append(t),nc.createObjectURL(i.getBlob(type))}}function cc(e){return e.map(function(e){return e.replace(/avc1\.(\d+)\.(\d+)/i,function(e,t,i){return"avc1."+("00"+Number(t).toString(16)).slice(-2)+"00"+("00"+Number(i).toString(16)).slice(-2)})})}function dc(e){var t,i=0<arguments.length&&void 0!==e?e:"",n={codecCount:0};return n.codecCount=i.split(",").length,n.codecCount=n.codecCount||2,(t=/(^|\s|,)+(avc[13])([^ ,]*)/i.exec(i))&&(n.videoCodec=t[2],n.videoObjectTypeIndicator=t[3]),n.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(i),n.audioProfile=n.audioProfile&&n.audioProfile[2],n}function hc(e,t,i){return e+"/"+t+'; codecs="'+i.filter(function(e){return!!e}).join(", ")+'"'}function pc(e){return/mp4a\.\d+.\d+/i.test(e)}function fc(e){return/avc1\.[\da-f]+/i.test(e)}var gc=new ac("./transmuxer-worker.worker.js",function(e,t){var tt=this;!function(){function e(){this.init=function(){var a={};this.on=function(e,t){a[e]||(a[e]=[]),a[e]=a[e].concat(t)},this.off=function(e,t){var i;return!!a[e]&&(i=a[e].indexOf(t),a[e]=a[e].slice(),a[e].splice(i,1),-1<i)},this.trigger=function(e){var t,i,n,r;if(t=a[e])if(2===arguments.length)for(n=t.length,i=0;i<n;++i)t[i].call(this,arguments[1]);else{for(r=[],i=arguments.length,i=1;i<arguments.length;++i)r.push(arguments[i]);for(n=t.length,i=0;i<n;++i)t[i].apply(this,r)}},this.dispose=function(){a={}}}}e.prototype.pipe=function(t){return this.on("data",function(e){t.push(e)}),this.on("done",function(e){t.flush(e)}),this.on("partialdone",function(e){t.partialFlush(e)}),this.on("endedtimeline",function(e){t.endTimeline(e)}),this.on("reset",function(e){t.reset(e)}),t},e.prototype.push=function(e){this.trigger("data",e)},e.prototype.flush=function(e){this.trigger("done",e)},e.prototype.partialFlush=function(e){this.trigger("partialdone",e)},e.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},e.prototype.reset=function(e){this.trigger("reset",e)};var u,t,i,h,r,n,a,p,o,s,l,c,d,f,g,m,v,y,b,_,T,w,S,k,C,E,x,A,I,P,O,L,D,N,M,R,j,U,B,F,$=e,H=Math.pow(2,32)-1;function q(e){for(var t=[];e--;)t.push(0);return t}function W(){W.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new he(0,0),new he(0,1),new he(1,0),new he(1,1)],this.reset(),this.ccStreams_.forEach(function(e){e.on("data",this.trigger.bind(this,"data")),e.on("partialdone",this.trigger.bind(this,"partialdone")),e.on("done",this.trigger.bind(this,"done"))},this)}!function(){var e;if(w={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(e in w)w.hasOwnProperty(e)&&(w[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);S=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),C=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),k=new Uint8Array([0,0,0,1]),E=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),x=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),A={video:E,audio:x},O=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),P=new Uint8Array([0,0,0,0,0,0,0,0]),L=new Uint8Array([0,0,0,0,0,0,0,0]),D=L,N=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),M=L,I=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),u=function(e){var t,i,n=[],r=0;for(t=1;t<arguments.length;t++)n.push(arguments[t]);for(t=n.length;t--;)r+=n[t].byteLength;for(i=new Uint8Array(r+8),new DataView(i.buffer,i.byteOffset,i.byteLength).setUint32(0,i.byteLength),i.set(e,4),t=0,r=8;t<n.length;t++)i.set(n[t],r),r+=n[t].byteLength;return i},t=function(){return u(w.dinf,u(w.dref,O))},i=function(e){return u(w.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},g=function(e){return u(w.hdlr,A[e])},f=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(t[12]=e.samplerate>>>24&255,t[13]=e.samplerate>>>16&255,t[14]=e.samplerate>>>8&255,t[15]=255&e.samplerate),u(w.mdhd,t)},d=function(e){return u(w.mdia,f(e),g(e.type),n(e))},r=function(e){return u(w.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},n=function(e){return u(w.minf,"video"===e.type?u(w.vmhd,I):u(w.smhd,P),t(),v(e))},a=function(e,t){for(var i=[],n=t.length;n--;)i[n]=b(t[n]);return u.apply(null,[w.moof,r(e)].concat(i))},p=function(e){for(var t=e.length,i=[];t--;)i[t]=l(e[t]);return u.apply(null,[w.moov,s(4294967295)].concat(i).concat(o(e)))},o=function(e){for(var t=e.length,i=[];t--;)i[t]=_(e[t]);return u.apply(null,[w.mvex].concat(i))},s=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return u(w.mvhd,t)},m=function(e){var t,i,n=e.samples||[],r=new Uint8Array(4+n.length);for(i=0;i<n.length;i++)t=n[i].flags,r[i+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return u(w.sdtp,r)},v=function(e){return u(w.stbl,y(e),u(w.stts,M),u(w.stsc,D),u(w.stsz,N),u(w.stco,L))},y=function(e){return u(w.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),("video"===e.type?R:j)(e))},R=function(e){var t,i,n=e.sps||[],r=e.pps||[],a=[],o=[];for(t=0;t<n.length;t++)a.push((65280&n[t].byteLength)>>>8),a.push(255&n[t].byteLength),a=a.concat(Array.prototype.slice.call(n[t]));for(t=0;t<r.length;t++)o.push((65280&r[t].byteLength)>>>8),o.push(255&r[t].byteLength),o=o.concat(Array.prototype.slice.call(r[t]));if(i=[w.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),u(w.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([n.length],a,[r.length],o))),u(w.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],e.sarRatio){var s=e.sarRatio[0],l=e.sarRatio[1];i.push(u(w.pasp,new Uint8Array([(4278190080&s)>>24,(16711680&s)>>16,(65280&s)>>8,255&s,(4278190080&l)>>24,(16711680&l)>>16,(65280&l)>>8,255&l])))}return u.apply(null,i)},j=function(e){return u(w.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),i(e))},c=function(e){var t=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return u(w.tkhd,t)},b=function(e){var t,i,n,r,a,o;return t=u(w.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),a=Math.floor(e.baseMediaDecodeTime/(1+H)),o=Math.floor(e.baseMediaDecodeTime%(1+H)),i=u(w.tfdt,new Uint8Array([1,0,0,0,a>>>24&255,a>>>16&255,a>>>8&255,255&a,o>>>24&255,o>>>16&255,o>>>8&255,255&o])),"audio"===e.type?(n=T(e,92),u(w.traf,t,i,n)):(r=m(e),n=T(e,r.length+92),u(w.traf,t,i,n,r))},l=function(e){return e.duration=e.duration||4294967295,u(w.trak,c(e),d(e))},_=function(e){var t=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(t[t.length-1]=0),u(w.trex,t)},F=function(e,t){var i=0,n=0,r=0,a=0;return e.length&&(void 0!==e[0].duration&&(i=1),void 0!==e[0].size&&(n=2),void 0!==e[0].flags&&(r=4),void 0!==e[0].compositionTimeOffset&&(a=8)),[0,0,i|n|r|a,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},B=function(e,t){var i,n,r,a;for(t+=20+16*(n=e.samples||[]).length,i=F(n,t),a=0;a<n.length;a++)r=n[a],i=i.concat([(4278190080&r.duration)>>>24,(16711680&r.duration)>>>16,(65280&r.duration)>>>8,255&r.duration,(4278190080&r.size)>>>24,(16711680&r.size)>>>16,(65280&r.size)>>>8,255&r.size,r.flags.isLeading<<2|r.flags.dependsOn,r.flags.isDependedOn<<6|r.flags.hasRedundancy<<4|r.flags.paddingValue<<1|r.flags.isNonSyncSample,61440&r.flags.degradationPriority,15&r.flags.degradationPriority,(4278190080&r.compositionTimeOffset)>>>24,(16711680&r.compositionTimeOffset)>>>16,(65280&r.compositionTimeOffset)>>>8,255&r.compositionTimeOffset]);return u(w.trun,new Uint8Array(i))},U=function(e,t){var i,n,r,a;for(t+=20+8*(n=e.samples||[]).length,i=F(n,t),a=0;a<n.length;a++)r=n[a],i=i.concat([(4278190080&r.duration)>>>24,(16711680&r.duration)>>>16,(65280&r.duration)>>>8,255&r.duration,(4278190080&r.size)>>>24,(16711680&r.size)>>>16,(65280&r.size)>>>8,255&r.size]);return u(w.trun,new Uint8Array(i))},T=function(e,t){return("audio"===e.type?U:B)(e,t)},h=function(){return u(w.ftyp,S,k,S,C)};function V(e){return u(w.mdat,e)}function z(e,t,i){return ee(i?e:e-t)}function G(e,t,i,n){var r,a,o,s,l,u,c,d=0,h=0,p=0;if(t.length&&(r=se(e.baseMediaDecodeTime,e.samplerate),a=Math.ceil(9e4/(e.samplerate/1024)),i&&n&&(d=r-Math.max(i,n),p=(h=Math.floor(d/a))*a),!(h<1||45e3<p))){for(o=(o=oe[e.samplerate])||t[0].data,s=0;s<h;s++)l=t[0],t.splice(0,0,{data:o,dts:l.dts-a,pts:l.pts-a});e.baseMediaDecodeTime-=Math.floor((u=p,c=e.samplerate,Z(ee(u),c)))}}function X(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts}function K(e,t){var i,n=e.minSegmentDts;return t||(n-=e.timelineStartInfo.dts),i=e.timelineStartInfo.baseMediaDecodeTime,i+=n,i=Math.max(0,i),"audio"===e.type&&(i*=e.samplerate/9e4,i=Math.floor(i)),i}function Y(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))}var Q,J,Z,ee,te,ie=a,ne=[33,16,5,32,164,27],re=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],ae={96e3:[ne,[227,64],q(154),[56]],88200:[ne,[231],q(170),[56]],64e3:[ne,[248,192],q(240),[56]],48e3:[ne,[255,192],q(268),[55,148,128],q(54),[112]],44100:[ne,[255,192],q(268),[55,163,128],q(84),[112]],32e3:[ne,[255,192],q(268),[55,234],q(226),[112]],24e3:[ne,[255,192],q(268),[55,255,128],q(268),[111,112],q(126),[224]],16e3:[ne,[255,192],q(268),[55,255,128],q(268),[111,255],q(269),[223,108],q(195),[1,192]],12e3:[re,q(268),[3,127,248],q(268),[6,255,240],q(268),[13,255,224],q(268),[27,253,128],q(259),[56]],11025:[re,q(268),[3,127,248],q(268),[6,255,240],q(268),[13,255,224],q(268),[27,255,192],q(268),[55,175,128],q(108),[112]],8e3:[re,q(268),[3,121,16],q(47),[7]]},oe=(Q=ae,Object.keys(Q).reduce(function(e,t){return e[t]=new Uint8Array(Q[t].reduce(function(e,t){return e.concat(t)},[])),e},{})),se=(J=function(e){return 9e4*e},Z=function(e,t){return e*t},ee=function(e){return e/9e4},te=function(e,t){return e/t},function(e,t){return J(te(e,t))});function le(e){return null===e?"":(e=ce[e]||e,String.fromCharCode(e))}function ue(){for(var e=[],t=15;t--;)e.push("");return e}(W.prototype=new $).push=function(e){var t,i,n,r;if("sei_rbsp"===e.nalUnitType&&4===(t=function(e){for(var t=0,i={payloadType:-1,payloadSize:0},n=0,r=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)n+=255,t++;for(n+=e[t++];255===e[t];)r+=255,t++;if(r+=e[t++],!i.payload&&4===n){i.payloadType=n,i.payloadSize=r,i.payload=e.subarray(t,t+r);break}t+=r,r=n=0}return i}(e.escapedRBSP)).payloadType&&(i=181!==(r=t).payload[0]||49!=(r.payload[1]<<8|r.payload[2])||"GA94"!==String.fromCharCode(r.payload[3],r.payload[4],r.payload[5],r.payload[6])||3!==r.payload[7]?null:r.payload.subarray(8,r.payload.length-1)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));n=function(e,t){var i,n,r,a,o=[];if(!(64&t[0]))return o;for(n=31&t[0],i=0;i<n;i++)a={type:3&t[2+(r=3*i)],pts:e},4&t[2+r]&&(a.ccData=t[3+r]<<8|t[4+r],o.push(a));return o}(e.pts,i),this.captionPackets_=this.captionPackets_.concat(n),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},W.prototype.flushCCStreams=function(t){this.ccStreams_.forEach(function(e){return"flush"===t?e.flush():e.partialFlush()},this)},W.prototype.flushStream=function(e){this.captionPackets_.length&&(this.captionPackets_.forEach(function(e,t){e.presortIndex=t}),this.captionPackets_.sort(function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts}),this.captionPackets_.forEach(function(e){e.type<2&&this.dispatchCea608Packet(e)},this),this.captionPackets_.length=0),this.flushCCStreams(e)},W.prototype.flush=function(){return this.flushStream("flush")},W.prototype.partialFlush=function(){return this.flushStream("partialFlush")},W.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(e){e.reset()})},W.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},W.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},W.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)},W.prototype.setsTextOrXDSActive=function(e){return 256==(28928&e.ccData)||4138==(30974&e.ccData)||6186==(30974&e.ccData)};var ce={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},de=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],he=function e(t,i){e.prototype.init.call(this),this.field_=t||0,this.dataChannel_=i||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,i,n,r,a;if((t=32639&e.ccData)!==this.lastControlCode_){if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),n=t>>>8,r=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),i=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=i,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=ue();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=ue();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=ue()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(n,r))a=le((n=(3&n)<<8)|r),this[this.mode_](e.pts,a),this.column_++;else if(this.isExtCharacter(n,r))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),a=le((n=(3&n)<<8)|r),this[this.mode_](e.pts,a),this.column_++;else if(this.isMidRowCode(n,r))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&r)&&this.addFormatting(e.pts,["i"]),1==(1&r)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(n,r))this.column_+=3&r;else if(this.isPAC(n,r)){var o=de.indexOf(7968&t);"rollUp"===this.mode_&&(o-this.rollUpRows_+1<0&&(o=this.rollUpRows_-1),this.setRollUp(e.pts,o)),o!==this.row_&&(this.clearFormatting(e.pts),this.row_=o),1&r&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(r)&&14==(14&r)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(n)&&(0===r&&(r=null),a=le(n),a+=le(r),this[this.mode_](e.pts,a),this.column_+=a.length)}else this.lastControlCode_=null}};function pe(e,t){var i=1;for(t<e&&(i=-1);4294967296<Math.abs(t-e);)e+=8589934592*i;return e}function fe(e){var t,i;fe.prototype.init.call(this),this.type_=e||"shared",this.push=function(e){"shared"!==this.type_&&e.type!==this.type_||(void 0===i&&(i=e.dts),e.dts=pe(e.dts,i),e.pts=pe(e.pts,i),t=e.dts,this.trigger("data",e))},this.flush=function(){i=t,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){t=i=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}}he.prototype=new $,he.prototype.flushDisplayed=function(e){var t=this.displayed_.map(function(e){try{return e.trim()}catch(e){return""}}).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},he.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=ue(),this.nonDisplayed_=ue(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},he.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},he.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&48<=t&&t<=63},he.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&32<=t&&t<=63},he.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&32<=t&&t<=47},he.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&33<=t&&t<=35},he.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&64<=t&&t<=127},he.prototype.isColorPAC=function(e){return 64<=e&&e<=79||96<=e&&e<=127},he.prototype.isNormalChar=function(e){return 32<=e&&e<=127},he.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=ue(),this.displayed_=ue()),void 0!==t&&t!==this.row_)for(var i=0;i<this.rollUpRows_;i++)this.displayed_[t-i]=this.displayed_[this.row_-i],this.displayed_[this.row_-i]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},he.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var i=t.reduce(function(e,t){return e+"<"+t+">"},"");this[this.mode_](e,i)},he.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce(function(e,t){return e+"</"+t+">"},"");this.formatting_=[],this[this.mode_](e,t)}},he.prototype.popOn=function(e,t){var i=this.nonDisplayed_[this.row_];i+=t,this.nonDisplayed_[this.row_]=i},he.prototype.rollUp=function(e,t){var i=this.displayed_[this.row_];i+=t,this.displayed_[this.row_]=i},he.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<15;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},he.prototype.paintOn=function(e,t){var i=this.displayed_[this.row_];i+=t,this.displayed_[this.row_]=i};var ge={CaptionStream:W,Cea608Stream:he},me={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21};function ve(e,t,i){var n,r="";for(n=t;n<i;n++)r+="%"+("00"+e[n].toString(16)).slice(-2);return r}function ye(e,t,i){return decodeURIComponent(ve(e,t,i))}function be(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]}fe.prototype=new $;var _e,Te=fe,we={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=ye(e.data,1,t),e.value=ye(e.data,t+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=ye(e.data,1,t),e.url=ye(e.data,t+1,e.data.length);break}},PRIV:function(e){var t,i;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=(i=e.data,unescape(ve(i,0,t)));break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}};(_e=function(e){var t,l={debug:!(!e||!e.debug),descriptor:e&&e.descriptor},u=0,c=[],d=0;if(_e.prototype.init.call(this),this.dispatchType=me.METADATA_STREAM_TYPE.toString(16),l.descriptor)for(t=0;t<l.descriptor.length;t++)this.dispatchType+=("00"+l.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,i,n,r,a;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(d=0,c.length=0),0===c.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))l.debug;else if(c.push(e),d+=e.data.byteLength,1===c.length&&(u=be(e.data.subarray(6,10)),u+=10),!(d<u)){for(t={data:new Uint8Array(u),frames:[],pts:c[0].pts,dts:c[0].dts},a=0;a<u;)t.data.set(c[0].data.subarray(0,u-a),a),a+=c[0].data.byteLength,d-=c[0].data.byteLength,c.shift();i=10,64&t.data[5]&&(i+=4,i+=be(t.data.subarray(10,14)),u-=be(t.data.subarray(16,20)));do{if((n=be(t.data.subarray(i+4,i+8)))<1)return;if((r={id:String.fromCharCode(t.data[i],t.data[i+1],t.data[i+2],t.data[i+3]),data:t.data.subarray(i+10,i+n+10)}).key=r.id,we[r.id]&&(we[r.id](r),"com.apple.streaming.transportStreamTimestamp"===r.owner)){var o=r.data,s=(1&o[3])<<30|o[4]<<22|o[5]<<14|o[6]<<6|o[7]>>>2;s*=4,s+=3&o[7],r.timeStamp=s,void 0===t.pts&&void 0===t.dts&&(t.pts=r.timeStamp,t.dts=r.timeStamp),this.trigger("timestamp",r)}t.frames.push(r),i+=10,i+=n}while(i<u);this.trigger("data",t)}}}).prototype=new $;var Se,ke,Ce,Ee=_e,xe=Te;(Se=function(){var r=new Uint8Array(188),a=0;Se.prototype.init.call(this),this.push=function(e){var t,i=0,n=188;for(a?((t=new Uint8Array(e.byteLength+a)).set(r.subarray(0,a)),t.set(e,a),a=0):t=e;n<t.byteLength;)71!==t[i]||71!==t[n]?(i++,n++):(this.trigger("data",t.subarray(i,n)),i+=188,n+=188);i<t.byteLength&&(r.set(t.subarray(i),0),a=t.byteLength-i)},this.flush=function(){188===a&&71===r[0]&&(this.trigger("data",r),a=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){a=0,this.trigger("reset")}}).prototype=new $,(ke=function(){var n,r,a,o;ke.prototype.init.call(this),(o=this).packetsWaitingForPmt=[],this.programMapTable=void 0,n=function(e,t){var i=0;t.payloadUnitStartIndicator&&(i+=e[i]+1),("pat"===t.type?r:a)(e.subarray(i),t)},r=function(e,t){t.section_number=e[7],t.last_section_number=e[8],o.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=o.pmtPid},a=function(e,t){var i,n;if(1&e[5]){for(o.programMapTable={video:null,audio:null,"timed-metadata":{}},i=3+((15&e[1])<<8|e[2])-4,n=12+((15&e[10])<<8|e[11]);n<i;){var r=e[n],a=(31&e[n+1])<<8|e[n+2];r===me.H264_STREAM_TYPE&&null===o.programMapTable.video?o.programMapTable.video=a:r===me.ADTS_STREAM_TYPE&&null===o.programMapTable.audio?o.programMapTable.audio=a:r===me.METADATA_STREAM_TYPE&&(o.programMapTable["timed-metadata"][a]=r),n+=5+((15&e[n+3])<<8|e[n+4])}t.programMapTable=o.programMapTable}},this.push=function(e){var t={},i=4;if(t.payloadUnitStartIndicator=!!(64&e[1]),t.pid=31&e[1],t.pid<<=8,t.pid|=e[2],1<(48&e[3])>>>4&&(i+=e[i]+1),0===t.pid)t.type="pat",n(e.subarray(i),t),this.trigger("data",t);else if(t.pid===this.pmtPid)for(t.type="pmt",n(e.subarray(i),t),this.trigger("data",t);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([e,i,t]):this.processPes_(e,i,t)},this.processPes_=function(e,t,i){i.pid===this.programMapTable.video?i.streamType=me.H264_STREAM_TYPE:i.pid===this.programMapTable.audio?i.streamType=me.ADTS_STREAM_TYPE:i.streamType=this.programMapTable["timed-metadata"][i.pid],i.type="pes",i.data=e.subarray(t),this.trigger("data",i)}}).prototype=new $,ke.STREAM_TYPES={h264:27,adts:15},(Ce=function(){function n(e,t,i){var n,r,a,o,s,l=new Uint8Array(e.size),u={type:t},c=0,d=0;if(e.data.length&&!(e.size<9)){for(u.trackId=e.data[0].pid,c=0;c<e.data.length;c++)r=e.data[c],l.set(r.data,d),d+=r.data.byteLength;a=l,(o=u).packetLength=6+(a[4]<<8|a[5]),o.dataAlignmentIndicator=0!=(4&a[6]),192&(s=a[7])&&(o.pts=(14&a[9])<<27|(255&a[10])<<20|(254&a[11])<<12|(255&a[12])<<5|(254&a[13])>>>3,o.pts*=4,o.pts+=(6&a[13])>>>1,o.dts=o.pts,64&s&&(o.dts=(14&a[14])<<27|(255&a[15])<<20|(254&a[16])<<12|(255&a[17])<<5|(254&a[18])>>>3,o.dts*=4,o.dts+=(6&a[18])>>>1)),o.data=a.subarray(9+a[8]),n="video"===t||u.packetLength<=e.size,(i||n)&&(e.size=0,e.data.length=0),n&&h.trigger("data",u)}}var t,h=this,r={data:[],size:0},a={data:[],size:0},o={data:[],size:0};Ce.prototype.init.call(this),this.push=function(i){({pat:function(){},pes:function(){var e,t;switch(i.streamType){case me.H264_STREAM_TYPE:case me.H264_STREAM_TYPE:e=r,t="video";break;case me.ADTS_STREAM_TYPE:e=a,t="audio";break;case me.METADATA_STREAM_TYPE:e=o,t="timed-metadata";break;default:return}i.payloadUnitStartIndicator&&n(e,t,!0),e.data.push(i),e.size+=i.data.byteLength},pmt:function(){var e={type:"metadata",tracks:[]};null!==(t=i.programMapTable).video&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.video,codec:"avc",type:"video"}),null!==t.audio&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.audio,codec:"adts",type:"audio"}),h.trigger("data",e)}})[i.type]()},this.reset=function(){r.size=0,r.data.length=0,a.size=0,a.data.length=0,this.trigger("reset")},this.flushStreams_=function(){n(r,"video"),n(a,"audio"),n(o,"timed-metadata")},this.flush=function(){this.flushStreams_(),this.trigger("done")}}).prototype=new $;var Ae={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:Se,TransportParseStream:ke,ElementaryStream:Ce,TimestampRolloverStream:xe,CaptionStream:ge.CaptionStream,Cea608Stream:ge.Cea608Stream,MetadataStream:Ee};for(var Ie in me)me.hasOwnProperty(Ie)&&(Ae[Ie]=me[Ie]);var Pe,Oe=Ae,Le=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(Pe=function(l){var u,c=0;Pe.prototype.init.call(this),this.push=function(e){var t,i,n,r,a,o,s=0;if(l||(c=0),"audio"===e.type)for(u?(r=u,(u=new Uint8Array(r.byteLength+e.data.byteLength)).set(r),u.set(e.data,r.byteLength)):u=e.data;s+5<u.length;)if(255===u[s]&&240==(246&u[s+1])){if(i=2*(1&~u[s+1]),t=(3&u[s+3])<<11|u[s+4]<<3|(224&u[s+5])>>5,o=9e4*(a=1024*(1+(3&u[s+6])))/Le[(60&u[s+2])>>>2],n=s+t,u.byteLength<n)return;if(this.trigger("data",{pts:e.pts+c*o,dts:e.dts+c*o,sampleCount:a,audioobjecttype:1+(u[s+2]>>>6&3),channelcount:(1&u[s+2])<<2|(192&u[s+3])>>>6,samplerate:Le[(60&u[s+2])>>>2],samplingfrequencyindex:(60&u[s+2])>>>2,samplesize:16,data:u.subarray(s+7+i,n)}),c++,u.byteLength===n)return void(u=void 0);u=u.subarray(n)}else s++},this.flush=function(){c=0,this.trigger("done")},this.reset=function(){u=void 0,this.trigger("reset")},this.endTimeline=function(){u=void 0,this.trigger("endedtimeline")}}).prototype=new $;function De(n){var r=n.byteLength,a=0,o=0;this.length=function(){return 8*r},this.bitsAvailable=function(){return 8*r+o},this.loadWord=function(){var e=n.byteLength-r,t=new Uint8Array(4),i=Math.min(4,r);if(0===i)throw new Error("no bytes available");t.set(n.subarray(e,e+i)),a=new DataView(t.buffer).getUint32(0),o=8*i,r-=i},this.skipBits=function(e){var t;e<o||(e-=o,e-=8*(t=Math.floor(e/8)),r-=t,this.loadWord()),a<<=e,o-=e},this.readBits=function(e){var t=Math.min(o,e),i=a>>>32-t;return 0<(o-=t)?a<<=t:0<r&&this.loadWord(),0<(t=e-t)?i<<t|this.readBits(t):i},this.skipLeadingZeros=function(){var e;for(e=0;e<o;++e)if(0!=(a&2147483648>>>e))return a<<=e,o-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()}var Ne,Me,Re,je=Pe;(Me=function(){var n,r,a=0;Me.prototype.init.call(this),this.push=function(e){for(var t,i=(r=r?((t=new Uint8Array(r.byteLength+e.data.byteLength)).set(r),t.set(e.data,r.byteLength),t):e.data).byteLength;a<i-3;a++)if(1===r[a+2]){n=a+5;break}for(;n<i;)switch(r[n]){case 0:if(0!==r[n-1]){n+=2;break}if(0!==r[n-2]){n++;break}for(a+3!==n-2&&this.trigger("data",r.subarray(a+3,n-2));1!==r[++n]&&n<i;);a=n-2,n+=3;break;case 1:if(0!==r[n-1]||0!==r[n-2]){n+=3;break}this.trigger("data",r.subarray(a+3,n-2)),a=n-2,n+=3;break;default:n+=3}r=r.subarray(a),n-=a,a=0},this.reset=function(){r=null,a=0,this.trigger("reset")},this.flush=function(){r&&3<r.byteLength&&this.trigger("data",r.subarray(a+3)),r=null,a=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}}).prototype=new $,Re={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(Ne=function(){var i,n,r,a,o,s,b,t=new Me;Ne.prototype.init.call(this),(i=this).push=function(e){"video"===e.type&&(n=e.trackId,r=e.pts,a=e.dts,t.push(e))},t.on("data",function(e){var t={trackId:n,pts:r,dts:a,data:e};switch(31&e[0]){case 5:t.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:t.nalUnitType="sei_rbsp",t.escapedRBSP=o(e.subarray(1));break;case 7:t.nalUnitType="seq_parameter_set_rbsp",t.escapedRBSP=o(e.subarray(1)),t.config=s(t.escapedRBSP);break;case 8:t.nalUnitType="pic_parameter_set_rbsp";break;case 9:t.nalUnitType="access_unit_delimiter_rbsp"}i.trigger("data",t)}),t.on("done",function(){i.trigger("done")}),t.on("partialdone",function(){i.trigger("partialdone")}),t.on("reset",function(){i.trigger("reset")}),t.on("endedtimeline",function(){i.trigger("endedtimeline")}),this.flush=function(){t.flush()},this.partialFlush=function(){t.partialFlush()},this.reset=function(){t.reset()},this.endTimeline=function(){t.endTimeline()},b=function(e,t){var i,n=8,r=8;for(i=0;i<e;i++)0!==r&&(r=(n+t.readExpGolomb()+256)%256),n=0===r?n:r},o=function(e){for(var t,i,n=e.byteLength,r=[],a=1;a<n-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return e;t=n-r.length,i=new Uint8Array(t);var o=0;for(a=0;a<t;o++,a++)o===r[0]&&(o++,r.shift()),i[a]=e[o];return i},s=function(e){var t,i,n,r,a,o,s,l,u,c,d,h,p,f=0,g=0,m=0,v=0,y=1;if(i=(t=new De(e)).readUnsignedByte(),r=t.readUnsignedByte(),n=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),Re[i]&&(3===(a=t.readUnsignedExpGolomb())&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(d=3!==a?8:12,p=0;p<d;p++)t.readBoolean()&&b(p<6?16:64,t);if(t.skipUnsignedExpGolomb(),0===(o=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();else if(1===o)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),s=t.readUnsignedExpGolomb(),p=0;p<s;p++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),l=t.readUnsignedExpGolomb(),u=t.readUnsignedExpGolomb(),0===(c=t.readBits(1))&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(f=t.readUnsignedExpGolomb(),g=t.readUnsignedExpGolomb(),m=t.readUnsignedExpGolomb(),v=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(t.readUnsignedByte()){case 1:h=[1,1];break;case 2:h=[12,11];break;case 3:h=[10,11];break;case 4:h=[16,11];break;case 5:h=[40,33];break;case 6:h=[24,11];break;case 7:h=[20,11];break;case 8:h=[32,11];break;case 9:h=[80,33];break;case 10:h=[18,11];break;case 11:h=[15,11];break;case 12:h=[64,33];break;case 13:h=[160,99];break;case 14:h=[4,3];break;case 15:h=[3,2];break;case 16:h=[2,1];break;case 255:h=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()]}h&&(y=h[0]/h[1])}return{profileIdc:i,levelIdc:n,profileCompatibility:r,width:Math.ceil((16*(l+1)-2*f-2*g)*y),height:(2-c)*(u+1)*16-2*m-2*v,sarRatio:h}}}).prototype=new $;var Ue,Be={H264Stream:Ne,NalByteStream:Me};function Fe(e,t){var i;if(e.length===t.length){for(i=0;i<e.length;i++)if(e[i]!==t[i])return;return 1}}function $e(e,t,i,n,r,a){return{start:{dts:e,pts:e+(i-t)},end:{dts:e+(n-t),pts:e+(r-i)},prependedContentDuration:a,baseMediaDecodeTime:e}}(Ue=function(){var f=new Uint8Array,g=0;Ue.prototype.init.call(this),this.setTimestamp=function(e){g=e},this.push=function(e){var t,i,n,r,a,o,s,l,u,c,d,h=0,p=0;for(f.length?(r=f.length,(f=new Uint8Array(e.byteLength+r)).set(f.subarray(0,r)),f.set(e,r)):f=e;3<=f.length-p;)if(f[p]!=="I".charCodeAt(0)||f[p+1]!=="D".charCodeAt(0)||f[p+2]!=="3".charCodeAt(0))if(255!=(255&f[p])||240!=(240&f[p+1]))p++;else{if(f.length-p<7)break;if(p+(0,c=(224&(l=f)[(u=p)+5])>>5,d=l[u+4]<<3,h=6144&l[u+3]|d|c)>f.length)break;n={type:"audio",data:f.subarray(p,p+h),pts:g,dts:g},this.trigger("data",n),p+=h}else{if(f.length-p<10)break;if(p+(s=(a=f)[(o=p)+6]<<21|a[o+7]<<14|a[o+8]<<7|a[o+9],h=(16&a[o+5])>>4?20+s:10+s)>f.length)break;i={type:"timed-metadata",data:f.subarray(p,p+h)},this.trigger("data",i),p+=h}t=f.length-p,f=0<t?f.subarray(p):new Uint8Array},this.reset=function(){f=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){f=new Uint8Array,this.trigger("endedtimeline")}}).prototype=new $;var He,qe,We,Ve,ze=Ue,Ge=Be.H264Stream,Xe=function(e){return e[0]==="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)},Ke=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Ye=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"];(qe=function(l,u){var c=[],d=0,h=0,p=0,f=1/0;u=u||{},qe.prototype.init.call(this),this.push=function(t){Y(l,t),l&&Ke.forEach(function(e){l[e]=t[e]}),c.push(t)},this.setEarliestDts=function(e){h=e-l.timelineStartInfo.baseMediaDecodeTime},this.setVideoBaseMediaDecodeTime=function(e){f=e},this.setAudioAppendStart=function(e){p=e},this.flush=function(){var e,t,i,n,r,a,o,s;0!==c.length&&(a=c,s=h,e=(o=l).minSegmentDts>=s?a:(o.minSegmentDts=1/0,a.filter(function(e){return e.dts>=s&&(o.minSegmentDts=Math.min(o.minSegmentDts,e.dts),o.minSegmentPts=o.minSegmentDts,!0)})),l.baseMediaDecodeTime=K(l,u.keepOriginalTimestamps),G(l,e,p,f),l.samples=function(e){var t,i,n=[];for(t=0;t<e.length;t++)i=e[t],n.push({size:i.data.byteLength,duration:1024});return n}(e),i=V(function(e){var t,i,n=0,r=new Uint8Array(function(e){var t,i=0;for(t=0;t<e.length;t++)i+=e[t].data.byteLength;return i}(e));for(t=0;t<e.length;t++)i=e[t],r.set(i.data,n),n+=i.data.byteLength;return r}(e)),c=[],t=ie(d,[l]),n=new Uint8Array(t.byteLength+i.byteLength),d++,n.set(t),n.set(i,t.byteLength),X(l),r=Math.ceil(9216e4/l.samplerate),e.length&&this.trigger("timingInfo",{start:e[0].dts,end:e[0].dts+e.length*r}),this.trigger("data",{track:l,boxes:n})),this.trigger("done","AudioSegmentStream")},this.reset=function(){X(l),c=[],this.trigger("reset")}}).prototype=new $,(He=function(d,h){var t,i,p=0,f=[],g=[];h=h||{},He.prototype.init.call(this),delete d.minPTS,this.gopCache_=[],this.push=function(e){Y(d,e),"seq_parameter_set_rbsp"!==e.nalUnitType||t||(t=e.config,d.sps=[e.data],Ye.forEach(function(e){d[e]=t[e]},this)),"pic_parameter_set_rbsp"!==e.nalUnitType||i||(i=e.data,d.pps=[e.data]),f.push(e)},this.flush=function(){for(var e,t,i,n,r,a,o,s=0;f.length&&"access_unit_delimiter_rbsp"!==f[0].nalUnitType;)f.shift();if(0===f.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if((t=function(e){var t,i,n=[],r=[];for(n.byteLength=0,n.nalCount=0,n.duration=0,n.pts=e[0].pts,n.dts=e[0].dts,r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,t=0;t<e.length;t++)(i=e[t]).keyFrame?(n.length&&(r.push(n),r.byteLength+=n.byteLength,r.nalCount+=n.nalCount,r.duration+=n.duration),(n=[i]).nalCount=i.length,n.byteLength=i.byteLength,n.pts=i.pts,n.dts=i.dts,n.duration=i.duration):(n.duration+=i.duration,n.nalCount+=i.length,n.byteLength+=i.byteLength,n.push(i));return r.length&&n.duration<=0&&(n.duration=r[r.length-1].duration),r.byteLength+=n.byteLength,r.nalCount+=n.nalCount,r.duration+=n.duration,r.push(n),r}(function(e){var t,i,n=[],r=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,t=n.byteLength=0;t<e.length;t++)"access_unit_delimiter_rbsp"===(i=e[t]).nalUnitType?(n.length&&(n.duration=i.dts-n.dts,r.byteLength+=n.byteLength,r.nalCount+=n.length,r.duration+=n.duration,r.push(n)),(n=[i]).byteLength=i.data.byteLength,n.pts=i.pts,n.dts=i.dts):("slice_layer_without_partitioning_rbsp_idr"===i.nalUnitType&&(n.keyFrame=!0),n.duration=i.dts-n.dts,n.byteLength+=i.data.byteLength,n.push(i));return r.length&&(!n.duration||n.duration<=0)&&(n.duration=r[r.length-1].duration),r.byteLength+=n.byteLength,r.nalCount+=n.length,r.duration+=n.duration,r.push(n),r}(f)))[0][0].keyFrame||((e=this.getGopForFusion_(f[0],d))?(s=e.duration,t.unshift(e),t.byteLength+=e.byteLength,t.nalCount+=e.nalCount,t.pts=e.pts,t.dts=e.dts,t.duration+=e.duration):(!(u=t)[0][0].keyFrame&&1<u.length&&(c=u.shift(),u.byteLength-=c.byteLength,u.nalCount-=c.nalCount,u[0][0].dts=c.dts,u[0][0].pts=c.pts,u[0][0].duration+=c.duration),t=u)),g.length){var l;if(!(l=h.alignGopsAtEnd?this.alignGopsAtEnd_(t):this.alignGopsAtStart_(t)))return this.gopCache_.unshift({gop:t.pop(),pps:d.pps,sps:d.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),f=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");X(d),t=l}var u,c;Y(d,t),d.samples=function(e,t){var i,n,r,a,o,s,l=t||0,u=[];for(i=0;i<e.length;i++)for(r=e[i],n=0;n<r.length;n++)a=r[n],l+=(o=a,s=void 0,(s={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}).dataOffset=l,s.compositionTimeOffset=o.pts-o.dts,s.duration=o.duration,s.size=4*o.length,s.size+=o.byteLength,o.keyFrame&&(s.flags.dependsOn=2,s.flags.isNonSyncSample=0),s.size),u.push(s);return u}(t),n=V(function(e){var t,i,n,r,a,o,s=0,l=e.byteLength,u=e.nalCount,c=new Uint8Array(l+4*u),d=new DataView(c.buffer);for(t=0;t<e.length;t++)for(r=e[t],i=0;i<r.length;i++)for(a=r[i],n=0;n<a.length;n++)o=a[n],d.setUint32(s,o.data.byteLength),s+=4,c.set(o.data,s),s+=o.data.byteLength;return c}(t)),d.baseMediaDecodeTime=K(d,h.keepOriginalTimestamps),this.trigger("processedGopsInfo",t.map(function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}})),a=t[0],o=t[t.length-1],this.trigger("segmentTimingInfo",$e(d.baseMediaDecodeTime,a.dts,a.pts,o.dts+o.duration,o.pts+o.duration,s)),this.trigger("timingInfo",{start:t[0].dts,end:t[t.length-1].dts+t[t.length-1].duration}),this.gopCache_.unshift({gop:t.pop(),pps:d.pps,sps:d.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),f=[],this.trigger("baseMediaDecodeTime",d.baseMediaDecodeTime),this.trigger("timelineStartInfo",d.timelineStartInfo),i=ie(p,[d]),r=new Uint8Array(i.byteLength+n.byteLength),p++,r.set(i),r.set(n,i.byteLength),this.trigger("data",{track:d,boxes:r}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),f=[],this.gopCache_.length=0,g.length=0,this.trigger("reset")},this.resetStream_=function(){X(d),i=t=void 0},this.getGopForFusion_=function(e){var t,i,n,r,a,o=1/0;for(a=0;a<this.gopCache_.length;a++)n=(r=this.gopCache_[a]).gop,d.pps&&Fe(d.pps[0],r.pps[0])&&d.sps&&Fe(d.sps[0],r.sps[0])&&(n.dts<d.timelineStartInfo.dts||-1e4<=(t=e.dts-n.dts-n.duration)&&t<=45e3&&(!i||t<o)&&(i=r,o=t));return i?i.gop:null},this.alignGopsAtStart_=function(e){var t,i,n,r,a,o,s,l;for(a=e.byteLength,o=e.nalCount,s=e.duration,t=i=0;t<g.length&&i<e.length&&(n=g[t],r=e[i],n.pts!==r.pts);)r.pts>n.pts?t++:(i++,a-=r.byteLength,o-=r.nalCount,s-=r.duration);return 0===i?e:i===e.length?null:((l=e.slice(i)).byteLength=a,l.duration=s,l.nalCount=o,l.pts=l[0].pts,l.dts=l[0].dts,l)},this.alignGopsAtEnd_=function(e){var t,i,n,r,a,o,s;for(t=g.length-1,i=e.length-1,a=null,o=!1;0<=t&&0<=i;){if(n=g[t],r=e[i],n.pts===r.pts){o=!0;break}n.pts>r.pts?t--:(t===g.length-1&&(a=i),i--)}if(!o&&null===a)return null;if(0===(s=o?i:a))return e;var l=e.slice(s),u=l.reduce(function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e},{byteLength:0,duration:0,nalCount:0});return l.byteLength=u.byteLength,l.duration=u.duration,l.nalCount=u.nalCount,l.pts=l[0].pts,l.dts=l[0].dts,l},this.alignGopsWith=function(e){g=e}}).prototype=new $,(Ve=function(e,t){this.numberOfTracks=0,this.metadataStream=t,void 0!==(e=e||{}).remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,"boolean"==typeof e.keepOriginalTimestamps?this.keepOriginalTimestamps=e.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Ve.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track,this.pendingBoxes.push(e.boxes)),void("audio"===e.track.type&&(this.audioTrack=e.track,this.pendingBoxes.unshift(e.boxes))))}}).prototype=new $,Ve.prototype.flush=function(e){var t,i,n,r,a,o,s,l,u=0,c={captions:[],captionStreams:{},metadata:[],info:{}},d=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(d=this.videoTrack.timelineStartInfo.pts,Ye.forEach(function(e){c.info[e]=this.videoTrack[e]},this)):this.audioTrack&&(d=this.audioTrack.timelineStartInfo.pts,Ke.forEach(function(e){c.info[e]=this.audioTrack[e]},this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?c.type=this.pendingTracks[0].type:c.type="combined",this.emittedTracks+=this.pendingTracks.length,a=this.pendingTracks,o=void 0,s=h(),l=p(a),(o=new Uint8Array(s.byteLength+l.byteLength)).set(s),o.set(l,s.byteLength),n=o,c.initSegment=new Uint8Array(n.byteLength),c.initSegment.set(n),c.data=new Uint8Array(this.pendingBytes),r=0;r<this.pendingBoxes.length;r++)c.data.set(this.pendingBoxes[r],u),u+=this.pendingBoxes[r].byteLength;for(r=0;r<this.pendingCaptions.length;r++)(t=this.pendingCaptions[r]).startTime=z(t.startPts,d,this.keepOriginalTimestamps),t.endTime=z(t.endPts,d,this.keepOriginalTimestamps),c.captionStreams[t.stream]=!0,c.captions.push(t);for(r=0;r<this.pendingMetadata.length;r++)(i=this.pendingMetadata[r]).cueTime=z(i.pts,d,this.keepOriginalTimestamps),c.metadata.push(i);for(c.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",c),r=0;r<c.captions.length;r++)t=c.captions[r],this.trigger("caption",t);for(r=0;r<c.metadata.length;r++)i=c.metadata[r],this.trigger("id3Frame",i)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},Ve.prototype.setRemux=function(e){this.remuxTracks=e},(We=function(n){var r,a,o=this,i=!0;We.prototype.init.call(this),n=n||{},this.baseMediaDecodeTime=n.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var t={};(this.transmuxPipeline_=t).type="aac",t.metadataStream=new Oe.MetadataStream,t.aacStream=new ze,t.audioTimestampRolloverStream=new Oe.TimestampRolloverStream("audio"),t.timedMetadataTimestampRolloverStream=new Oe.TimestampRolloverStream("timed-metadata"),t.adtsStream=new je,t.coalesceStream=new Ve(n,t.metadataStream),t.headOfPipeline=t.aacStream,t.aacStream.pipe(t.audioTimestampRolloverStream).pipe(t.adtsStream),t.aacStream.pipe(t.timedMetadataTimestampRolloverStream).pipe(t.metadataStream).pipe(t.coalesceStream),t.metadataStream.on("timestamp",function(e){t.aacStream.setTimestamp(e.timeStamp)}),t.aacStream.on("data",function(e){"timed-metadata"!==e.type||t.audioSegmentStream||(a=a||{timelineStartInfo:{baseMediaDecodeTime:o.baseMediaDecodeTime},codec:"adts",type:"audio"},t.coalesceStream.numberOfTracks++,t.audioSegmentStream=new qe(a,n),t.audioSegmentStream.on("timingInfo",o.trigger.bind(o,"audioTimingInfo")),t.adtsStream.pipe(t.audioSegmentStream).pipe(t.coalesceStream)),o.trigger("trackinfo",{hasAudio:!!a,hasVideo:!!r})}),t.coalesceStream.on("data",this.trigger.bind(this,"data")),t.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var i={};(this.transmuxPipeline_=i).type="ts",i.metadataStream=new Oe.MetadataStream,i.packetStream=new Oe.TransportPacketStream,i.parseStream=new Oe.TransportParseStream,i.elementaryStream=new Oe.ElementaryStream,i.timestampRolloverStream=new Oe.TimestampRolloverStream,i.adtsStream=new je,i.h264Stream=new Ge,i.captionStream=new Oe.CaptionStream,i.coalesceStream=new Ve(n,i.metadataStream),i.headOfPipeline=i.packetStream,i.packetStream.pipe(i.parseStream).pipe(i.elementaryStream).pipe(i.timestampRolloverStream),i.timestampRolloverStream.pipe(i.h264Stream),i.timestampRolloverStream.pipe(i.adtsStream),i.timestampRolloverStream.pipe(i.metadataStream).pipe(i.coalesceStream),i.h264Stream.pipe(i.captionStream).pipe(i.coalesceStream),i.elementaryStream.on("data",function(e){var t;if("metadata"===e.type){for(t=e.tracks.length;t--;)r||"video"!==e.tracks[t].type?a||"audio"!==e.tracks[t].type||((a=e.tracks[t]).timelineStartInfo.baseMediaDecodeTime=o.baseMediaDecodeTime):(r=e.tracks[t]).timelineStartInfo.baseMediaDecodeTime=o.baseMediaDecodeTime;r&&!i.videoSegmentStream&&(i.coalesceStream.numberOfTracks++,i.videoSegmentStream=new He(r,n),i.videoSegmentStream.on("timelineStartInfo",function(e){a&&(a.timelineStartInfo=e,i.audioSegmentStream.setEarliestDts(e.dts))}),i.videoSegmentStream.on("processedGopsInfo",o.trigger.bind(o,"gopInfo")),i.videoSegmentStream.on("segmentTimingInfo",o.trigger.bind(o,"videoSegmentTimingInfo")),i.videoSegmentStream.on("baseMediaDecodeTime",function(e){a&&i.audioSegmentStream.setVideoBaseMediaDecodeTime(e)}),i.videoSegmentStream.on("timingInfo",o.trigger.bind(o,"videoTimingInfo")),i.h264Stream.pipe(i.videoSegmentStream).pipe(i.coalesceStream)),a&&!i.audioSegmentStream&&(i.coalesceStream.numberOfTracks++,i.audioSegmentStream=new qe(a,n),i.audioSegmentStream.on("timingInfo",o.trigger.bind(o,"audioTimingInfo")),i.adtsStream.pipe(i.audioSegmentStream).pipe(i.coalesceStream)),o.trigger("trackinfo",{hasAudio:!!a,hasVideo:!!r})}}),i.coalesceStream.on("data",this.trigger.bind(this,"data")),i.coalesceStream.on("id3Frame",function(e){e.dispatchType=i.metadataStream.dispatchType,o.trigger("id3Frame",e)}),i.coalesceStream.on("caption",this.trigger.bind(this,"caption")),i.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(e){var t=this.transmuxPipeline_;n.keepOriginalTimestamps||(this.baseMediaDecodeTime=e),a&&(a.timelineStartInfo.dts=void 0,a.timelineStartInfo.pts=void 0,X(a),n.keepOriginalTimestamps||(a.timelineStartInfo.baseMediaDecodeTime=e),t.audioTimestampRolloverStream&&t.audioTimestampRolloverStream.discontinuity()),r&&(t.videoSegmentStream&&(t.videoSegmentStream.gopCache_=[]),r.timelineStartInfo.dts=void 0,r.timelineStartInfo.pts=void 0,X(r),t.captionStream.reset(),n.keepOriginalTimestamps||(r.timelineStartInfo.baseMediaDecodeTime=e)),t.timestampRolloverStream&&t.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){a&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.setRemux=function(e){var t=this.transmuxPipeline_;n.remux=e,t&&t.coalesceStream&&t.coalesceStream.setRemux(e)},this.alignGopsWith=function(e){r&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.push=function(e){if(i){var t=Xe(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),i=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){i=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new $;var Qe={Transmuxer:We,VideoSegmentStream:He,AudioSegmentStream:qe,AUDIO_PROPERTIES:Ke,VIDEO_PROPERTIES:Ye,generateVideoSegmentTimingInfo:$e};function Je(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ze=(Je(et.prototype,[{key:"init",value:function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new Qe.Transmuxer(this.options),function(n,e){e.on("data",function(e){var t=e.initSegment;e.initSegment={data:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength};var i=e.data;e.data=i.buffer,n.postMessage({action:"data",segment:e,byteOffset:i.byteOffset,byteLength:i.byteLength},[e.data])}),e.captionStream&&e.captionStream.on("data",function(e){n.postMessage({action:"caption",data:e})}),e.on("done",function(e){n.postMessage({action:"done"})}),e.on("gopInfo",function(e){n.postMessage({action:"gopInfo",gopInfo:e})}),e.on("videoSegmentTimingInfo",function(e){n.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:e})})}(this.self,this.transmuxer)}},{key:"push",value:function(e){var t=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.transmuxer.push(t)}},{key:"reset",value:function(){this.init()}},{key:"setTimestampOffset",value:function(e){var t=e.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(9e4*t))}},{key:"setAudioAppendStart",value:function(e){this.transmuxer.setAudioAppendStart(Math.ceil(9e4*e.appendStart))}},{key:"flush",value:function(e){this.transmuxer.flush()}},{key:"resetCaptions",value:function(){this.transmuxer.resetCaptions()}},{key:"alignGopsWith",value:function(e){this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())}}]),et);function et(e,t){!function(e){if(!(e instanceof et))throw new TypeError("Cannot call a class as a function")}(this),this.options=t||{},this.self=e,this.init()}new function(t){t.onmessage=function(e){"init"===e.data.action&&e.data.options?this.messageHandlers=new Ze(t,e.data.options):(this.messageHandlers||(this.messageHandlers=new Ze(t)),e.data&&e.data.action&&"init"!==e.data.action&&this.messageHandlers[e.data.action]&&this.messageHandlers[e.data.action](e.data))}}(tt)}()}),mc={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",audioProfile:"2"},vc=(au(yc,qo.EventTarget),nu(yc,[{key:"data_",value:function(e){var t=e.data.segment;t.data=new Uint8Array(t.data,e.data.byteOffset,e.data.byteLength),t.initSegment=new Uint8Array(t.initSegment.data,t.initSegment.byteOffset,t.initSegment.byteLength),function(e,t,i){var n=t.player_;if(i.captions&&i.captions.length)for(var r in e.inbandTextTracks_||(e.inbandTextTracks_={}),i.captionStreams)if(!e.inbandTextTracks_[r]){n.tech_.trigger({type:"usage",name:"hls-608"});var a=n.textTracks().getTrackById(r);e.inbandTextTracks_[r]=a||n.addRemoteTextTrack({kind:"captions",id:r,label:r},!1).track}i.metadata&&i.metadata.length&&!e.metadataTrack_&&(e.metadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=i.metadata.dispatchType)}(this,this.mediaSource_,t),this.pendingBuffers_.push(t)}},{key:"done_",value:function(e){"closed"!==this.mediaSource_.readyState?this.processPendingSegments_():this.pendingBuffers_.length=0}},{key:"videoSegmentTimingInfo_",value:function(e){var t={start:{decode:e.start.dts/9e4,presentation:e.start.pts/9e4},end:{decode:e.end.dts/9e4,presentation:e.end.pts/9e4},baseMediaDecodeTime:e.baseMediaDecodeTime/9e4};e.prependedContentDuration&&(t.prependedContentDuration=e.prependedContentDuration/9e4),this.trigger({type:"videoSegmentTimingInfo",videoSegmentTimingInfo:t})}},{key:"createRealSourceBuffers_",value:function(){var n=this,r=["audio","video"];r.forEach(function(t){if(n[t+"Codec_"]&&!n[t+"Buffer_"]){var i=null;if(n.mediaSource_[t+"Buffer_"])(i=n.mediaSource_[t+"Buffer_"]).updating=!1;else{var e=t+'/mp4;codecs="'+n[t+"Codec_"]+'"';i=function(e,t){var i=e.addSourceBuffer(t),n=Object.create(null);function r(t){"function"==typeof i[t]?n[t]=function(){return i[t].apply(i,arguments)}:void 0===n[t]&&Object.defineProperty(n,t,{get:function(){return i[t]},set:function(e){return i[t]=e}})}for(var a in n.updating=!1,n.realBuffer_=i)r(a);return n}(n.mediaSource_.nativeMediaSource_,e),n.mediaSource_[t+"Buffer_"]=i}n[t+"Buffer_"]=i,["update","updatestart","updateend"].forEach(function(e){i.addEventListener(e,function(){if("audio"!==t||!n.audioDisabled_)return"updateend"===e&&(n[t+"Buffer_"].updating=!1),r.every(function(e){return!("audio"!==e||!n.audioDisabled_)||t===e||!n[e+"Buffer_"]||!n[e+"Buffer_"].updating})?n.trigger(e):void 0})})}})}},{key:"appendBuffer",value:function(e){if(this.bufferUpdating_=!0,this.audioBuffer_&&this.audioBuffer_.buffered.length){var t=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:t.end(t.length-1)})}this.videoBuffer_&&this.transmuxer_.postMessage({action:"alignGopsWith",gopsToAlignWith:function(e,t,i){if(null==t||!e.length)return[];var n=Math.ceil(9e4*(t-i+3)),r=void 0;for(r=0;r<e.length&&!(e[r].pts>n);r++);return e.slice(r)}(this.gopBuffer_,this.mediaSource_.player_?this.mediaSource_.player_.currentTime():null,this.timeMapping_)}),this.transmuxer_.postMessage({action:"push",data:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength},[e.buffer]),this.transmuxer_.postMessage({action:"flush"})}},{key:"appendGopInfo_",value:function(e){this.gopBuffer_=function(e,t,i){if(!t.length)return e;if(i)return t.slice();for(var n=t[0].pts,r=0;r<e.length&&!(e[r].pts>=n);r++);return e.slice(0,r).concat(t)}(this.gopBuffer_,e.data.gopInfo,this.safeAppend_)}},{key:"remove",value:function(e,t){if(this.videoBuffer_&&(this.videoBuffer_.updating=!0,this.videoBuffer_.remove(e,t),this.gopBuffer_=function(e,t,i,n){for(var r=Math.ceil(9e4*(t-n)),a=Math.ceil(9e4*(i-n)),o=e.slice(),s=e.length;s--&&!(e[s].pts<=a););if(-1===s)return o;for(var l=s+1;l--&&!(e[l].pts<=r););return l=Math.max(l,0),o.splice(l,s-l+1),o}(this.gopBuffer_,e,t,this.timeMapping_)),!this.audioDisabled_&&this.audioBuffer_&&(this.audioBuffer_.updating=!0,this.audioBuffer_.remove(e,t)),qu(e,t,this.metadataTrack_),this.inbandTextTracks_)for(var i in this.inbandTextTracks_)qu(e,t,this.inbandTextTracks_[i])}},{key:"processPendingSegments_",value:function(){var e={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};if(!this.pendingBuffers_.length)return this.trigger("updateend"),void(this.bufferUpdating_=!1);e=this.pendingBuffers_.reduce(function(e,t){var i=t.type,n=t.data,r=t.initSegment;return e[i].segments.push(n),e[i].bytes+=n.byteLength,e[i].initSegment=r,t.captions&&(e.captions=e.captions.concat(t.captions)),t.info&&(e[i].info=t.info),t.metadata&&(e.metadata=e.metadata.concat(t.metadata)),e},e),this.videoBuffer_||this.audioBuffer_||(0===e.video.bytes&&(this.videoCodec_=null),0===e.audio.bytes&&(this.audioCodec_=null),this.createRealSourceBuffers_()),e.audio.info&&this.mediaSource_.trigger({type:"audioinfo",info:e.audio.info}),e.video.info&&this.mediaSource_.trigger({type:"videoinfo",info:e.video.info}),this.appendAudioInitSegment_&&(!this.audioDisabled_&&this.audioBuffer_&&(e.audio.segments.unshift(e.audio.initSegment),e.audio.bytes+=e.audio.initSegment.byteLength),this.appendAudioInitSegment_=!1);var t=!1;this.videoBuffer_&&e.video.bytes?(e.video.segments.unshift(e.video.initSegment),e.video.bytes+=e.video.initSegment.byteLength,this.concatAndAppendSegments_(e.video,this.videoBuffer_)):!this.videoBuffer_||!this.audioDisabled_&&this.audioBuffer_||(t=!0),Vu(this,e.captions,e.metadata),!this.audioDisabled_&&this.audioBuffer_&&this.concatAndAppendSegments_(e.audio,this.audioBuffer_),this.pendingBuffers_.length=0,t&&this.trigger("updateend"),this.bufferUpdating_=!1}},{key:"concatAndAppendSegments_",value:function(e,t){var i=0,n=void 0;if(e.bytes){n=new Uint8Array(e.bytes),e.segments.forEach(function(e){n.set(e,i),i+=e.byteLength});try{t.updating=!0,t.appendBuffer(n)}catch(e){this.mediaSource_.player_&&this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:e.message,originalError:e})}}}},{key:"abort",value:function(){this.videoBuffer_&&this.videoBuffer_.abort(),!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"}),this.pendingBuffers_.length=0,this.bufferUpdating_=!1}}]),yc);function yc(e,t){iu(this,yc);var i=ou(this,(yc.__proto__||Object.getPrototypeOf(yc)).call(this,qo.EventTarget));i.timestampOffset_=0,i.pendingBuffers_=[],i.bufferUpdating_=!1,i.mediaSource_=e,i.codecs_=t,i.audioCodec_=null,i.videoCodec_=null,i.audioDisabled_=!1,i.appendAudioInitSegment_=!0,i.gopBuffer_=[],i.timeMapping_=0,i.safeAppend_=11<=qo.browser.IE_VERSION;var n={remux:!1,alignGopsAtEnd:i.safeAppend_};return i.codecs_.forEach(function(e){pc(e)?i.audioCodec_=e:fc(e)&&(i.videoCodec_=e)}),i.transmuxer_=new gc,i.transmuxer_.postMessage({action:"init",options:n}),i.transmuxer_.onmessage=function(e){return"data"===e.data.action?i.data_(e):"done"===e.data.action?i.done_(e):"gopInfo"===e.data.action?i.appendGopInfo_(e):"videoSegmentTimingInfo"===e.data.action?i.videoSegmentTimingInfo_(e.data.videoSegmentTimingInfo):void 0},Object.defineProperty(i,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(e){"number"==typeof e&&0<=e&&(this.timestampOffset_=e,this.appendAudioInitSegment_=!0,this.gopBuffer_.length=0,this.timeMapping_=0,this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e}))}}),Object.defineProperty(i,"appendWindowStart",{get:function(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function(e){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=e),this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=e)}}),Object.defineProperty(i,"updating",{get:function(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}}),Object.defineProperty(i,"buffered",{get:function(){return function(e,t,i){var n=null,r=null,a=0,o=[],s=[];if(!e&&!t)return qo.createTimeRange();if(!e)return t.buffered;if(!t)return e.buffered;if(i)return e.buffered;if(0===e.buffered.length&&0===t.buffered.length)return qo.createTimeRange();for(var l=e.buffered,u=t.buffered,c=l.length;c--;)o.push({time:l.start(c),type:"start"}),o.push({time:l.end(c),type:"end"});for(c=u.length;c--;)o.push({time:u.start(c),type:"start"}),o.push({time:u.end(c),type:"end"});for(o.sort(function(e,t){return e.time-t.time}),c=0;c<o.length;c++)"start"===o[c].type?2==++a&&(n=o[c].time):"end"===o[c].type&&1==--a&&(r=o[c].time),null!==n&&null!==r&&(s.push([n,r]),r=n=null);return qo.createTimeRanges(s)}(this.videoBuffer_,this.audioBuffer_,this.audioDisabled_)}}),i}var bc=(au(_c,qo.EventTarget),nu(_c,[{key:"addSeekableRange_",value:function(e,t){var i=void 0;if(this.duration!==1/0)throw(i=new Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity")).name="InvalidStateError",i.code=11,i;(t>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration))&&(this.nativeMediaSource_.duration=t)}},{key:"addSourceBuffer",value:function(e){var r,t,i=void 0,n=(r={type:"",parameters:{}},t=e.trim().split(";"),r.type=t.shift().trim(),t.forEach(function(e){var t=e.trim().split("=");if(1<t.length){var i=t[0].replace(/"/g,"").trim(),n=t[1].replace(/"/g,"").trim();r.parameters[i]=n}}),r);if(/^(video|audio)\/mp2t$/i.test(n.type)){var a=[];n.parameters&&n.parameters.codecs&&(a=(a=cc(a=n.parameters.codecs.split(","))).filter(function(e){return pc(e)||fc(e)})),0===a.length&&(a=["avc1.4d400d","mp4a.40.2"]),i=new vc(this,a),0!==this.sourceBuffers.length&&(this.sourceBuffers[0].createRealSourceBuffers_(),i.createRealSourceBuffers_(),this.sourceBuffers[0].audioDisabled_=!0)}else i=this.nativeMediaSource_.addSourceBuffer(e);return this.sourceBuffers.push(i),i}}]),_c);function _c(){iu(this,_c);var a=ou(this,(_c.__proto__||Object.getPrototypeOf(_c)).call(this)),e=void 0;for(e in a.nativeMediaSource_=new y.MediaSource,a.nativeMediaSource_)e in _c.prototype||"function"!=typeof a.nativeMediaSource_[e]||(a[e]=a.nativeMediaSource_[e].bind(a.nativeMediaSource_));return a.duration_=NaN,Object.defineProperty(a,"duration",{get:function(){return this.duration_===1/0?this.duration_:this.nativeMediaSource_.duration},set:function(e){(this.duration_=e)===1/0||(this.nativeMediaSource_.duration=e)}}),Object.defineProperty(a,"seekable",{get:function(){return this.duration_===1/0?qo.createTimeRanges([[0,this.nativeMediaSource_.duration]]):this.nativeMediaSource_.seekable}}),Object.defineProperty(a,"readyState",{get:function(){return this.nativeMediaSource_.readyState}}),Object.defineProperty(a,"activeSourceBuffers",{get:function(){return this.activeSourceBuffers_}}),a.sourceBuffers=[],a.activeSourceBuffers_=[],a.updateActiveSourceBuffers_=function(){if(a.activeSourceBuffers_.length=0,1===a.sourceBuffers.length){var e=a.sourceBuffers[0];return e.appendAudioInitSegment_=!0,e.audioDisabled_=!e.audioCodec_,void a.activeSourceBuffers_.push(e)}for(var i=!1,n=!0,t=0;t<a.player_.audioTracks().length;t++){var r=a.player_.audioTracks()[t];if(r.enabled&&"main"!==r.kind){n=!(i=!0);break}}a.sourceBuffers.forEach(function(e,t){if(e.appendAudioInitSegment_=!0,e.videoCodec_&&e.audioCodec_)e.audioDisabled_=i;else if(e.videoCodec_&&!e.audioCodec_)e.audioDisabled_=!0,n=!1;else if(!e.videoCodec_&&e.audioCodec_&&(e.audioDisabled_=t?n:!n,e.audioDisabled_))return;a.activeSourceBuffers_.push(e)})},a.onPlayerMediachange_=function(){a.sourceBuffers.forEach(function(e){e.appendAudioInitSegment_=!0})},a.onHlsReset_=function(){a.sourceBuffers.forEach(function(e){e.transmuxer_&&e.transmuxer_.postMessage({action:"resetCaptions"})})},a.onHlsSegmentTimeMapping_=function(t){a.sourceBuffers.forEach(function(e){return e.timeMapping_=t.mapping})},["sourceopen","sourceclose","sourceended"].forEach(function(e){this.nativeMediaSource_.addEventListener(e,this.trigger.bind(this))},a),a.on("sourceopen",function(e){var t=d.querySelector('[src="'+a.url_+'"]');t&&(a.player_=qo(t.parentNode),a.player_&&(a.player_.tech_.on("hls-reset",a.onHlsReset_),a.player_.tech_.on("hls-segment-time-mapping",a.onHlsSegmentTimeMapping_),a.player_.audioTracks&&a.player_.audioTracks()&&(a.player_.audioTracks().on("change",a.updateActiveSourceBuffers_),a.player_.audioTracks().on("addtrack",a.updateActiveSourceBuffers_),a.player_.audioTracks().on("removetrack",a.updateActiveSourceBuffers_)),a.player_.on("mediachange",a.onPlayerMediachange_)))}),a.on("sourceended",function(e){for(var t=Wu(a.duration),i=0;i<a.sourceBuffers.length;i++){var n=a.sourceBuffers[i],r=n.metadataTrack_&&n.metadataTrack_.cues;r&&r.length&&(r[r.length-1].endTime=t)}}),a.on("sourceclose",function(e){this.sourceBuffers.forEach(function(e){e.transmuxer_&&e.transmuxer_.terminate()}),this.sourceBuffers.length=0,this.player_&&(this.player_.audioTracks&&this.player_.audioTracks()&&(this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)),this.player_.el_&&this.player_.off("mediachange",this.onPlayerMediachange_),this.player_.tech_&&this.player_.tech_.el_&&(this.player_.tech_.off("hls-reset",this.onHlsReset_),this.player_.tech_.off("hls-segment-time-mapping",this.onHlsSegmentTimeMapping_)))}),a}var Tc=0;function wc(e,t){var i=qo.mediaSources[e];if(!i)throw new Error("Media Source not found (Video.js)");i.trigger({type:"sourceopen",swfId:t})}function Sc(){return!!y.MediaSource&&!!y.MediaSource.isTypeSupported&&y.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')}function kc(){if(this.MediaSource={open:wc,supportsNativeMediaSources:Sc},Sc())return new bc;throw new Error("Cannot use create a virtual MediaSource for this video")}qo.mediaSources={},kc.open=wc,kc.supportsNativeMediaSources=Sc;var Cc={createObjectURL:function(e){var t=void 0;return e instanceof bc?(t=y.URL.createObjectURL(e.nativeMediaSource_),e.url_=t):e instanceof bc?(t="blob:vjs-media-source/"+Tc,Tc++,qo.mediaSources[t]=e,t):(t=y.URL.createObjectURL(e),e.url_=t)}};function Ec(e,t){for(var o=void 0,s=Pc(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod}),i=0;i<t.playlists.length;i++){var n=lu(s,t.playlists[i]);n?s=n:o=!0}return su(t,function(e,t,i,n){if(e.playlists&&e.playlists.length){var r=e.playlists[0].uri,a=lu(s,e.playlists[0]);a&&((s=a).mediaGroups[t][i][n].playlists[0]=s.playlists[r],o=!1)}}),o?null:s}function xc(e){var t=e.byterange.offset+e.byterange.length-1;return e.uri+"-"+e.byterange.offset+"-"+t}function Ac(e,t){var i,n,r={};for(var a in e){var o=e[a].sidx;if(o){var s=xc(o);if(!t[s])break;i=t[s].sidxInfo,n=o,(Boolean(!i.map&&!n.map)||Boolean(i.map&&n.map&&i.map.byterange.offset===n.map.byterange.offset&&i.map.byterange.length===n.map.byterange.length))&&i.uri===n.uri&&i.byterange.offset===n.byterange.offset&&i.byterange.length===n.byterange.length&&(r[s]=t[s])}}return r}function Ic(e,t,i,n,r){var a={uri:tu(n.handleManifestRedirects,e.resolvedUri),byterange:e.byterange,playlist:t};return i(qo.mergeOptions(a,{responseType:"arraybuffer",headers:Pu(a)}),r)}qo.MediaSource=kc,qo.URL=Cc;var Pc=qo.mergeOptions,Oc=(au(Lc,qo.EventTarget),nu(Lc,[{key:"setupChildLoader",value:function(e,t){this.masterPlaylistLoader_=e,this.childPlaylist_=t}},{key:"dispose",value:function(){this.stopRequest(),this.loadedPlaylists_={},y.clearTimeout(this.minimumUpdatePeriodTimeout_),y.clearTimeout(this.mediaRequest_),y.clearTimeout(this.mediaUpdateTimeout)}},{key:"hasPendingRequest",value:function(){return this.request||this.mediaRequest_}},{key:"stopRequest",value:function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}},{key:"sidxRequestFinished_",value:function(r,a,o,s){var l=this;return function(e,t){if(l.request){if(l.request=null,e)return l.error={status:t.status,message:"DASH playlist request error at URL: "+r.uri,response:t.response,code:2},o&&(l.state=o),l.trigger("error"),s(a,null);var i=new Uint8Array(t.response),n=dl.parseSidx(i.subarray(8));return s(a,n)}}}},{key:"media",value:function(i){var n=this;if(!i)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var r=this.state;if("string"==typeof i){if(!this.master.playlists[i])throw new Error("Unknown playlist URI: "+i);i=this.master.playlists[i]}var e=!this.media_||i.uri!==this.media_.uri;if(e&&this.loadedPlaylists_[i.uri]&&this.loadedPlaylists_[i.uri].endList)return this.state="HAVE_METADATA",this.media_=i,void(e&&(this.trigger("mediachanging"),this.trigger("mediachange")));if(e)if(this.media_&&this.trigger("mediachanging"),i.sidx){var t=void 0,a=void 0;a=this.masterPlaylistLoader_?(t=this.masterPlaylistLoader_.master,this.masterPlaylistLoader_.sidxMapping_):(t=this.master,this.sidxMapping_);var o=xc(i.sidx);a[o]={sidxInfo:i.sidx},this.request=Ic(i.sidx,i,this.hls_.xhr,{handleManifestRedirects:this.handleManifestRedirects},this.sidxRequestFinished_(i,t,r,function(e,t){if(!e||!t)throw new Error("failed to request sidx");a[o].sidx=t,n.haveMetadata({startingState:r,playlist:e.playlists[i.uri]})}))}else this.mediaRequest_=y.setTimeout(this.haveMetadata.bind(this,{startingState:r,playlist:i}),0)}},{key:"haveMetadata",value:function(e){var t=e.startingState,i=e.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[i.uri]=i,this.mediaRequest_=null,this.refreshMedia_(i.uri),"HAVE_MASTER"===t?this.trigger("loadedmetadata"):this.trigger("mediachange")}},{key:"pause",value:function(){this.stopRequest(),y.clearTimeout(this.mediaUpdateTimeout),y.clearTimeout(this.minimumUpdatePeriodTimeout_),"HAVE_NOTHING"===this.state&&(this.started=!1)}},{key:"load",value:function(e){var t=this;y.clearTimeout(this.mediaUpdateTimeout),y.clearTimeout(this.minimumUpdatePeriodTimeout_);var i=this.media();if(e){var n=i?i.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=y.setTimeout(function(){return t.load()},n)}else this.started?this.trigger("loadedplaylist"):this.start()}},{key:"parseMasterXml",value:function(){var a=Gs(this.masterXml_,{manifestUri:this.srcUrl,clientOffset:this.clientOffset_,sidxMapping:this.sidxMapping_});a.uri=this.srcUrl;for(var e=0;e<a.playlists.length;e++){var t="placeholder-uri-"+e;a.playlists[e].uri=t,a.playlists[t]=a.playlists[e]}return su(a,function(e,t,i,n){if(e.playlists&&e.playlists.length){var r="placeholder-uri-"+t+"-"+i+"-"+n;e.playlists[0].uri=r,a.playlists[r]=e.playlists[0]}}),uu(a),cu(a),a}},{key:"start",value:function(){var i=this;this.started=!0,this.masterPlaylistLoader_?this.mediaRequest_=y.setTimeout(this.haveMaster_.bind(this),0):this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(e,t){if(i.request){if(i.request=null,e)return i.error={status:t.status,message:"DASH playlist request error at URL: "+i.srcUrl,responseText:t.responseText,code:2},"HAVE_NOTHING"===i.state&&(i.started=!1),i.trigger("error");i.masterXml_=t.responseText,t.responseHeaders&&t.responseHeaders.date?i.masterLoaded_=Date.parse(t.responseHeaders.date):i.masterLoaded_=Date.now(),i.srcUrl=tu(i.handleManifestRedirects,i.srcUrl,t),i.syncClientServerClock_(i.onClientServerClockSync_.bind(i))}})}},{key:"syncClientServerClock_",value:function(n){var i,r=this,a=(i=this.masterXml_,function(){var e=xs(zs(i),"UTCTiming")[0];if(!e)return null;var t=Ps(e);switch(t.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":t.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":t.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":t.method="DIRECT",t.value=Date.parse(t.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error("UNSUPPORTED_UTC_TIMING_SCHEME")}return t}());return null===a?(this.clientOffset_=this.masterLoaded_-Date.now(),n()):"DIRECT"===a.method?(this.clientOffset_=a.value-Date.now(),n()):void(this.request=this.hls_.xhr({uri:eu(this.srcUrl,a.value),method:a.method,withCredentials:this.withCredentials},function(e,t){if(r.request){if(e)return r.clientOffset_=r.masterLoaded_-Date.now(),n();var i;i="HEAD"===a.method?t.responseHeaders&&t.responseHeaders.date?Date.parse(t.responseHeaders.date):r.masterLoaded_:Date.parse(t.responseText),r.clientOffset_=i-Date.now(),n()}}))}},{key:"haveMaster_",value:function(){this.state="HAVE_MASTER",this.mediaRequest_=null,this.masterPlaylistLoader_?this.media_||this.media(this.childPlaylist_):(this.master=this.parseMasterXml(),this.trigger("loadedplaylist"))}},{key:"onClientServerClockSync_",value:function(){var e=this;this.haveMaster_(),this.hasPendingRequest()||this.media_||this.media(this.master.playlists[0]),this.master&&this.master.minimumUpdatePeriod&&(this.minimumUpdatePeriodTimeout_=y.setTimeout(function(){e.trigger("minimumUpdatePeriod")},this.master.minimumUpdatePeriod))}},{key:"refreshXml_",value:function(){var p=this;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(e,t){if(p.request){if(p.request=null,e)return p.error={status:t.status,message:"DASH playlist request error at URL: "+p.srcUrl,responseText:t.responseText,code:2},"HAVE_NOTHING"===p.state&&(p.started=!1),p.trigger("error");p.masterXml_=t.responseText,p.sidxMapping_=(s=p.masterXml_,l=p.srcUrl,u=p.clientOffset_,c=p.sidxMapping_,d=Gs(s,{manifestUri:l,clientOffset:u}),h=Ac(d.playlists,c),su(d,function(e,t,i,n){if(e.playlists&&e.playlists.length){var r=e.playlists;h=Pc(h,Ac(r,c))}}),h);var i=p.parseMasterXml(),n=Ec(p.master,i),r=p.media().sidx;if(n)if(r){var a=xc(r);if(!p.sidxMapping_[a]){var o=p.media();p.request=Ic(o.sidx,o,p.hls_.xhr,{handleManifestRedirects:p.handleManifestRedirects},p.sidxRequestFinished_(o,i,p.state,function(e,t){if(!e||!t)throw new Error("failed to request sidx on minimumUpdatePeriod");p.sidxMapping_[a].sidx=t,p.minimumUpdatePeriodTimeout_=y.setTimeout(function(){p.trigger("minimumUpdatePeriod")},p.master.minimumUpdatePeriod),p.refreshMedia_(p.media().uri)}))}}else p.master=n;p.minimumUpdatePeriodTimeout_=y.setTimeout(function(){p.trigger("minimumUpdatePeriod")},p.master.minimumUpdatePeriod)}var s,l,u,c,d,h})}},{key:"refreshMedia_",value:function(e){var t=this;if(!e)throw new Error("refreshMedia_ must take a media uri");var i,n=void 0;i=this.masterPlaylistLoader_?(n=this.masterPlaylistLoader_.master,this.masterPlaylistLoader_.parseMasterXml()):(n=this.master,this.parseMasterXml());var r=Ec(n,i);r?(this.masterPlaylistLoader_?this.masterPlaylistLoader_.master=r:this.master=r,this.media_=r.playlists[e]):(this.media_=i.playlists[e],this.trigger("playlistunchanged")),this.media().endList||(this.mediaUpdateTimeout=y.setTimeout(function(){t.trigger("mediaupdatetimeout")},du(this.media(),!!r))),this.trigger("loadedplaylist")}}]),Lc);function Lc(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3];iu(this,Lc);var r=ou(this,(Lc.__proto__||Object.getPrototypeOf(Lc)).call(this)),a=i.withCredentials,o=void 0!==a&&a,s=i.handleManifestRedirects,l=void 0!==s&&s;if(r.hls_=t,r.withCredentials=o,r.handleManifestRedirects=l,!e)throw new Error("A non-empty playlist URL or playlist is required");return r.on("minimumUpdatePeriod",function(){r.refreshXml_()}),r.on("mediaupdatetimeout",function(){r.refreshMedia_(r.media().uri)}),r.state="HAVE_NOTHING",r.loadedPlaylists_={},"string"==typeof e?(r.srcUrl=e,r.sidxMapping_={},ou(r)):(r.setupChildLoader(n,e),r)}function Dc(e){return qo.log.debug?qo.log.debug.bind(qo,"VHS:",e+" >"):function(){}}function Nc(){}var Mc=(nu(Rc,[{key:"createSourceBuffer_",value:function(e,t){var i=this;this.sourceBuffer_=this.mediaSource.addSourceBuffer(e),this.logger_("created SourceBuffer"),t&&(t.trigger("sourcebufferadded"),this.mediaSource.sourceBuffers.length<2)?t.on("sourcebufferadded",function(){i.start_()}):this.start_()}},{key:"start_",value:function(){var t=this;this.started_=!0,this.onUpdateendCallback_=function(){var e=t.pendingCallback_;t.pendingCallback_=null,t.sourceBuffer_.removing=!1,t.logger_("buffered ["+$u(t.buffered())+"]"),e&&e(),t.runCallback_()},this.sourceBuffer_.addEventListener("updateend",this.onUpdateendCallback_),this.runCallback_()}},{key:"abort",value:function(e){var t=this;this.processedAppend_&&this.queueCallback_(function(){t.sourceBuffer_.abort()},e)}},{key:"appendBuffer",value:function(e,t){var i=this;this.processedAppend_=!0,this.queueCallback_(function(){e.videoSegmentTimingInfoCallback&&i.sourceBuffer_.addEventListener("videoSegmentTimingInfo",e.videoSegmentTimingInfoCallback),i.sourceBuffer_.appendBuffer(e.bytes)},function(){e.videoSegmentTimingInfoCallback&&i.sourceBuffer_.removeEventListener("videoSegmentTimingInfo",e.videoSegmentTimingInfoCallback),t()})}},{key:"buffered",value:function(){return this.sourceBuffer_?this.sourceBuffer_.buffered:qo.createTimeRanges()}},{key:"remove",value:function(e,t,i){var n=this,r=2<arguments.length&&void 0!==i?i:Nc;this.processedAppend_&&this.queueCallback_(function(){n.logger_("remove ["+e+" => "+t+"]"),n.sourceBuffer_.removing=!0,n.sourceBuffer_.remove(e,t)},r)}},{key:"updating",value:function(){return!this.sourceBuffer_||this.sourceBuffer_.updating||!!this.pendingCallback_&&this.pendingCallback_!==Nc}},{key:"timestampOffset",value:function(e){var t=this;return void 0!==e&&(this.queueCallback_(function(){t.sourceBuffer_.timestampOffset=e,t.runCallback_()}),this.timestampOffset_=e),this.timestampOffset_}},{key:"queueCallback_",value:function(e,t){this.callbacks_.push([e.bind(this),t]),this.runCallback_()}},{key:"runCallback_",value:function(){var e=void 0;!this.updating()&&this.callbacks_.length&&this.started_&&(e=this.callbacks_.shift(),this.pendingCallback_=e[1],e[0]())}},{key:"dispose",value:function(){function e(){t.sourceBuffer_&&"open"===t.mediaSource.readyState&&t.sourceBuffer_.abort(),t.sourceBuffer_.removeEventListener("updateend",e)}var t=this;this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_),this.sourceBuffer_.removing?this.sourceBuffer_.addEventListener("updateend",e):e()}}]),Rc);function Rc(e,t,i,n){iu(this,Rc),this.callbacks_=[],this.pendingCallback_=null,this.timestampOffset_=0,this.mediaSource=e,this.processedAppend_=!1,this.type_=i,this.mimeType_=t,this.logger_=Dc("SourceUpdater["+i+"]["+t+"]"),"closed"===e.readyState?e.addEventListener("sourceopen",this.createSourceBuffer_.bind(this,t,n)):this.createSourceBuffer_(t,n)}function jc(e){e.forEach(function(e){e.abort()})}function Uc(e,t){return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:Gc,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:Xc,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:zc,xhr:t}:null}function Bc(r,a){return function(e){return r.stats=qo.mergeOptions(r.stats,(i=(t=e).target,(n={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-i.requestTime||0}).bytesReceived=t.loaded,n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8*1e3),n)),!r.stats.firstBytesReceivedAt&&r.stats.bytesReceived&&(r.stats.firstBytesReceivedAt=Date.now()),a(e,r);var t,i,n}}function Fc(e,t,i,n,r,a,o){var s,l,u,c,d,h,p,f,g,m,v=[],y=(s=v,l=i,u=o,c=0,d=!1,function(e,t){if(!d)return e?(d=!0,jc(s),u(e,t)):(c+=1)===s.length?(t.endOfAllRequests=Date.now(),t.encryptedBytes?function(n,r,a){var e;n.addEventListener("message",function e(t){if(t.data.source===r.requestId){n.removeEventListener("message",e);var i=t.data.decrypted;return r.bytes=new Uint8Array(i.bytes,i.byteOffset,i.byteLength),a(null,r)}}),e=r.key.bytes.slice?r.key.bytes.slice():new Uint32Array(Array.prototype.slice.call(r.key.bytes)),n.postMessage(Du({source:r.requestId,encrypted:r.encryptedBytes,key:e,iv:r.key.iv}),[r.encryptedBytes.buffer,e.buffer])}(l,t,u):u(null,t)):void 0});if(r.key&&!r.key.bytes){var b=e(qo.mergeOptions(t,{uri:r.key.resolvedUri,responseType:"arraybuffer"}),(h=r,p=y,function(e,t){var i=t.response,n=Uc(e,t);if(n)return p(n,h);if(16!==i.byteLength)return p({status:t.status,message:"Invalid HLS key at URL: "+t.uri,code:zc,xhr:t},h);var r=new DataView(i);return h.key.bytes=new Uint32Array([r.getUint32(0),r.getUint32(4),r.getUint32(8),r.getUint32(12)]),p(null,h)}));v.push(b)}if(r.map&&!r.map.bytes){var _=e(qo.mergeOptions(t,{uri:r.map.resolvedUri,responseType:"arraybuffer",headers:Pu(r.map)}),(f=r,g=n,m=y,function(e,t){var i=t.response,n=Uc(e,t);return n?m(n,f):0===i.byteLength?m({status:t.status,message:"Empty HLS segment content at URL: "+t.uri,code:zc,xhr:t},f):(f.map.bytes=new Uint8Array(t.response),g&&!g.isInitialized()&&g.init(),f.map.timescales=ll.timescale(f.map.bytes),f.map.videoTrackIds=ll.videoTrackIds(f.map.bytes),m(null,f))}));v.push(_)}var T,w,S,k=e(qo.mergeOptions(t,{uri:r.resolvedUri,responseType:"arraybuffer",headers:Pu(r)}),(T=r,w=n,S=y,function(e,t){var i=t.response,n=Uc(e,t),r=void 0;return n?S(n,T):0===i.byteLength?S({status:t.status,message:"Empty HLS segment content at URL: "+t.uri,code:zc,xhr:t},T):(T.stats={bandwidth:t.bandwidth,bytesReceived:t.bytesReceived||0,roundTripTime:t.roundTripTime||0},T.key?T.encryptedBytes=new Uint8Array(t.response):T.bytes=new Uint8Array(t.response),w&&T.map&&T.map.bytes&&(w.isInitialized()||w.init(),(r=w.parse(T.bytes,T.map.videoTrackIds,T.map.timescales))&&r.captions&&(T.captionStreams=r.captionStreams,T.fmp4Captions=r.captions)),S(null,T))}));return k.addEventListener("progress",Bc(r,a)),v.push(k),function(){return jc(v)}}function $c(e,t){var i;return e&&(i=y.getComputedStyle(e))?i[t]:""}function Hc(e,n){var r=e.slice();e.sort(function(e,t){var i=n(e,t);return 0===i?r.indexOf(e)-r.indexOf(t):i})}function qc(e,t){var i=void 0,n=void 0;return e.attributes.BANDWIDTH&&(i=e.attributes.BANDWIDTH),i=i||y.Number.MAX_VALUE,t.attributes.BANDWIDTH&&(n=t.attributes.BANDWIDTH),i-(n||y.Number.MAX_VALUE)}function Wc(e){return"number"==typeof e&&isFinite(e)}var Vc={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1},zc=2,Gc=-101,Xc=-102,Kc=(au(Yc,qo.EventTarget),nu(Yc,[{key:"resetStats_",value:function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0}},{key:"dispose",value:function(){this.state="DISPOSED",this.pause(),this.abort_(),this.sourceUpdater_&&this.sourceUpdater_.dispose(),this.resetStats_(),this.captionParser_&&this.captionParser_.reset()}},{key:"abort",value:function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)}},{key:"abort_",value:function(){this.pendingSegment_&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null}},{key:"error",value:function(e){return void 0!==e&&(this.error_=e),this.pendingSegment_=null,this.error_}},{key:"endOfStream",value:function(){this.ended_=!0,this.pause(),this.trigger("ended")}},{key:"buffered_",value:function(){return this.sourceUpdater_?this.sourceUpdater_.buffered():qo.createTimeRanges()}},{key:"initSegment",value:function(e,t){var i=1<arguments.length&&void 0!==t&&t;if(!e)return null;var n=Nu(e),r=this.initSegments_[n];return i&&!r&&e.bytes&&(this.initSegments_[n]=r={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,timescales:e.timescales,videoTrackIds:e.videoTrackIds}),r||e}},{key:"segmentKey",value:function(e,t){var i=1<arguments.length&&void 0!==t&&t;if(!e)return null;var n=Mu(e),r=this.keyCache_[n];this.cacheEncryptionKeys_&&i&&!r&&e.bytes&&(this.keyCache_[n]=r={resolvedUri:e.resolvedUri,bytes:e.bytes});var a={resolvedUri:(r||e).resolvedUri};return r&&(a.bytes=r.bytes),a}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&(this.sourceUpdater_||this.mimeType_&&"INIT"===this.state)&&!this.paused()}},{key:"load",value:function(){if(this.monitorBuffer_(),this.playlist_){if(this.syncController_.setDateTimeMapping(this.playlist_),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}}},{key:"init_",value:function(){return this.state="READY",this.sourceUpdater_=new Mc(this.mediaSource_,this.mimeType_,this.loaderType_,this.sourceBufferEmitter_),this.resetEverything(),this.monitorBuffer_()}},{key:"playlist",value:function(e,t){var i=1<arguments.length&&void 0!==t?t:{};if(e){var n=this.playlist_,r=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=i,this.hasPlayed_()||(e.syncInfo={mediaSequence:e.mediaSequence,time:0});var a=null;if(n&&(n.id?a=n.id:n.uri&&(a=n.uri)),this.logger_("playlist update ["+a+" => "+(e.id||e.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(n&&n.uri===e.uri){var o=e.mediaSequence-n.mediaSequence;this.logger_("live window shift ["+o+"]"),null!==this.mediaIndex&&(this.mediaIndex-=o),r&&(r.mediaIndex-=o,0<=r.mediaIndex&&(r.segment=e.segments[r.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(n,e)}else null!==this.mediaIndex&&this.resyncLoader()}}},{key:"pause",value:function(){this.checkBufferTimeout_&&(y.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}},{key:"paused",value:function(){return null===this.checkBufferTimeout_}},{key:"mimeType",value:function(e,t){this.mimeType_||(this.mimeType_=e,this.sourceBufferEmitter_=t,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_())}},{key:"resetEverything",value:function(e){this.ended_=!1,this.resetLoader(),this.remove(0,this.duration_(),e),this.captionParser_&&this.captionParser_.clearAllCaptions(),this.trigger("reseteverything")}},{key:"resetLoader",value:function(){this.fetchAtBuffer_=!1,this.resyncLoader()}},{key:"resyncLoader",value:function(){this.mediaIndex=null,this.syncPoint_=null,this.abort()}},{key:"remove",value:function(e,t,i){if(this.sourceUpdater_&&this.sourceUpdater_.remove(e,t,i),qu(e,t,this.segmentMetadataTrack_),this.inbandTextTracks_)for(var n in this.inbandTextTracks_)qu(e,t,this.inbandTextTracks_[n])}},{key:"monitorBuffer_",value:function(){this.checkBufferTimeout_&&y.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=y.setTimeout(this.monitorBufferTick_.bind(this),1)}},{key:"monitorBufferTick_",value:function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&y.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=y.setTimeout(this.monitorBufferTick_.bind(this),500)}},{key:"fillBuffer_",value:function(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var e=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);e&&(this.isEndOfStream_(e.mediaIndex)?this.endOfStream():e.mediaIndex===this.playlist_.segments.length-1&&"ended"===this.mediaSource_.readyState&&!this.seeking_()||(e.timeline!==this.currentTimeline_&&(this.syncController_.reset(),e.timestampOffset=e.startOfSegment,this.captionParser_&&this.captionParser_.clearAllCaptions()),this.loadSegment_(e)))}}},{key:"isEndOfStream_",value:function(n,e){return function(e,t){if(!e||!t)return!1;var i=n===e.segments.length;return e.endList&&"open"===t.readyState&&i}(1<arguments.length&&void 0!==e?e:this.playlist_,this.mediaSource_)&&!this.sourceUpdater_.updating()}},{key:"checkBuffer_",value:function(e,t,i,n,r,a){var o=0,s=void 0;e.length&&(o=e.end(e.length-1));var l=Math.max(0,o-r);if(!t.segments.length)return null;if(l>=this.goalBufferLength_())return null;if(!n&&1<=l)return null;if(null===a)return i=this.getSyncSegmentCandidate_(t),this.generateSegmentInfo_(t,i,null,!0);if(null!==i)return t.segments[i],s=o,this.generateSegmentInfo_(t,i+1,s,!1);if(this.fetchAtBuffer_){var u=Ku.getMediaInfoForTime(t,o,a.segmentIndex,a.time);i=u.mediaIndex,s=u.startTime}else{var c=Ku.getMediaInfoForTime(t,r,a.segmentIndex,a.time);i=c.mediaIndex,s=c.startTime}return this.generateSegmentInfo_(t,i,s,!1)}},{key:"getSyncSegmentCandidate_",value:function(e){var t=this;if(-1===this.currentTimeline_)return 0;var i=e.segments.map(function(e,t){return{timeline:e.timeline,segmentIndex:t}}).filter(function(e){return e.timeline===t.currentTimeline_});return i.length?i[Math.min(i.length-1,1)].segmentIndex:Math.max(e.segments.length-1,0)}},{key:"generateSegmentInfo_",value:function(e,t,i,n){if(t<0||t>=e.segments.length)return null;var r=e.segments[t];return{requestId:"segment-loader-"+Math.random(),uri:r.resolvedUri,mediaIndex:t,isSyncRequest:n,startOfSegment:i,playlist:e,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:r.timeline,duration:r.duration,segment:r}}},{key:"abortRequestEarly_",value:function(e){if(this.hls_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)return!1;if(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return!1;var t=this.currentTime_(),i=e.bandwidth,n=this.pendingSegment_.duration,r=Ku.estimateSegmentRequestTime(n,i,this.playlist_,e.bytesReceived),a=function(e,t,i){var n=2<arguments.length&&void 0!==i?i:1;return((e.length?e.end(e.length-1):0)-t)/n}(this.buffered_(),t,this.hls_.tech_.playbackRate())-1;if(r<=a)return!1;var o=function(e){var i=e.currentTime,n=e.bandwidth,r=e.duration,a=e.segmentDuration,o=e.timeUntilRebuffer,s=e.currentTimeline,l=e.syncController,t=e.master.playlists.filter(function(e){return!Ku.isIncompatible(e)}),u=t.filter(Ku.isEnabled);u.length||(u=t.filter(function(e){return!Ku.isDisabled(e)}));var c=u.filter(Ku.hasAttribute.bind(null,"BANDWIDTH")).map(function(e){var t=l.getSyncPoint(e,r,s,i)?1:2;return{playlist:e,rebufferingImpact:Ku.estimateSegmentRequestTime(a,n,e)*t-o}}),d=c.filter(function(e){return e.rebufferingImpact<=0});return Hc(d,function(e,t){return qc(t.playlist,e.playlist)}),d.length?d[0]:(Hc(c,function(e,t){return e.rebufferingImpact-t.rebufferingImpact}),c[0]||null)}({master:this.hls_.playlists.master,currentTime:t,bandwidth:i,duration:this.duration_(),segmentDuration:n,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(o){var s=r-a-o.rebufferingImpact,l=.5;return a<=1/30&&(l=1),!(!o.playlist||o.playlist.uri===this.playlist_.uri||s<l||(this.bandwidth=o.playlist.attributes.BANDWIDTH*Vc.BANDWIDTH_VARIANCE+1,this.abort(),this.trigger("earlyabort"),0))}}},{key:"handleProgress_",value:function(e,t){this.pendingSegment_&&t.requestId===this.pendingSegment_.requestId&&!this.abortRequestEarly_(t.stats)&&this.trigger("progress")}},{key:"loadSegment_",value:function(e){this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),e.abortRequests=Fc(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.captionParser_,this.createSimplifiedSegmentObj_(e),this.handleProgress_.bind(this),this.segmentRequestFinished_.bind(this))}},{key:"trimBackBuffer_",value:function(e){var t,i,n,r,a=(t=this.seekable_(),i=this.currentTime_(),n=this.playlist_.targetDuration||10,r=t.length&&0<t.start(0)&&t.start(0)<i?t.start(0):i-30,Math.min(r,i-n));0<a&&this.remove(0,a)}},{key:"createSimplifiedSegmentObj_",value:function(e){var t=e.segment,i={resolvedUri:t.resolvedUri,byterange:t.byterange,requestId:e.requestId};if(t.key){var n=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);i.key=this.segmentKey(t.key),i.key.iv=n}return t.map&&(i.map=this.initSegment(t.map)),i}},{key:"segmentRequestFinished_",value:function(e,t){if(this.mediaRequests+=1,t.stats&&(this.mediaBytesTransferred+=t.stats.bytesReceived,this.mediaTransferDuration+=t.stats.roundTripTime),this.pendingSegment_){if(t.requestId===this.pendingSegment_.requestId){if(e)return this.pendingSegment_=null,this.state="READY",e.code===Xc?void(this.mediaRequestsAborted+=1):(this.pause(),e.code===Gc?(this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,void this.trigger("bandwidthupdate")):(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error")));this.bandwidth=t.stats.bandwidth,this.roundTrip=t.stats.roundTripTime,t.map&&(t.map=this.initSegment(t.map,!0)),t.key&&this.segmentKey(t.key,!0),this.processSegmentResponse_(t)}}else this.mediaRequestsAborted+=1}},{key:"processSegmentResponse_",value:function(e){var t=this.pendingSegment_;t.bytes=e.bytes,e.map&&(t.segment.map.bytes=e.map.bytes),t.endOfAllRequests=e.endOfAllRequests,e.fmp4Captions&&(function(e,t,i){for(var n in i)if(!e[n]){t.trigger({type:"usage",name:"hls-608"});var r=t.textTracks().getTrackById(n);e[n]=r||t.addRemoteTextTrack({kind:"captions",id:n,label:n},!1).track}}(this.inbandTextTracks_,this.hls_.tech_,e.captionStreams),function(e){var r=e.inbandTextTracks,t=e.captionArray,a=e.timestampOffset;if(t){var o=window.WebKitDataCue||window.VTTCue;t.forEach(function(e){var t=e.stream,i=e.startTime,n=e.endTime;r[t]&&(i+=a,n+=a,r[t].addCue(new o(i,n,e.text)))})}}({inbandTextTracks:this.inbandTextTracks_,captionArray:e.fmp4Captions,timestampOffset:0}),this.captionParser_&&this.captionParser_.clearParsedCaptions()),this.handleSegment_()}},{key:"handleSegment_",value:function(){var e,t,i,n,r,a,o,s,l,u,c,d,h=this;if(this.pendingSegment_){var p=this.pendingSegment_,f=p.segment,g=this.syncController_.probeSegmentInfo(p);void 0===this.startingMedia_&&g&&(g.containsAudio||g.containsVideo)&&(this.startingMedia_={containsAudio:g.containsAudio,containsVideo:g.containsVideo});var m=(c=this.loaderType_,d=this.startingMedia_,"main"===c&&d&&g?g.containsAudio||g.containsVideo?d.containsVideo&&!g.containsVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!d.containsVideo&&g.containsVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null);if(m)return this.error({message:m,blacklistDuration:1/0}),void this.trigger("error");if(p.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");if(null!==p.timestampOffset&&p.timestampOffset!==this.sourceUpdater_.timestampOffset()){if(g&&g.segmentTimestampInfo){var v=g.segmentTimestampInfo[0].ptsTime,y=g.segmentTimestampInfo[0].dtsTime;p.timestampOffset-=v-y}this.sourceUpdater_.timestampOffset(p.timestampOffset),this.trigger("timestampoffset")}var b=this.syncController_.mappingForTimeline(p.timeline);if(null!==b&&this.trigger({type:"segmenttimemapping",mapping:b}),this.state="APPENDING",f.map){var _=Nu(f.map);if(!this.activeInitSegmentId_||this.activeInitSegmentId_!==_){var T=this.initSegment(f.map);this.sourceUpdater_.appendBuffer({bytes:T.bytes},function(){h.activeInitSegmentId_=_})}}p.byteLength=p.bytes.byteLength,"number"==typeof f.start&&"number"==typeof f.end?this.mediaSecondsLoaded+=f.end-f.start:this.mediaSecondsLoaded+=f.duration,this.logger_((e=p.segment,t=e.start,i=e.end,n=p.playlist,r=n.mediaSequence,a=n.id,o=n.segments,s=void 0===o?[]:o,l=p.mediaIndex,u=p.timeline,["appending ["+l+"] of ["+r+", "+(r+s.length)+"] from playlist ["+a+"]","["+t+" => "+i+"] in timeline ["+u+"]"].join(" "))),this.sourceUpdater_.appendBuffer({bytes:p.bytes,videoSegmentTimingInfoCallback:this.handleVideoSegmentTimingInfo_.bind(this,p.requestId)},this.handleUpdateEnd_.bind(this))}else this.state="READY"}},{key:"handleVideoSegmentTimingInfo_",value:function(e,t){if(this.pendingSegment_&&e===this.pendingSegment_.requestId){var i=this.pendingSegment_.segment;i.videoTimingInfo||(i.videoTimingInfo={}),i.videoTimingInfo.transmuxerPrependedSeconds=t.videoSegmentTimingInfo.prependedContentDuration||0,i.videoTimingInfo.transmuxedPresentationStart=t.videoSegmentTimingInfo.start.presentation,i.videoTimingInfo.transmuxedPresentationEnd=t.videoSegmentTimingInfo.end.presentation,i.videoTimingInfo.baseMediaDecodeTime=t.videoSegmentTimingInfo.baseMediaDecodeTime}}},{key:"handleUpdateEnd_",value:function(){if(!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var e=this.pendingSegment_,t=e.segment,i=null!==this.mediaIndex;this.pendingSegment_=null,this.recordThroughput_(e),this.addSegmentMetadataCue_(e),this.state="READY",this.mediaIndex=e.mediaIndex,this.fetchAtBuffer_=!0,this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate"),t.end&&this.currentTime_()-t.end>3*e.playlist.targetDuration?this.resetEverything():(i&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.isEndOfStream_(e.mediaIndex+1,e.playlist)&&this.endOfStream(),this.paused()||this.monitorBuffer_())}},{key:"recordThroughput_",value:function(e){var t=this.throughput.rate,i=Date.now()-e.endOfAllRequests+1,n=Math.floor(e.byteLength/i*8*1e3);this.throughput.rate+=(n-t)/++this.throughput.count}},{key:"addSegmentMetadataCue_",value:function(e){if(this.segmentMetadataTrack_){var t=e.segment,i=t.start,n=t.end;if(Wc(i)&&Wc(n)){qu(i,n,this.segmentMetadataTrack_);var r=y.WebKitDataCue||y.VTTCue,a={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.uri,start:i,end:n},o=new r(i,n,JSON.stringify(a));o.value=a,this.segmentMetadataTrack_.addCue(o)}}}}]),Yc);function Yc(e){iu(this,Yc);var t=ou(this,(Yc.__proto__||Object.getPrototypeOf(Yc)).call(this));if(!e)throw new TypeError("Initialization settings are required");if("function"!=typeof e.currentTime)throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");return t.bandwidth=e.bandwidth,t.throughput={rate:0,count:0},t.roundTrip=NaN,t.resetStats_(),t.mediaIndex=null,t.hasPlayed_=e.hasPlayed,t.currentTime_=e.currentTime,t.seekable_=e.seekable,t.seeking_=e.seeking,t.duration_=e.duration,t.mediaSource_=e.mediaSource,t.hls_=e.hls,t.loaderType_=e.loaderType,t.startingMedia_=void 0,t.segmentMetadataTrack_=e.segmentMetadataTrack,t.goalBufferLength_=e.goalBufferLength,t.sourceType_=e.sourceType,t.inbandTextTracks_=e.inbandTextTracks,t.state_="INIT",t.checkBufferTimeout_=null,t.error_=void 0,t.currentTimeline_=-1,t.pendingSegment_=null,t.mimeType_=null,t.sourceUpdater_=null,t.xhrOptions_=null,t.activeInitSegmentId_=null,t.initSegments_={},t.cacheEncryptionKeys_=e.cacheEncryptionKeys,t.keyCache_={},"main"===t.loaderType_?t.captionParser_=new Sl:t.captionParser_=null,t.decrypter_=e.decrypter,t.syncController_=e.syncController,t.syncPoint_={segmentIndex:0,time:0},t.syncController_.on("syncinfoupdate",function(){return t.trigger("syncinfoupdate")}),t.mediaSource_.addEventListener("sourceopen",function(){return t.ended_=!1}),t.fetchAtBuffer_=!1,t.logger_=Dc("SegmentLoader["+t.loaderType_+"]"),Object.defineProperty(t,"state",{get:function(){return this.state_},set:function(e){e!==this.state_&&(this.logger_(this.state_+" -> "+e),this.state_=e)}}),t}function Qc(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))}var Jc=new Uint8Array("\n\n".split("").map(function(e){return e.charCodeAt(0)})),Zc=(au(ed,Kc),nu(ed,[{key:"buffered_",value:function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return qo.createTimeRanges();var e=this.subtitlesTrack_.cues,t=e[0].startTime,i=e[e.length-1].startTime;return qo.createTimeRanges([[t,i]])}},{key:"initSegment",value:function(e,t){var i=1<arguments.length&&void 0!==t&&t;if(!e)return null;var n=Nu(e),r=this.initSegments_[n];if(i&&!r&&e.bytes){var a=Jc.byteLength+e.bytes.byteLength,o=new Uint8Array(a);o.set(e.bytes),o.set(Jc,e.bytes.byteLength),this.initSegments_[n]=r={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:o}}return r||e}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}},{key:"init_",value:function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}},{key:"track",value:function(e){return void 0===e||(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_}},{key:"remove",value:function(e,t){qu(e,t,this.subtitlesTrack_)}},{key:"fillBuffer_",value:function(){var e=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var t=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(t=this.skipEmptySegments_(t)){if(null===this.syncController_.timestampOffsetForTimeline(t.timeline))return this.syncController_.one("timestampoffset",function(){e.state="READY",e.paused()||e.monitorBuffer_()}),void(this.state="WAITING_ON_TIMELINE");this.loadSegment_(t)}}},{key:"skipEmptySegments_",value:function(e){for(;e&&e.segment.empty;)e=this.generateSegmentInfo_(e.playlist,e.mediaIndex+1,e.startOfSegment+e.duration,e.isSyncRequest);return e}},{key:"handleSegment_",value:function(){var t=this;if(this.pendingSegment_&&this.subtitlesTrack_){this.state="APPENDING";var e=this.pendingSegment_,i=e.segment;if("function"!=typeof y.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){function n(){t.subtitlesTrack_.tech_.off("vttjsloaded",r),t.error({message:"Error loading vtt.js"}),t.state="READY",t.pause(),t.trigger("error")}var r=void 0;return r=function(){t.subtitlesTrack_.tech_.off("vttjserror",n),t.handleSegment_()},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",r),void this.subtitlesTrack_.tech_.one("vttjserror",n)}i.requested=!0;try{this.parseVTTCues_(e)}catch(e){return this.error({message:e.message}),this.state="READY",this.pause(),this.trigger("error")}if(this.updateTimeMapping_(e,this.syncController_.timelines[e.timeline],this.playlist_),e.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");e.byteLength=e.bytes.byteLength,this.mediaSecondsLoaded+=i.duration,e.cues.length&&this.remove(e.cues[0].endTime,e.cues[e.cues.length-1].endTime),e.cues.forEach(function(e){t.subtitlesTrack_.addCue(e)}),this.handleUpdateEnd_()}else this.state="READY"}},{key:"parseVTTCues_",value:function(t){var e=void 0,i=!1;"function"==typeof y.TextDecoder?e=new y.TextDecoder("utf8"):(e=y.WebVTT.StringDecoder(),i=!0);var n=new y.WebVTT.Parser(y,y.vttjs,e);if(t.cues=[],t.timestampmap={MPEGTS:0,LOCAL:0},n.oncue=t.cues.push.bind(t.cues),n.ontimestampmap=function(e){return t.timestampmap=e},n.onparsingerror=function(e){qo.log.warn("Error encountered when parsing cues: "+e.message)},t.segment.map){var r=t.segment.map.bytes;i&&(r=Qc(r)),n.parse(r)}var a=t.bytes;i&&(a=Qc(a)),n.parse(a),n.flush()}},{key:"updateTimeMapping_",value:function(e,t,i){var n=e.segment;if(t)if(e.cues.length){var r=e.timestampmap,a=r.MPEGTS/9e4-r.LOCAL+t.mapping;if(e.cues.forEach(function(e){e.startTime+=a,e.endTime+=a}),!i.syncInfo){var o=e.cues[0].startTime,s=e.cues[e.cues.length-1].startTime;i.syncInfo={mediaSequence:i.mediaSequence+e.mediaIndex,time:Math.min(o,s-n.duration)}}}else n.empty=!0}}]),ed);function ed(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};iu(this,ed);var i=ou(this,(ed.__proto__||Object.getPrototypeOf(ed)).call(this,e,t));return i.mediaSource_=null,i.subtitlesTrack_=null,i}function td(e,t){for(var i=e.cues,n=0;n<i.length;n++){var r=i[n];if(t>=r.adStartTime&&t<=r.adEndTime)return r}return null}var id=function(e,t){var i;return(i=(Dl.aac.isLikelyAacData(e)?function(e){for(var t,i=!1,n=0,r=null,a=null,o=0,s=0;3<=e.length-s;){switch(Dl.aac.parseType(e,s)){case"timed-metadata":if(e.length-s<10){i=!0;break}if((o=Dl.aac.parseId3TagSize(e,s))>e.length){i=!0;break}null===a&&(t=e.subarray(s,s+o),a=Dl.aac.parseAacTimestamp(t)),s+=o;break;case"audio":if(e.length-s<7){i=!0;break}if((o=Dl.aac.parseAdtsSize(e,s))>e.length){i=!0;break}null===r&&(t=e.subarray(s,s+o),r=Dl.aac.parseSampleRate(t)),n++,s+=o;break;default:s++}if(i)return null}if(null===r||null===a)return null;var l=9e4/r;return{audio:[{type:"audio",dts:a,pts:a},{type:"audio",dts:a+1024*n*l,pts:a+1024*n*l}]}}:function(e){var t={pid:null,table:null},i={};for(var n in function(e,t){for(var i,n=0,r=Rl;r<e.byteLength;)if(71!==e[n]||71!==e[r])n++,r++;else{switch(i=e.subarray(n,r),Dl.ts.parseType(i,t.pid)){case"pat":t.pid||(t.pid=Dl.ts.parsePat(i));break;case"pmt":t.table||(t.table=Dl.ts.parsePmt(i))}if(t.pid&&t.table)return;n+=Rl,r+=Rl}}(e,t),t.table)if(t.table.hasOwnProperty(n))switch(t.table[n]){case 27:i.video=[],Ml(e,t,i),0===i.video.length&&delete i.video;break;case 15:i.audio=[],Nl(e,t,i),0===i.audio.length&&delete i.audio}return i})(e))&&(i.audio||i.video)?(function(e,t){if(e.audio&&e.audio.length){var i=t;void 0===i&&(i=e.audio[0].dts),e.audio.forEach(function(e){e.dts=Ll(e.dts,i),e.pts=Ll(e.pts,i),e.dtsTime=e.dts/9e4,e.ptsTime=e.pts/9e4})}if(e.video&&e.video.length){var n=t;if(void 0===n&&(n=e.video[0].dts),e.video.forEach(function(e){e.dts=Ll(e.dts,n),e.pts=Ll(e.pts,n),e.dtsTime=e.dts/9e4,e.ptsTime=e.pts/9e4}),e.firstKeyFrame){var r=e.firstKeyFrame;r.dts=Ll(r.dts,n),r.pts=Ll(r.pts,n),r.dtsTime=r.dts/9e4,r.ptsTime=r.dts/9e4}}}(i,t),i):null},nd=[{name:"VOD",run:function(e,t,i,n,r){return i===1/0?null:{time:0,segmentIndex:0}}},{name:"ProgramDateTime",run:function(e,t,i,n,r){if(!e.datetimeToDisplayTime)return null;var a=t.segments||[],o=null,s=null;r=r||0;for(var l=0;l<a.length;l++){var u=a[l];if(u.dateTimeObject){var c=u.dateTimeObject.getTime()/1e3+e.datetimeToDisplayTime,d=Math.abs(r-c);if(null!==s&&(0===d||s<d))break;s=d,o={time:c,segmentIndex:l}}}return o}},{name:"Segment",run:function(e,t,i,n,r){var a=t.segments||[],o=null,s=null;r=r||0;for(var l=0;l<a.length;l++){var u=a[l];if(u.timeline===n&&void 0!==u.start){var c=Math.abs(r-u.start);if(null!==s&&s<c)break;(!o||null===s||c<=s)&&(s=c,o={time:u.start,segmentIndex:l})}}return o}},{name:"Discontinuity",run:function(e,t,i,n,r){var a=null;if(r=r||0,t.discontinuityStarts&&t.discontinuityStarts.length)for(var o=null,s=0;s<t.discontinuityStarts.length;s++){var l=t.discontinuityStarts[s],u=t.discontinuitySequence+s+1,c=e.discontinuities[u];if(c){var d=Math.abs(r-c.time);if(null!==o&&o<d)break;(!a||null===o||d<=o)&&(o=d,a={time:c.time,segmentIndex:l})}}return a}},{name:"Playlist",run:function(e,t,i,n,r){return t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence}:null}}],rd=(au(ad,qo.EventTarget),nu(ad,[{key:"getSyncPoint",value:function(e,t,i,n){var r=this.runStrategies_(e,t,i,n);return r.length?this.selectSyncPoint_(r,{key:"time",value:n}):null}},{key:"getExpiredTime",value:function(e,t){if(!e||!e.segments)return null;var i=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!i.length)return null;var n=this.selectSyncPoint_(i,{key:"segmentIndex",value:0});return 0<n.segmentIndex&&(n.time*=-1),Math.abs(n.time+bu(e,n.segmentIndex,0))}},{key:"runStrategies_",value:function(e,t,i,n){for(var r=[],a=0;a<nd.length;a++){var o=nd[a],s=o.run(this,e,t,i,n);s&&(s.strategy=o.name,r.push({strategy:o.name,syncPoint:s}))}return r}},{key:"selectSyncPoint_",value:function(e,t){for(var i=e[0].syncPoint,n=Math.abs(e[0].syncPoint[t.key]-t.value),r=e[0].strategy,a=1;a<e.length;a++){var o=Math.abs(e[a].syncPoint[t.key]-t.value);o<n&&(n=o,i=e[a].syncPoint,r=e[a].strategy)}return this.logger_("syncPoint for ["+t.key+": "+t.value+"] chosen with strategy ["+r+"]: [time:"+i.time+", segmentIndex:"+i.segmentIndex+"]"),i}},{key:"saveExpiredSegmentInfo",value:function(e,t){for(var i=t.mediaSequence-e.mediaSequence-1;0<=i;i--){var n=e.segments[i];if(n&&void 0!==n.start){t.syncInfo={mediaSequence:e.mediaSequence+i,time:n.start},this.logger_("playlist refresh sync: [time:"+t.syncInfo.time+", mediaSequence: "+t.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}}},{key:"setDateTimeMapping",value:function(e){if(!this.datetimeToDisplayTime&&e.segments&&e.segments.length&&e.segments[0].dateTimeObject){var t=e.segments[0].dateTimeObject.getTime()/1e3;this.datetimeToDisplayTime=-t}}},{key:"reset",value:function(){this.inspectCache_=void 0}},{key:"probeSegmentInfo",value:function(e){var t,i=e.segment,n=e.playlist;return(t=i.map?this.probeMp4Segment_(e):this.probeTsSegment_(e))&&this.calculateSegmentTimeMapping_(e,t)&&(this.saveDiscontinuitySyncInfo_(e),n.syncInfo||(n.syncInfo={mediaSequence:n.mediaSequence+e.mediaIndex,time:i.start})),t}},{key:"probeMp4Segment_",value:function(e){var t=e.segment,i=ll.timescale(t.map.bytes),n=ll.startTime(i,e.bytes);return null!==e.timestampOffset&&(e.timestampOffset-=n),{start:n,end:n+t.duration}}},{key:"probeTsSegment_",value:function(e){var t=id(e.bytes,this.inspectCache_),i=void 0,n=void 0,r=void 0;return t?(t.video&&2===t.video.length?(this.inspectCache_=t.video[1].dts,i=t.video[0].dtsTime,n=t.video[1].dtsTime,r=t.video):t.audio&&2===t.audio.length&&(this.inspectCache_=t.audio[1].dts,i=t.audio[0].dtsTime,n=t.audio[1].dtsTime,r=t.audio),{segmentTimestampInfo:r,start:i,end:n,containsVideo:t.video&&2===t.video.length,containsAudio:t.audio&&2===t.audio.length}):null}},{key:"timestampOffsetForTimeline",value:function(e){return void 0===this.timelines[e]?null:this.timelines[e].time}},{key:"mappingForTimeline",value:function(e){return void 0===this.timelines[e]?null:this.timelines[e].mapping}},{key:"calculateSegmentTimeMapping_",value:function(e,t){var i=e.segment,n=this.timelines[e.timeline];if(null!==e.timestampOffset)n={time:e.startOfSegment,mapping:e.startOfSegment-t.start},this.timelines[e.timeline]=n,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+e.timeline+": [time: "+n.time+"] [mapping: "+n.mapping+"]"),i.start=e.startOfSegment,i.end=t.end+n.mapping;else{if(!n)return!1;i.start=t.start+n.mapping,i.end=t.end+n.mapping}return!0}},{key:"saveDiscontinuitySyncInfo_",value:function(e){var t=e.playlist,i=e.segment;if(i.discontinuity)this.discontinuities[i.timeline]={time:i.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(var n=0;n<t.discontinuityStarts.length;n++){var r=t.discontinuityStarts[n],a=t.discontinuitySequence+n+1,o=r-e.mediaIndex,s=Math.abs(o);if(!this.discontinuities[a]||this.discontinuities[a].accuracy>s){var l;l=o<0?i.start-bu(t,e.mediaIndex,r):i.end+bu(t,e.mediaIndex+1,r),this.discontinuities[a]={time:l,accuracy:s}}}}}]),ad);function ad(){iu(this,ad);var e=ou(this,(ad.__proto__||Object.getPrototypeOf(ad)).call(this));return e.inspectCache_=void 0,e.timelines=[],e.discontinuities=[],e.datetimeToDisplayTime=null,e.logger_=Dc("SyncController"),e}function od(e,t){e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)}function sd(e,t){(t.activePlaylistLoader=e).load()}function ld(t){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(e){hd[e](e,t)});var i=t.mediaTypes,e=t.masterPlaylistLoader,n=t.tech,r=t.hls;["AUDIO","SUBTITLES"].forEach(function(e){var s,l,u,c,a,o;i[e].activeGroup=(a=e,o=t,function(t){var e=o.masterPlaylistLoader,i=o.mediaTypes[a].groups,n=e.media();if(!n)return null;var r=null;return n.attributes[a]&&(r=i[n.attributes[a]]),r=r||i.main,void 0===t?r:null!==t&&r.filter(function(e){return e.id===t.id})[0]||null}),i[e].activeTrack=pd[e](e,t),i[e].onGroupChanged=(u=e,c=t,function(){var e=c.segmentLoaders,t=e[u],i=e.main,n=c.mediaTypes[u],r=n.activeTrack(),a=n.activeGroup(r),o=n.activePlaylistLoader;od(t,n),a&&(a.playlistLoader?(t.resyncLoader(),sd(a.playlistLoader,n)):o&&i.resetEverything())}),i[e].onTrackChanged=(s=e,l=t,function(){var e=l.segmentLoaders,t=e[s],i=e.main,n=l.mediaTypes[s],r=n.activeTrack(),a=n.activeGroup(r),o=n.activePlaylistLoader;od(t,n),a&&(a.playlistLoader?(o!==a.playlistLoader&&(t.track&&t.track(r),t.resetEverything()),sd(a.playlistLoader,n)):i.resetEverything())})});var a=i.AUDIO.activeGroup(),o=(a.filter(function(e){return e.default})[0]||a[0]).id;function s(){i.AUDIO.onTrackChanged(),n.trigger({type:"usage",name:"hls-audio-change"})}for(var l in i.AUDIO.tracks[o].enabled=!0,i.AUDIO.onTrackChanged(),e.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(e){return i[e].onGroupChanged()})}),n.audioTracks().addEventListener("change",s),n.remoteTextTracks().addEventListener("change",i.SUBTITLES.onTrackChanged),r.on("dispose",function(){n.audioTracks().removeEventListener("change",s),n.remoteTextTracks().removeEventListener("change",i.SUBTITLES.onTrackChanged)}),n.clearTracks("audio"),i.AUDIO.tracks)n.audioTracks().addTrack(i.AUDIO.tracks[l])}var ud=new ac("./decrypter-worker.worker.js",function(e,t){var i,c,m,n,r,l,o;function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e){d(this,h),c=c||function(){var e=[[[],[],[],[],[]],[[],[],[],[],[]]],t=e[0],i=e[1],n=t[4],r=i[4],a=void 0,o=void 0,s=void 0,l=[],u=[],c=void 0,d=void 0,h=void 0,p=void 0,f=void 0;for(a=0;a<256;a++)u[(l[a]=a<<1^283*(a>>7))^a]=a;for(o=s=0;!n[o];o^=c||1,s=u[s]||1)for(h=(h=s^s<<1^s<<2^s<<3^s<<4)>>8^255&h^99,f=16843009*l[d=l[c=l[r[n[o]=h]=o]]]^65537*d^257*c^16843008*o,p=257*l[h]^16843008*h,a=0;a<4;a++)t[a][o]=p=p<<24^p>>>8,i[a][h]=f=f<<24^f>>>8;for(a=0;a<5;a++)t[a]=t[a].slice(0),i[a]=i[a].slice(0);return e}(),this._tables=[[c[0][0].slice(),c[0][1].slice(),c[0][2].slice(),c[0][3].slice(),c[0][4].slice()],[c[1][0].slice(),c[1][1].slice(),c[1][2].slice(),c[1][3].slice(),c[1][4].slice()]];var t=void 0,i=void 0,n=void 0,r=void 0,a=void 0,o=this._tables[0][4],s=this._tables[1],l=e.length,u=1;if(4!==l&&6!==l&&8!==l)throw new Error("Invalid aes key size");for(r=e.slice(0),a=[],this._key=[r,a],t=l;t<4*l+28;t++)n=r[t-1],(t%l==0||8===l&&t%l==4)&&(n=o[n>>>24]<<24^o[n>>16&255]<<16^o[n>>8&255]<<8^o[255&n],t%l==0&&(n=n<<8^n>>>24^u<<24,u=u<<1^283*(u>>7))),r[t]=r[t-l]^n;for(i=0;t;i++,t--)n=r[3&i?t:t-4],a[i]=t<=4||i<4?n:s[0][o[n>>>24]]^s[1][o[n>>16&255]]^s[2][o[n>>8&255]]^s[3][o[255&n]]}function s(){d(this,s),this.listeners={}}function u(){d(this,u);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,r.call(this,n));return e.jobs=[],e.delay=1,e.timeout_=null,e}function v(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}function p(e,t,i,n){d(this,p);var r=p.STEP,a=new Int32Array(e.buffer),o=new Uint8Array(e.byteLength),s=0;for(this.asyncStream_=new l,this.asyncStream_.push(this.decryptChunk_(a.subarray(s,s+r),t,i,o)),s=r;s<a.length;s+=r)i=new Uint32Array([v(a[s-4]),v(a[s-3]),v(a[s-2]),v(a[s-1])]),this.asyncStream_.push(this.decryptChunk_(a.subarray(s,s+r),t,i,o));this.asyncStream_.push(function(){n(null,o.subarray(0,o.byteLength-o[o.byteLength-1]))})}i=function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e},c=null,h.prototype.decrypt=function(e,t,i,n,r,a){var o=this._key[1],s=e^o[0],l=n^o[1],u=i^o[2],c=t^o[3],d=void 0,h=void 0,p=void 0,f=o.length/4-2,g=void 0,m=4,v=this._tables[1],y=v[0],b=v[1],_=v[2],T=v[3],w=v[4];for(g=0;g<f;g++)d=y[s>>>24]^b[l>>16&255]^_[u>>8&255]^T[255&c]^o[m],h=y[l>>>24]^b[u>>16&255]^_[c>>8&255]^T[255&s]^o[m+1],p=y[u>>>24]^b[c>>16&255]^_[s>>8&255]^T[255&l]^o[m+2],c=y[c>>>24]^b[s>>16&255]^_[l>>8&255]^T[255&u]^o[m+3],m+=4,s=d,l=h,u=p;for(g=0;g<4;g++)r[(3&-g)+a]=w[s>>>24]<<24^w[l>>16&255]<<16^w[u>>8&255]<<8^w[255&c]^o[m++],d=s,s=l,l=u,u=c,c=d},m=h,s.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},s.prototype.off=function(e,t){if(!this.listeners[e])return!1;var i=this.listeners[e].indexOf(t);return this.listeners[e].splice(i,1),-1<i},s.prototype.trigger=function(e,t){var i=this.listeners[e];if(i)if(2===arguments.length)for(var n=i.length,r=0;r<n;++r)i[r].call(this,t);else for(var a=Array.prototype.slice.call(arguments,1),o=i.length,s=0;s<o;++s)i[s].apply(this,a)},s.prototype.dispose=function(){this.listeners={}},s.prototype.pipe=function(t){this.on("data",function(e){t.push(e)})},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}(u,r=n=s),u.prototype.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},u.prototype.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},l=u,p.prototype.decryptChunk_=function(t,i,n,r){return function(){var e=function(e,t,i){var n=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),r=new m(Array.prototype.slice.call(t)),a=new Uint8Array(e.byteLength),o=new Int32Array(a.buffer),s=void 0,l=void 0,u=void 0,c=void 0,d=void 0,h=void 0,p=void 0,f=void 0,g=void 0;for(s=i[0],l=i[1],u=i[2],c=i[3],g=0;g<n.length;g+=4)d=v(n[g]),h=v(n[g+1]),p=v(n[g+2]),f=v(n[g+3]),r.decrypt(d,h,p,f,o,g),o[g]=v(o[g]^s),o[g+1]=v(o[g+1]^l),o[g+2]=v(o[g+2]^u),o[g+3]=v(o[g+3]^c),s=d,l=h,u=p,c=f;return a}(t,i,n);r.set(e,t.byteOffset)}},i(p,null,[{key:"STEP",get:function(){return 32e3}}]),o=p,new function(a){a.onmessage=function(e){var r=e.data,t=new Uint8Array(r.encrypted.bytes,r.encrypted.byteOffset,r.encrypted.byteLength),i=new Uint32Array(r.key.bytes,r.key.byteOffset,r.key.byteLength/4),n=new Uint32Array(r.iv.bytes,r.iv.byteOffset,r.iv.byteLength/4);new o(t,i,n,function(e,t){var i,n;a.postMessage((i={source:r.source,decrypted:t},n={},Object.keys(i).forEach(function(e){var t=i[e];ArrayBuffer.isView(t)?n[e]={bytes:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength}:n[e]=t}),n),[t.buffer])})}}(this)}),cd={AUDIO:function(l,u){return function(){var e=u.segmentLoaders[l],t=u.mediaTypes[l],i=u.blacklistCurrentPlaylist;od(e,t);var n=t.activeTrack(),r=t.activeGroup(),a=(r.filter(function(e){return e.default})[0]||r[0]).id,o=t.tracks[a];if(n!==o){for(var s in qo.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),t.tracks)t.tracks[s].enabled=t.tracks[s]===o;t.onTrackChanged()}else i({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(n,r){return function(){var e=r.segmentLoaders[n],t=r.mediaTypes[n];qo.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),od(e,t);var i=t.activeTrack();i&&(i.mode="disabled"),t.onTrackChanged()}}},dd={AUDIO:function(e,t,i){if(t){var n=i.tech,r=i.requestOptions,a=i.segmentLoaders[e];t.on("loadedmetadata",function(){var e=t.media();a.playlist(e,r),(!n.paused()||e.endList&&"none"!==n.preload())&&a.load()}),t.on("loadedplaylist",function(){a.playlist(t.media(),r),n.paused()||a.load()}),t.on("error",cd[e](e,i))}},SUBTITLES:function(e,t,i){var n=i.tech,r=i.requestOptions,a=i.segmentLoaders[e],o=i.mediaTypes[e];t.on("loadedmetadata",function(){var e=t.media();a.playlist(e,r),a.track(o.activeTrack()),(!n.paused()||e.endList&&"none"!==n.preload())&&a.load()}),t.on("loadedplaylist",function(){a.playlist(t.media(),r),n.paused()||a.load()}),t.on("error",cd[e](e,i))}},hd={AUDIO:function(e,t){var i,n=t.hls,r=t.sourceType,a=t.segmentLoaders[e],o=t.requestOptions,s=t.master.mediaGroups,l=t.mediaTypes[e],u=l.groups,c=l.tracks,d=t.masterPlaylistLoader;for(var h in s[e]&&0!==Object.keys(s[e]).length||(s[e]={main:{default:{default:!0}}}),s[e])for(var p in u[h]||(u[h]=[]),s[e][h]){var f,g=s[e][h][p];if(f=g.resolvedUri?new gu(g.resolvedUri,n,o):g.playlists&&"dash"===r?new Oc(g.playlists[0],n,o,d):null,g=qo.mergeOptions({id:p,playlistLoader:f},g),dd[e](e,g.playlistLoader,t),u[h].push(g),void 0===c[p]){var m=new qo.AudioTrack({id:p,kind:(i=void 0,i=g.default?"main":"alternative",g.characteristics&&0<=g.characteristics.indexOf("public.accessibility.describes-video")&&(i="main-desc"),i),enabled:!1,language:g.language,default:g.default,label:p});c[p]=m}}a.on("error",cd[e](e,t))},SUBTITLES:function(e,t){var i=t.tech,n=t.hls,r=t.sourceType,a=t.segmentLoaders[e],o=t.requestOptions,s=t.master.mediaGroups,l=t.mediaTypes[e],u=l.groups,c=l.tracks,d=t.masterPlaylistLoader;for(var h in s[e])for(var p in u[h]||(u[h]=[]),s[e][h])if(!s[e][h][p].forced){var f=s[e][h][p],g=void 0;if("hls"===r?g=new gu(f.resolvedUri,n,o):"dash"===r&&(g=new Oc(f.playlists[0],n,o,d)),f=qo.mergeOptions({id:p,playlistLoader:g},f),dd[e](e,f.playlistLoader,t),u[h].push(f),void 0===c[p]){var m=i.addRemoteTextTrack({id:p,kind:"subtitles",default:f.default&&f.autoselect,language:f.language,label:p},!1).track;c[p]=m}}a.on("error",cd[e](e,t))},"CLOSED-CAPTIONS":function(e,t){var i=t.tech,n=t.master.mediaGroups,r=t.mediaTypes[e],a=r.groups,o=r.tracks;for(var s in n[e])for(var l in a[s]||(a[s]=[]),n[e][s]){var u=n[e][s][l];if(u.instreamId.match(/CC\d/)&&(a[s].push(qo.mergeOptions({id:l},u)),void 0===o[l])){var c=i.addRemoteTextTrack({id:u.instreamId,kind:"captions",default:u.default&&u.autoselect,language:u.language,label:l},!1).track;o[l]=c}}}},pd={AUDIO:function(i,n){return function(){var e=n.mediaTypes[i].tracks;for(var t in e)if(e[t].enabled)return e[t];return null}},SUBTITLES:function(i,n){return function(){var e=n.mediaTypes[i].tracks;for(var t in e)if("showing"===e[t].mode)return e[t];return null}}},fd=void 0,gd=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred"],md=(au(vd,qo.EventTarget),nu(vd,[{key:"setupMasterPlaylistLoaderListeners_",value:function(){var n=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var e=n.masterPlaylistLoader_.media(),t=1.5*e.targetDuration*1e3;Au(n.masterPlaylistLoader_.master,n.masterPlaylistLoader_.media())?n.requestOptions_.timeout=0:n.requestOptions_.timeout=t,e.endList&&"none"!==n.tech_.preload()&&(n.mainSegmentLoader_.playlist(e,n.requestOptions_),n.mainSegmentLoader_.load()),ld({sourceType:n.sourceType_,segmentLoaders:{AUDIO:n.audioSegmentLoader_,SUBTITLES:n.subtitleSegmentLoader_,main:n.mainSegmentLoader_},tech:n.tech_,requestOptions:n.requestOptions_,masterPlaylistLoader:n.masterPlaylistLoader_,hls:n.hls_,master:n.master(),mediaTypes:n.mediaTypes_,blacklistCurrentPlaylist:n.blacklistCurrentPlaylist.bind(n)}),n.triggerPresenceUsage_(n.master(),e);try{n.setupSourceBuffers_()}catch(e){return qo.log.warn("Failed to create SourceBuffers",e),n.mediaSource.endOfStream("decode")}n.setupFirstPlay(),!n.mediaTypes_.AUDIO.activePlaylistLoader||n.mediaTypes_.AUDIO.activePlaylistLoader.media()?n.trigger("selectedinitialmedia"):n.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){n.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){var e=n.masterPlaylistLoader_.media();if(!e){n.excludeUnsupportedVariants_();var t=void 0;return n.enableLowInitialPlaylist&&(t=n.selectInitialPlaylist()),t=t||n.selectPlaylist(),n.initialMedia_=t,void n.masterPlaylistLoader_.media(n.initialMedia_)}if(n.useCueTags_&&n.updateAdCues_(e),n.mainSegmentLoader_.playlist(e,n.requestOptions_),n.updateDuration(),n.tech_.paused()||(n.mainSegmentLoader_.load(),n.audioSegmentLoader_&&n.audioSegmentLoader_.load()),!e.endList){function i(){var e=n.seekable();0!==e.length&&n.mediaSource.addSeekableRange_(e.start(0),e.end(0))}n.duration()!==1/0?n.tech_.one("durationchange",function e(){n.duration()===1/0?i():n.tech_.one("durationchange",e)}):i()}}),this.masterPlaylistLoader_.on("error",function(){n.blacklistCurrentPlaylist(n.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){n.mainSegmentLoader_.abort(),n.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var e=n.masterPlaylistLoader_.media(),t=1.5*e.targetDuration*1e3;Au(n.masterPlaylistLoader_.master,n.masterPlaylistLoader_.media())?n.requestOptions_.timeout=0:n.requestOptions_.timeout=t,n.mainSegmentLoader_.playlist(e,n.requestOptions_),n.mainSegmentLoader_.load(),n.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var e=n.masterPlaylistLoader_.media();n.stuckAtPlaylistEnd_(e)&&(n.blacklistCurrentPlaylist({message:"Playlist no longer updating."}),n.tech_.trigger("playliststuck"))}),this.masterPlaylistLoader_.on("renditiondisabled",function(){n.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){n.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})}},{key:"triggerPresenceUsage_",value:function(e,t){var i=e.mediaGroups||{},n=!0,r=Object.keys(i.AUDIO);for(var a in i.AUDIO)for(var o in i.AUDIO[a])i.AUDIO[a][o].uri||(n=!1);n&&this.tech_.trigger({type:"usage",name:"hls-demuxed"}),Object.keys(i.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"hls-webvtt"}),fd.Playlist.isAes(t)&&this.tech_.trigger({type:"usage",name:"hls-aes"}),fd.Playlist.isFmp4(t)&&this.tech_.trigger({type:"usage",name:"hls-fmp4"}),r.length&&1<Object.keys(i.AUDIO[r[0]]).length&&this.tech_.trigger({type:"usage",name:"hls-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"})}},{key:"setupSegmentLoaderListeners_",value:function(){var a=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){var e=a.selectPlaylist(),t=a.masterPlaylistLoader_.media(),i=a.tech_.buffered(),n=i.length?i.end(i.length-1)-a.tech_.currentTime():0,r=a.bufferLowWaterLine();(!t.endList||a.duration()<Vc.MAX_BUFFER_LOW_WATER_LINE||e.attributes.BANDWIDTH<t.attributes.BANDWIDTH||r<=n)&&a.masterPlaylistLoader_.media(e),a.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",function(){a.trigger("progress")}),this.mainSegmentLoader_.on("error",function(){a.blacklistCurrentPlaylist(a.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("syncinfoupdate",function(){a.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){a.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){a.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("ended",function(){a.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(){a.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120)}),this.mainSegmentLoader_.on("reseteverything",function(){a.tech_.trigger("hls-reset")}),this.mainSegmentLoader_.on("segmenttimemapping",function(e){a.tech_.trigger({type:"hls-segment-time-mapping",mapping:e.mapping})}),this.audioSegmentLoader_.on("ended",function(){a.onEndOfStream()})}},{key:"mediaSecondsLoaded_",value:function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"load",value:function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}},{key:"smoothQualityChange_",value:function(){var e=this.selectPlaylist();e!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(e),this.mainSegmentLoader_.resetLoader())}},{key:"fastQualityChange_",value:function(){var e=this,t=this.selectPlaylist();t!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(t),this.mainSegmentLoader_.resetEverything(function(){qo.browser.IE_VERSION||qo.browser.IS_EDGE?e.tech_.setCurrentTime(e.tech_.currentTime()+.04):e.tech_.setCurrentTime(e.tech_.currentTime())}))}},{key:"play",value:function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.seekTo_(0),this.hasPlayed_()&&this.load();var e=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0)?this.seekTo_(e.end(e.length-1)):void 0}}},{key:"setupFirstPlay",value:function(){var e=this,t=this.masterPlaylistLoader_.media();if(!t||this.tech_.paused()||this.hasPlayed_())return!1;if(!t.endList){var i=this.seekable();if(!i.length)return!1;if(qo.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){e.trigger("firstplay"),e.seekTo_(i.end(0)),e.hasPlayed_=function(){return!0}}),!1;this.trigger("firstplay"),this.seekTo_(i.end(0))}return this.hasPlayed_=function(){return!0},this.load(),!0}},{key:"handleSourceOpen_",value:function(){try{this.setupSourceBuffers_()}catch(e){return qo.log.warn("Failed to create Source Buffers",e),this.mediaSource.endOfStream("decode")}if(this.tech_.autoplay()){var e=this.tech_.play();void 0!==e&&"function"==typeof e.then&&e.then(null,function(e){})}this.trigger("sourceopen")}},{key:"onEndOfStream",value:function(){var e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader&&(e=(this.mainSegmentLoader_.startingMedia_&&!this.mainSegmentLoader_.startingMedia_.containsVideo||e)&&this.audioSegmentLoader_.ended_),e){this.logger_("calling mediaSource.endOfStream()");try{this.mediaSource.endOfStream()}catch(e){qo.log.warn("Failed to call media source endOfStream",e)}}}},{key:"stuckAtPlaylistEnd_",value:function(e){if(!this.seekable().length)return!1;var t=this.syncController_.getExpiredTime(e,this.mediaSource.duration);if(null===t)return!1;var i=fd.Playlist.playlistEnd(e,t),n=this.tech_.currentTime(),r=this.tech_.buffered();if(!r.length)return i-n<=.1;var a=r.end(r.length-1);return a-n<=.1&&i-a<=.1}},{key:"blacklistCurrentPlaylist",value:function(e,t){var i,n=0<arguments.length&&void 0!==e?e:{},r=t,a=void 0;if(a=n.playlist||this.masterPlaylistLoader_.media(),r=r||n.blacklistDuration||this.blacklistDuration,!a){this.error=n;try{return this.mediaSource.endOfStream("network")}catch(e){return this.trigger("error")}}var o=1===this.masterPlaylistLoader_.master.playlists.filter(Eu).length,s=this.masterPlaylistLoader_.master.playlists;return 1===s.length?(qo.log.warn("Problem encountered with the current HLS playlist. Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(o)):(o&&(qo.log.warn("Removing all playlists from the blacklist because the last rendition is about to be blacklisted."),s.forEach(function(e){e.excludeUntil!==1/0&&delete e.excludeUntil}),this.tech_.trigger("retryplaylist")),a.excludeUntil=Date.now()+1e3*r,this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"}),i=this.selectPlaylist(),qo.log.warn("Problem encountered with the current HLS playlist."+(n.message?" "+n.message:"")+" Switching to another playlist."),this.masterPlaylistLoader_.media(i,o))}},{key:"pauseLoading",value:function(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}},{key:"setCurrentTime",value:function(e){var t=Bu(this.tech_.buffered(),e);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?t&&t.length?e:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0}},{key:"duration",value:function(){return this.masterPlaylistLoader_?this.mediaSource?this.mediaSource.duration:fd.Playlist.duration(this.masterPlaylistLoader_.media()):0}},{key:"seekable",value:function(){return this.seekable_}},{key:"onSyncInfoUpdate_",value:function(){var e=void 0,t=void 0;if(this.masterPlaylistLoader_){var i=this.masterPlaylistLoader_.media();if(i){var n=this.syncController_.getExpiredTime(i,this.mediaSource.duration);if(null!==n&&0!==(e=fd.Playlist.seekable(i,n)).length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(i=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(n=this.syncController_.getExpiredTime(i,this.mediaSource.duration)))return;if(0===(t=fd.Playlist.seekable(i,n)).length)return}var r=void 0,a=void 0;this.seekable_&&this.seekable_.length&&(r=this.seekable_.end(0),a=this.seekable_.start(0)),!t||t.start(0)>e.end(0)||e.start(0)>t.end(0)?this.seekable_=e:this.seekable_=qo.createTimeRanges([[t.start(0)>e.start(0)?t.start(0):e.start(0),t.end(0)<e.end(0)?t.end(0):e.end(0)]]),this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===r&&this.seekable_.start(0)===a||(this.logger_("seekable updated ["+$u(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},{key:"updateDuration",value:function(){function e(){t.logger_("Setting duration from "+t.mediaSource.duration+" => "+n);try{t.mediaSource.duration=n}catch(e){qo.log.warn("Failed to set media source duration",e)}t.tech_.trigger("durationchange"),t.mediaSource.removeEventListener("sourceopen",e)}var t=this,i=this.mediaSource.duration,n=fd.Playlist.duration(this.masterPlaylistLoader_.media()),r=this.tech_.buffered();0<r.length&&(n=Math.max(n,r.end(r.length-1))),i!==n&&("open"!==this.mediaSource.readyState?this.mediaSource.addEventListener("sourceopen",e):e())}},{key:"dispose",value:function(){var n=this;this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),["AUDIO","SUBTITLES"].forEach(function(e){var t=n.mediaTypes_[e].groups;for(var i in t)t[i].forEach(function(e){e.playlistLoader&&e.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose()}},{key:"master",value:function(){return this.masterPlaylistLoader_.master}},{key:"media",value:function(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:"setupSourceBuffers_",value:function(){var e,t=this.masterPlaylistLoader_.media();if(t&&"open"===this.mediaSource.readyState){if((e=function(r,e){var t,i=e.segments&&e.segments.length&&e.segments[0].map?"mp4":"mp2t",n=(t=e.attributes||{}).CODECS?dc(t.CODECS):mc,a=e.attributes||{},o=!0,s=!1;if(!e)return[];if(r.mediaGroups.AUDIO&&a.AUDIO){var l=r.mediaGroups.AUDIO[a.AUDIO];if(l)for(var u in o=!(s=!0),l)if(!l[u].uri&&!l[u].playlists){o=!0;break}}s&&!n.audioProfile&&(o||(n.audioProfile=function(e){if(!r.mediaGroups.AUDIO||!e)return null;var t=r.mediaGroups.AUDIO[e];if(!t)return null;for(var i in t){var n=t[i];if(n.default&&n.playlists)return dc(n.playlists[0].attributes.CODECS).audioProfile}return null}(a.AUDIO)),n.audioProfile||(qo.log.warn("Multiple audio tracks present but no audio codec string is specified. Attempting to use the default audio codec (mp4a.40.2)"),n.audioProfile=mc.audioProfile));var c={};n.videoCodec&&(c.video=""+n.videoCodec+n.videoObjectTypeIndicator),n.audioProfile&&(c.audio="mp4a.40."+n.audioProfile);var d=hc("audio",i,[c.audio]),h=hc("video",i,[c.video]),p=hc("video",i,[c.video,c.audio]);return s?!o&&c.video?[h,d]:o||c.video?[p,d]:[d,d]:c.video?[p]:[d]}(this.masterPlaylistLoader_.master,t)).length<1)return this.error="No compatible SourceBuffer configuration for the variant stream:"+t.resolvedUri,this.mediaSource.endOfStream("decode");this.configureLoaderMimeTypes_(e),this.excludeIncompatibleVariants_(t)}}},{key:"configureLoaderMimeTypes_",value:function(e){var t=1<e.length&&-1===e[0].indexOf(",")&&e[0]!==e[1]?new qo.EventTarget:null;this.mainSegmentLoader_.mimeType(e[0],t),e[1]&&this.audioSegmentLoader_.mimeType(e[1],t)}},{key:"excludeUnsupportedVariants_",value:function(){this.master().playlists.forEach(function(e){e.attributes.CODECS&&y.MediaSource&&y.MediaSource.isTypeSupported&&!y.MediaSource.isTypeSupported('video/mp4; codecs="'+e.attributes.CODECS.replace(/avc1\.(\d+)\.(\d+)/i,function(e){return cc([e])[0]})+'"')&&(e.excludeUntil=1/0)})}},{key:"excludeIncompatibleVariants_",value:function(e){var i=2,n=null,t=void 0;e.attributes.CODECS&&(t=dc(e.attributes.CODECS),n=t.videoCodec,i=t.codecCount),this.master().playlists.forEach(function(e){var t={codecCount:2,videoCodec:null};e.attributes.CODECS&&(t=dc(e.attributes.CODECS)),t.codecCount!==i&&(e.excludeUntil=1/0),t.videoCodec!==n&&(e.excludeUntil=1/0)})}},{key:"updateAdCues_",value:function(e){var t=0,i=this.seekable();i.length&&(t=i.start(0)),function(e,t,i){var n=2<arguments.length&&void 0!==i?i:0;if(e.segments)for(var r=n,a=void 0,o=0;o<e.segments.length;o++){var s=e.segments[o];if(a=a||td(t,r+s.duration/2)){if("cueIn"in s){a.endTime=r,a.adEndTime=r,r+=s.duration,a=null;continue}if(r<a.endTime){r+=s.duration;continue}a.endTime+=s.duration}else if("cueOut"in s&&((a=new y.VTTCue(r,r+s.duration,s.cueOut)).adStartTime=r,a.adEndTime=r+parseFloat(s.cueOut),t.addCue(a)),"cueOutCont"in s){var l,u,c=s.cueOutCont.split("/").map(parseFloat),d=hu(c,2);l=d[0],u=d[1],(a=new y.VTTCue(r,r+s.duration,"")).adStartTime=r-l,a.adEndTime=a.adStartTime+u,t.addCue(a)}r+=s.duration}}(e,this.cueTagsTrack_,t)}},{key:"goalBufferLength",value:function(){var e=this.tech_.currentTime(),t=Vc.GOAL_BUFFER_LENGTH,i=Vc.GOAL_BUFFER_LENGTH_RATE,n=Math.max(t,Vc.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*i,n)}},{key:"bufferLowWaterLine",value:function(){var e=this.tech_.currentTime(),t=Vc.BUFFER_LOW_WATER_LINE,i=Vc.BUFFER_LOW_WATER_LINE_RATE,n=Math.max(t,Vc.MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*i,n)}}]),vd);function vd(e){iu(this,vd);var t,i=ou(this,(vd.__proto__||Object.getPrototypeOf(vd)).call(this)),n=e.url,r=e.handleManifestRedirects,a=e.withCredentials,o=e.tech,s=e.bandwidth,l=e.externHls,u=e.useCueTags,c=e.blacklistDuration,d=e.enableLowInitialPlaylist,h=e.sourceType,p=e.seekTo,f=e.cacheEncryptionKeys;if(!n)throw new Error("A non-empty playlist URL is required");fd=l,i.withCredentials=a,i.tech_=o,i.hls_=o.hls,i.seekTo_=p,i.sourceType_=h,i.useCueTags_=u,i.blacklistDuration=c,i.enableLowInitialPlaylist=d,i.useCueTags_&&(i.cueTagsTrack_=i.tech_.addTextTrack("metadata","ad-cues"),i.cueTagsTrack_.inBandMetadataTrackDispatchType=""),i.requestOptions_={withCredentials:a,handleManifestRedirects:r,timeout:null},i.mediaTypes_=(t={},["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(e){t[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Nc,activeTrack:Nc,onGroupChanged:Nc,onTrackChanged:Nc}}),t),i.mediaSource=new qo.MediaSource,i.mediaSource.addEventListener("sourceopen",i.handleSourceOpen_.bind(i)),i.seekable_=qo.createTimeRanges(),i.hasPlayed_=function(){return!1},i.syncController_=new rd(e),i.segmentMetadataTrack_=o.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,i.decrypter_=new ud,i.inbandTextTracks_={};var g={hls:i.hls_,mediaSource:i.mediaSource,currentTime:i.tech_.currentTime.bind(i.tech_),seekable:function(){return i.seekable()},seeking:function(){return i.tech_.seeking()},duration:function(){return i.mediaSource.duration},hasPlayed:function(){return i.hasPlayed_()},goalBufferLength:function(){return i.goalBufferLength()},bandwidth:s,syncController:i.syncController_,decrypter:i.decrypter_,sourceType:i.sourceType_,inbandTextTracks:i.inbandTextTracks_,cacheEncryptionKeys:f};return i.masterPlaylistLoader_=new("dash"===i.sourceType_?Oc:gu)(n,i.hls_,i.requestOptions_),i.setupMasterPlaylistLoaderListeners_(),i.mainSegmentLoader_=new Kc(qo.mergeOptions(g,{segmentMetadataTrack:i.segmentMetadataTrack_,loaderType:"main"}),e),i.audioSegmentLoader_=new Kc(qo.mergeOptions(g,{loaderType:"audio"}),e),i.subtitleSegmentLoader_=new Zc(qo.mergeOptions(g,{loaderType:"vtt"}),e),i.setupSegmentLoaderListeners_(),gd.forEach(function(e){i[e+"_"]=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]}.bind(i,e)}),i.logger_=Dc("MPC"),i.masterPlaylistLoader_.load(),i}function yd(e,t,i){iu(this,yd);var r,a,o,n=e.masterPlaylistController_,s=n[(e.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(n);if(t.attributes.RESOLUTION){var l=t.attributes.RESOLUTION;this.width=l.width,this.height=l.height}this.bandwidth=t.attributes.BANDWIDTH,this.id=i,this.enabled=(r=e.playlists,a=t.uri,o=s,function(e){var t=r.master.playlists[a],i=Cu(t),n=Eu(t);return void 0===e?n:(e?delete t.disabled:t.disabled=!0,e===n||i||(o(),e?r.trigger("renditionenabled"):r.trigger("renditiondisabled")),e)})}var bd=["seeking","seeked","pause","playing","error"],_d=(nu(Td,[{key:"monitorCurrentTime_",value:function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&y.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=y.setTimeout(this.monitorCurrentTime_.bind(this),250)}},{key:"checkCurrentTime_",value:function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())return this.consecutiveUpdates=0,void(this.lastRecordedTime=this.tech_.currentTime());if(!this.tech_.paused()&&!this.tech_.seeking()){var e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+.1>=t.end(t.length-1)))return this.techWaiting_();5<=this.consecutiveUpdates&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}}},{key:"cancelTimer_",value:function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null}},{key:"fixesBadSeeks_",value:function(){if(!this.tech_.seeking())return!1;var e=this.seekable(),t=this.tech_.currentTime(),i=void 0;return this.afterSeekableWindow_(e,t,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(i=e.end(e.length-1)),this.beforeSeekableWindow_(e,t)&&(i=e.start(0)+.1),void 0!==i&&(this.logger_("Trying to seek outside of seekable at time "+t+" with seekable range "+$u(e)+". Seeking to "+i+"."),this.seekTo(i),!0)}},{key:"waiting_",value:function(){if(!this.techWaiting_()){var e=this.tech_.currentTime(),t=Bu(this.tech_.buffered(),e);return t.length&&e+3<=t.end(0)?(this.cancelTimer_(),this.seekTo(e),this.logger_("Stopped at "+e+" while inside a buffered region ["+t.start(0)+" -> "+t.end(0)+"]. Attempting to resume playback by seeking to the current time."),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})):void 0}}},{key:"techWaiting_",value:function(){var e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_())return!0;if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(e,t)){var i=e.end(e.length-1);return this.logger_("Fell out of live window at time "+t+". Seeking to live point (seekable end) "+i),this.cancelTimer_(),this.seekTo(i),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var n=this.tech_.buffered(),r=Fu(n,t);if(this.videoUnderflow_(r,n,t))return this.cancelTimer_(),this.seekTo(t),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;if(0<r.length){var a=r.start(0)-t;return this.logger_("Stopped at "+t+", setting timer for "+a+", seeking to "+r.start(0)),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*a,t),!0}return!1}},{key:"afterSeekableWindow_",value:function(e,t,i,n){var r=3<arguments.length&&void 0!==n&&n;if(!e.length)return!1;var a=e.end(e.length-1)+.1;return!i.endList&&r&&(a=e.end(e.length-1)+3*i.targetDuration),a<t}},{key:"beforeSeekableWindow_",value:function(e,t){return!!(e.length&&0<e.start(0)&&t<e.start(0)-.1)}},{key:"videoUnderflow_",value:function(e,t,i){if(0===e.length){var n=this.gapFromVideoUnderflow_(t,i);if(n)return this.logger_("Encountered a gap in video from "+n.start+" to "+n.end+". Seeking to current time "+i),!0}return!1}},{key:"skipTheGap_",value:function(e){var t=this.tech_.buffered(),i=this.tech_.currentTime(),n=Fu(t,i);this.cancelTimer_(),0!==n.length&&i===e&&(this.logger_("skipTheGap_:","currentTime:",i,"scheduled currentTime:",e,"nextRange start:",n.start(0)),this.seekTo(n.start(0)+1/30),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))}},{key:"gapFromVideoUnderflow_",value:function(e,t){for(var i=function(e){if(e.length<2)return qo.createTimeRanges();for(var t=[],i=1;i<e.length;i++){var n=e.end(i-1),r=e.start(i);t.push([n,r])}return qo.createTimeRanges(t)}(e),n=0;n<i.length;n++){var r=i.start(n),a=i.end(n);if(t-r<4&&2<t-r)return{start:r,end:a}}return null}}]),Td);function Td(e){var t=this;function i(){return t.monitorCurrentTime_()}function n(){return t.techWaiting_()}function r(){return t.cancelTimer_()}function a(){return t.fixesBadSeeks_()}iu(this,Td),this.tech_=e.tech,this.seekable=e.seekable,this.seekTo=e.seekTo,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.media=e.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=Dc("PlaybackWatcher"),this.logger_("initialize"),this.tech_.on("seekablechanged",a),this.tech_.on("waiting",n),this.tech_.on(bd,r),this.tech_.on("canplay",i),this.dispose=function(){t.logger_("dispose"),t.tech_.off("seekablechanged",a),t.tech_.off("waiting",n),t.tech_.off(bd,r),t.tech_.off("canplay",i),t.checkCurrentTimeTimeout_&&y.clearTimeout(t.checkCurrentTimeTimeout_),t.cancelTimer_()}}function wd(e){!function t(i,e){var n=0,r=0,a=qo.mergeOptions(Sd,e);function o(){r&&i.currentTime(r)}function s(e){null!=e&&(r=i.duration()!==1/0&&i.currentTime()||0,i.one("loadedmetadata",o),i.src(e),i.trigger({type:"usage",name:"hls-error-reload"}),i.play())}function l(){if(Date.now()-n<1e3*a.errorInterval)i.trigger({type:"usage",name:"hls-error-reload-canceled"});else{if(a.getSource&&"function"==typeof a.getSource)return n=Date.now(),a.getSource.call(i,s);qo.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}}function u(){i.off("loadedmetadata",o),i.off("error",l),i.off("dispose",u)}i.ready(function(){i.trigger({type:"usage",name:"hls-error-reload-initialized"})}),i.on("error",l),i.on("dispose",u),i.reloadSourceOnError=function(e){u(),t(i,e)}}(this,e)}var Sd={errorInterval:30,getSource:function(e){return e(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_)}};qo.use("*",function(t){return{setSource:function(e,t){t(null,e)},setCurrentTime:function(e){return t.vhs&&t.currentSource().src===t.vhs.source_.src&&t.vhs.setCurrentTime(e),e},play:function(){t.vhs&&t.currentSource().src===t.vhs.source_.src&&t.vhs.setCurrentTime(t.tech_.currentTime())}}});var kd={PlaylistLoader:gu,Playlist:Ku,Decrypter:Jl,AsyncStream:Vl,decrypt:Xl,utils:Ju,STANDARD_PLAYLIST_SELECTOR:function(){return function(e,t,i,n,r){var a=e.playlists.map(function(e){var t,i;return t=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width,i=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height,{bandwidth:e.attributes.BANDWIDTH||y.Number.MAX_VALUE,width:t,height:i,playlist:e}});Hc(a,function(e,t){return e.bandwidth-t.bandwidth});var o=(a=a.filter(function(e){return!Ku.isIncompatible(e.playlist)})).filter(function(e){return Ku.isEnabled(e.playlist)});o.length||(o=a.filter(function(e){return!Ku.isDisabled(e.playlist)}));var s=o.filter(function(e){return e.bandwidth*Vc.BANDWIDTH_VARIANCE<t}),l=s[s.length-1],u=s.filter(function(e){return e.bandwidth===l.bandwidth})[0];if(!1===r){var c=u||o[0]||a[0];return c?c.playlist:null}var d=s.filter(function(e){return e.width&&e.height});Hc(d,function(e,t){return e.width-t.width});var h=d.filter(function(e){return e.width===i&&e.height===n});l=h[h.length-1];var p=h.filter(function(e){return e.bandwidth===l.bandwidth})[0],f=void 0,g=void 0,m=void 0;p||(g=(f=d.filter(function(e){return e.width>i||e.height>n})).filter(function(e){return e.width===f[0].width&&e.height===f[0].height}),l=g[g.length-1],m=g.filter(function(e){return e.bandwidth===l.bandwidth})[0]);var v=m||p||u||o[0]||a[0];return v?v.playlist:null}(this.playlists.master,this.systemBandwidth,parseInt($c(this.tech_.el(),"width"),10),parseInt($c(this.tech_.el(),"height"),10),this.limitRenditionByPlayerDimensions)},INITIAL_PLAYLIST_SELECTOR:function(){var e=this.playlists.master.playlists.filter(Ku.isEnabled);return Hc(e,function(e,t){return qc(e,t)}),e.filter(function(e){return dc(e.attributes.CODECS).videoCodec})[0]||null},comparePlaylistBandwidth:qc,comparePlaylistResolution:function(e,t){var i=void 0,n=void 0;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(i=e.attributes.RESOLUTION.width),i=i||y.Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(n=t.attributes.RESOLUTION.width),i===(n=n||y.Number.MAX_VALUE)&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:i-n},xhr:Iu()};function Cd(e){return/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i.test(e)?"hls":/^application\/dash\+xml/i.test(e)?"dash":null}function Ed(e,t){for(var i=t.media(),n=-1,r=0;r<e.length;r++)if(e[r].id===i.uri){n=r;break}e.selectedIndex_=n,e.trigger({selectedIndex:n,type:"change"})}["GOAL_BUFFER_LENGTH","MAX_GOAL_BUFFER_LENGTH","GOAL_BUFFER_LENGTH_RATE","BUFFER_LOW_WATER_LINE","MAX_BUFFER_LOW_WATER_LINE","BUFFER_LOW_WATER_LINE_RATE","BANDWIDTH_VARIANCE"].forEach(function(t){Object.defineProperty(kd,t,{get:function(){return qo.log.warn("using Hls."+t+" is UNSAFE be sure you know what you are doing"),Vc[t]},set:function(e){qo.log.warn("using Hls."+t+" is UNSAFE be sure you know what you are doing"),"number"!=typeof e||e<0?qo.log.warn("value of Hls."+t+" must be greater than or equal to 0"):Vc[t]=e}})});var xd,Ad="videojs-vhs";function Id(){if(!window.localStorage)return null;var e=window.localStorage.getItem(Ad);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}}kd.canPlaySource=function(){return qo.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")},kd.supportsNativeHls=(xd=d.createElement("video"),!!qo.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(e){return/maybe|probably/i.test(xd.canPlayType(e))})),kd.supportsNativeDash=!!qo.getTech("Html5").isSupported()&&/maybe|probably/i.test(d.createElement("video").canPlayType("application/dash+xml")),kd.supportsTypeNatively=function(e){return"hls"===e?kd.supportsNativeHls:"dash"===e&&kd.supportsNativeDash},kd.isSupported=function(){return qo.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Pd=(au(Od,qo.getComponent("Component")),nu(Od,[{key:"setOptions_",value:function(){var t=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=this.options_.handleManifestRedirects||!1,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=void 0!==this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var e=Id();e&&e.bandwidth&&(this.options_.bandwidth=e.bandwidth,this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),e&&e.throughput&&(this.options_.throughput=e.throughput,this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=Vc.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Vc.INITIAL_BANDWIDTH,["withCredentials","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys"].forEach(function(e){void 0!==t.source_[e]&&(t.options_[e]=t.source_[e])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions}},{key:"src",value:function(e,t){var n=this;e&&(this.setOptions_(),this.options_.url=this.source_.src,this.options_.tech=this.tech_,this.options_.externHls=kd,this.options_.sourceType=Cd(t),this.options_.seekTo=function(e){n.tech_.setCurrentTime(e),n.setCurrentTime(e)},this.masterPlaylistController_=new md(this.options_),this.playbackWatcher_=new _d(qo.mergeOptions(this.options_,{seekable:function(){return n.seekable()},media:function(){return n.masterPlaylistController_.media()}})),this.masterPlaylistController_.on("error",function(){qo.players[n.tech_.options_.playerId].error(n.masterPlaylistController_.error)}),this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):kd.STANDARD_PLAYLIST_SELECTOR.bind(this),this.masterPlaylistController_.selectInitialPlaylist=kd.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(e){this.masterPlaylistController_.selectPlaylist=e.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=e,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=e,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var e,t=1/(this.bandwidth||1);return e=0<this.throughput?1/this.throughput:0,Math.floor(1/(t+e))},set:function(){qo.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return n.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return n.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return n.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return n.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return n.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return n.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return n.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return n.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},buffered:{get:function(){return Hu(n.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return n.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return n.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return n.tech_.name_},enumerable:!0},duration:{get:function(){return n.tech_.duration()},enumerable:!0},master:{get:function(){return n.playlists.master},enumerable:!0},playerDimensions:{get:function(){return n.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return Hu(n.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return n.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){n.options_.useBandwidthFromLocalStorage&&function(e){if(window.localStorage){var t=Id();t=t?qo.mergeOptions(t,e):e;try{window.localStorage.setItem(Ad,JSON.stringify(t))}catch(e){return}}}({bandwidth:n.bandwidth,throughput:Math.round(n.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){var i,e;e=(i=n).playlists,i.representations=function(){return e.master.playlists.filter(function(e){return!Cu(e)}).map(function(e,t){return new yd(i,e,e.uri)})},function(e){if("dash"===e.options_.sourceType){var t=qo.players[e.tech_.options_.playerId];if(t.eme){var i=function(e,t,i){if(!e)return e;var n={};for(var r in e)n[r]={audioContentType:'audio/mp4; codecs="'+i.attributes.CODECS+'"',videoContentType:'video/mp4; codecs="'+t.attributes.CODECS+'"'},t.contentProtection&&t.contentProtection[r]&&t.contentProtection[r].pssh&&(n[r].pssh=t.contentProtection[r].pssh),"string"==typeof e[r]&&(n[r].url=e[r]);return qo.mergeOptions(e,n)}(e.source_.keySystems,e.playlists.media(),e.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader.media());i&&(t.currentSource().keySystems=i,t.eme.initializeMediaKeys&&t.eme.initializeMediaKeys())}}}(n)}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.tech_.ready(function(){return n.setupQualityLevels_()}),this.tech_.el()&&this.tech_.src(qo.URL.createObjectURL(this.masterPlaylistController_.mediaSource)))}},{key:"setupQualityLevels_",value:function(){var i=this,e=qo.players[this.tech_.options_.playerId];e&&e.qualityLevels&&(this.qualityLevels_=e.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){var t,e;t=i.qualityLevels_,(e=i).representations().forEach(function(e){t.addQualityLevel(e)}),Ed(t,e.playlists)}),this.playlists.on("mediachange",function(){Ed(i.qualityLevels_,i.playlists)}))}},{key:"play",value:function(){this.masterPlaylistController_.play()}},{key:"setCurrentTime",value:function(e){this.masterPlaylistController_.setCurrentTime(e)}},{key:"duration",value:function(){return this.masterPlaylistController_.duration()}},{key:"seekable",value:function(){return this.masterPlaylistController_.seekable()}},{key:"dispose",value:function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.hls&&delete this.tech_.hls,function e(t,i,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,i);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,i,n)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(n):void 0}(Od.prototype.__proto__||Object.getPrototypeOf(Od.prototype),"dispose",this).call(this)}},{key:"convertToProgramTime",value:function(e,t){return function(e){var t=e.playlist,i=e.time,n=void 0===i?void 0:i,r=e.callback;if(!r)throw new Error("getProgramTime: callback must be provided");if(!t||void 0===n)return r({message:"getProgramTime: playlist and time must be provided"});var a=function(e,t){if(!t||!t.segments||0===t.segments.length)return null;for(var i=0,n=void 0,r=0;r<t.segments.length&&!(e<=(i=(n=t.segments[r]).videoTimingInfo?n.videoTimingInfo.transmuxedPresentationEnd:i+n.duration));r++);var a=t.segments[t.segments.length-1];if(a.videoTimingInfo&&a.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(i<e){if(e>i+.25*a.duration)return null;n=a}return{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:i-n.duration,type:n.videoTimingInfo?"accurate":"estimate"}}(n,t);if(!a)return r({message:"valid programTime was not found"});if("estimate"===a.type)return r({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:a.estimatedStart});var o={mediaSeconds:n},s=function(e,t){if(!t.dateTimeObject)return null;var i=t.videoTimingInfo.transmuxerPrependedSeconds,n=e-(t.videoTimingInfo.transmuxedPresentationStart+i);return new Date(t.dateTimeObject.getTime()+1e3*n)}(n,a.segment);return s&&(o.programDateTime=s.toISOString()),r(null,o)}({playlist:this.masterPlaylistController_.media(),time:e,callback:t})}},{key:"seekToProgramTime",value:function(e,t,i,n){var r=!(2<arguments.length&&void 0!==i)||i,a=3<arguments.length&&void 0!==n?n:2;return ju({programTime:e,playlist:this.masterPlaylistController_.media(),retryCount:a,pauseAfterSeek:r,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})}}]),Od);function Od(e,t,i){iu(this,Od);var n=ou(this,(Od.__proto__||Object.getPrototypeOf(Od)).call(this,t,i.hls));if(t.options_&&t.options_.playerId){var r=qo(t.options_.playerId);r.hasOwnProperty("hls")||Object.defineProperty(r,"hls",{get:function(){return qo.log.warn("player.hls is deprecated. Use player.tech().hls instead."),t.trigger({type:"usage",name:"hls-player-access"}),n},configurable:!0}),r.vhs=n,(r.dash=n).player_=r}if(n.tech_=t,n.source_=e,n.stats={},n.setOptions_(),n.options_.overrideNative&&t.overrideNativeAudioTracks&&t.overrideNativeVideoTracks)t.overrideNativeAudioTracks(!0),t.overrideNativeVideoTracks(!0);else if(n.options_.overrideNative&&(t.featuresNativeVideoTracks||t.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return n.on(d,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(e){var t=d.fullscreenElement||d.webkitFullscreenElement||d.mozFullScreenElement||d.msFullscreenElement;t&&t.contains(n.tech_.el())&&n.masterPlaylistController_.smoothQualityChange_()}),n.on(n.tech_,"seeking",function(){0===this.tech_.currentTime()&&this.tech_.player_.loop()&&this.setCurrentTime(0)}),n.on(n.tech_,"error",function(){this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),n.on(n.tech_,"play",n.play),n}var Ld={name:"videojs-http-streaming",VERSION:"1.10.6",canHandleSource:function(e,t){var i=qo.mergeOptions(qo.options,1<arguments.length&&void 0!==t?t:{});return Ld.canPlayType(e.type,i)},handleSource:function(e,t,i){var n=qo.mergeOptions(qo.options,2<arguments.length&&void 0!==i?i:{});return t.hls=new Pd(e,t,n),t.hls.xhr=Iu(),t.hls.src(e.src,e.type),t.hls},canPlayType:function(e,t){var i=qo.mergeOptions(qo.options,1<arguments.length&&void 0!==t?t:{}).hls.overrideNative,n=Cd(e);return!n||kd.supportsTypeNatively(n)&&!i?"":"maybe"}};return void 0!==qo.MediaSource&&void 0!==qo.URL||(qo.MediaSource=kc,qo.URL=Cc),kc.supportsNativeMediaSources()&&qo.getTech("Html5").registerSourceHandler(Ld,0),qo.HlsHandler=Pd,qo.HlsSourceHandler=Ld,qo.Hls=kd,qo.use||qo.registerComponent("Hls",kd),qo.options.hls=qo.options.hls||{},qo.registerPlugin?qo.registerPlugin("reloadSourceOnError",wd):qo.plugin("reloadSourceOnError",wd),qo}),function(){var e,t;e=window,(t=e&&e.videojs)&&(t.CDN_VERSION="7.6.6")}(),function(){"use strict";var e=null;e=void 0===window.videojs&&"function"==typeof require?require("video.js"):window.videojs,function(a){var e,u={ui:!0},i=a.getComponent("MenuItem"),n=a.extend(i,{constructor:function(e,t){t.selectable=!0,i.call(this,e,t),this.src=t.src,e.on("resolutionchange",a.bind(this,this.update))}});n.prototype.handleClick=function(e){i.prototype.handleClick.call(this,e),this.player_.currentResolution(this.options_.label)},n.prototype.update=function(){if(!this.player_)return!1;var e=this.player_.currentResolution();this.selected(this.options_.label===e.label),this.player_.controlBar.resolutionSwitcher.lastElementChild.textContent=e.label,this.player_.controlBar.resolutionSwitcher.children[1].classList.remove("vjs-hidden")},i.registerComponent("ResolutionMenuItem",n);var r=a.getComponent("MenuButton"),c=a.extend(r,{constructor:function(e,t){if(this.label=document.createElement("span"),t.label="Quality",r.call(this,e,t),this.el().setAttribute("aria-label","Quality"),this.controlText("Quality"),this.el().className+=" vjs-resolution-button",t.dynamicLabel)a.dom.addClass(this.label,"vjs-resolution-button-label"),this.el().appendChild(this.label);else{var i=document.createElement("span");a.addClass(i,"vjs-menu-icon"),this.el().appendChild(i)}e.on("updateSources",a.bind(this,this.update))}});c.prototype.createItems=function(){var e=[],t=this.sources&&this.sources.label||{};for(var i in t)t.hasOwnProperty(i)&&e.push(new n(this.player_,{label:i,src:t[i],selected:i===(!!this.currentSelection&&this.currentSelection.label)}));return e},c.prototype.update=function(){return this.sources=this.player_.getGroupedSrc(),this.currentSelection=this.player_.currentResolution(),this.label.innerHTML=this.currentSelection?this.currentSelection.label:"",r.prototype.update.call(this)},c.prototype.buildCSSClass=function(){return r.prototype.buildCSSClass.call(this)+" vjs-resolution-button"},r.registerComponent("ResolutionMenuButton",c),e=function(e){var o=a.mergeOptions(u,e),s=this;function i(e,t){return e.res&&t.res?t.res-e.res:0}function l(e){var t={label:{},res:{},type:{}};return e.map(function(e){n(t,"label",e),n(t,"res",e),n(t,"type",e),r(t,"label",e),r(t,"res",e),r(t,"type",e)}),t}function n(e,t,i){null==e[t][i[t]]&&(e[t][i[t]]=[])}function r(e,t,i){e[t][i[t]].push(i)}function t(n){function r(e,t,i){return n.tech_.ytPlayer.setPlaybackQuality(t[0]._yt),n.trigger("updateSources"),n}var a={highres:{res:1080,label:"1080",yt:"highres"},hd1080:{res:1080,label:"1080",yt:"hd1080"},hd720:{res:720,label:"720",yt:"hd720"},large:{res:480,label:"480",yt:"large"},medium:{res:360,label:"360",yt:"medium"},small:{res:240,label:"240",yt:"small"},tiny:{res:144,label:"144",yt:"tiny"},auto:{res:0,label:"auto",yt:"auto"}};o.customSourcePicker=r,n.tech_.ytPlayer.setPlaybackQuality("auto"),n.tech_.ytPlayer.addEventListener("onPlaybackQualityChange",function(e){for(var t in a)if(t.yt===e.data)return void n.currentResolution(t.label,r)}),n.one("play",function(){var e=n.tech_.ytPlayer.getAvailableQualityLevels(),t=[];e.map(function(e){t.push({src:n.src().src,type:n.src().type,label:a[e].label,res:a[e].res,_yt:a[e].yt})}),n.groupedSrc=l(t);var i={label:"auto",res:0,sources:n.groupedSrc.label.auto};this.currentResolutionState={label:i.label,sources:i.sources},n.trigger("updateSources"),n.setSourcesSanitized(i.sources,i.label,r)})}s.updateSrc=function(e){if(!e)return s.src();e=e.filter(function(e){try{return""!==s.canPlayType(e.type)}catch(e){return!0}}),this.currentSources=e.sort(i),this.groupedSrc=l(this.currentSources);var t=function(e,t){var i=o.default,n="";"high"===i?(i=t[0].res,n=t[0].label):"low"!==i&&null!=i&&e.res[i]?e.res[i]&&(n=e.res[i][0].label):(i=t[t.length-1].res,n=t[t.length-1].label);return{res:i,label:n,sources:e.res[i]}}(this.groupedSrc,this.currentSources);return this.currentResolutionState={label:t.label,sources:t.sources},s.trigger("updateSources"),s.setSourcesSanitized(t.sources,t.label),s.trigger("resolutionchange"),s},s.currentResolution=function(e,t){if(null==e)return this.currentResolutionState;if(this.groupedSrc&&this.groupedSrc.label&&this.groupedSrc.label[e]){var i=this.groupedSrc.label[e],n=s.currentTime(),r=s.paused();!r&&this.player_.options_.bigPlayButton&&this.player_.bigPlayButton.hide();var a="loadeddata";return"Youtube"!==this.player_.techName_&&"none"===this.player_.preload()&&"Flash"!==this.player_.techName_&&(a="timeupdate"),s.setSourcesSanitized(i,e,t||o.customSourcePicker).one(a,function(){s.currentTime(n),r||s.play(),s.trigger("resolutionchange")}),s}},s.getGroupedSrc=function(){return this.groupedSrc},s.setSourcesSanitized=function(e,t,i){return this.currentResolutionState={label:t,sources:e},"function"==typeof i?i(s,e,t):(s.src(e.map(function(e){return{src:e.src,type:e.type,res:e.res}})),s)},s.ready(function(){if(o.ui){var e=new c(s,o);s.controlBar.resolutionSwitcher=s.controlBar.el_.insertBefore(e.el_,s.controlBar.getChild("fullscreenToggle").el_),s.controlBar.resolutionSwitcher.dispose=function(){this.parentNode.removeChild(this)}}1<s.options_.sources.length&&s.updateSrc(s.options_.sources),"Youtube"===s.techName_&&t(s)})},a.registerPlugin("videoJsResolutionSwitcher",e)}((window,e))}(),window.onload=function(){setTimeout(function(){var e=videojs.getPlayers();Object.keys(e).forEach(function(e){videojs(e).videoJsResolutionSwitcher()}),window.videojs=videojs,$("audio,video").bind("play",function(){activated=this,$("audio,video").each(function(){this!=activated&&this.pause()})})},1e3)},function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(f,e){function t(e,t){return t.toUpperCase()}var d=[],c=d.slice,g=d.concat,s=d.push,r=d.indexOf,i={},n=i.toString,m=i.hasOwnProperty,v={},S=function(e,t){return new S.fn.init(e,t)},a=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,o=/^-ms-/,l=/-([\da-z])/gi;function u(e){var t="length"in e&&e.length,i=S.type(e);return"function"!==i&&!S.isWindow(e)&&(!(1!==e.nodeType||!t)||"array"===i||0===t||"number"==typeof t&&0<t&&t-1 in e)}S.fn=S.prototype={jquery:"1.11.3",constructor:S,selector:"",length:0,toArray:function(){return c.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:c.call(this)},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return S.each(this,e,t)},map:function(i){return this.pushStack(S.map(this,function(e,t){return i.call(e,t,e)}))},slice:function(){return this.pushStack(c.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(0<=i&&i<t?[this[i]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:s,sort:d.sort,splice:d.splice},S.extend=S.fn.extend=function(){var e,t,i,n,r,a,o=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof o&&(u=o,o=arguments[s]||{},s++),"object"==typeof o||S.isFunction(o)||(o={}),s===l&&(o=this,s--);s<l;s++)if(null!=(r=arguments[s]))for(n in r)e=o[n],o!==(i=r[n])&&(u&&i&&(S.isPlainObject(i)||(t=S.isArray(i)))?(a=t?(t=!1,e&&S.isArray(e)?e:[]):e&&S.isPlainObject(e)?e:{},o[n]=S.extend(u,a,i)):void 0!==i&&(o[n]=i));return o},S.extend({expando:"jQuery"+("1.11.3"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===S.type(e)},isArray:Array.isArray||function(e){return"array"===S.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!S.isArray(e)&&0<=e-parseFloat(e)+1},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==S.type(e)||e.nodeType||S.isWindow(e))return!1;try{if(e.constructor&&!m.call(e,"constructor")&&!m.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}if(v.ownLast)for(t in e)return m.call(e,t);for(t in e);return void 0===t||m.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?i[n.call(e)]||"object":typeof e},globalEval:function(e){e&&S.trim(e)&&(f.execScript||function(e){f.eval.call(f,e)})(e)},camelCase:function(e){return e.replace(o,"ms-").replace(l,t)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,i){var n=0,r=e.length,a=u(e);if(i){if(a)for(;n<r&&!1!==t.apply(e[n],i);n++);else for(n in e)if(!1===t.apply(e[n],i))break}else if(a)for(;n<r&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},trim:function(e){return null==e?"":(e+"").replace(a,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(u(Object(e))?S.merge(i,"string"==typeof e?[e]:e):s.call(i,e)),i},inArray:function(e,t,i){var n;if(t){if(r)return r.call(t,e,i);for(n=t.length,i=i?i<0?Math.max(0,n+i):i:0;i<n;i++)if(i in t&&t[i]===e)return i}return-1},merge:function(e,t){for(var i=+t.length,n=0,r=e.length;n<i;)e[r++]=t[n++];if(i!=i)for(;void 0!==t[n];)e[r++]=t[n++];return e.length=r,e},grep:function(e,t,i){for(var n=[],r=0,a=e.length,o=!i;r<a;r++)!t(e[r],r)!=o&&n.push(e[r]);return n},map:function(e,t,i){var n,r=0,a=e.length,o=[];if(u(e))for(;r<a;r++)null!=(n=t(e[r],r,i))&&o.push(n);else for(r in e)null!=(n=t(e[r],r,i))&&o.push(n);return g.apply([],o)},guid:1,proxy:function(e,t){var i,n,r;return"string"==typeof t&&(r=e[t],t=e,e=r),S.isFunction(e)?(i=c.call(arguments,2),(n=function(){return e.apply(t||this,i.concat(c.call(arguments)))}).guid=e.guid=e.guid||S.guid++,n):void 0},now:function(){return+new Date},support:v}),S.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){i["[object "+t+"]"]=t.toLowerCase()});var h=function(i){function d(e,t,i){var n="0x"+t-65536;return n!=n||i?t:n<0?String.fromCharCode(65536+n):String.fromCharCode(n>>10|55296,1023&n|56320)}function n(){v()}var e,f,_,a,r,g,h,m,T,u,c,v,w,o,y,b,s,p,S,k="sizzle"+ +new Date,C=i.document,E=0,x=0,l=ae(),A=ae(),I=ae(),P=function(e,t){return e===t&&(c=!0),0},O={}.hasOwnProperty,t=[],L=t.pop,D=t.push,N=t.push,M=t.slice,R=function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1},j="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",U="[\\x20\\t\\r\\n\\f]",B="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",F=B.replace("w","w#"),$="\\["+U+"*("+B+")(?:"+U+"*([*^$|!~]?=)"+U+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+F+"))|)"+U+"*\\]",H=":("+B+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+$+")*)|.*)\\)|)",q=new RegExp(U+"+","g"),W=new RegExp("^"+U+"+|((?:^|[^\\\\])(?:\\\\.)*)"+U+"+$","g"),V=new RegExp("^"+U+"*,"+U+"*"),z=new RegExp("^"+U+"*([>+~]|"+U+")"+U+"*"),G=new RegExp("="+U+"*([^\\]'\"]*?)"+U+"*\\]","g"),X=new RegExp(H),K=new RegExp("^"+F+"$"),Y={ID:new RegExp("^#("+B+")"),CLASS:new RegExp("^\\.("+B+")"),TAG:new RegExp("^("+B.replace("w","w*")+")"),ATTR:new RegExp("^"+$),PSEUDO:new RegExp("^"+H),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+U+"*(even|odd|(([+-]|)(\\d*)n|)"+U+"*(?:([+-]|)"+U+"*(\\d+)|))"+U+"*\\)|)","i"),bool:new RegExp("^(?:"+j+")$","i"),needsContext:new RegExp("^"+U+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+U+"*((?:-\\d)?\\d*)"+U+"*\\)|)(?=[^-]|$)","i")},Q=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,ee=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,te=/[+~]/,ie=/'|\\/g,ne=new RegExp("\\\\([\\da-f]{1,6}"+U+"?|("+U+")|.)","ig");try{N.apply(t=M.call(C.childNodes),C.childNodes),t[C.childNodes.length].nodeType}catch(e){N={apply:t.length?function(e,t){D.apply(e,M.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}function re(e,t,i,n){var r,a,o,s,l,u,c,d,h,p;if((t?t.ownerDocument||t:C)!==w&&v(t),i=i||[],s=(t=t||w).nodeType,"string"!=typeof e||!e||1!==s&&9!==s&&11!==s)return i;if(!n&&y){if(11!==s&&(r=ee.exec(e)))if(o=r[1]){if(9===s){if(!(a=t.getElementById(o))||!a.parentNode)return i;if(a.id===o)return i.push(a),i}else if(t.ownerDocument&&(a=t.ownerDocument.getElementById(o))&&S(t,a)&&a.id===o)return i.push(a),i}else{if(r[2])return N.apply(i,t.getElementsByTagName(e)),i;if((o=r[3])&&f.getElementsByClassName)return N.apply(i,t.getElementsByClassName(o)),i}if(f.qsa&&(!b||!b.test(e))){if(d=c=k,h=t,p=1!==s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(u=g(e),(c=t.getAttribute("id"))?d=c.replace(ie,"\\$&"):t.setAttribute("id",d),d="[id='"+d+"'] ",l=u.length;l--;)u[l]=d+ge(u[l]);h=te.test(e)&&pe(t.parentNode)||t,p=u.join(",")}if(p)try{return N.apply(i,h.querySelectorAll(p)),i}catch(e){}finally{c||t.removeAttribute("id")}}}return m(e.replace(W,"$1"),t,i,n)}function ae(){var n=[];return function e(t,i){return n.push(t+" ")>_.cacheLength&&delete e[n.shift()],e[t+" "]=i}}function oe(e){return e[k]=!0,e}function se(e){var t=w.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function le(e,t){for(var i=e.split("|"),n=e.length;n--;)_.attrHandle[i[n]]=t}function ue(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||1<<31)-(~e.sourceIndex||1<<31);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function ce(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function de(i){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===i}}function he(o){return oe(function(a){return a=+a,oe(function(e,t){for(var i,n=o([],e.length,a),r=n.length;r--;)e[i=n[r]]&&(e[i]=!(t[i]=e[i]))})})}function pe(e){return e&&void 0!==e.getElementsByTagName&&e}for(e in f=re.support={},r=re.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},v=re.setDocument=function(e){var t,i,l=e?e.ownerDocument||e:C;return l!==w&&9===l.nodeType&&l.documentElement?(o=(w=l).documentElement,(i=l.defaultView)&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",n,!1):i.attachEvent&&i.attachEvent("onunload",n)),y=!r(l),f.attributes=se(function(e){return e.className="i",!e.getAttribute("className")}),f.getElementsByTagName=se(function(e){return e.appendChild(l.createComment("")),!e.getElementsByTagName("*").length}),f.getElementsByClassName=Z.test(l.getElementsByClassName),f.getById=se(function(e){return o.appendChild(e).id=k,!l.getElementsByName||!l.getElementsByName(k).length}),f.getById?(_.find.ID=function(e,t){if(void 0!==t.getElementById&&y){var i=t.getElementById(e);return i&&i.parentNode?[i]:[]}},_.filter.ID=function(e){var t=e.replace(ne,d);return function(e){return e.getAttribute("id")===t}}):(delete _.find.ID,_.filter.ID=function(e){var i=e.replace(ne,d);return function(e){var t=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===i}}),_.find.TAG=f.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):f.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,n=[],r=0,a=t.getElementsByTagName(e);if("*"!==e)return a;for(;i=a[r++];)1===i.nodeType&&n.push(i);return n},_.find.CLASS=f.getElementsByClassName&&function(e,t){return y?t.getElementsByClassName(e):void 0},s=[],b=[],(f.qsa=Z.test(l.querySelectorAll))&&(se(function(e){o.appendChild(e).innerHTML="<a id='"+k+"'></a><select id='"+k+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&b.push("[*^$]="+U+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||b.push("\\["+U+"*(?:value|"+j+")"),e.querySelectorAll("[id~="+k+"-]").length||b.push("~="),e.querySelectorAll(":checked").length||b.push(":checked"),e.querySelectorAll("a#"+k+"+*").length||b.push(".#.+[+~]")}),se(function(e){var t=l.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&b.push("name"+U+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||b.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),b.push(",.*:")})),(f.matchesSelector=Z.test(p=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&se(function(e){f.disconnectedMatch=p.call(e,"div"),p.call(e,"[s!='']:x"),s.push("!=",H)}),b=b.length&&new RegExp(b.join("|")),s=s.length&&new RegExp(s.join("|")),t=Z.test(o.compareDocumentPosition),S=t||Z.test(o.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},P=t?function(e,t){if(e===t)return c=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!f.sortDetached&&t.compareDocumentPosition(e)===i?e===l||e.ownerDocument===C&&S(C,e)?-1:t===l||t.ownerDocument===C&&S(C,t)?1:u?R(u,e)-R(u,t):0:4&i?-1:1)}:function(e,t){if(e===t)return c=!0,0;var i,n=0,r=e.parentNode,a=t.parentNode,o=[e],s=[t];if(!r||!a)return e===l?-1:t===l?1:r?-1:a?1:u?R(u,e)-R(u,t):0;if(r===a)return ue(e,t);for(i=e;i=i.parentNode;)o.unshift(i);for(i=t;i=i.parentNode;)s.unshift(i);for(;o[n]===s[n];)n++;return n?ue(o[n],s[n]):o[n]===C?-1:s[n]===C?1:0},l):w},re.matches=function(e,t){return re(e,null,null,t)},re.matchesSelector=function(e,t){if((e.ownerDocument||e)!==w&&v(e),t=t.replace(G,"='$1']"),!(!f.matchesSelector||!y||s&&s.test(t)||b&&b.test(t)))try{var i=p.call(e,t);if(i||f.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){}return 0<re(t,w,null,[e]).length},re.contains=function(e,t){return(e.ownerDocument||e)!==w&&v(e),S(e,t)},re.attr=function(e,t){(e.ownerDocument||e)!==w&&v(e);var i=_.attrHandle[t.toLowerCase()],n=i&&O.call(_.attrHandle,t.toLowerCase())?i(e,t,!y):void 0;return void 0!==n?n:f.attributes||!y?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},re.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},re.uniqueSort=function(e){var t,i=[],n=0,r=0;if(c=!f.detectDuplicates,u=!f.sortStable&&e.slice(0),e.sort(P),c){for(;t=e[r++];)t===e[r]&&(n=i.push(r));for(;n--;)e.splice(i[n],1)}return u=null,e},a=re.getText=function(e){var t,i="",n=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=a(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[n++];)i+=a(t);return i},(_=re.selectors={cacheLength:50,createPseudo:oe,match:Y,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ne,d),e[3]=(e[3]||e[4]||e[5]||"").replace(ne,d),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||re.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&re.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return Y.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&X.test(i)&&(t=g(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ne,d).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=l[e+" "];return t||(t=new RegExp("(^|"+U+")"+e+"("+U+"|$)"))&&l(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(i,n,r){return function(e){var t=re.attr(e,i);return null==t?"!="===n:!n||(t+="","="===n?t===r:"!="===n?t!==r:"^="===n?r&&0===t.indexOf(r):"*="===n?r&&-1<t.indexOf(r):"$="===n?r&&t.slice(-r.length)===r:"~="===n?-1<(" "+t.replace(q," ")+" ").indexOf(r):"|="===n&&(t===r||t.slice(0,r.length+1)===r+"-"))}},CHILD:function(p,e,t,f,g){var m="nth"!==p.slice(0,3),v="last"!==p.slice(-4),y="of-type"===e;return 1===f&&0===g?function(e){return!!e.parentNode}:function(e,t,i){var n,r,a,o,s,l,u=m!=v?"nextSibling":"previousSibling",c=e.parentNode,d=y&&e.nodeName.toLowerCase(),h=!i&&!y;if(c){if(m){for(;u;){for(a=e;a=a[u];)if(y?a.nodeName.toLowerCase()===d:1===a.nodeType)return!1;l=u="only"===p&&!l&&"nextSibling"}return!0}if(l=[v?c.firstChild:c.lastChild],v&&h){for(s=(n=(r=c[k]||(c[k]={}))[p]||[])[0]===E&&n[1],o=n[0]===E&&n[2],a=s&&c.childNodes[s];a=++s&&a&&a[u]||(o=s=0)||l.pop();)if(1===a.nodeType&&++o&&a===e){r[p]=[E,s,o];break}}else if(h&&(n=(e[k]||(e[k]={}))[p])&&n[0]===E)o=n[1];else for(;(a=++s&&a&&a[u]||(o=s=0)||l.pop())&&((y?a.nodeName.toLowerCase()!==d:1!==a.nodeType)||!++o||(h&&((a[k]||(a[k]={}))[p]=[E,o]),a!==e)););return(o-=g)===f||o%f==0&&0<=o/f}}},PSEUDO:function(e,a){var t,o=_.pseudos[e]||_.setFilters[e.toLowerCase()]||re.error("unsupported pseudo: "+e);return o[k]?o(a):1<o.length?(t=[e,e,"",a],_.setFilters.hasOwnProperty(e.toLowerCase())?oe(function(e,t){for(var i,n=o(e,a),r=n.length;r--;)e[i=R(e,n[r])]=!(t[i]=n[r])}):function(e){return o(e,0,t)}):o}},pseudos:{not:oe(function(e){var n=[],r=[],s=h(e.replace(W,"$1"));return s[k]?oe(function(e,t,i,n){for(var r,a=s(e,null,n,[]),o=e.length;o--;)(r=a[o])&&(e[o]=!(t[o]=r))}):function(e,t,i){return n[0]=e,s(n,null,i,r),n[0]=null,!r.pop()}}),has:oe(function(t){return function(e){return 0<re(t,e).length}}),contains:oe(function(t){return t=t.replace(ne,d),function(e){return-1<(e.textContent||e.innerText||a(e)).indexOf(t)}}),lang:oe(function(i){return K.test(i||"")||re.error("unsupported lang: "+i),i=i.replace(ne,d).toLowerCase(),function(e){var t;do{if(t=y?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===i||0===t.indexOf(i+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=i.location&&i.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===o},focus:function(e){return e===w.activeElement&&(!w.hasFocus||w.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!_.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:he(function(){return[0]}),last:he(function(e,t){return[t-1]}),eq:he(function(e,t,i){return[i<0?i+t:i]}),even:he(function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e}),odd:he(function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e}),lt:he(function(e,t,i){for(var n=i<0?i+t:i;0<=--n;)e.push(n);return e}),gt:he(function(e,t,i){for(var n=i<0?i+t:i;++n<t;)e.push(n);return e})}}).pseudos.nth=_.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[e]=ce(e);for(e in{submit:!0,reset:!0})_.pseudos[e]=de(e);function fe(){}function ge(e){for(var t=0,i=e.length,n="";t<i;t++)n+=e[t].value;return n}function me(o,e,t){var s=e.dir,l=t&&"parentNode"===s,u=x++;return e.first?function(e,t,i){for(;e=e[s];)if(1===e.nodeType||l)return o(e,t,i)}:function(e,t,i){var n,r,a=[E,u];if(i){for(;e=e[s];)if((1===e.nodeType||l)&&o(e,t,i))return!0}else for(;e=e[s];)if(1===e.nodeType||l){if((n=(r=e[k]||(e[k]={}))[s])&&n[0]===E&&n[1]===u)return a[2]=n[2];if((r[s]=a)[2]=o(e,t,i))return!0}}}function ve(r){return 1<r.length?function(e,t,i){for(var n=r.length;n--;)if(!r[n](e,t,i))return!1;return!0}:r[0]}function ye(e,t,i,n,r){for(var a,o=[],s=0,l=e.length,u=null!=t;s<l;s++)!(a=e[s])||i&&!i(a,n,r)||(o.push(a),u&&t.push(s));return o}function be(p,f,g,m,v,e){return m&&!m[k]&&(m=be(m)),v&&!v[k]&&(v=be(v,e)),oe(function(e,t,i,n){var r,a,o,s=[],l=[],u=t.length,c=e||function(e,t,i){for(var n=0,r=t.length;n<r;n++)re(e,t[n],i);return i}(f||"*",i.nodeType?[i]:i,[]),d=!p||!e&&f?c:ye(c,s,p,i,n),h=g?v||(e?p:u||m)?[]:t:d;if(g&&g(d,h,i,n),m)for(r=ye(h,l),m(r,[],i,n),a=r.length;a--;)(o=r[a])&&(h[l[a]]=!(d[l[a]]=o));if(e){if(v||p){if(v){for(r=[],a=h.length;a--;)(o=h[a])&&r.push(d[a]=o);v(null,h=[],r,n)}for(a=h.length;a--;)(o=h[a])&&-1<(r=v?R(e,o):s[a])&&(e[r]=!(t[r]=o))}}else h=ye(h===t?h.splice(u,h.length):h),v?v(null,t,h,n):N.apply(t,h)})}function _e(e){for(var r,t,i,n=e.length,a=_.relative[e[0].type],o=a||_.relative[" "],s=a?1:0,l=me(function(e){return e===r},o,!0),u=me(function(e){return-1<R(r,e)},o,!0),c=[function(e,t,i){var n=!a&&(i||t!==T)||((r=t).nodeType?l:u)(e,t,i);return r=null,n}];s<n;s++)if(t=_.relative[e[s].type])c=[me(ve(c),t)];else{if((t=_.filter[e[s].type].apply(null,e[s].matches))[k]){for(i=++s;i<n&&!_.relative[e[i].type];i++);return be(1<s&&ve(c),1<s&&ge(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(W,"$1"),t,s<i&&_e(e.slice(s,i)),i<n&&_e(e=e.slice(i)),i<n&&ge(e))}c.push(t)}return ve(c)}return fe.prototype=_.filters=_.pseudos,_.setFilters=new fe,g=re.tokenize=function(e,t){var i,n,r,a,o,s,l,u=A[e+" "];if(u)return t?0:u.slice(0);for(o=e,s=[],l=_.preFilter;o;){for(a in i&&!(n=V.exec(o))||(n&&(o=o.slice(n[0].length)||o),s.push(r=[])),i=!1,(n=z.exec(o))&&(i=n.shift(),r.push({value:i,type:n[0].replace(W," ")}),o=o.slice(i.length)),_.filter)!(n=Y[a].exec(o))||l[a]&&!(n=l[a](n))||(i=n.shift(),r.push({value:i,type:a,matches:n}),o=o.slice(i.length));if(!i)break}return t?o.length:o?re.error(e):A(e,s).slice(0)},h=re.compile=function(e,t){var i,m,v,y,b,n=[],r=[],a=I[e+" "];if(!a){for(i=(t=t||g(e)).length;i--;)(a=_e(t[i]))[k]?n.push(a):r.push(a);(a=I(e,(m=r,y=0<(v=n).length,b=0<m.length,y?oe(o):o))).selector=e}function o(e,t,i,n,r){var a,o,s,l=0,u="0",c=e&&[],d=[],h=T,p=e||b&&_.find.TAG("*",r),f=E+=null==h?1:Math.random()||.1,g=p.length;for(r&&(T=t!==w&&t);u!==g&&null!=(a=p[u]);u++){if(b&&a){for(o=0;s=m[o++];)if(s(a,t,i)){n.push(a);break}r&&(E=f)}y&&((a=!s&&a)&&l--,e&&c.push(a))}if(l+=u,y&&u!==l){for(o=0;s=v[o++];)s(c,d,t,i);if(e){if(0<l)for(;u--;)c[u]||d[u]||(d[u]=L.call(n));d=ye(d)}N.apply(n,d),r&&!e&&0<d.length&&1<l+v.length&&re.uniqueSort(n)}return r&&(E=f,T=h),c}return a},m=re.select=function(e,t,i,n){var r,a,o,s,l,u="function"==typeof e&&e,c=!n&&g(e=u.selector||e);if(i=i||[],1===c.length){if(2<(a=c[0]=c[0].slice(0)).length&&"ID"===(o=a[0]).type&&f.getById&&9===t.nodeType&&y&&_.relative[a[1].type]){if(!(t=(_.find.ID(o.matches[0].replace(ne,d),t)||[])[0]))return i;u&&(t=t.parentNode),e=e.slice(a.shift().value.length)}for(r=Y.needsContext.test(e)?0:a.length;r--&&(o=a[r],!_.relative[s=o.type]);)if((l=_.find[s])&&(n=l(o.matches[0].replace(ne,d),te.test(a[0].type)&&pe(t.parentNode)||t))){if(a.splice(r,1),!(e=n.length&&ge(a)))return N.apply(i,n),i;break}}return(u||h(e,c))(n,t,!y,i,te.test(e)&&pe(t.parentNode)||t),i},f.sortStable=k.split("").sort(P).join("")===k,f.detectDuplicates=!!c,v(),f.sortDetached=se(function(e){return 1&e.compareDocumentPosition(w.createElement("div"))}),se(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||le("type|href|height|width",function(e,t,i){return i?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),f.attributes&&se(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||le("value",function(e,t,i){return i||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),se(function(e){return null==e.getAttribute("disabled")})||le(j,function(e,t,i){var n;return i?void 0:!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),re}(f);S.find=h,S.expr=h.selectors,S.expr[":"]=S.expr.pseudos,S.unique=h.uniqueSort,S.text=h.getText,S.isXMLDoc=h.isXML,S.contains=h.contains;var p=S.expr.match.needsContext,y=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,b=/^.[^:#\[\.,]*$/;function _(e,i,n){if(S.isFunction(i))return S.grep(e,function(e,t){return!!i.call(e,t,e)!==n});if(i.nodeType)return S.grep(e,function(e){return e===i!==n});if("string"==typeof i){if(b.test(i))return S.filter(i,e,n);i=S.filter(i,e)}return S.grep(e,function(e){return 0<=S.inArray(e,i)!==n})}S.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?S.find.matchesSelector(n,e)?[n]:[]:S.find.matches(e,S.grep(t,function(e){return 1===e.nodeType}))},S.fn.extend({find:function(e){var t,i=[],n=this,r=n.length;if("string"!=typeof e)return this.pushStack(S(e).filter(function(){for(t=0;t<r;t++)if(S.contains(n[t],this))return!0}));for(t=0;t<r;t++)S.find(e,n[t],i);return(i=this.pushStack(1<r?S.unique(i):i)).selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(_(this,e||[],!1))},not:function(e){return this.pushStack(_(this,e||[],!0))},is:function(e){return!!_(this,"string"==typeof e&&p.test(e)?S(e):e||[],!1).length}});var T,w=f.document,k=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(S.fn.init=function(e,t){var i,n;if(!e)return this;if("string"!=typeof e)return e.nodeType?(this.context=this[0]=e,this.length=1,this):S.isFunction(e)?void 0!==T.ready?T.ready(e):e(S):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),S.makeArray(e,this));if(!(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&3<=e.length?[null,e,null]:k.exec(e))||!i[1]&&t)return!t||t.jquery?(t||T).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:w,!0)),y.test(i[1])&&S.isPlainObject(t))for(i in t)S.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}if((n=w.getElementById(i[2]))&&n.parentNode){if(n.id!==i[2])return T.find(e);this.length=1,this[0]=n}return this.context=w,this.selector=e,this}).prototype=S.fn,T=S(w);var C=/^(?:parents|prev(?:Until|All))/,E={children:!0,contents:!0,next:!0,prev:!0};function x(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}S.extend({dir:function(e,t,i){for(var n=[],r=e[t];r&&9!==r.nodeType&&(void 0===i||1!==r.nodeType||!S(r).is(i));)1===r.nodeType&&n.push(r),r=r[t];return n},sibling:function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}}),S.fn.extend({has:function(e){var t,i=S(e,this),n=i.length;return this.filter(function(){for(t=0;t<n;t++)if(S.contains(this,i[t]))return!0})},closest:function(e,t){for(var i,n=0,r=this.length,a=[],o=p.test(e)||"string"!=typeof e?S(e,t||this.context):0;n<r;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(o?-1<o.index(i):1===i.nodeType&&S.find.matchesSelector(i,e))){a.push(i);break}return this.pushStack(1<a.length?S.unique(a):a)},index:function(e){return e?"string"==typeof e?S.inArray(this[0],S(e)):S.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.unique(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return S.dir(e,"parentNode")},parentsUntil:function(e,t,i){return S.dir(e,"parentNode",i)},next:function(e){return x(e,"nextSibling")},prev:function(e){return x(e,"previousSibling")},nextAll:function(e){return S.dir(e,"nextSibling")},prevAll:function(e){return S.dir(e,"previousSibling")},nextUntil:function(e,t,i){return S.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return S.dir(e,"previousSibling",i)},siblings:function(e){return S.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return S.sibling(e.firstChild)},contents:function(e){return S.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:S.merge([],e.childNodes)}},function(n,r){S.fn[n]=function(e,t){var i=S.map(this,r,e);return"Until"!==n.slice(-5)&&(t=e),t&&"string"==typeof t&&(i=S.filter(t,i)),1<this.length&&(E[n]||(i=S.unique(i)),C.test(n)&&(i=i.reverse())),this.pushStack(i)}});var A,I=/\S+/g,P={};function O(){w.addEventListener?(w.removeEventListener("DOMContentLoaded",L,!1),f.removeEventListener("load",L,!1)):(w.detachEvent("onreadystatechange",L),f.detachEvent("onload",L))}function L(){!w.addEventListener&&"load"!==event.type&&"complete"!==w.readyState||(O(),S.ready())}S.Callbacks=function(r){var i;r="string"==typeof r?P[r]||(i=P[r]={},S.each(r.match(I)||[],function(e,t){i[t]=!0}),i):S.extend({},r);var n,t,a,o,s,l,u=[],c=!r.once&&[],d=function(e){for(t=r.memory&&e,a=!0,s=l||0,l=0,o=u.length,n=!0;u&&s<o;s++)if(!1===u[s].apply(e[0],e[1])&&r.stopOnFalse){t=!1;break}n=!1,u&&(c?c.length&&d(c.shift()):t?u=[]:h.disable())},h={add:function(){if(u){var e=u.length;!function n(e){S.each(e,function(e,t){var i=S.type(t);"function"===i?r.unique&&h.has(t)||u.push(t):t&&t.length&&"string"!==i&&n(t)})}(arguments),n?o=u.length:t&&(l=e,d(t))}return this},remove:function(){return u&&S.each(arguments,function(e,t){for(var i;-1<(i=S.inArray(t,u,i));)u.splice(i,1),n&&(i<=o&&o--,i<=s&&s--)}),this},has:function(e){return e?-1<S.inArray(e,u):!(!u||!u.length)},empty:function(){return u=[],o=0,this},disable:function(){return u=c=t=void 0,this},disabled:function(){return!u},lock:function(){return c=void 0,t||h.disable(),this},locked:function(){return!c},fireWith:function(e,t){return!u||a&&!c||(t=[e,(t=t||[]).slice?t.slice():t],n?c.push(t):d(t)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!a}};return h},S.extend({Deferred:function(e){var a=[["resolve","done",S.Callbacks("once memory"),"resolved"],["reject","fail",S.Callbacks("once memory"),"rejected"],["notify","progress",S.Callbacks("memory")]],r="pending",o={state:function(){return r},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var r=arguments;return S.Deferred(function(n){S.each(a,function(e,t){var i=S.isFunction(r[e])&&r[e];s[t[1]](function(){var e=i&&i.apply(this,arguments);e&&S.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[t[0]+"With"](this===o?n.promise():this,i?[e]:arguments)})}),r=null}).promise()},promise:function(e){return null!=e?S.extend(e,o):o}},s={};return o.pipe=o.then,S.each(a,function(e,t){var i=t[2],n=t[3];o[t[1]]=i.add,n&&i.add(function(){r=n},a[1^e][2].disable,a[2][2].lock),s[t[0]]=function(){return s[t[0]+"With"](this===s?o:this,arguments),this},s[t[0]+"With"]=i.fireWith}),o.promise(s),e&&e.call(s,s),s},when:function(e){function t(t,i,n){return function(e){i[t]=this,n[t]=1<arguments.length?c.call(arguments):e,n===r?u.notifyWith(i,n):--l||u.resolveWith(i,n)}}var r,i,n,a=0,o=c.call(arguments),s=o.length,l=1!==s||e&&S.isFunction(e.promise)?s:0,u=1===l?e:S.Deferred();if(1<s)for(r=new Array(s),i=new Array(s),n=new Array(s);a<s;a++)o[a]&&S.isFunction(o[a].promise)?o[a].promise().done(t(a,n,o)).fail(u.reject).progress(t(a,i,r)):--l;return l||u.resolveWith(n,o),u.promise()}}),S.fn.ready=function(e){return S.ready.promise().done(e),this},S.extend({isReady:!1,readyWait:1,holdReady:function(e){e?S.readyWait++:S.ready(!0)},ready:function(e){if(!0===e?!--S.readyWait:!S.isReady){if(!w.body)return setTimeout(S.ready);(S.isReady=!0)!==e&&0<--S.readyWait||(A.resolveWith(w,[S]),S.fn.triggerHandler&&(S(w).triggerHandler("ready"),S(w).off("ready")))}}}),S.ready.promise=function(e){if(!A)if(A=S.Deferred(),"complete"===w.readyState)setTimeout(S.ready);else if(w.addEventListener)w.addEventListener("DOMContentLoaded",L,!1),f.addEventListener("load",L,!1);else{w.attachEvent("onreadystatechange",L),f.attachEvent("onload",L);var i=!1;try{i=null==f.frameElement&&w.documentElement}catch(e){}i&&i.doScroll&&!function t(){if(!S.isReady){try{i.doScroll("left")}catch(e){return setTimeout(t,50)}O(),S.ready()}}()}return A.promise(e)};var D,N="undefined";for(D in S(v))break;v.ownLast="0"!==D,v.inlineBlockNeedsLayout=!1,S(function(){var e,t,i,n;(i=w.getElementsByTagName("body")[0])&&i.style&&(t=w.createElement("div"),(n=w.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(t),typeof t.style.zoom!==N&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",v.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(i.style.zoom=1)),i.removeChild(n))}),function(){var e=w.createElement("div");if(null==v.deleteExpando){v.deleteExpando=!0;try{delete e.test}catch(e){v.deleteExpando=!1}}e=null}(),S.acceptData=function(e){var t=S.noData[(e.nodeName+" ").toLowerCase()],i=+e.nodeType||1;return(1===i||9===i)&&(!t||!0!==t&&e.getAttribute("classid")===t)};var M=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,R=/([A-Z])/g;function j(e,t,i){if(void 0===i&&1===e.nodeType){var n="data-"+t.replace(R,"-$1").toLowerCase();if("string"==typeof(i=e.getAttribute(n))){try{i="true"===i||"false"!==i&&("null"===i?null:+i+""===i?+i:M.test(i)?S.parseJSON(i):i)}catch(e){}S.data(e,t,i)}else i=void 0}return i}function U(e){var t;for(t in e)if(("data"!==t||!S.isEmptyObject(e[t]))&&"toJSON"!==t)return;return 1}function B(e,t,i,n){if(S.acceptData(e)){var r,a,o=S.expando,s=e.nodeType,l=s?S.cache:e,u=s?e[o]:e[o]&&o;if(u&&l[u]&&(n||l[u].data)||void 0!==i||"string"!=typeof t)return l[u=u||(s?e[o]=d.pop()||S.guid++:o)]||(l[u]=s?{}:{toJSON:S.noop}),"object"!=typeof t&&"function"!=typeof t||(n?l[u]=S.extend(l[u],t):l[u].data=S.extend(l[u].data,t)),a=l[u],n||(a.data||(a.data={}),a=a.data),void 0!==i&&(a[S.camelCase(t)]=i),"string"==typeof t?null==(r=a[t])&&(r=a[S.camelCase(t)]):r=a,r}}function F(e,t,i){if(S.acceptData(e)){var n,r,a=e.nodeType,o=a?S.cache:e,s=a?e[S.expando]:S.expando;if(o[s]){if(t&&(n=i?o[s]:o[s].data)){r=(t=S.isArray(t)?t.concat(S.map(t,S.camelCase)):t in n||(t=S.camelCase(t))in n?[t]:t.split(" ")).length;for(;r--;)delete n[t[r]];if(i?!U(n):!S.isEmptyObject(n))return}(i||(delete o[s].data,U(o[s])))&&(a?S.cleanData([e],!0):v.deleteExpando||o!=o.window?delete o[s]:o[s]=null)}}}function $(e,t){return e=t||e,"none"===S.css(e,"display")||!S.contains(e.ownerDocument,e)}S.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return!!(e=e.nodeType?S.cache[e[S.expando]]:e[S.expando])&&!U(e)},data:function(e,t,i){return B(e,t,i)},removeData:function(e,t){return F(e,t)},_data:function(e,t,i){return B(e,t,i,!0)},_removeData:function(e,t){return F(e,t,!0)}}),S.fn.extend({data:function(e,t){var i,n,r,a=this[0],o=a&&a.attributes;if(void 0!==e)return"object"==typeof e?this.each(function(){S.data(this,e)}):1<arguments.length?this.each(function(){S.data(this,e,t)}):a?j(a,e,S.data(a,e)):void 0;if(this.length&&(r=S.data(a),1===a.nodeType&&!S._data(a,"parsedAttrs"))){for(i=o.length;i--;)o[i]&&0===(n=o[i].name).indexOf("data-")&&j(a,n=S.camelCase(n.slice(5)),r[n]);S._data(a,"parsedAttrs",!0)}return r},removeData:function(e){return this.each(function(){S.removeData(this,e)})}}),S.extend({queue:function(e,t,i){var n;return e?(t=(t||"fx")+"queue",n=S._data(e,t),i&&(!n||S.isArray(i)?n=S._data(e,t,S.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(e,t){t=t||"fx";var i=S.queue(e,t),n=i.length,r=i.shift(),a=S._queueHooks(e,t);"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===t&&i.unshift("inprogress"),delete a.stop,r.call(e,function(){S.dequeue(e,t)},a)),!n&&a&&a.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return S._data(e,i)||S._data(e,i,{empty:S.Callbacks("once memory").add(function(){S._removeData(e,t+"queue"),S._removeData(e,i)})})}}),S.fn.extend({queue:function(t,i){var e=2;return"string"!=typeof t&&(i=t,t="fx",e--),arguments.length<e?S.queue(this[0],t):void 0===i?this:this.each(function(){var e=S.queue(this,t,i);S._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&S.dequeue(this,t)})},dequeue:function(e){return this.each(function(){S.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){function i(){--r||a.resolveWith(o,[o])}var n,r=1,a=S.Deferred(),o=this,s=this.length;for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(n=S._data(o[s],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(i));return i(),a.promise(t)}});var H=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,q=["Top","Right","Bottom","Left"],W=S.access=function(e,t,i,n,r,a,o){var s=0,l=e.length,u=null==i;if("object"===S.type(i))for(s in r=!0,i)S.access(e,t,s,i[s],!0,a,o);else if(void 0!==n&&(r=!0,S.isFunction(n)||(o=!0),u&&(t=o?(t.call(e,n),null):(u=t,function(e,t,i){return u.call(S(e),i)})),t))for(;s<l;s++)t(e[s],i,o?n:n.call(e[s],s,t(e[s],i)));return r?e:u?t.call(e):l?t(e[0],i):a},V=/^(?:checkbox|radio)$/i;!function(){var e=w.createElement("input"),t=w.createElement("div"),i=w.createDocumentFragment();if(t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",v.leadingWhitespace=3===t.firstChild.nodeType,v.tbody=!t.getElementsByTagName("tbody").length,v.htmlSerialize=!!t.getElementsByTagName("link").length,v.html5Clone="<:nav></:nav>"!==w.createElement("nav").cloneNode(!0).outerHTML,e.type="checkbox",e.checked=!0,i.appendChild(e),v.appendChecked=e.checked,t.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,i.appendChild(t),t.innerHTML="<input type='radio' checked='checked' name='t'/>",v.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,v.noCloneEvent=!0,t.attachEvent&&(t.attachEvent("onclick",function(){v.noCloneEvent=!1}),t.cloneNode(!0).click()),null==v.deleteExpando){v.deleteExpando=!0;try{delete t.test}catch(e){v.deleteExpando=!1}}}(),function(){var e,t,i=w.createElement("div");for(e in{submit:!0,change:!0,focusin:!0})t="on"+e,(v[e+"Bubbles"]=t in f)||(i.setAttribute(t,"t"),v[e+"Bubbles"]=!1===i.attributes[t].expando);i=null}();var z=/^(?:input|select|textarea)$/i,G=/^key/,X=/^(?:mouse|pointer|contextmenu)|click/,K=/^(?:focusinfocus|focusoutblur)$/,Y=/^([^.]*)(?:\.(.+)|)$/;function Q(){return!0}function J(){return!1}function Z(){try{return w.activeElement}catch(e){}}function ee(e){var t=te.split("|"),i=e.createDocumentFragment();if(i.createElement)for(;t.length;)i.createElement(t.pop());return i}S.event={global:{},add:function(e,t,i,n,r){var a,o,s,l,u,c,d,h,p,f,g,m=S._data(e);if(m){for(i.handler&&(i=(l=i).handler,r=l.selector),i.guid||(i.guid=S.guid++),(o=m.events)||(o=m.events={}),(c=m.handle)||((c=m.handle=function(e){return typeof S===N||e&&S.event.triggered===e.type?void 0:S.event.dispatch.apply(c.elem,arguments)}).elem=e),s=(t=(t||"").match(I)||[""]).length;s--;)p=g=(a=Y.exec(t[s])||[])[1],f=(a[2]||"").split(".").sort(),p&&(u=S.event.special[p]||{},p=(r?u.delegateType:u.bindType)||p,u=S.event.special[p]||{},d=S.extend({type:p,origType:g,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&S.expr.match.needsContext.test(r),namespace:f.join(".")},l),(h=o[p])||((h=o[p]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(e,n,f,c)||(e.addEventListener?e.addEventListener(p,c,!1):e.attachEvent&&e.attachEvent("on"+p,c))),u.add&&(u.add.call(e,d),d.handler.guid||(d.handler.guid=i.guid)),r?h.splice(h.delegateCount++,0,d):h.push(d),S.event.global[p]=!0);e=null}},remove:function(e,t,i,n,r){var a,o,s,l,u,c,d,h,p,f,g,m=S.hasData(e)&&S._data(e);if(m&&(c=m.events)){for(u=(t=(t||"").match(I)||[""]).length;u--;)if(p=g=(s=Y.exec(t[u])||[])[1],f=(s[2]||"").split(".").sort(),p){for(d=S.event.special[p]||{},h=c[p=(n?d.delegateType:d.bindType)||p]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=a=h.length;a--;)o=h[a],!r&&g!==o.origType||i&&i.guid!==o.guid||s&&!s.test(o.namespace)||n&&n!==o.selector&&("**"!==n||!o.selector)||(h.splice(a,1),o.selector&&h.delegateCount--,d.remove&&d.remove.call(e,o));l&&!h.length&&(d.teardown&&!1!==d.teardown.call(e,f,m.handle)||S.removeEvent(e,p,m.handle),delete c[p])}else for(p in c)S.event.remove(e,p+t[u],i,n,!0);S.isEmptyObject(c)&&(delete m.handle,S._removeData(e,"events"))}},trigger:function(e,t,i,n){var r,a,o,s,l,u,c,d=[i||w],h=m.call(e,"type")?e.type:e,p=m.call(e,"namespace")?e.namespace.split("."):[];if(o=u=i=i||w,3!==i.nodeType&&8!==i.nodeType&&!K.test(h+S.event.triggered)&&(0<=h.indexOf(".")&&(h=(p=h.split(".")).shift(),p.sort()),a=h.indexOf(":")<0&&"on"+h,(e=e[S.expando]?e:new S.Event(h,"object"==typeof e&&e)).isTrigger=n?2:3,e.namespace=p.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),t=null==t?[e]:S.makeArray(t,[e]),l=S.event.special[h]||{},n||!l.trigger||!1!==l.trigger.apply(i,t))){if(!n&&!l.noBubble&&!S.isWindow(i)){for(s=l.delegateType||h,K.test(s+h)||(o=o.parentNode);o;o=o.parentNode)d.push(o),u=o;u===(i.ownerDocument||w)&&d.push(u.defaultView||u.parentWindow||f)}for(c=0;(o=d[c++])&&!e.isPropagationStopped();)e.type=1<c?s:l.bindType||h,(r=(S._data(o,"events")||{})[e.type]&&S._data(o,"handle"))&&r.apply(o,t),(r=a&&o[a])&&r.apply&&S.acceptData(o)&&(e.result=r.apply(o,t),!1===e.result&&e.preventDefault());if(e.type=h,!n&&!e.isDefaultPrevented()&&(!l._default||!1===l._default.apply(d.pop(),t))&&S.acceptData(i)&&a&&i[h]&&!S.isWindow(i)){(u=i[a])&&(i[a]=null),S.event.triggered=h;try{i[h]()}catch(e){}S.event.triggered=void 0,u&&(i[a]=u)}return e.result}},dispatch:function(e){e=S.event.fix(e);var t,i,n,r,a,o=[],s=c.call(arguments),l=(S._data(this,"events")||{})[e.type]||[],u=S.event.special[e.type]||{};if((s[0]=e).delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,e)){for(o=S.event.handlers.call(this,e,l),t=0;(r=o[t++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,a=0;(n=r.handlers[a++])&&!e.isImmediatePropagationStopped();)e.namespace_re&&!e.namespace_re.test(n.namespace)||(e.handleObj=n,e.data=n.data,void 0!==(i=((S.event.special[n.origType]||{}).handle||n.handler).apply(r.elem,s))&&!1===(e.result=i)&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,t){var i,n,r,a,o=[],s=t.delegateCount,l=e.target;if(s&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==e.type)){for(r=[],a=0;a<s;a++)void 0===r[i=(n=t[a]).selector+" "]&&(r[i]=n.needsContext?0<=S(i,this).index(l):S.find(i,this,null,[l]).length),r[i]&&r.push(n);r.length&&o.push({elem:l,handlers:r})}return s<t.length&&o.push({elem:this,handlers:t.slice(s)}),o},fix:function(e){if(e[S.expando])return e;var t,i,n,r=e.type,a=e,o=this.fixHooks[r];for(o||(this.fixHooks[r]=o=X.test(r)?this.mouseHooks:G.test(r)?this.keyHooks:{}),n=o.props?this.props.concat(o.props):this.props,e=new S.Event(a),t=n.length;t--;)e[i=n[t]]=a[i];return e.target||(e.target=a.srcElement||w),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,o.filter?o.filter(e,a):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var i,n,r,a=t.button,o=t.fromElement;return null==e.pageX&&null!=t.clientX&&(r=(n=e.target.ownerDocument||w).documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),!e.relatedTarget&&o&&(e.relatedTarget=o===e.target?t.toElement:o),e.which||void 0===a||(e.which=1&a?1:2&a?3:4&a?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Z()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===Z()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return S.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return S.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,i,n){var r=S.extend(new S.Event,i,{type:e,isSimulated:!0,originalEvent:{}});n?S.event.trigger(r,null,t):S.event.dispatch.call(t,r),r.isDefaultPrevented()&&i.preventDefault()}},S.removeEvent=w.removeEventListener?function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)}:function(e,t,i){var n="on"+t;e.detachEvent&&(typeof e[n]===N&&(e[n]=null),e.detachEvent(n,i))},S.Event=function(e,t){return this instanceof S.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Q:J):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||S.now(),void(this[S.expando]=!0)):new S.Event(e,t)},S.Event.prototype={isDefaultPrevented:J,isPropagationStopped:J,isImmediatePropagationStopped:J,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Q,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Q,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Q,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,r){S.event.special[e]={delegateType:r,bindType:r,handle:function(e){var t,i=e.relatedTarget,n=e.handleObj;return i&&(i===this||S.contains(this,i))||(e.type=n.origType,t=n.handler.apply(this,arguments),e.type=r),t}}}),v.submitBubbles||(S.event.special.submit={setup:function(){return!S.nodeName(this,"form")&&void S.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,i=S.nodeName(t,"input")||S.nodeName(t,"button")?t.form:void 0;i&&!S._data(i,"submitBubbles")&&(S.event.add(i,"submit._submit",function(e){e._submit_bubble=!0}),S._data(i,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&S.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return!S.nodeName(this,"form")&&void S.event.remove(this,"._submit")}}),v.changeBubbles||(S.event.special.change={setup:function(){return z.test(this.nodeName)?("checkbox"!==this.type&&"radio"!==this.type||(S.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),S.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),S.event.simulate("change",this,e,!0)})),!1):void S.event.add(this,"beforeactivate._change",function(e){var t=e.target;z.test(t.nodeName)&&!S._data(t,"changeBubbles")&&(S.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||S.event.simulate("change",this.parentNode,e,!0)}),S._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return S.event.remove(this,"._change"),!z.test(this.nodeName)}}),v.focusinBubbles||S.each({focus:"focusin",blur:"focusout"},function(i,n){function r(e){S.event.simulate(n,e.target,S.event.fix(e),!0)}S.event.special[n]={setup:function(){var e=this.ownerDocument||this,t=S._data(e,n);t||e.addEventListener(i,r,!0),S._data(e,n,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this,t=S._data(e,n)-1;t?S._data(e,n,t):(e.removeEventListener(i,r,!0),S._removeData(e,n))}}}),S.fn.extend({on:function(e,t,i,n,r){var a,o;if("object"==typeof e){for(a in"string"!=typeof t&&(i=i||t,t=void 0),e)this.on(a,t,i,e[a],r);return this}if(null==i&&null==n?(n=t,i=t=void 0):null==n&&("string"==typeof t?(n=i,i=void 0):(n=i,i=t,t=void 0)),!1===n)n=J;else if(!n)return this;return 1===r&&(o=n,(n=function(e){return S().off(e),o.apply(this,arguments)}).guid=o.guid||(o.guid=S.guid++)),this.each(function(){S.event.add(this,e,n,i,t)})},one:function(e,t,i,n){return this.on(e,t,i,n,1)},off:function(e,t,i){var n,r;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,S(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"!=typeof e)return!1!==t&&"function"!=typeof t||(i=t,t=void 0),!1===i&&(i=J),this.each(function(){S.event.remove(this,e,i,t)});for(r in e)this.off(r,t,e[r]);return this},trigger:function(e,t){return this.each(function(){S.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];return i?S.event.trigger(e,t,i,!0):void 0}});var te="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",ie=/ jQuery\d+="(?:null|\d+)"/g,ne=new RegExp("<(?:"+te+")[\\s/>]","i"),re=/^\s+/,ae=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,oe=/<([\w:]+)/,se=/<tbody/i,le=/<|&#?\w+;/,ue=/<(?:script|style|link)/i,ce=/checked\s*(?:[^=]|=\s*.checked.)/i,de=/^$|\/(?:java|ecma)script/i,he=/^true\/(.*)/,pe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,fe={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:v.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},ge=ee(w).appendChild(w.createElement("div"));function me(e,t){var i,n,r=0,a=typeof e.getElementsByTagName!==N?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==N?e.querySelectorAll(t||"*"):void 0;if(!a)for(a=[],i=e.childNodes||e;null!=(n=i[r]);r++)!t||S.nodeName(n,t)?a.push(n):S.merge(a,me(n,t));return void 0===t||t&&S.nodeName(e,t)?S.merge([e],a):a}function ve(e){V.test(e.type)&&(e.defaultChecked=e.checked)}function ye(e,t){return S.nodeName(e,"table")&&S.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function be(e){return e.type=(null!==S.find.attr(e,"type"))+"/"+e.type,e}function _e(e){var t=he.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Te(e,t){for(var i,n=0;null!=(i=e[n]);n++)S._data(i,"globalEval",!t||S._data(t[n],"globalEval"))}function we(e,t){if(1===t.nodeType&&S.hasData(e)){var i,n,r,a=S._data(e),o=S._data(t,a),s=a.events;if(s)for(i in delete o.handle,o.events={},s)for(n=0,r=s[i].length;n<r;n++)S.event.add(t,i,s[i][n]);o.data&&(o.data=S.extend({},o.data))}}function Se(e,t){var i,n,r;if(1===t.nodeType){if(i=t.nodeName.toLowerCase(),!v.noCloneEvent&&t[S.expando]){for(n in(r=S._data(t)).events)S.removeEvent(t,n,r.handle);t.removeAttribute(S.expando)}"script"===i&&t.text!==e.text?(be(t).text=e.text,_e(t)):"object"===i?(t.parentNode&&(t.outerHTML=e.outerHTML),v.html5Clone&&e.innerHTML&&!S.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===i&&V.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===i?t.defaultSelected=t.selected=e.defaultSelected:"input"!==i&&"textarea"!==i||(t.defaultValue=e.defaultValue)}}fe.optgroup=fe.option,fe.tbody=fe.tfoot=fe.colgroup=fe.caption=fe.thead,fe.th=fe.td,S.extend({clone:function(e,t,i){var n,r,a,o,s,l=S.contains(e.ownerDocument,e);if(v.html5Clone||S.isXMLDoc(e)||!ne.test("<"+e.nodeName+">")?a=e.cloneNode(!0):(ge.innerHTML=e.outerHTML,ge.removeChild(a=ge.firstChild)),!(v.noCloneEvent&&v.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(n=me(a),s=me(e),o=0;null!=(r=s[o]);++o)n[o]&&Se(r,n[o]);if(t)if(i)for(s=s||me(e),n=n||me(a),o=0;null!=(r=s[o]);o++)we(r,n[o]);else we(e,a);return 0<(n=me(a,"script")).length&&Te(n,!l&&me(e,"script")),n=s=r=null,a},buildFragment:function(e,t,i,n){for(var r,a,o,s,l,u,c,d=e.length,h=ee(t),p=[],f=0;f<d;f++)if((a=e[f])||0===a)if("object"===S.type(a))S.merge(p,a.nodeType?[a]:a);else if(le.test(a)){for(s=s||h.appendChild(t.createElement("div")),l=(oe.exec(a)||["",""])[1].toLowerCase(),c=fe[l]||fe._default,s.innerHTML=c[1]+a.replace(ae,"<$1></$2>")+c[2],r=c[0];r--;)s=s.lastChild;if(!v.leadingWhitespace&&re.test(a)&&p.push(t.createTextNode(re.exec(a)[0])),!v.tbody)for(r=(a="table"!==l||se.test(a)?"<table>"!==c[1]||se.test(a)?0:s:s.firstChild)&&a.childNodes.length;r--;)S.nodeName(u=a.childNodes[r],"tbody")&&!u.childNodes.length&&a.removeChild(u);for(S.merge(p,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=h.lastChild}else p.push(t.createTextNode(a));for(s&&h.removeChild(s),v.appendChecked||S.grep(me(p,"input"),ve),f=0;a=p[f++];)if((!n||-1===S.inArray(a,n))&&(o=S.contains(a.ownerDocument,a),s=me(h.appendChild(a),"script"),o&&Te(s),i))for(r=0;a=s[r++];)de.test(a.type||"")&&i.push(a);return s=null,h},cleanData:function(e,t){for(var i,n,r,a,o=0,s=S.expando,l=S.cache,u=v.deleteExpando,c=S.event.special;null!=(i=e[o]);o++)if((t||S.acceptData(i))&&(a=(r=i[s])&&l[r])){if(a.events)for(n in a.events)c[n]?S.event.remove(i,n):S.removeEvent(i,n,a.handle);l[r]&&(delete l[r],u?delete i[s]:typeof i.removeAttribute!==N?i.removeAttribute(s):i[s]=null,d.push(r))}}}),S.fn.extend({text:function(e){return W(this,function(e){return void 0===e?S.text(this):this.empty().append((this[0]&&this[0].ownerDocument||w).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||ye(this,e).appendChild(e)})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=ye(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var i,n=e?S.filter(e,this):this,r=0;null!=(i=n[r]);r++)t||1!==i.nodeType||S.cleanData(me(i)),i.parentNode&&(t&&S.contains(i.ownerDocument,i)&&Te(me(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&S.cleanData(me(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&S.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return S.clone(this,e,t)})},html:function(e){return W(this,function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(ie,""):void 0;if(!("string"!=typeof e||ue.test(e)||!v.htmlSerialize&&ne.test(e)||!v.leadingWhitespace&&re.test(e)||fe[(oe.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(ae,"<$1></$2>");try{for(;i<n;i++)1===(t=this[i]||{}).nodeType&&(S.cleanData(me(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,S.cleanData(me(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(i,n){i=g.apply([],i);var e,t,r,a,o,s,l=0,u=this.length,c=this,d=u-1,h=i[0],p=S.isFunction(h);if(p||1<u&&"string"==typeof h&&!v.checkClone&&ce.test(h))return this.each(function(e){var t=c.eq(e);p&&(i[0]=h.call(this,e,t.html())),t.domManip(i,n)});if(u&&(e=(s=S.buildFragment(i,this[0].ownerDocument,!1,this)).firstChild,1===s.childNodes.length&&(s=e),e)){for(r=(a=S.map(me(s,"script"),be)).length;l<u;l++)t=s,l!==d&&(t=S.clone(t,!0,!0),r&&S.merge(a,me(t,"script"))),n.call(this[l],t,l);if(r)for(o=a[a.length-1].ownerDocument,S.map(a,_e),l=0;l<r;l++)t=a[l],de.test(t.type||"")&&!S._data(t,"globalEval")&&S.contains(o,t)&&(t.src?S._evalUrl&&S._evalUrl(t.src):S.globalEval((t.text||t.textContent||t.innerHTML||"").replace(pe,"")));s=e=null}return this}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,o){S.fn[e]=function(e){for(var t,i=0,n=[],r=S(e),a=r.length-1;i<=a;i++)t=i===a?this:this.clone(!0),S(r[i])[o](t),s.apply(n,t.get());return this.pushStack(n)}});var ke,Ce,Ee={};function xe(e,t){var i,n=S(t.createElement(e)).appendTo(t.body),r=f.getDefaultComputedStyle&&(i=f.getDefaultComputedStyle(n[0]))?i.display:S.css(n[0],"display");return n.detach(),r}function Ae(e){var t=w,i=Ee[e];return i||("none"!==(i=xe(e,t))&&i||((t=((ke=(ke||S("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentWindow||ke[0].contentDocument).document).write(),t.close(),i=xe(e,t),ke.detach()),Ee[e]=i),i}v.shrinkWrapBlocks=function(){return null!=Ce?Ce:(Ce=!1,(t=w.getElementsByTagName("body")[0])&&t.style?(e=w.createElement("div"),(i=w.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",t.appendChild(i).appendChild(e),typeof e.style.zoom!==N&&(e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",e.appendChild(w.createElement("div")).style.width="5px",Ce=3!==e.offsetWidth),t.removeChild(i),Ce):void 0);var e,t,i};var Ie,Pe,Oe=/^margin/,Le=new RegExp("^("+H+")(?!px)[a-z%]+$","i"),De=/^(top|right|bottom|left)$/;function Ne(t,i){return{get:function(){var e=t();if(null!=e)return e?void delete this.get:(this.get=i).apply(this,arguments)}}}f.getComputedStyle?(Ie=function(e){return e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):f.getComputedStyle(e,null)},Pe=function(e,t,i){var n,r,a,o,s=e.style;return o=(i=i||Ie(e))?i.getPropertyValue(t)||i[t]:void 0,i&&(""!==o||S.contains(e.ownerDocument,e)||(o=S.style(e,t)),Le.test(o)&&Oe.test(t)&&(n=s.width,r=s.minWidth,a=s.maxWidth,s.minWidth=s.maxWidth=s.width=o,o=i.width,s.width=n,s.minWidth=r,s.maxWidth=a)),void 0===o?o:o+""}):w.documentElement.currentStyle&&(Ie=function(e){return e.currentStyle},Pe=function(e,t,i){var n,r,a,o,s=e.style;return null==(o=(i=i||Ie(e))?i[t]:void 0)&&s&&s[t]&&(o=s[t]),Le.test(o)&&!De.test(t)&&(n=s.left,(a=(r=e.runtimeStyle)&&r.left)&&(r.left=e.currentStyle.left),s.left="fontSize"===t?"1em":o,o=s.pixelLeft+"px",s.left=n,a&&(r.left=a)),void 0===o?o:o+""||"auto"}),function(){var e,t,i,r,a,o,s;if((e=w.createElement("div")).innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",t=(i=e.getElementsByTagName("a")[0])&&i.style){function n(){var e,t,i,n;(t=w.getElementsByTagName("body")[0])&&t.style&&(e=w.createElement("div"),(i=w.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",t.appendChild(i).appendChild(e),e.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",r=a=!1,s=!0,f.getComputedStyle&&(r="1%"!==(f.getComputedStyle(e,null)||{}).top,a="4px"===(f.getComputedStyle(e,null)||{width:"4px"}).width,(n=e.appendChild(w.createElement("div"))).style.cssText=e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",e.style.width="1px",s=!parseFloat((f.getComputedStyle(n,null)||{}).marginRight),e.removeChild(n)),e.innerHTML="<table><tr><td></td><td>t</td></tr></table>",(n=e.getElementsByTagName("td"))[0].style.cssText="margin:0;border:0;padding:0;display:none",(o=0===n[0].offsetHeight)&&(n[0].style.display="",n[1].style.display="none",o=0===n[0].offsetHeight),t.removeChild(i))}t.cssText="float:left;opacity:.5",v.opacity="0.5"===t.opacity,v.cssFloat=!!t.cssFloat,e.style.backgroundClip="content-box",e.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===e.style.backgroundClip,v.boxSizing=""===t.boxSizing||""===t.MozBoxSizing||""===t.WebkitBoxSizing,S.extend(v,{reliableHiddenOffsets:function(){return null==o&&n(),o},boxSizingReliable:function(){return null==a&&n(),a},pixelPosition:function(){return null==r&&n(),r},reliableMarginRight:function(){return null==s&&n(),s}})}}(),S.swap=function(e,t,i,n){var r,a,o={};for(a in t)o[a]=e.style[a],e.style[a]=t[a];for(a in r=i.apply(e,n||[]),t)e.style[a]=o[a];return r};var Me=/alpha\([^)]*\)/i,Re=/opacity\s*=\s*([^)]*)/,je=/^(none|table(?!-c[ea]).+)/,Ue=new RegExp("^("+H+")(.*)$","i"),Be=new RegExp("^([+-])=("+H+")","i"),Fe={position:"absolute",visibility:"hidden",display:"block"},$e={letterSpacing:"0",fontWeight:"400"},He=["Webkit","O","Moz","ms"];function qe(e,t){if(t in e)return t;for(var i=t.charAt(0).toUpperCase()+t.slice(1),n=t,r=He.length;r--;)if((t=He[r]+i)in e)return t;return n}function We(e,t){for(var i,n,r,a=[],o=0,s=e.length;o<s;o++)(n=e[o]).style&&(a[o]=S._data(n,"olddisplay"),i=n.style.display,t?(a[o]||"none"!==i||(n.style.display=""),""===n.style.display&&$(n)&&(a[o]=S._data(n,"olddisplay",Ae(n.nodeName)))):(r=$(n),(i&&"none"!==i||!r)&&S._data(n,"olddisplay",r?i:S.css(n,"display"))));for(o=0;o<s;o++)(n=e[o]).style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?a[o]||"":"none"));return e}function Ve(e,t,i){var n=Ue.exec(t);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):t}function ze(e,t,i,n,r){for(var a=i===(n?"border":"content")?4:"width"===t?1:0,o=0;a<4;a+=2)"margin"===i&&(o+=S.css(e,i+q[a],!0,r)),n?("content"===i&&(o-=S.css(e,"padding"+q[a],!0,r)),"margin"!==i&&(o-=S.css(e,"border"+q[a]+"Width",!0,r))):(o+=S.css(e,"padding"+q[a],!0,r),"padding"!==i&&(o+=S.css(e,"border"+q[a]+"Width",!0,r)));return o}function Ge(e,t,i){var n=!0,r="width"===t?e.offsetWidth:e.offsetHeight,a=Ie(e),o=v.boxSizing&&"border-box"===S.css(e,"boxSizing",!1,a);if(r<=0||null==r){if(((r=Pe(e,t,a))<0||null==r)&&(r=e.style[t]),Le.test(r))return r;n=o&&(v.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+ze(e,t,i||(o?"border":"content"),n,a)+"px"}function Xe(e,t,i,n,r){return new Xe.prototype.init(e,t,i,n,r)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=Pe(e,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:v.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,a,o,s=S.camelCase(t),l=e.style;if(t=S.cssProps[s]||(S.cssProps[s]=qe(l,s)),o=S.cssHooks[t]||S.cssHooks[s],void 0===i)return o&&"get"in o&&void 0!==(r=o.get(e,!1,n))?r:l[t];if("string"==(a=typeof i)&&(r=Be.exec(i))&&(i=(r[1]+1)*r[2]+parseFloat(S.css(e,t)),a="number"),null!=i&&i==i&&("number"!==a||S.cssNumber[s]||(i+="px"),v.clearCloneStyle||""!==i||0!==t.indexOf("background")||(l[t]="inherit"),!(o&&"set"in o&&void 0===(i=o.set(e,i,n)))))try{l[t]=i}catch(e){}}},css:function(e,t,i,n){var r,a,o,s=S.camelCase(t);return t=S.cssProps[s]||(S.cssProps[s]=qe(e.style,s)),(o=S.cssHooks[t]||S.cssHooks[s])&&"get"in o&&(a=o.get(e,!0,i)),void 0===a&&(a=Pe(e,t,n)),"normal"===a&&t in $e&&(a=$e[t]),""===i||i?(r=parseFloat(a),!0===i||S.isNumeric(r)?r||0:a):a}}),S.each(["height","width"],function(e,r){S.cssHooks[r]={get:function(e,t,i){return t?je.test(S.css(e,"display"))&&0===e.offsetWidth?S.swap(e,Fe,function(){return Ge(e,r,i)}):Ge(e,r,i):void 0},set:function(e,t,i){var n=i&&Ie(e);return Ve(0,t,i?ze(e,r,i,v.boxSizing&&"border-box"===S.css(e,"boxSizing",!1,n),n):0)}}}),v.opacity||(S.cssHooks.opacity={get:function(e,t){return Re.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var i=e.style,n=e.currentStyle,r=S.isNumeric(t)?"alpha(opacity="+100*t+")":"",a=n&&n.filter||i.filter||"";((i.zoom=1)<=t||""===t)&&""===S.trim(a.replace(Me,""))&&i.removeAttribute&&(i.removeAttribute("filter"),""===t||n&&!n.filter)||(i.filter=Me.test(a)?a.replace(Me,r):a+" "+r)}}),S.cssHooks.marginRight=Ne(v.reliableMarginRight,function(e,t){return t?S.swap(e,{display:"inline-block"},Pe,[e,"marginRight"]):void 0}),S.each({margin:"",padding:"",border:"Width"},function(r,a){S.cssHooks[r+a]={expand:function(e){for(var t=0,i={},n="string"==typeof e?e.split(" "):[e];t<4;t++)i[r+q[t]+a]=n[t]||n[t-2]||n[0];return i}},Oe.test(r)||(S.cssHooks[r+a].set=Ve)}),S.fn.extend({css:function(e,t){return W(this,function(e,t,i){var n,r,a={},o=0;if(S.isArray(t)){for(n=Ie(e),r=t.length;o<r;o++)a[t[o]]=S.css(e,t[o],!1,n);return a}return void 0!==i?S.style(e,t,i):S.css(e,t)},e,t,1<arguments.length)},show:function(){return We(this,!0)},hide:function(){return We(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){$(this)?S(this).show():S(this).hide()})}}),((S.Tween=Xe).prototype={constructor:Xe,init:function(e,t,i,n,r,a){this.elem=e,this.prop=i,this.easing=r||"swing",this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=a||(S.cssNumber[i]?"":"px")},cur:function(){var e=Xe.propHooks[this.prop];return e&&e.get?e.get(this):Xe.propHooks._default.get(this)},run:function(e){var t,i=Xe.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):Xe.propHooks._default.set(this),this}}).init.prototype=Xe.prototype,(Xe.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=S.css(e.elem,e.prop,""))&&"auto"!==t?t:0:e.elem[e.prop]},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[S.cssProps[e.prop]]||S.cssHooks[e.prop])?S.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}}).scrollTop=Xe.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},S.fx=Xe.prototype.init,S.fx.step={};var Ke,Ye,Qe,Je,Ze,et,tt,it=/^(?:toggle|show|hide)$/,nt=new RegExp("^(?:([+-])=|)("+H+")([a-z%]*)$","i"),rt=/queueHooks$/,at=[function(t,e,i){var n,r,a,o,s,l,u,c=this,d={},h=t.style,p=t.nodeType&&$(t),f=S._data(t,"fxshow");for(n in i.queue||(null==(s=S._queueHooks(t,"fx")).unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,c.always(function(){c.always(function(){s.unqueued--,S.queue(t,"fx").length||s.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(i.overflow=[h.overflow,h.overflowX,h.overflowY],"inline"===("none"===(u=S.css(t,"display"))?S._data(t,"olddisplay")||Ae(t.nodeName):u)&&"none"===S.css(t,"float")&&(v.inlineBlockNeedsLayout&&"inline"!==Ae(t.nodeName)?h.zoom=1:h.display="inline-block")),i.overflow&&(h.overflow="hidden",v.shrinkWrapBlocks()||c.always(function(){h.overflow=i.overflow[0],h.overflowX=i.overflow[1],h.overflowY=i.overflow[2]})),e)if(r=e[n],it.exec(r)){if(delete e[n],a=a||"toggle"===r,r===(p?"hide":"show")){if("show"!==r||!f||void 0===f[n])continue;p=!0}d[n]=f&&f[n]||S.style(t,n)}else u=void 0;if(S.isEmptyObject(d))"inline"===("none"===u?Ae(t.nodeName):u)&&(h.display=u);else for(n in f?"hidden"in f&&(p=f.hidden):f=S._data(t,"fxshow",{}),a&&(f.hidden=!p),p?S(t).show():c.done(function(){S(t).hide()}),c.done(function(){var e;for(e in S._removeData(t,"fxshow"),d)S.style(t,e,d[e])}),d)o=ut(p?f[n]:0,n,c),n in f||(f[n]=o.start,p&&(o.end=o.start,o.start="width"===n||"height"===n?1:0))}],ot={"*":[function(e,t){var i=this.createTween(e,t),n=i.cur(),r=nt.exec(t),a=r&&r[3]||(S.cssNumber[e]?"":"px"),o=(S.cssNumber[e]||"px"!==a&&+n)&&nt.exec(S.css(i.elem,e)),s=1,l=20;if(o&&o[3]!==a)for(a=a||o[3],r=r||[],o=+n||1;o/=s=s||".5",S.style(i.elem,e,o+a),s!==(s=i.cur()/n)&&1!==s&&--l;);return r&&(o=i.start=+o||+n||0,i.unit=a,i.end=r[1]?o+(r[1]+1)*r[2]:+r[2]),i}]};function st(){return setTimeout(function(){Ke=void 0}),Ke=S.now()}function lt(e,t){var i,n={height:e},r=0;for(t=t?1:0;r<4;r+=2-t)n["margin"+(i=q[r])]=n["padding"+i]=e;return t&&(n.opacity=n.width=e),n}function ut(e,t,i){for(var n,r=(ot[t]||[]).concat(ot["*"]),a=0,o=r.length;a<o;a++)if(n=r[a].call(i,t,e))return n}function ct(a,e,t){var i,o,n=0,r=at.length,s=S.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var e=Ke||st(),t=Math.max(0,u.startTime+u.duration-e),i=1-(t/u.duration||0),n=0,r=u.tweens.length;n<r;n++)u.tweens[n].run(i);return s.notifyWith(a,[u,i,t]),i<1&&r?t:(s.resolveWith(a,[u]),!1)},u=s.promise({elem:a,props:S.extend({},e),opts:S.extend(!0,{specialEasing:{}},t),originalProperties:e,originalOptions:t,startTime:Ke||st(),duration:t.duration,tweens:[],createTween:function(e,t){var i=S.Tween(a,u.opts,e,t,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(i),i},stop:function(e){var t=0,i=e?u.tweens.length:0;if(o)return this;for(o=!0;t<i;t++)u.tweens[t].run(1);return e?s.resolveWith(a,[u,e]):s.rejectWith(a,[u,e]),this}}),c=u.props;for(function(e,t){var i,n,r,a,o;for(i in e)if(r=t[n=S.camelCase(i)],a=e[i],S.isArray(a)&&(r=a[1],a=e[i]=a[0]),i!==n&&(e[n]=a,delete e[i]),(o=S.cssHooks[n])&&"expand"in o)for(i in a=o.expand(a),delete e[n],a)i in e||(e[i]=a[i],t[i]=r);else t[n]=r}(c,u.opts.specialEasing);n<r;n++)if(i=at[n].call(u,a,c,u.opts))return i;return S.map(c,ut,u),S.isFunction(u.opts.start)&&u.opts.start.call(a,u),S.fx.timer(S.extend(l,{elem:a,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}S.Animation=S.extend(ct,{tweener:function(e,t){for(var i,n=0,r=(e=S.isFunction(e)?(t=e,["*"]):e.split(" ")).length;n<r;n++)i=e[n],ot[i]=ot[i]||[],ot[i].unshift(t)},prefilter:function(e,t){t?at.unshift(e):at.push(e)}}),S.speed=function(e,t,i){var n=e&&"object"==typeof e?S.extend({},e):{complete:i||!i&&t||S.isFunction(e)&&e,duration:e,easing:i&&t||t&&!S.isFunction(t)&&t};return n.duration=S.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in S.fx.speeds?S.fx.speeds[n.duration]:S.fx.speeds._default,null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){S.isFunction(n.old)&&n.old.call(this),n.queue&&S.dequeue(this,n.queue)},n},S.fn.extend({fadeTo:function(e,t,i,n){return this.filter($).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(t,e,i,n){function r(){var e=ct(this,S.extend({},t),o);(a||S._data(this,"finish"))&&e.stop(!0)}var a=S.isEmptyObject(t),o=S.speed(e,i,n);return r.finish=r,a||!1===o.queue?this.each(r):this.queue(o.queue,r)},stop:function(r,e,a){function o(e){var t=e.stop;delete e.stop,t(a)}return"string"!=typeof r&&(a=e,e=r,r=void 0),e&&!1!==r&&this.queue(r||"fx",[]),this.each(function(){var e=!0,t=null!=r&&r+"queueHooks",i=S.timers,n=S._data(this);if(t)n[t]&&n[t].stop&&o(n[t]);else for(t in n)n[t]&&n[t].stop&&rt.test(t)&&o(n[t]);for(t=i.length;t--;)i[t].elem!==this||null!=r&&i[t].queue!==r||(i[t].anim.stop(a),e=!1,i.splice(t,1));!e&&a||S.dequeue(this,r)})},finish:function(o){return!1!==o&&(o=o||"fx"),this.each(function(){var e,t=S._data(this),i=t[o+"queue"],n=t[o+"queueHooks"],r=S.timers,a=i?i.length:0;for(t.finish=!0,S.queue(this,o,[]),n&&n.stop&&n.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===o&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;e<a;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete t.finish})}}),S.each(["toggle","show","hide"],function(e,n){var r=S.fn[n];S.fn[n]=function(e,t,i){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(lt(n,!0),e,t,i)}}),S.each({slideDown:lt("show"),slideUp:lt("hide"),slideToggle:lt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,n){S.fn[e]=function(e,t,i){return this.animate(n,e,t,i)}}),S.timers=[],S.fx.tick=function(){var e,t=S.timers,i=0;for(Ke=S.now();i<t.length;i++)(e=t[i])()||t[i]!==e||t.splice(i--,1);t.length||S.fx.stop(),Ke=void 0},S.fx.timer=function(e){S.timers.push(e),e()?S.fx.start():S.timers.pop()},S.fx.interval=13,S.fx.start=function(){Ye=Ye||setInterval(S.fx.tick,S.fx.interval)},S.fx.stop=function(){clearInterval(Ye),Ye=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(n,e){return n=S.fx&&S.fx.speeds[n]||n,e=e||"fx",this.queue(e,function(e,t){var i=setTimeout(e,n);t.stop=function(){clearTimeout(i)}})},(Je=w.createElement("div")).setAttribute("className","t"),Je.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",et=Je.getElementsByTagName("a")[0],tt=(Ze=w.createElement("select")).appendChild(w.createElement("option")),Qe=Je.getElementsByTagName("input")[0],et.style.cssText="top:1px",v.getSetAttribute="t"!==Je.className,v.style=/top/.test(et.getAttribute("style")),v.hrefNormalized="/a"===et.getAttribute("href"),v.checkOn=!!Qe.value,v.optSelected=tt.selected,v.enctype=!!w.createElement("form").enctype,Ze.disabled=!0,v.optDisabled=!tt.disabled,(Qe=w.createElement("input")).setAttribute("value",""),v.input=""===Qe.getAttribute("value"),Qe.value="t",Qe.setAttribute("type","radio"),v.radioValue="t"===Qe.value;var dt=/\r/g;S.fn.extend({val:function(i){var n,e,r,t=this[0];return arguments.length?(r=S.isFunction(i),this.each(function(e){var t;1===this.nodeType&&(null==(t=r?i.call(this,e,S(this).val()):i)?t="":"number"==typeof t?t+="":S.isArray(t)&&(t=S.map(t,function(e){return null==e?"":e+""})),(n=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in n&&void 0!==n.set(this,t,"value")||(this.value=t))})):t?(n=S.valHooks[t.type]||S.valHooks[t.nodeName.toLowerCase()])&&"get"in n&&void 0!==(e=n.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(dt,""):null==e?"":e:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,"value");return null!=t?t:S.trim(S.text(e))}},select:{get:function(e){for(var t,i,n=e.options,r=e.selectedIndex,a="select-one"===e.type||r<0,o=a?null:[],s=a?r+1:n.length,l=r<0?s:a?r:0;l<s;l++)if(!(!(i=n[l]).selected&&l!==r||(v.optDisabled?i.disabled:null!==i.getAttribute("disabled"))||i.parentNode.disabled&&S.nodeName(i.parentNode,"optgroup"))){if(t=S(i).val(),a)return t;o.push(t)}return o},set:function(e,t){for(var i,n,r=e.options,a=S.makeArray(t),o=r.length;o--;)if(n=r[o],0<=S.inArray(S.valHooks.option.get(n),a))try{n.selected=i=!0}catch(e){n.scrollHeight}else n.selected=!1;return i||(e.selectedIndex=-1),r}}}}),S.each(["radio","checkbox"],function(){S.valHooks[this]={set:function(e,t){return S.isArray(t)?e.checked=0<=S.inArray(S(e).val(),t):void 0}},v.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var ht,pt,ft=S.expr.attrHandle,gt=/^(?:checked|selected)$/i,mt=v.getSetAttribute,vt=v.input;S.fn.extend({attr:function(e,t){return W(this,S.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){S.removeAttr(this,e)})}}),S.extend({attr:function(e,t,i){var n,r,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return typeof e.getAttribute===N?S.prop(e,t,i):(1===a&&S.isXMLDoc(e)||(t=t.toLowerCase(),n=S.attrHooks[t]||(S.expr.match.bool.test(t)?pt:ht)),void 0===i?!(n&&"get"in n&&null!==(r=n.get(e,t)))&&null==(r=S.find.attr(e,t))?void 0:r:null!==i?n&&"set"in n&&void 0!==(r=n.set(e,i,t))?r:(e.setAttribute(t,i+""),i):void S.removeAttr(e,t))},removeAttr:function(e,t){var i,n,r=0,a=t&&t.match(I);if(a&&1===e.nodeType)for(;i=a[r++];)n=S.propFix[i]||i,S.expr.match.bool.test(i)?vt&&mt||!gt.test(i)?e[n]=!1:e[S.camelCase("default-"+i)]=e[n]=!1:S.attr(e,i,""),e.removeAttribute(mt?i:n)},attrHooks:{type:{set:function(e,t){if(!v.radioValue&&"radio"===t&&S.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}}}),pt={set:function(e,t,i){return!1===t?S.removeAttr(e,i):vt&&mt||!gt.test(i)?e.setAttribute(!mt&&S.propFix[i]||i,i):e[S.camelCase("default-"+i)]=e[i]=!0,i}},S.each(S.expr.match.bool.source.match(/\w+/g),function(e,t){var a=ft[t]||S.find.attr;ft[t]=vt&&mt||!gt.test(t)?function(e,t,i){var n,r;return i||(r=ft[t],ft[t]=n,n=null!=a(e,t,i)?t.toLowerCase():null,ft[t]=r),n}:function(e,t,i){return i?void 0:e[S.camelCase("default-"+t)]?t.toLowerCase():null}}),vt&&mt||(S.attrHooks.value={set:function(e,t,i){return S.nodeName(e,"input")?void(e.defaultValue=t):ht&&ht.set(e,t,i)}}),mt||(ht={set:function(e,t,i){var n=e.getAttributeNode(i);return n||e.setAttributeNode(n=e.ownerDocument.createAttribute(i)),n.value=t+="","value"===i||t===e.getAttribute(i)?t:void 0}},ft.id=ft.name=ft.coords=function(e,t,i){var n;return i?void 0:(n=e.getAttributeNode(t))&&""!==n.value?n.value:null},S.valHooks.button={get:function(e,t){var i=e.getAttributeNode(t);return i&&i.specified?i.value:void 0},set:ht.set},S.attrHooks.contenteditable={set:function(e,t,i){ht.set(e,""!==t&&t,i)}},S.each(["width","height"],function(e,i){S.attrHooks[i]={set:function(e,t){return""===t?(e.setAttribute(i,"auto"),t):void 0}}})),v.style||(S.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var yt=/^(?:input|select|textarea|button|object)$/i,bt=/^(?:a|area)$/i;S.fn.extend({prop:function(e,t){return W(this,S.prop,e,t,1<arguments.length)},removeProp:function(e){return e=S.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(e){}})}}),S.extend({propFix:{for:"htmlFor",class:"className"},prop:function(e,t,i){var n,r,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return 1===a&&S.isXMLDoc(e)||(t=S.propFix[t]||t,r=S.propHooks[t]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:e[t]=i:r&&"get"in r&&null!==(n=r.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,"tabindex");return t?parseInt(t,10):yt.test(e.nodeName)||bt.test(e.nodeName)&&e.href?0:-1}}}}),v.hrefNormalized||S.each(["href","src"],function(e,t){S.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),v.optSelected||(S.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){S.propFix[this.toLowerCase()]=this}),v.enctype||(S.propFix.enctype="encoding");var _t=/[\t\r\n\f]/g;S.fn.extend({addClass:function(t){var e,i,n,r,a,o,s=0,l=this.length,u="string"==typeof t&&t;if(S.isFunction(t))return this.each(function(e){S(this).addClass(t.call(this,e,this.className))});if(u)for(e=(t||"").match(I)||[];s<l;s++)if(n=1===(i=this[s]).nodeType&&(i.className?(" "+i.className+" ").replace(_t," "):" ")){for(a=0;r=e[a++];)n.indexOf(" "+r+" ")<0&&(n+=r+" ");o=S.trim(n),i.className!==o&&(i.className=o)}return this},removeClass:function(t){var e,i,n,r,a,o,s=0,l=this.length,u=0===arguments.length||"string"==typeof t&&t;if(S.isFunction(t))return this.each(function(e){S(this).removeClass(t.call(this,e,this.className))});if(u)for(e=(t||"").match(I)||[];s<l;s++)if(n=1===(i=this[s]).nodeType&&(i.className?(" "+i.className+" ").replace(_t," "):"")){for(a=0;r=e[a++];)for(;0<=n.indexOf(" "+r+" ");)n=n.replace(" "+r+" "," ");o=t?S.trim(n):"",i.className!==o&&(i.className=o)}return this},toggleClass:function(r,t){var a=typeof r;return"boolean"==typeof t&&"string"==a?t?this.addClass(r):this.removeClass(r):this.each(S.isFunction(r)?function(e){S(this).toggleClass(r.call(this,e,this.className,t),t)}:function(){if("string"==a)for(var e,t=0,i=S(this),n=r.match(I)||[];e=n[t++];)i.hasClass(e)?i.removeClass(e):i.addClass(e);else a!==N&&"boolean"!=a||(this.className&&S._data(this,"__className__",this.className),this.className=!this.className&&!1!==r&&S._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",i=0,n=this.length;i<n;i++)if(1===this[i].nodeType&&0<=(" "+this[i].className+" ").replace(_t," ").indexOf(t))return!0;return!1}}),S.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,i){S.fn[i]=function(e,t){return 0<arguments.length?this.on(i,null,e,t):this.trigger(i)}}),S.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}});var Tt=S.now(),wt=/\?/,St=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;S.parseJSON=function(e){if(f.JSON&&f.JSON.parse)return f.JSON.parse(e+"");var r,a=null,t=S.trim(e+"");return t&&!S.trim(t.replace(St,function(e,t,i,n){return r&&t&&(a=0),0===a?e:(r=i||t,a+=!n-!i,"")}))?Function("return "+t)():S.error("Invalid JSON: "+e)},S.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{f.DOMParser?t=(new DOMParser).parseFromString(e,"text/xml"):((t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e))}catch(e){t=void 0}return t&&t.documentElement&&!t.getElementsByTagName("parsererror").length||S.error("Invalid XML: "+e),t};var kt,Ct,Et=/#.*$/,xt=/([?&])_=[^&]*/,At=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,It=/^(?:GET|HEAD)$/,Pt=/^\/\//,Ot=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Lt={},Dt={},Nt="*/".concat("*");try{Ct=location.href}catch(e){(Ct=w.createElement("a")).href="",Ct=Ct.href}function Mt(a){return function(e,t){"string"!=typeof e&&(t=e,e="*");var i,n=0,r=e.toLowerCase().match(I)||[];if(S.isFunction(t))for(;i=r[n++];)"+"===i.charAt(0)?(i=i.slice(1)||"*",(a[i]=a[i]||[]).unshift(t)):(a[i]=a[i]||[]).push(t)}}function Rt(t,r,a,o){var s={},l=t===Dt;function u(e){var n;return s[e]=!0,S.each(t[e]||[],function(e,t){var i=t(r,a,o);return"string"!=typeof i||l||s[i]?l?!(n=i):void 0:(r.dataTypes.unshift(i),u(i),!1)}),n}return u(r.dataTypes[0])||!s["*"]&&u("*")}function jt(e,t){var i,n,r=S.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((r[n]?e:i=i||{})[n]=t[n]);return i&&S.extend(!0,e,i),e}kt=Ot.exec(Ct.toLowerCase())||[],S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ct,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(kt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Nt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":S.parseJSON,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?jt(jt(e,S.ajaxSettings),t):jt(S.ajaxSettings,e)},ajaxPrefilter:Mt(Lt),ajaxTransport:Mt(Dt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,n,c,d,h,p,f,r,g=S.ajaxSetup({},t),m=g.context||g,v=g.context&&(m.nodeType||m.jquery)?S(m):S.event,y=S.Deferred(),b=S.Callbacks("once memory"),_=g.statusCode||{},a={},o={},T=0,s="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===T){if(!r)for(r={};t=At.exec(d);)r[t[1].toLowerCase()]=t[2];t=r[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===T?d:null},setRequestHeader:function(e,t){var i=e.toLowerCase();return T||(e=o[i]=o[i]||e,a[e]=t),this},overrideMimeType:function(e){return T||(g.mimeType=e),this},statusCode:function(e){var t;if(e)if(T<2)for(t in e)_[t]=[_[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||s;return f&&f.abort(t),l(0,t),this}};if(y.promise(w).complete=b.add,w.success=w.done,w.error=w.fail,g.url=((e||g.url||Ct)+"").replace(Et,"").replace(Pt,kt[1]+"//"),g.type=t.method||t.type||g.method||g.type,g.dataTypes=S.trim(g.dataType||"*").toLowerCase().match(I)||[""],null==g.crossDomain&&(i=Ot.exec(g.url.toLowerCase()),g.crossDomain=!(!i||i[1]===kt[1]&&i[2]===kt[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(kt[3]||("http:"===kt[1]?"80":"443")))),g.data&&g.processData&&"string"!=typeof g.data&&(g.data=S.param(g.data,g.traditional)),Rt(Lt,g,t,w),2===T)return w;for(n in(p=S.event&&g.global)&&0==S.active++&&S.event.trigger("ajaxStart"),g.type=g.type.toUpperCase(),g.hasContent=!It.test(g.type),c=g.url,g.hasContent||(g.data&&(c=g.url+=(wt.test(c)?"&":"?")+g.data,delete g.data),!1===g.cache&&(g.url=xt.test(c)?c.replace(xt,"$1_="+Tt++):c+(wt.test(c)?"&":"?")+"_="+Tt++)),g.ifModified&&(S.lastModified[c]&&w.setRequestHeader("If-Modified-Since",S.lastModified[c]),S.etag[c]&&w.setRequestHeader("If-None-Match",S.etag[c])),(g.data&&g.hasContent&&!1!==g.contentType||t.contentType)&&w.setRequestHeader("Content-Type",g.contentType),w.setRequestHeader("Accept",g.dataTypes[0]&&g.accepts[g.dataTypes[0]]?g.accepts[g.dataTypes[0]]+("*"!==g.dataTypes[0]?", "+Nt+"; q=0.01":""):g.accepts["*"]),g.headers)w.setRequestHeader(n,g.headers[n]);if(g.beforeSend&&(!1===g.beforeSend.call(m,w,g)||2===T))return w.abort();for(n in s="abort",{success:1,error:1,complete:1})w[n](g[n]);if(f=Rt(Dt,g,t,w)){w.readyState=1,p&&v.trigger("ajaxSend",[w,g]),g.async&&0<g.timeout&&(h=setTimeout(function(){w.abort("timeout")},g.timeout));try{T=1,f.send(a,l)}catch(e){if(!(T<2))throw e;l(-1,e)}}else l(-1,"No Transport");function l(e,t,i,n){var r,a,o,s,l,u=t;2!==T&&(T=2,h&&clearTimeout(h),f=void 0,d=n||"",w.readyState=0<e?4:0,r=200<=e&&e<300||304===e,i&&(s=function(e,t,i){for(var n,r,a,o,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(o in s)if(s[o]&&s[o].test(r)){l.unshift(o);break}if(l[0]in i)a=l[0];else{for(o in i){if(!l[0]||e.converters[o+" "+l[0]]){a=o;break}n=n||o}a=a||n}return a?(a!==l[0]&&l.unshift(a),i[a]):void 0}(g,w,i)),s=function(e,t,i,n){var r,a,o,s,l,u={},c=e.dataTypes.slice();if(c[1])for(o in e.converters)u[o.toLowerCase()]=e.converters[o];for(a=c.shift();a;)if(e.responseFields[a]&&(i[e.responseFields[a]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=a,a=c.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(!(o=u[l+" "+a]||u["* "+a]))for(r in u)if((s=r.split(" "))[1]===a&&(o=u[l+" "+s[0]]||u["* "+s[0]])){!0===o?o=u[r]:!0!==u[r]&&(a=s[0],c.unshift(s[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+l+" to "+a}}}return{state:"success",data:t}}(g,s,w,r),r?(g.ifModified&&((l=w.getResponseHeader("Last-Modified"))&&(S.lastModified[c]=l),(l=w.getResponseHeader("etag"))&&(S.etag[c]=l)),204===e||"HEAD"===g.type?u="nocontent":304===e?u="notmodified":(u=s.state,a=s.data,r=!(o=s.error))):(o=u,!e&&u||(u="error",e<0&&(e=0))),w.status=e,w.statusText=(t||u)+"",r?y.resolveWith(m,[a,u,w]):y.rejectWith(m,[w,u,o]),w.statusCode(_),_=void 0,p&&v.trigger(r?"ajaxSuccess":"ajaxError",[w,g,r?a:o]),b.fireWith(m,[w,u]),p&&(v.trigger("ajaxComplete",[w,g]),--S.active||S.event.trigger("ajaxStop")))}return w},getJSON:function(e,t,i){return S.get(e,t,i,"json")},getScript:function(e,t){return S.get(e,void 0,t,"script")}}),S.each(["get","post"],function(e,r){S[r]=function(e,t,i,n){return S.isFunction(t)&&(n=n||i,i=t,t=void 0),S.ajax({url:e,type:r,dataType:n,data:t,success:i})}}),S._evalUrl=function(e){return S.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},S.fn.extend({wrapAll:function(t){if(S.isFunction(t))return this.each(function(e){S(this).wrapAll(t.call(this,e))});if(this[0]){var e=S(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(i){return this.each(S.isFunction(i)?function(e){S(this).wrapInner(i.call(this,e))}:function(){var e=S(this),t=e.contents();t.length?t.wrapAll(i):e.append(i)})},wrap:function(t){var i=S.isFunction(t);return this.each(function(e){S(this).wrapAll(i?t.call(this,e):t)})},unwrap:function(){return this.parent().each(function(){S.nodeName(this,"body")||S(this).replaceWith(this.childNodes)}).end()}}),S.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!v.reliableHiddenOffsets()&&"none"===(e.style&&e.style.display||S.css(e,"display"))},S.expr.filters.visible=function(e){return!S.expr.filters.hidden(e)};var Ut=/%20/g,Bt=/\[\]$/,Ft=/\r?\n/g,$t=/^(?:submit|button|image|reset|file)$/i,Ht=/^(?:input|select|textarea|keygen)/i;function qt(i,e,n,r){var t;if(S.isArray(e))S.each(e,function(e,t){n||Bt.test(i)?r(i,t):qt(i+"["+("object"==typeof t?e:"")+"]",t,n,r)});else if(n||"object"!==S.type(e))r(i,e);else for(t in e)qt(i+"["+t+"]",e[t],n,r)}S.param=function(e,t){function i(e,t){t=S.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)}var n,r=[];if(void 0===t&&(t=S.ajaxSettings&&S.ajaxSettings.traditional),S.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,function(){i(this.name,this.value)});else for(n in e)qt(n,e[n],t,i);return r.join("&").replace(Ut,"+")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=S.prop(this,"elements");return e?S.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!S(this).is(":disabled")&&Ht.test(this.nodeName)&&!$t.test(e)&&(this.checked||!V.test(e))}).map(function(e,t){var i=S(this).val();return null==i?null:S.isArray(i)?S.map(i,function(e){return{name:t.name,value:e.replace(Ft,"\r\n")}}):{name:t.name,value:i.replace(Ft,"\r\n")}}).get()}}),S.ajaxSettings.xhr=void 0!==f.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&Gt()||function(){try{return new f.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}()}:Gt;var Wt=0,Vt={},zt=S.ajaxSettings.xhr();function Gt(){try{return new f.XMLHttpRequest}catch(e){}}f.attachEvent&&f.attachEvent("onunload",function(){for(var e in Vt)Vt[e](void 0,!0)}),v.cors=!!zt&&"withCredentials"in zt,(zt=v.ajax=!!zt)&&S.ajaxTransport(function(l){var u;if(!l.crossDomain||v.cors)return{send:function(e,a){var t,o=l.xhr(),s=++Wt;if(o.open(l.type,l.url,l.async,l.username,l.password),l.xhrFields)for(t in l.xhrFields)o[t]=l.xhrFields[t];for(t in l.mimeType&&o.overrideMimeType&&o.overrideMimeType(l.mimeType),l.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)void 0!==e[t]&&o.setRequestHeader(t,e[t]+"");o.send(l.hasContent&&l.data||null),u=function(e,t){var i,n,r;if(u&&(t||4===o.readyState))if(delete Vt[s],u=void 0,o.onreadystatechange=S.noop,t)4!==o.readyState&&o.abort();else{r={},i=o.status,"string"==typeof o.responseText&&(r.text=o.responseText);try{n=o.statusText}catch(e){n=""}i||!l.isLocal||l.crossDomain?1223===i&&(i=204):i=r.text?200:404}r&&a(i,n,r,o.getAllResponseHeaders())},l.async?4===o.readyState?setTimeout(u):o.onreadystatechange=Vt[s]=u:u()},abort:function(){u&&u(void 0,!0)}}}),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),S.ajaxTransport("script",function(t){if(t.crossDomain){var n,r=w.head||S("head")[0]||w.documentElement;return{send:function(e,i){(n=w.createElement("script")).async=!0,t.scriptCharset&&(n.charset=t.scriptCharset),n.src=t.url,n.onload=n.onreadystatechange=function(e,t){!t&&n.readyState&&!/loaded|complete/.test(n.readyState)||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,"success"))},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(void 0,!0)}}}});var Xt=[],Kt=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Xt.pop()||S.expando+"_"+Tt++;return this[e]=!0,e}}),S.ajaxPrefilter("json jsonp",function(e,t,i){var n,r,a,o=!1!==e.jsonp&&(Kt.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Kt.test(e.data)&&"data");return o||"jsonp"===e.dataTypes[0]?(n=e.jsonpCallback=S.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,o?e[o]=e[o].replace(Kt,"$1"+n):!1!==e.jsonp&&(e.url+=(wt.test(e.url)?"&":"?")+e.jsonp+"="+n),e.converters["script json"]=function(){return a||S.error(n+" was not called"),a[0]},e.dataTypes[0]="json",r=f[n],f[n]=function(){a=arguments},i.always(function(){f[n]=r,e[n]&&(e.jsonpCallback=t.jsonpCallback,Xt.push(n)),a&&S.isFunction(r)&&r(a[0]),a=r=void 0}),"script"):void 0}),S.parseHTML=function(e,t,i){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(i=t,t=!1),t=t||w;var n=y.exec(e),r=!i&&[];return n?[t.createElement(n[1])]:(n=S.buildFragment([e],t,r),r&&r.length&&S(r).remove(),S.merge([],n.childNodes))};var Yt=S.fn.load;S.fn.load=function(e,t,i){if("string"!=typeof e&&Yt)return Yt.apply(this,arguments);var n,r,a,o=this,s=e.indexOf(" ");return 0<=s&&(n=S.trim(e.slice(s,e.length)),e=e.slice(0,s)),S.isFunction(t)?(i=t,t=void 0):t&&"object"==typeof t&&(a="POST"),0<o.length&&S.ajax({url:e,type:a,dataType:"html",data:t}).done(function(e){r=arguments,o.html(n?S("<div>").append(S.parseHTML(e)).find(n):e)}).complete(i&&function(e,t){o.each(i,r||[e.responseText,t,e])}),this},S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){S.fn[t]=function(e){return this.on(t,e)}}),S.expr.filters.animated=function(t){return S.grep(S.timers,function(e){return t===e.elem}).length};var Qt=f.document.documentElement;function Jt(e){return S.isWindow(e)?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}S.offset={setOffset:function(e,t,i){var n,r,a,o,s,l,u=S.css(e,"position"),c=S(e),d={};"static"===u&&(e.style.position="relative"),s=c.offset(),a=S.css(e,"top"),l=S.css(e,"left"),r=("absolute"===u||"fixed"===u)&&-1<S.inArray("auto",[a,l])?(o=(n=c.position()).top,n.left):(o=parseFloat(a)||0,parseFloat(l)||0),S.isFunction(t)&&(t=t.call(e,i,s)),null!=t.top&&(d.top=t.top-s.top+o),null!=t.left&&(d.left=t.left-s.left+r),"using"in t?t.using.call(e,d):c.css(d)}},S.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){S.offset.setOffset(this,t,e)});var e,i,n={top:0,left:0},r=this[0],a=r&&r.ownerDocument;return a?(e=a.documentElement,S.contains(e,r)?(typeof r.getBoundingClientRect!==N&&(n=r.getBoundingClientRect()),i=Jt(a),{top:n.top+(i.pageYOffset||e.scrollTop)-(e.clientTop||0),left:n.left+(i.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}):n):void 0},position:function(){if(this[0]){var e,t,i={top:0,left:0},n=this[0];return"fixed"===S.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),S.nodeName(e[0],"html")||(i=e.offset()),i.top+=S.css(e[0],"borderTopWidth",!0),i.left+=S.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-S.css(n,"marginTop",!0),left:t.left-i.left-S.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||Qt;e&&!S.nodeName(e,"html")&&"static"===S.css(e,"position");)e=e.offsetParent;return e||Qt})}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,r){var a=/Y/.test(r);S.fn[t]=function(e){return W(this,function(e,t,i){var n=Jt(e);return void 0===i?n?r in n?n[r]:n.document.documentElement[t]:e[t]:void(n?n.scrollTo(a?S(n).scrollLeft():i,a?i:S(n).scrollTop()):e[t]=i)},t,e,arguments.length,null)}}),S.each(["top","left"],function(e,i){S.cssHooks[i]=Ne(v.pixelPosition,function(e,t){return t?(t=Pe(e,i),Le.test(t)?S(e).position()[i]+"px":t):void 0})}),S.each({Height:"height",Width:"width"},function(a,o){S.each({padding:"inner"+a,content:o,"":"outer"+a},function(n,e){S.fn[e]=function(e,t){var i=arguments.length&&(n||"boolean"!=typeof e),r=n||(!0===e||!0===t?"margin":"border");return W(this,function(e,t,i){var n;return S.isWindow(e)?e.document.documentElement["client"+a]:9===e.nodeType?(n=e.documentElement,Math.max(e.body["scroll"+a],n["scroll"+a],e.body["offset"+a],n["offset"+a],n["client"+a])):void 0===i?S.css(e,t,r):S.style(e,t,i,r)},o,i?e:void 0,i,null)}})}),S.fn.size=function(){return this.length},S.fn.andSelf=S.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return S});var Zt=f.jQuery,ei=f.$;return S.noConflict=function(e){return f.$===S&&(f.$=ei),e&&f.jQuery===S&&(f.jQuery=Zt),S},typeof e===N&&(f.jQuery=f.$=S),S}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");!function(){"use strict";var e=jQuery.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1||3<e[0])throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(),function(n){"use strict";n.fn.emulateTransitionEnd=function(e){var t=!1,i=this;return n(this).one("bsTransitionEnd",function(){t=!0}),setTimeout(function(){t||n(i).trigger(n.support.transition.end)},e),this},n(function(){n.support.transition=function(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in t)if(void 0!==e.style[i])return{end:t[i]};return!1}(),n.support.transition&&(n.event.special.bsTransitionEnd={bindType:n.support.transition.end,delegateType:n.support.transition.end,handle:function(e){if(n(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}})})}(jQuery),function(a){"use strict";function o(e){a(e).on("click",t,this.close)}var t='[data-dismiss="alert"]';o.VERSION="3.3.7",o.TRANSITION_DURATION=150,o.prototype.close=function(e){var t=a(this),i=t.attr("data-target");i=i||(i=t.attr("href"))&&i.replace(/.*(?=#[^\s]*$)/,"");var n=a("#"===i?[]:i);function r(){n.detach().trigger("closed.bs.alert").remove()}e&&e.preventDefault(),n.length||(n=t.closest(".alert")),n.trigger(e=a.Event("close.bs.alert")),e.isDefaultPrevented()||(n.removeClass("in"),a.support.transition&&n.hasClass("fade")?n.one("bsTransitionEnd",r).emulateTransitionEnd(o.TRANSITION_DURATION):r())};var e=a.fn.alert;a.fn.alert=function(i){return this.each(function(){var e=a(this),t=e.data("bs.alert");t||e.data("bs.alert",t=new o(this)),"string"==typeof i&&t[i].call(e)})},a.fn.alert.Constructor=o,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on("click.bs.alert.data-api",t,o.prototype.close)}(jQuery),function(a){"use strict";var r=function(e,t){this.$element=a(e),this.options=a.extend({},r.DEFAULTS,t),this.isLoading=!1};function i(n){return this.each(function(){var e=a(this),t=e.data("bs.button"),i="object"==typeof n&&n;t||e.data("bs.button",t=new r(this,i)),"toggle"==n?t.toggle():n&&t.setState(n)})}r.VERSION="3.3.7",r.DEFAULTS={loadingText:"loading..."},r.prototype.setState=function(e){var t="disabled",i=this.$element,n=i.is("input")?"val":"html",r=i.data();e+="Text",null==r.resetText&&i.data("resetText",i[n]()),setTimeout(a.proxy(function(){i[n](null==r[e]?this.options[e]:r[e]),"loadingText"==e?(this.isLoading=!0,i.addClass(t).attr(t,t).prop(t,!0)):this.isLoading&&(this.isLoading=!1,i.removeClass(t).removeAttr(t).prop(t,!1))},this),0)},r.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var i=this.$element.find("input");"radio"==i.prop("type")?(i.prop("checked")&&(e=!1),t.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==i.prop("type")&&(i.prop("checked")!==this.$element.hasClass("active")&&(e=!1),this.$element.toggleClass("active")),i.prop("checked",this.$element.hasClass("active")),e&&i.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var e=a.fn.button;a.fn.button=i,a.fn.button.Constructor=r,a.fn.button.noConflict=function(){return a.fn.button=e,this},a(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(e){var t=a(e.target).closest(".btn");i.call(t,"toggle"),a(e.target).is('input[type="radio"], input[type="checkbox"]')||(e.preventDefault(),t.is("input,button")?t.trigger("focus"):t.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){a(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),function(d){"use strict";function h(e,t){this.$element=d(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=t,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",d.proxy(this.keydown,this)),"hover"!=this.options.pause||"ontouchstart"in document.documentElement||this.$element.on("mouseenter.bs.carousel",d.proxy(this.pause,this)).on("mouseleave.bs.carousel",d.proxy(this.cycle,this))}function o(r){return this.each(function(){var e=d(this),t=e.data("bs.carousel"),i=d.extend({},h.DEFAULTS,e.data(),"object"==typeof r&&r),n="string"==typeof r?r:i.slide;t||e.data("bs.carousel",t=new h(this,i)),"number"==typeof r?t.to(r):n?t[n]():i.interval&&t.pause().cycle()})}h.VERSION="3.3.7",h.TRANSITION_DURATION=600,h.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},h.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},h.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(d.proxy(this.next,this),this.options.interval)),this},h.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},h.prototype.getItemForDirection=function(e,t){var i=this.getItemIndex(t);if(("prev"==e&&0===i||"next"==e&&i==this.$items.length-1)&&!this.options.wrap)return t;var n=(i+("prev"==e?-1:1))%this.$items.length;return this.$items.eq(n)},h.prototype.to=function(e){var t=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(e>this.$items.length-1||e<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):i==e?this.pause().cycle():this.slide(i<e?"next":"prev",this.$items.eq(e))},h.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&d.support.transition&&(this.$element.trigger(d.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},h.prototype.next=function(){if(!this.sliding)return this.slide("next")},h.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},h.prototype.slide=function(e,t){var i=this.$element.find(".item.active"),n=t||this.getItemForDirection(e,i),r=this.interval,a="next"==e?"left":"right",o=this;if(n.hasClass("active"))return this.sliding=!1;var s=n[0],l=d.Event("slide.bs.carousel",{relatedTarget:s,direction:a});if(this.$element.trigger(l),!l.isDefaultPrevented()){if(this.sliding=!0,r&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var u=d(this.$indicators.children()[this.getItemIndex(n)]);u&&u.addClass("active")}var c=d.Event("slid.bs.carousel",{relatedTarget:s,direction:a});return d.support.transition&&this.$element.hasClass("slide")?(n.addClass(e),n[0].offsetWidth,i.addClass(a),n.addClass(a),i.one("bsTransitionEnd",function(){n.removeClass([e,a].join(" ")).addClass("active"),i.removeClass(["active",a].join(" ")),o.sliding=!1,setTimeout(function(){o.$element.trigger(c)},0)}).emulateTransitionEnd(h.TRANSITION_DURATION)):(i.removeClass("active"),n.addClass("active"),this.sliding=!1,this.$element.trigger(c)),r&&this.cycle(),this}};var e=d.fn.carousel;function t(e){var t,i=d(this),n=d(i.attr("data-target")||(t=i.attr("href"))&&t.replace(/.*(?=#[^\s]+$)/,""));if(n.hasClass("carousel")){var r=d.extend({},n.data(),i.data()),a=i.attr("data-slide-to");a&&(r.interval=!1),o.call(n,r),a&&n.data("bs.carousel").to(a),e.preventDefault()}}d.fn.carousel=o,d.fn.carousel.Constructor=h,d.fn.carousel.noConflict=function(){return d.fn.carousel=e,this},d(document).on("click.bs.carousel.data-api","[data-slide]",t).on("click.bs.carousel.data-api","[data-slide-to]",t),d(window).on("load",function(){d('[data-ride="carousel"]').each(function(){var e=d(this);o.call(e,e.data())})})}(jQuery),function(o){"use strict";var s=function(e,t){this.$element=o(e),this.options=o.extend({},s.DEFAULTS,t),this.$trigger=o('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};function r(e){var t,i=e.attr("data-target")||(t=e.attr("href"))&&t.replace(/.*(?=#[^\s]+$)/,"");return o(i)}function l(n){return this.each(function(){var e=o(this),t=e.data("bs.collapse"),i=o.extend({},s.DEFAULTS,e.data(),"object"==typeof n&&n);!t&&i.toggle&&/show|hide/.test(n)&&(i.toggle=!1),t||e.data("bs.collapse",t=new s(this,i)),"string"==typeof n&&t[n]()})}s.VERSION="3.3.7",s.TRANSITION_DURATION=350,s.DEFAULTS={toggle:!0},s.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},s.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,t=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(t&&t.length&&(e=t.data("bs.collapse"))&&e.transitioning)){var i=o.Event("show.bs.collapse");if(this.$element.trigger(i),!i.isDefaultPrevented()){t&&t.length&&(l.call(t,"hide"),e||t.data("bs.collapse",null));var n=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[n](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var r=function(){this.$element.removeClass("collapsing").addClass("collapse in")[n](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!o.support.transition)return r.call(this);var a=o.camelCase(["scroll",n].join("-"));this.$element.one("bsTransitionEnd",o.proxy(r,this)).emulateTransitionEnd(s.TRANSITION_DURATION)[n](this.$element[0][a])}}}},s.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=o.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var t=this.dimension();this.$element[t](this.$element[t]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!o.support.transition)return i.call(this);this.$element[t](0).one("bsTransitionEnd",o.proxy(i,this)).emulateTransitionEnd(s.TRANSITION_DURATION)}}},s.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},s.prototype.getParent=function(){return o(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(o.proxy(function(e,t){var i=o(t);this.addAriaAndCollapsedClass(r(i),i)},this)).end()},s.prototype.addAriaAndCollapsedClass=function(e,t){var i=e.hasClass("in");e.attr("aria-expanded",i),t.toggleClass("collapsed",!i).attr("aria-expanded",i)};var e=o.fn.collapse;o.fn.collapse=l,o.fn.collapse.Constructor=s,o.fn.collapse.noConflict=function(){return o.fn.collapse=e,this},o(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(e){var t=o(this);t.attr("data-target")||e.preventDefault();var i=r(t),n=i.data("bs.collapse")?"toggle":t.data();l.call(i,n)})}(jQuery),function(o){"use strict";function n(e){o(e).on("click.bs.dropdown",this.toggle)}var s='[data-toggle="dropdown"]';function l(e){var t=e.attr("data-target"),i=(t=t||(t=e.attr("href"))&&/#[A-Za-z]/.test(t)&&t.replace(/.*(?=#[^\s]*$)/,""))&&o(t);return i&&i.length?i:e.parent()}function a(n){n&&3===n.which||(o(".dropdown-backdrop").remove(),o(s).each(function(){var e=o(this),t=l(e),i={relatedTarget:this};t.hasClass("open")&&(n&&"click"==n.type&&/input|textarea/i.test(n.target.tagName)&&o.contains(t[0],n.target)||(t.trigger(n=o.Event("hide.bs.dropdown",i)),n.isDefaultPrevented()||(e.attr("aria-expanded","false"),t.removeClass("open").trigger(o.Event("hidden.bs.dropdown",i)))))}))}n.VERSION="3.3.7",n.prototype.toggle=function(e){var t=o(this);if(!t.is(".disabled, :disabled")){var i=l(t),n=i.hasClass("open");if(a(),!n){"ontouchstart"in document.documentElement&&!i.closest(".navbar-nav").length&&o(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(o(this)).on("click",a);var r={relatedTarget:this};if(i.trigger(e=o.Event("show.bs.dropdown",r)),e.isDefaultPrevented())return;t.trigger("focus").attr("aria-expanded","true"),i.toggleClass("open").trigger(o.Event("shown.bs.dropdown",r))}return!1}},n.prototype.keydown=function(e){if(/(38|40|27|32)/.test(e.which)&&!/input|textarea/i.test(e.target.tagName)){var t=o(this);if(e.preventDefault(),e.stopPropagation(),!t.is(".disabled, :disabled")){var i=l(t),n=i.hasClass("open");if(!n&&27!=e.which||n&&27==e.which)return 27==e.which&&i.find(s).trigger("focus"),t.trigger("click");var r=i.find(".dropdown-menu li:not(.disabled):visible a");if(r.length){var a=r.index(e.target);38==e.which&&0<a&&a--,40==e.which&&a<r.length-1&&a++,~a||(a=0),r.eq(a).trigger("focus")}}}};var e=o.fn.dropdown;o.fn.dropdown=function(i){return this.each(function(){var e=o(this),t=e.data("bs.dropdown");t||e.data("bs.dropdown",t=new n(this)),"string"==typeof i&&t[i].call(e)})},o.fn.dropdown.Constructor=n,o.fn.dropdown.noConflict=function(){return o.fn.dropdown=e,this},o(document).on("click.bs.dropdown.data-api",a).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",s,n.prototype.toggle).on("keydown.bs.dropdown.data-api",s,n.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",n.prototype.keydown)}(jQuery),function(a){"use strict";function o(e,t){this.options=t,this.$body=a(document.body),this.$element=a(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))}function s(n,r){return this.each(function(){var e=a(this),t=e.data("bs.modal"),i=a.extend({},o.DEFAULTS,e.data(),"object"==typeof n&&n);t||e.data("bs.modal",t=new o(this,i)),"string"==typeof n?t[n](r):i.show&&t.show(r)})}o.VERSION="3.3.7",o.TRANSITION_DURATION=300,o.BACKDROP_TRANSITION_DURATION=150,o.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},o.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},o.prototype.show=function(i){var n=this,e=a.Event("show.bs.modal",{relatedTarget:i});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){n.$element.one("mouseup.dismiss.bs.modal",function(e){a(e.target).is(n.$element)&&(n.ignoreBackdropClick=!0)})}),this.backdrop(function(){var e=a.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(n.$body),n.$element.show().scrollTop(0),n.adjustDialog(),e&&n.$element[0].offsetWidth,n.$element.addClass("in"),n.enforceFocus();var t=a.Event("shown.bs.modal",{relatedTarget:i});e?n.$dialog.one("bsTransitionEnd",function(){n.$element.trigger("focus").trigger(t)}).emulateTransitionEnd(o.TRANSITION_DURATION):n.$element.trigger("focus").trigger(t)}))},o.prototype.hide=function(e){e&&e.preventDefault(),e=a.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(o.TRANSITION_DURATION):this.hideModal())},o.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(e){document===e.target||this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},o.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},o.prototype.resize=function(){this.isShown?a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this)):a(window).off("resize.bs.modal")},o.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},o.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},o.prototype.backdrop=function(e){var t=this,i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var n=a.support.transition&&i;if(this.$backdrop=a(document.createElement("div")).addClass("modal-backdrop "+i).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(e){this.ignoreBackdropClick?this.ignoreBackdropClick=!1:e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide())},this)),n&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;n?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(o.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var r=function(){t.removeBackdrop(),e&&e()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",r).emulateTransitionEnd(o.BACKDROP_TRANSITION_DURATION):r()}else e&&e()},o.prototype.handleUpdate=function(){this.adjustDialog()},o.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},o.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},o.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},o.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},o.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},o.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var e=a.fn.modal;a.fn.modal=s,a.fn.modal.Constructor=o,a.fn.modal.noConflict=function(){return a.fn.modal=e,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(e){var t=a(this),i=t.attr("href"),n=a(t.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),r=n.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(i)&&i},n.data(),t.data());t.is("a")&&e.preventDefault(),n.one("show.bs.modal",function(e){e.isDefaultPrevented()||n.one("hidden.bs.modal",function(){t.is(":visible")&&t.trigger("focus")})}),s.call(n,r,this)})}(jQuery),function(g){"use strict";function m(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",e,t)}m.VERSION="3.3.7",m.TRANSITION_DURATION=150,m.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},m.prototype.init=function(e,t,i){if(this.enabled=!0,this.type=e,this.$element=g(t),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&g(g.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var n=this.options.trigger.split(" "),r=n.length;r--;){var a=n[r];if("click"==a)this.$element.on("click."+this.type,this.options.selector,g.proxy(this.toggle,this));else if("manual"!=a){var o="hover"==a?"mouseenter":"focusin",s="hover"==a?"mouseleave":"focusout";this.$element.on(o+"."+this.type,this.options.selector,g.proxy(this.enter,this)),this.$element.on(s+"."+this.type,this.options.selector,g.proxy(this.leave,this))}}this.options.selector?this._options=g.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},m.prototype.getDefaults=function(){return m.DEFAULTS},m.prototype.getOptions=function(e){return(e=g.extend({},this.getDefaults(),this.$element.data(),e)).delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},m.prototype.getDelegateOptions=function(){var i={},n=this.getDefaults();return this._options&&g.each(this._options,function(e,t){n[e]!=t&&(i[e]=t)}),i},m.prototype.enter=function(e){var t=e instanceof this.constructor?e:g(e.currentTarget).data("bs."+this.type);if(t||(t=new this.constructor(e.currentTarget,this.getDelegateOptions()),g(e.currentTarget).data("bs."+this.type,t)),e instanceof g.Event&&(t.inState["focusin"==e.type?"focus":"hover"]=!0),t.tip().hasClass("in")||"in"==t.hoverState)t.hoverState="in";else{if(clearTimeout(t.timeout),t.hoverState="in",!t.options.delay||!t.options.delay.show)return t.show();t.timeout=setTimeout(function(){"in"==t.hoverState&&t.show()},t.options.delay.show)}},m.prototype.isInStateTrue=function(){for(var e in this.inState)if(this.inState[e])return!0;return!1},m.prototype.leave=function(e){var t=e instanceof this.constructor?e:g(e.currentTarget).data("bs."+this.type);if(t||(t=new this.constructor(e.currentTarget,this.getDelegateOptions()),g(e.currentTarget).data("bs."+this.type,t)),e instanceof g.Event&&(t.inState["focusout"==e.type?"focus":"hover"]=!1),!t.isInStateTrue()){if(clearTimeout(t.timeout),t.hoverState="out",!t.options.delay||!t.options.delay.hide)return t.hide();t.timeout=setTimeout(function(){"out"==t.hoverState&&t.hide()},t.options.delay.hide)}},m.prototype.show=function(){var e=g.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var t=g.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!t)return;var i=this,n=this.tip(),r=this.getUID(this.type);this.setContent(),n.attr("id",r),this.$element.attr("aria-describedby",r),this.options.animation&&n.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,n[0],this.$element[0]):this.options.placement,o=/\s?auto?\s?/i,s=o.test(a);s&&(a=a.replace(o,"")||"top"),n.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this),this.options.container?n.appendTo(this.options.container):n.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var l=this.getPosition(),u=n[0].offsetWidth,c=n[0].offsetHeight;if(s){var d=a,h=this.getPosition(this.$viewport);a="bottom"==a&&l.bottom+c>h.bottom?"top":"top"==a&&l.top-c<h.top?"bottom":"right"==a&&l.right+u>h.width?"left":"left"==a&&l.left-u<h.left?"right":a,n.removeClass(d).addClass(a)}var p=this.getCalculatedOffset(a,l,u,c);this.applyPlacement(p,a);var f=function(){var e=i.hoverState;i.$element.trigger("shown.bs."+i.type),i.hoverState=null,"out"==e&&i.leave(i)};g.support.transition&&this.$tip.hasClass("fade")?n.one("bsTransitionEnd",f).emulateTransitionEnd(m.TRANSITION_DURATION):f()}},m.prototype.applyPlacement=function(e,t){var i=this.tip(),n=i[0].offsetWidth,r=i[0].offsetHeight,a=parseInt(i.css("margin-top"),10),o=parseInt(i.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(o)&&(o=0),e.top+=a,e.left+=o,g.offset.setOffset(i[0],g.extend({using:function(e){i.css({top:Math.round(e.top),left:Math.round(e.left)})}},e),0),i.addClass("in");var s=i[0].offsetWidth,l=i[0].offsetHeight;"top"==t&&l!=r&&(e.top=e.top+r-l);var u=this.getViewportAdjustedDelta(t,e,s,l);u.left?e.left+=u.left:e.top+=u.top;var c=/top|bottom/.test(t),d=c?2*u.left-n+s:2*u.top-r+l,h=c?"offsetWidth":"offsetHeight";i.offset(e),this.replaceArrow(d,i[0][h],c)},m.prototype.replaceArrow=function(e,t,i){this.arrow().css(i?"left":"top",50*(1-e/t)+"%").css(i?"top":"left","")},m.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},m.prototype.hide=function(e){var t=this,i=g(this.$tip),n=g.Event("hide.bs."+this.type);function r(){"in"!=t.hoverState&&i.detach(),t.$element&&t.$element.removeAttr("aria-describedby").trigger("hidden.bs."+t.type),e&&e()}if(this.$element.trigger(n),!n.isDefaultPrevented())return i.removeClass("in"),g.support.transition&&i.hasClass("fade")?i.one("bsTransitionEnd",r).emulateTransitionEnd(m.TRANSITION_DURATION):r(),this.hoverState=null,this},m.prototype.fixTitle=function(){var e=this.$element;!e.attr("title")&&"string"==typeof e.attr("data-original-title")||e.attr("data-original-title",e.attr("title")||"").attr("title","")},m.prototype.hasContent=function(){return this.getTitle()},m.prototype.getPosition=function(e){var t=(e=e||this.$element)[0],i="BODY"==t.tagName,n=t.getBoundingClientRect();null==n.width&&(n=g.extend({},n,{width:n.right-n.left,height:n.bottom-n.top}));var r=window.SVGElement&&t instanceof window.SVGElement,a=i?{top:0,left:0}:r?null:e.offset(),o={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},s=i?{width:g(window).width(),height:g(window).height()}:null;return g.extend({},n,o,s,a)},m.prototype.getCalculatedOffset=function(e,t,i,n){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-i/2}:"top"==e?{top:t.top-n,left:t.left+t.width/2-i/2}:"left"==e?{top:t.top+t.height/2-n/2,left:t.left-i}:{top:t.top+t.height/2-n/2,left:t.left+t.width}},m.prototype.getViewportAdjustedDelta=function(e,t,i,n){var r={top:0,left:0};if(!this.$viewport)return r;var a=this.options.viewport&&this.options.viewport.padding||0,o=this.getPosition(this.$viewport);if(/right|left/.test(e)){var s=t.top-a-o.scroll,l=t.top+a-o.scroll+n;s<o.top?r.top=o.top-s:l>o.top+o.height&&(r.top=o.top+o.height-l)}else{var u=t.left-a,c=t.left+a+i;u<o.left?r.left=o.left-u:c>o.right&&(r.left=o.left+o.width-c)}return r},m.prototype.getTitle=function(){var e=this.$element,t=this.options;return e.attr("data-original-title")||("function"==typeof t.title?t.title.call(e[0]):t.title)},m.prototype.getUID=function(e){for(;e+=~~(1e6*Math.random()),document.getElementById(e););return e},m.prototype.tip=function(){if(!this.$tip&&(this.$tip=g(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},m.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},m.prototype.enable=function(){this.enabled=!0},m.prototype.disable=function(){this.enabled=!1},m.prototype.toggleEnabled=function(){this.enabled=!this.enabled},m.prototype.toggle=function(e){var t=this;e&&((t=g(e.currentTarget).data("bs."+this.type))||(t=new this.constructor(e.currentTarget,this.getDelegateOptions()),g(e.currentTarget).data("bs."+this.type,t))),e?(t.inState.click=!t.inState.click,t.isInStateTrue()?t.enter(t):t.leave(t)):t.tip().hasClass("in")?t.leave(t):t.enter(t)},m.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type),e.$tip&&e.$tip.detach(),e.$tip=null,e.$arrow=null,e.$viewport=null,e.$element=null})};var e=g.fn.tooltip;g.fn.tooltip=function(n){return this.each(function(){var e=g(this),t=e.data("bs.tooltip"),i="object"==typeof n&&n;!t&&/destroy|hide/.test(n)||(t||e.data("bs.tooltip",t=new m(this,i)),"string"==typeof n&&t[n]())})},g.fn.tooltip.Constructor=m,g.fn.tooltip.noConflict=function(){return g.fn.tooltip=e,this}}(jQuery),function(r){"use strict";function a(e,t){this.init("popover",e,t)}if(!r.fn.tooltip)throw new Error("Popover requires tooltip.js");a.VERSION="3.3.7",a.DEFAULTS=r.extend({},r.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),((a.prototype=r.extend({},r.fn.tooltip.Constructor.prototype)).constructor=a).prototype.getDefaults=function(){return a.DEFAULTS},a.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),i=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof i?"html":"append":"text"](i),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},a.prototype.hasContent=function(){return this.getTitle()||this.getContent()},a.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},a.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var e=r.fn.popover;r.fn.popover=function(n){return this.each(function(){var e=r(this),t=e.data("bs.popover"),i="object"==typeof n&&n;!t&&/destroy|hide/.test(n)||(t||e.data("bs.popover",t=new a(this,i)),"string"==typeof n&&t[n]())})},r.fn.popover.Constructor=a,r.fn.popover.noConflict=function(){return r.fn.popover=e,this}}(jQuery),function(a){"use strict";function r(e,t){this.$body=a(document.body),this.$scrollElement=a(e).is(document.body)?a(window):a(e),this.options=a.extend({},r.DEFAULTS,t),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",a.proxy(this.process,this)),this.refresh(),this.process()}function t(n){return this.each(function(){var e=a(this),t=e.data("bs.scrollspy"),i="object"==typeof n&&n;t||e.data("bs.scrollspy",t=new r(this,i)),"string"==typeof n&&t[n]()})}r.VERSION="3.3.7",r.DEFAULTS={offset:10},r.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},r.prototype.refresh=function(){var e=this,n="offset",r=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),a.isWindow(this.$scrollElement[0])||(n="position",r=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var e=a(this),t=e.data("target")||e.attr("href"),i=/^#./.test(t)&&a(t);return i&&i.length&&i.is(":visible")?[[i[n]().top+r,t]]:null}).sort(function(e,t){return e[0]-t[0]}).each(function(){e.offsets.push(this[0]),e.targets.push(this[1])})},r.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),n=this.options.offset+i-this.$scrollElement.height(),r=this.offsets,a=this.targets,o=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),n<=t)return o!=(e=a[a.length-1])&&this.activate(e);if(o&&t<r[0])return this.activeTarget=null,this.clear();for(e=r.length;e--;)o!=a[e]&&t>=r[e]&&(void 0===r[e+1]||t<r[e+1])&&this.activate(a[e])},r.prototype.activate=function(e){this.activeTarget=e,this.clear();var t=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',i=a(t).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate.bs.scrollspy")},r.prototype.clear=function(){a(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var e=a.fn.scrollspy;a.fn.scrollspy=t,a.fn.scrollspy.Constructor=r,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=e,this},a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var e=a(this);t.call(e,e.data())})})}(jQuery),function(s){"use strict";function o(e){this.element=s(e)}function t(i){return this.each(function(){var e=s(this),t=e.data("bs.tab");t||e.data("bs.tab",t=new o(this)),"string"==typeof i&&t[i]()})}o.VERSION="3.3.7",o.TRANSITION_DURATION=150,o.prototype.show=function(){var e=this.element,t=e.closest("ul:not(.dropdown-menu)"),i=e.data("target");if(i=i||(i=e.attr("href"))&&i.replace(/.*(?=#[^\s]*$)/,""),!e.parent("li").hasClass("active")){var n=t.find(".active:last a"),r=s.Event("hide.bs.tab",{relatedTarget:e[0]}),a=s.Event("show.bs.tab",{relatedTarget:n[0]});if(n.trigger(r),e.trigger(a),!a.isDefaultPrevented()&&!r.isDefaultPrevented()){var o=s(i);this.activate(e.closest("li"),t),this.activate(o,o.parent(),function(){n.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:n[0]})})}}},o.prototype.activate=function(e,t,i){var n=t.find("> .active"),r=i&&s.support.transition&&(n.length&&n.hasClass("fade")||!!t.find("> .fade").length);function a(){n.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),r?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu").length&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),i&&i()}n.length&&r?n.one("bsTransitionEnd",a).emulateTransitionEnd(o.TRANSITION_DURATION):a(),n.removeClass("in")};var e=s.fn.tab;function i(e){e.preventDefault(),t.call(s(this),"show")}s.fn.tab=t,s.fn.tab.Constructor=o,s.fn.tab.noConflict=function(){return s.fn.tab=e,this},s(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',i).on("click.bs.tab.data-api",'[data-toggle="pill"]',i)}(jQuery),function(l){"use strict";var u=function(e,t){this.options=l.extend({},u.DEFAULTS,t),this.$target=l(this.options.target).on("scroll.bs.affix.data-api",l.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",l.proxy(this.checkPositionWithEventLoop,this)),this.$element=l(e),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};function i(n){return this.each(function(){var e=l(this),t=e.data("bs.affix"),i="object"==typeof n&&n;t||e.data("bs.affix",t=new u(this,i)),"string"==typeof n&&t[n]()})}u.VERSION="3.3.7",u.RESET="affix affix-top affix-bottom",u.DEFAULTS={offset:0,target:window},u.prototype.getState=function(e,t,i,n){var r=this.$target.scrollTop(),a=this.$element.offset(),o=this.$target.height();if(null!=i&&"top"==this.affixed)return r<i&&"top";if("bottom"==this.affixed)return null!=i?!(r+this.unpin<=a.top)&&"bottom":!(r+o<=e-n)&&"bottom";var s=null==this.affixed,l=s?r:a.top;return null!=i&&r<=i?"top":null!=n&&e-n<=l+(s?o:t)&&"bottom"},u.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(u.RESET).addClass("affix");var e=this.$target.scrollTop(),t=this.$element.offset();return this.pinnedOffset=t.top-e},u.prototype.checkPositionWithEventLoop=function(){setTimeout(l.proxy(this.checkPosition,this),1)},u.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),t=this.options.offset,i=t.top,n=t.bottom,r=Math.max(l(document).height(),l(document.body).height());"object"!=typeof t&&(n=i=t),"function"==typeof i&&(i=t.top(this.$element)),"function"==typeof n&&(n=t.bottom(this.$element));var a=this.getState(r,e,i,n);if(this.affixed!=a){null!=this.unpin&&this.$element.css("top","");var o="affix"+(a?"-"+a:""),s=l.Event(o+".bs.affix");if(this.$element.trigger(s),s.isDefaultPrevented())return;this.affixed=a,this.unpin="bottom"==a?this.getPinnedOffset():null,this.$element.removeClass(u.RESET).addClass(o).trigger(o.replace("affix","affixed")+".bs.affix")}"bottom"==a&&this.$element.offset({top:r-e-n})}};var e=l.fn.affix;l.fn.affix=i,l.fn.affix.Constructor=u,l.fn.affix.noConflict=function(){return l.fn.affix=e,this},l(window).on("load",function(){l('[data-spy="affix"]').each(function(){var e=l(this),t=e.data();t.offset=t.offset||{},null!=t.offsetBottom&&(t.offset.bottom=t.offsetBottom),null!=t.offsetTop&&(t.offset.top=t.offsetTop),i.call(e,t)})})}(jQuery),function(u,c){var d=u();u.fn.dropdownHover=function(l){return"ontouchstart"in document?this:(d=d.add(this.parent()),this.each(function(){function t(){n.parents(".navbar").find(".navbar-toggle").is(":visible")||(c.clearTimeout(e),c.clearTimeout(i),i=c.setTimeout(function(){d.find(":focus").blur(),!0===s.instantlyCloseOthers&&d.removeClass("open"),c.clearTimeout(i),n.attr("aria-expanded","true"),r.addClass("open"),n.trigger(o)},s.hoverDelay))}var e,i,n=u(this),r=n.parent(),a={delay:u(this).data("delay"),hoverDelay:u(this).data("hover-delay"),instantlyCloseOthers:u(this).data("close-others")},o="show.bs.dropdown",s=u.extend(!0,{},{delay:500,hoverDelay:0,instantlyCloseOthers:!0},l,a);r.hover(function(e){return!r.hasClass("open")&&!n.is(e.target)||void t()},function(){c.clearTimeout(i),e=c.setTimeout(function(){n.attr("aria-expanded","false"),r.removeClass("open"),n.trigger("hide.bs.dropdown")},s.delay)}),n.hover(function(e){return!r.hasClass("open")&&!r.is(e.target)||void t()}),r.find(".dropdown-submenu").each(function(){var t,i=u(this);i.hover(function(){c.clearTimeout(t),i.children(".dropdown-menu").show(),i.siblings().children(".dropdown-menu").hide()},function(){var e=i.children(".dropdown-menu");t=c.setTimeout(function(){e.hide()},s.delay)})})}))},u(document).ready(function(){u('[data-hover="dropdown"]').dropdownHover()})}(jQuery,window),991<$(window).width()&&($(".submenu").width($(".mainmenu .container").width()),$(".mainmenu .menu-item").mouseenter(function(){$(this).find(".submenu").stop().fadeIn(250)}),$(".mainmenu .menu-item").mouseleave(function(){$(this).find(".submenu").stop().fadeOut(250)}),$(".menu-item .dropdown").removeAttr("data-hover")),$("li.dropdown").on("click",function(){var e=$(this);if(e.hasClass("open")){var t=e.children("a.dropdown-toggle");t.length&&t.attr("href")&&(location.href=t.attr("href"))}}),function(e,t,i){"use strict";t.onscroll=function(){1e3<i.body.scrollTop||1e3<i.documentElement.scrollTop?e("#back-to-top").css("display","block"):e("#back-to-top").css("display","none")},e("#back-to-top").click(function(){i.body.scrollTop=0,i.documentElement.scrollTop=0})}(jQuery,window,document),function(e,t,i){e[i]=e[i]||[],e[i].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var n=t.getElementsByTagName("script")[0],r=t.createElement("script");r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-KJ4WK2P",n.parentNode.insertBefore(r,n)}(window,document,"dataLayer"),function(e,t,i,n){e.GoogleAnalyticsObject="ga",e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=+new Date,i=t.createElement("script"),n=t.getElementsByTagName("script")[0],i.async=1,i.src="//www.google-analytics.com/analytics.js",n.parentNode.insertBefore(i,n)}(window,document),ga("create","UA-41020285-1","auto"),ga("send","pageview"),function(s,a,o){"use strict";function l(e,t,i){var n=this;if(s.data(e,"cubeportfolio"))throw new Error("cubeportfolio is already initialized. Destroy it before initialize again!");n.obj=e,n.$obj=s(e),s.data(n.obj,"cubeportfolio",n),t&&t.sortToPreventGaps!==o&&(t.sortByDimension=t.sortToPreventGaps,delete t.sortToPreventGaps),n.options=s.extend({},s.fn.cubeportfolio.options,t,n.$obj.data("cbp-options")),n.isAnimating=!0,n.defaultFilter=n.options.defaultFilter,n.registeredEvents=[],n.queue=[],n.addedWrapp=!1,s.isFunction(i)&&n.registerEvent("initFinish",i,!0);var r=n.$obj.children();n.$obj.addClass("cbp"),0!==r.length&&!r.first().hasClass("cbp-item")||(n.wrapInner(n.obj,"cbp-wrapper"),n.addedWrapp=!0),n.$ul=n.$obj.children().addClass("cbp-wrapper"),n.wrapInner(n.obj,"cbp-wrapper-outer"),n.wrapper=n.$obj.children(".cbp-wrapper-outer"),n.blocks=n.$ul.children(".cbp-item"),n.blocksOn=n.blocks,n.wrapInner(n.blocks,"cbp-item-wrapper"),n.plugins={},s.each(l.plugins,function(e,t){var i=t(n);i&&(n.plugins[e]=i)}),n.triggerEvent("afterPlugins"),n.removeAttrAfterStoreData=s.Deferred(),n.loadImages(n.$obj,n.display)}s.extend(l.prototype,{storeData:function(e,a){var o=this;a=a||0,e.each(function(e,t){var i=s(t),n=i.width(),r=i.height();i.data("cbp",{index:a+e,indexInitial:a+e,wrapper:i.children(".cbp-item-wrapper"),widthInitial:n,heightInitial:r,width:n,height:r,widthAndGap:n+o.options.gapVertical,heightAndGap:r+o.options.gapHorizontal,left:null,leftNew:null,top:null,topNew:null,pack:!1})}),this.removeAttrAfterStoreData.resolve()},wrapInner:function(e,t){var i,n,r;if(t=t||"",!(e.length&&e.length<1))for(e.length===o&&(e=[e]),n=e.length-1;0<=n;n--){for(i=e[n],(r=a.createElement("div")).setAttribute("class",t);i.childNodes.length;)r.appendChild(i.childNodes[0]);i.appendChild(r)}},removeAttrImage:function(e){this.removeAttrAfterStoreData.then(function(){e.removeAttribute("width"),e.removeAttribute("height"),e.removeAttribute("style")})},loadImages:function(t,r){var a=this;requestAnimationFrame(function(){var e=t.find("img").map(function(e,t){if(t.hasAttribute("width")&&t.hasAttribute("height")){if(t.style.width=t.getAttribute("width")+"px",t.style.height=t.getAttribute("height")+"px",t.hasAttribute("data-cbp-src"))return null;if(null===a.checkSrc(t))a.removeAttrImage(t);else{var i=s("<img>");i.on("load.cbp error.cbp",function(){s(this).off("load.cbp error.cbp"),a.removeAttrImage(t)}),t.srcset?(i.attr("sizes",t.sizes||"100vw"),i.attr("srcset",t.srcset)):i.attr("src",t.src)}return null}return a.checkSrc(t)}),n=e.length;0!==n?s.each(e,function(e,t){var i=s("<img>");i.on("load.cbp error.cbp",function(){s(this).off("load.cbp error.cbp"),0==--n&&r.call(a)}),t.srcset?(i.attr("sizes",t.sizes),i.attr("srcset",t.srcset)):i.attr("src",t.src)}):r.call(a)})},checkSrc:function(e){var t=e.srcset,i=e.src;if(""===i)return null;var n=s("<img>");t?(n.attr("sizes",e.sizes||"100vw"),n.attr("srcset",t)):n.attr("src",i);var r=n[0];return r.complete&&r.naturalWidth!==o&&0!==r.naturalWidth?null:r},display:function(){var e=this;e.width=e.$obj.outerWidth(),e.triggerEvent("initStartRead"),e.triggerEvent("initStartWrite"),0<e.width&&(e.storeData(e.blocks),e.layoutAndAdjustment()),e.triggerEvent("initEndRead"),e.triggerEvent("initEndWrite"),e.$obj.addClass("cbp-ready"),e.runQueue("delayFrame",e.delayFrame)},delayFrame:function(){var e=this;requestAnimationFrame(function(){e.resizeEvent(),e.triggerEvent("initFinish"),e.isAnimating=!1,e.$obj.trigger("initComplete.cbp")})},resizeEvent:function(){var t=this;l.private.resize.initEvent({instance:t,fn:function(){t.triggerEvent("beforeResizeGrid");var e=t.$obj.outerWidth();e&&t.width!==e&&(t.width=e,"alignCenter"===t.options.gridAdjustment&&(t.wrapper[0].style.maxWidth=""),t.layoutAndAdjustment(),t.triggerEvent("resizeGrid")),t.triggerEvent("resizeWindow")}})},gridAdjust:function(){var o=this;"responsive"===o.options.gridAdjustment?o.responsiveLayout():(o.blocks.removeAttr("style"),o.blocks.each(function(e,t){var i=s(t).data("cbp"),n=t.getBoundingClientRect(),r=o.columnWidthTruncate(n.right-n.left),a=Math.round(n.bottom-n.top);i.height=a,i.heightAndGap=a+o.options.gapHorizontal,i.width=r,i.widthAndGap=r+o.options.gapVertical}),o.widthAvailable=o.width+o.options.gapVertical),o.triggerEvent("gridAdjust")},layoutAndAdjustment:function(e){e&&(this.width=this.$obj.outerWidth()),this.gridAdjust(),this.layout()},layout:function(){var e=this;e.computeBlocks(e.filterConcat(e.defaultFilter)),"slider"===e.options.layoutMode?(e.sliderLayoutReset(),e.sliderLayout()):(e.mosaicLayoutReset(),e.mosaicLayout()),e.blocksOff.addClass("cbp-item-off"),e.blocksOn.removeClass("cbp-item-off").each(function(e,t){var i=s(t).data("cbp");i.left=i.leftNew,i.top=i.topNew,t.style.left=i.left+"px",t.style.top=i.top+"px"}),e.resizeMainContainer()},computeFilter:function(e){this.computeBlocks(e),this.mosaicLayoutReset(),this.mosaicLayout(),this.filterLayout()},filterLayout:function(){this.blocksOff.addClass("cbp-item-off"),this.blocksOn.removeClass("cbp-item-off").each(function(e,t){var i=s(t).data("cbp");i.left=i.leftNew,i.top=i.topNew,t.style.left=i.left+"px",t.style.top=i.top+"px"}),this.resizeMainContainer(),this.filterFinish()},filterFinish:function(){this.isAnimating=!1,this.$obj.trigger("filterComplete.cbp"),this.triggerEvent("filterFinish")},computeBlocks:function(e){this.blocksOnInitial=this.blocksOn,this.blocksOn=this.blocks.filter(e),this.blocksOff=this.blocks.not(e),this.triggerEvent("computeBlocksFinish",e)},responsiveLayout:function(){var a=this;a.cols=a[s.isArray(a.options.mediaQueries)?"getColumnsBreakpoints":"getColumnsAuto"](),a.columnWidth=a.columnWidthTruncate((a.width+a.options.gapVertical)/a.cols),a.widthAvailable=a.columnWidth*a.cols,"mosaic"===a.options.layoutMode&&a.getMosaicWidthReference(),a.blocks.each(function(e,t){var i,n=s(t).data("cbp"),r=1;"mosaic"===a.options.layoutMode&&(r=a.getColsMosaic(n.widthInitial)),i=a.columnWidth*r-a.options.gapVertical,t.style.width=i+"px",n.width=i,n.widthAndGap=i+a.options.gapVertical,t.style.height=""});var o=[];a.blocks.each(function(e,t){s.each(s(t).find("img").filter("[width][height]"),function(e,t){var n=0;s(t).parentsUntil(".cbp-item").each(function(e,t){var i=s(t).width();if(0<i)return n=i,!1});var i=parseInt(t.getAttribute("width"),10),r=parseInt(t.getAttribute("height"),10),a=parseFloat((i/r).toFixed(10));o.push({el:t,width:n,height:Math.round(n/a)})})}),s.each(o,function(e,t){t.el.width=t.width,t.el.height=t.height,t.el.style.width=t.width+"px",t.el.style.height=t.height+"px"}),a.blocks.each(function(e,t){var i=s(t).data("cbp"),n=t.getBoundingClientRect(),r=Math.round(n.bottom-n.top);i.height=r,i.heightAndGap=r+a.options.gapHorizontal})},getMosaicWidthReference:function(){var n=[];this.blocks.each(function(e,t){var i=s(t).data("cbp");n.push(i.widthInitial)}),n.sort(function(e,t){return e-t}),n[0]?this.mosaicWidthReference=n[0]:this.mosaicWidthReference=this.columnWidth},getColsMosaic:function(e){if(e===this.width)return this.cols;var t=e/this.mosaicWidthReference;return t=.79<=t%1?Math.ceil(t):Math.floor(t),Math.min(Math.max(t,1),this.cols)},getColumnsAuto:function(){if(0===this.blocks.length)return 1;var e=this.blocks.first().data("cbp").widthInitial+this.options.gapVertical;return Math.max(Math.round(this.width/e),1)},getColumnsBreakpoints:function(){var i,n=this.width;return s.each(this.options.mediaQueries,function(e,t){if(n>=t.width)return i=t,!1}),i=i||this.options.mediaQueries[this.options.mediaQueries.length-1],this.triggerEvent("onMediaQueries",i.options),i.cols},columnWidthTruncate:function(e){return Math.floor(e)},resizeMainContainer:function(){var r,e=this,t=Math.max(e.freeSpaces.slice(-1)[0].topStart-e.options.gapHorizontal,0);"alignCenter"===e.options.gridAdjustment&&(r=0,e.blocksOn.each(function(e,t){var i=s(t).data("cbp"),n=i.left+i.width;r<n&&(r=n)}),e.wrapper[0].style.maxWidth=r+"px"),t!==e.height&&(e.obj.style.height=t+"px",e.height!==o&&(l.private.modernBrowser?e.$obj.one(l.private.transitionend,function(){e.$obj.trigger("pluginResize.cbp")}):e.$obj.trigger("pluginResize.cbp")),e.height=t),e.triggerEvent("resizeMainContainer")},filterConcat:function(e){return e.replace(/\|/gi,"")},pushQueue:function(e,t){this.queue[e]=this.queue[e]||[],this.queue[e].push(t)},runQueue:function(e,t){var i=this.queue[e]||[];s.when.apply(s,i).then(s.proxy(t,this))},clearQueue:function(e){this.queue[e]=[]},registerEvent:function(e,t,i){this.registeredEvents[e]||(this.registeredEvents[e]=[]),this.registeredEvents[e].push({func:t,oneTime:i||!1})},triggerEvent:function(e,t){var i,n;if(this.registeredEvents[e])for(i=0,n=this.registeredEvents[e].length;i<n;i++)this.registeredEvents[e][i].func.call(this,t),this.registeredEvents[e][i].oneTime&&(this.registeredEvents[e].splice(i,1),i--,n--)},addItems:function(e,t,n){var r=this;r.wrapInner(e,"cbp-item-wrapper"),r.$ul[n](e.addClass("cbp-item-loading").css({top:"100%",left:0})),l.private.modernBrowser?e.last().one(l.private.animationend,function(){r.addItemsFinish(e,t)}):r.addItemsFinish(e,t),r.loadImages(e,function(){if(r.$obj.addClass("cbp-updateItems"),"append"===n)r.storeData(e,r.blocks.length),s.merge(r.blocks,e);else{r.storeData(e);var i=e.length;r.blocks.each(function(e,t){s(t).data("cbp").index=i+e}),r.blocks=s.merge(e,r.blocks)}r.triggerEvent("addItemsToDOM",e),r.triggerEvent("triggerSort"),r.layoutAndAdjustment(!0),r.elems&&l.public.showCounter.call(r.obj,r.elems)})},addItemsFinish:function(e,t){this.isAnimating=!1,this.$obj.removeClass("cbp-updateItems"),e.removeClass("cbp-item-loading"),s.isFunction(t)&&t.call(this,e),this.$obj.trigger("onAfterLoadMore.cbp",[e])},removeItems:function(e,t){var r=this;r.$obj.addClass("cbp-updateItems"),l.private.modernBrowser?e.last().one(l.private.animationend,function(){r.removeItemsFinish(e,t)}):r.removeItemsFinish(e,t),e.each(function(e,n){r.blocks.each(function(e,t){if(n===t){var i=s(t);r.blocks.splice(e,1),l.private.modernBrowser?(i.one(l.private.animationend,function(){i.remove()}),i.addClass("cbp-removeItem")):i.remove()}})}),r.blocks.each(function(e,t){s(t).data("cbp").index=e}),r.triggerEvent("triggerSort"),r.layoutAndAdjustment(!0),r.elems&&l.public.showCounter.call(r.obj,r.elems)},removeItemsFinish:function(e,t){this.isAnimating=!1,this.$obj.removeClass("cbp-updateItems"),s.isFunction(t)&&t.call(this,e)}}),s.fn.cubeportfolio=function(e,t,i){return this.each(function(){if("object"==typeof e||!e)return l.public.init.call(this,e,t);if(l.public[e])return l.public[e].call(this,t,i);throw new Error("Method "+e+" does not exist on jquery.cubeportfolio.js")})},l.plugins={},s.fn.cubeportfolio.constructor=l}(jQuery,(window,document)),function(l){"use strict";var e=l.fn.cubeportfolio.constructor;l.extend(e.prototype,{mosaicLayoutReset:function(){var i=this;i.blocksAreSorted=!1,i.blocksOn.each(function(e,t){l(t).data("cbp").pack=!1,i.options.sortByDimension&&(t.style.height="")}),i.freeSpaces=[{leftStart:0,leftEnd:i.widthAvailable,topStart:0,topEnd:Math.pow(2,18)}]},mosaicLayout:function(){for(var e=this,t=0,i=e.blocksOn.length;t<i;t++){var n=e.getSpaceIndexAndBlock();if(null===n)return e.mosaicLayoutReset(),e.blocksAreSorted=!0,e.sortBlocks(e.blocksOn,"widthAndGap","heightAndGap",!0),void e.mosaicLayout();e.generateF1F2(n.spaceIndex,n.dataBlock),e.generateG1G2G3G4(n.dataBlock),e.cleanFreeSpaces(),e.addHeightToBlocks()}e.blocksAreSorted&&e.sortBlocks(e.blocksOn,"topNew","leftNew")},getSpaceIndexAndBlock:function(){var e=this,s=null;return l.each(e.freeSpaces,function(n,r){var a=r.leftEnd-r.leftStart,o=r.topEnd-r.topStart;return e.blocksOn.each(function(e,t){var i=l(t).data("cbp");if(!0!==i.pack)return i.widthAndGap<=a&&i.heightAndGap<=o?(i.pack=!0,s={spaceIndex:n,dataBlock:i},i.leftNew=r.leftStart,i.topNew=r.topStart,!1):void 0}),!e.blocksAreSorted&&e.options.sortByDimension&&0<n?(s=null,!1):null===s&&void 0}),s},generateF1F2:function(e,t){var i=this.freeSpaces[e],n={leftStart:i.leftStart+t.widthAndGap,leftEnd:i.leftEnd,topStart:i.topStart,topEnd:i.topEnd},r={leftStart:i.leftStart,leftEnd:i.leftEnd,topStart:i.topStart+t.heightAndGap,topEnd:i.topEnd};this.freeSpaces.splice(e,1),n.leftStart<n.leftEnd&&n.topStart<n.topEnd&&(this.freeSpaces.splice(e,0,n),e++),r.leftStart<r.leftEnd&&r.topStart<r.topEnd&&this.freeSpaces.splice(e,0,r)},generateG1G2G3G4:function(n){var r=this,a=[];l.each(r.freeSpaces,function(e,t){var i=r.intersectSpaces(t,n);null!==i?(r.generateG1(t,i,a),r.generateG2(t,i,a),r.generateG3(t,i,a),r.generateG4(t,i,a)):a.push(t)}),r.freeSpaces=a},intersectSpaces:function(e,t){var i={leftStart:t.leftNew,leftEnd:t.leftNew+t.widthAndGap,topStart:t.topNew,topEnd:t.topNew+t.heightAndGap};if(e.leftStart===i.leftStart&&e.leftEnd===i.leftEnd&&e.topStart===i.topStart&&e.topEnd===i.topEnd)return null;var n=Math.max(e.leftStart,i.leftStart),r=Math.min(e.leftEnd,i.leftEnd),a=Math.max(e.topStart,i.topStart),o=Math.min(e.topEnd,i.topEnd);return r<=n||o<=a?null:{leftStart:n,leftEnd:r,topStart:a,topEnd:o}},generateG1:function(e,t,i){e.topStart!==t.topStart&&i.push({leftStart:e.leftStart,leftEnd:e.leftEnd,topStart:e.topStart,topEnd:t.topStart})},generateG2:function(e,t,i){e.leftEnd!==t.leftEnd&&i.push({leftStart:t.leftEnd,leftEnd:e.leftEnd,topStart:e.topStart,topEnd:e.topEnd})},generateG3:function(e,t,i){e.topEnd!==t.topEnd&&i.push({leftStart:e.leftStart,leftEnd:e.leftEnd,topStart:t.topEnd,topEnd:e.topEnd})},generateG4:function(e,t,i){e.leftStart!==t.leftStart&&i.push({leftStart:e.leftStart,leftEnd:t.leftStart,topStart:e.topStart,topEnd:e.topEnd})},cleanFreeSpaces:function(){this.freeSpaces.sort(function(e,t){return e.topStart>t.topStart?1:e.topStart<t.topStart?-1:e.leftStart>t.leftStart?1:e.leftStart<t.leftStart?-1:0}),this.correctSubPixelValues(),this.removeNonMaximalFreeSpaces()},correctSubPixelValues:function(){var e,t,i,n;for(e=0,t=this.freeSpaces.length-1;e<t;e++)i=this.freeSpaces[e],(n=this.freeSpaces[e+1]).topStart-i.topStart<=1&&(n.topStart=i.topStart)},removeNonMaximalFreeSpaces:function(){var e=this;e.uniqueFreeSpaces(),e.freeSpaces=l.map(e.freeSpaces,function(i,n){return l.each(e.freeSpaces,function(e,t){if(n!==e)return t.leftStart<=i.leftStart&&t.leftEnd>=i.leftEnd&&t.topStart<=i.topStart&&t.topEnd>=i.topEnd?(i=null,!1):void 0}),i})},uniqueFreeSpaces:function(){var t=[];l.each(this.freeSpaces,function(e,i){l.each(t,function(e,t){if(t.leftStart===i.leftStart&&t.leftEnd===i.leftEnd&&t.topStart===i.topStart&&t.topEnd===i.topEnd)return i=null,!1}),null!==i&&t.push(i)}),this.freeSpaces=t},addHeightToBlocks:function(){var r=this;l.each(r.freeSpaces,function(e,n){r.blocksOn.each(function(e,t){var i=l(t).data("cbp");!0===i.pack&&r.intersectSpaces(n,i)&&-1==n.topStart-i.topNew-i.heightAndGap&&(t.style.height=i.height-1+"px")})})},sortBlocks:function(e,r,a,o){a=void 0===a?"leftNew":a,o=void 0===o?1:-1,e.sort(function(e,t){var i=l(e).data("cbp"),n=l(t).data("cbp");return i[r]>n[r]?o:i[r]<n[r]?-o:i[a]>n[a]?o:i[a]<n[a]?-o:i.index>n.index?o:i.index<n.index?-o:void 0})}})}(jQuery,(window,document)),jQuery.fn.cubeportfolio.options={filters:"",search:"",layoutMode:"grid",sortByDimension:!1,drag:!0,auto:!1,autoTimeout:5e3,autoPauseOnHover:!0,showNavigation:!0,showPagination:!0,rewindNav:!0,scrollByPage:!1,defaultFilter:"*",filterDeeplinking:!1,animationType:"fadeOut",gridAdjustment:"responsive",mediaQueries:!1,gapHorizontal:10,gapVertical:10,caption:"pushTop",displayType:"fadeIn",displayTypeSpeed:400,lightboxDelegate:".cbp-lightbox",lightboxGallery:!0,lightboxTitleSrc:"data-title",lightboxCounter:'<div class="cbp-popup-lightbox-counter">{{current}} of {{total}}</div>',singlePageDelegate:".cbp-singlePage",singlePageDeeplinking:!0,singlePageStickyNavigation:!0,singlePageCounter:'<div class="cbp-popup-singlePage-counter">{{current}} of {{total}}</div>',singlePageAnimation:"left",singlePageCallback:null,singlePageInlineDelegate:".cbp-singlePageInline",singlePageInlineDeeplinking:!1,singlePageInlinePosition:"top",singlePageInlineInFocus:!0,singlePageInlineCallback:null,plugins:{}},function(a,r,o){"use strict";var s=a.fn.cubeportfolio.constructor,l=a(r);s.private={publicEvents:function(t,i,n){var r=this;r.events=[],r.initEvent=function(e){0===r.events.length&&r.scrollEvent(),r.events.push(e)},r.destroyEvent=function(i){r.events=a.map(r.events,function(e,t){if(e.instance!==i)return e}),0===r.events.length&&l.off(t)},r.scrollEvent=function(){var e;l.on(t,function(){clearTimeout(e),e=setTimeout(function(){a.isFunction(n)&&n.call(r)||a.each(r.events,function(e,t){t.fn.call(t.instance)})},i)})}},checkInstance:function(e){var t=a.data(this,"cubeportfolio");if(!t)throw new Error("cubeportfolio is not initialized. Initialize it before calling "+e+" method!");return t.triggerEvent("publicMethod"),t},browserInfo:function(){var e,t,i=s.private,n=navigator.appVersion;-1!==n.indexOf("MSIE 8.")?i.browser="ie8":-1!==n.indexOf("MSIE 9.")?i.browser="ie9":-1!==n.indexOf("MSIE 10.")?i.browser="ie10":r.ActiveXObject||"ActiveXObject"in r?i.browser="ie11":/android/gi.test(n)?i.browser="android":/iphone|ipad|ipod/gi.test(n)?i.browser="ios":/chrome/gi.test(n)?i.browser="chrome":i.browser="",i.styleSupport("perspective"),e=i.styleSupport("transition"),i.transitionend={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[e],t=i.styleSupport("animation"),i.animationend={WebkitAnimation:"webkitAnimationEnd",animation:"animationend"}[t],i.animationDuration={WebkitAnimation:"webkitAnimationDuration",animation:"animationDuration"}[t],i.animationDelay={WebkitAnimation:"webkitAnimationDelay",animation:"animationDelay"}[t],i.transform=i.styleSupport("transform"),e&&t&&i.transform&&(i.modernBrowser=!0)},styleSupport:function(e){var t,i="Webkit"+e.charAt(0).toUpperCase()+e.slice(1),n=o.createElement("div");return e in n.style?t=e:i in n.style&&(t=i),n=null,t}},s.private.browserInfo(),s.private.resize=new s.private.publicEvents("resize.cbp",50,function(){if(r.innerHeight==screen.height)return!0})}(jQuery,window,document),function(a){"use strict";var o=a.fn.cubeportfolio.constructor;o.public={init:function(e,t){new o(this,e,t)},destroy:function(e){var t=o.private.checkInstance.call(this,"destroy");t.triggerEvent("beforeDestroy"),a.removeData(this,"cubeportfolio"),t.blocks.removeData("cbp"),t.$obj.removeClass("cbp-ready").removeAttr("style"),t.$ul.removeClass("cbp-wrapper"),o.private.resize.destroyEvent(t),t.$obj.off(".cbp"),t.blocks.removeClass("cbp-item-off").removeAttr("style"),t.blocks.find(".cbp-item-wrapper").each(function(e,t){var i=a(t),n=i.children();n.length?n.unwrap():i.remove()}),t.destroySlider&&t.destroySlider(),t.$ul.unwrap(),t.addedWrapp&&t.blocks.unwrap(),0===t.blocks.length&&t.$ul.remove(),a.each(t.plugins,function(e,t){"function"==typeof t.destroy&&t.destroy()}),a.isFunction(e)&&e.call(t),t.triggerEvent("afterDestroy")},filter:function(e,t){var i,n=o.private.checkInstance.call(this,"filter");if(!n.isAnimating){if(n.isAnimating=!0,a.isFunction(t)&&n.registerEvent("filterFinish",t,!0),a.isFunction(e)){if(void 0===(i=e.call(n,n.blocks)))throw new Error("When you call cubeportfolio API `filter` method with a param of type function you must return the blocks that will be visible.")}else{if(n.options.filterDeeplinking){var r=location.href.replace(/#cbpf=(.*?)([#\?&]|$)/gi,"");location.href=r+"#cbpf="+encodeURIComponent(e),n.singlePage&&n.singlePage.url&&(n.singlePage.url=location.href)}n.defaultFilter=e,i=n.filterConcat(n.defaultFilter)}n.triggerEvent("filterStart",i),n.singlePageInline&&n.singlePageInline.isOpen?n.singlePageInline.close("promise",{callback:function(){n.computeFilter(i)}}):n.computeFilter(i)}},showCounter:function(e,t){var i=o.private.checkInstance.call(this,"showCounter");a.isFunction(t)&&i.registerEvent("showCounterFinish",t,!0),(i.elems=e).each(function(){var e=a(this),t=i.blocks.filter(e.data("filter")).length;e.find(".cbp-filter-counter").text(t)}),i.triggerEvent("showCounterFinish",e)},appendItems:function(e,t){o.public.append.call(this,e,t)},append:function(e,t){var i=o.private.checkInstance.call(this,"append"),n=a(e).filter(".cbp-item");i.isAnimating||n.length<1?a.isFunction(t)&&t.call(i,n):(i.isAnimating=!0,i.singlePageInline&&i.singlePageInline.isOpen?i.singlePageInline.close("promise",{callback:function(){i.addItems(n,t,"append")}}):i.addItems(n,t,"append"))},prepend:function(e,t){var i=o.private.checkInstance.call(this,"prepend"),n=a(e).filter(".cbp-item");i.isAnimating||n.length<1?a.isFunction(t)&&t.call(i,n):(i.isAnimating=!0,i.singlePageInline&&i.singlePageInline.isOpen?i.singlePageInline.close("promise",{callback:function(){i.addItems(n,t,"prepend")}}):i.addItems(n,t,"prepend"))},remove:function(e,t){var i=o.private.checkInstance.call(this,"remove"),n=a(e).filter(".cbp-item");i.isAnimating||n.length<1?a.isFunction(t)&&t.call(i,n):(i.isAnimating=!0,i.singlePageInline&&i.singlePageInline.isOpen?i.singlePageInline.close("promise",{callback:function(){i.removeItems(n,t)}}):i.removeItems(n,t))},layout:function(e){var t=o.private.checkInstance.call(this,"layout");t.width=t.$obj.outerWidth(),t.isAnimating||t.width<=0||("alignCenter"===t.options.gridAdjustment&&(t.wrapper[0].style.maxWidth=""),t.storeData(t.blocks),t.layoutAndAdjustment()),a.isFunction(e)&&e.call(t)}}}(jQuery,(window,document)),function(g,e,m){"use strict";var v=g.fn.cubeportfolio.constructor;g.extend(v.prototype,{updateSliderPagination:function(){var e,t;if(this.options.showPagination){for(e=Math.ceil(this.blocksOn.length/this.cols),this.navPagination.empty(),t=e-1;0<=t;t--)g("<div/>",{class:"cbp-nav-pagination-item","data-slider-action":"jumpTo"}).appendTo(this.navPagination);this.navPaginationItems=this.navPagination.children()}this.enableDisableNavSlider()},destroySlider:function(){"slider"===this.options.layoutMode&&(this.$obj.removeClass("cbp-mode-slider"),this.$ul.removeAttr("style"),this.$ul.off(".cbp"),g(m).off(".cbp"),this.options.auto&&this.stopSliderAuto())},nextSlider:function(e){var t=this;if(t.isEndSlider()){if(!t.isRewindNav())return;t.sliderActive=0}else t.options.scrollByPage?t.sliderActive=Math.min(t.sliderActive+t.cols,t.blocksOn.length-t.cols):t.sliderActive+=1;t.goToSlider()},prevSlider:function(e){var t=this;if(t.isStartSlider()){if(!t.isRewindNav())return;t.sliderActive=t.blocksOn.length-t.cols}else t.options.scrollByPage?t.sliderActive=Math.max(0,t.sliderActive-t.cols):--t.sliderActive;t.goToSlider()},jumpToSlider:function(e){var t=Math.min(e.index()*this.cols,this.blocksOn.length-this.cols);t!==this.sliderActive&&(this.sliderActive=t,this.goToSlider())},jumpDragToSlider:function(e){var t,i,n,r=this,a=0<e;i=r.options.scrollByPage?(t=r.cols*r.columnWidth,r.cols):(t=r.columnWidth,1),e=Math.abs(e),n=Math.floor(e/t)*i,20<e%t&&(n+=i),r.sliderActive=a?Math.min(r.sliderActive+n,r.blocksOn.length-r.cols):Math.max(0,r.sliderActive-n),r.goToSlider()},isStartSlider:function(){return 0===this.sliderActive},isEndSlider:function(){return this.sliderActive+this.cols>this.blocksOn.length-1},goToSlider:function(){this.enableDisableNavSlider(),this.updateSliderPosition()},startSliderAuto:function(){var e=this;e.isDrag?e.stopSliderAuto():e.timeout=setTimeout(function(){e.nextSlider(),e.startSliderAuto()},e.options.autoTimeout)},stopSliderAuto:function(){clearTimeout(this.timeout)},enableDisableNavSlider:function(){var e,t,i=this;i.isRewindNav()||(t=i.isStartSlider()?"addClass":"removeClass",i.navPrev[t]("cbp-nav-stop"),t=i.isEndSlider()?"addClass":"removeClass",i.navNext[t]("cbp-nav-stop")),i.options.showPagination&&(e=i.options.scrollByPage?Math.ceil(i.sliderActive/i.cols):i.isEndSlider()?i.navPaginationItems.length-1:Math.floor(i.sliderActive/i.cols),i.navPaginationItems.removeClass("cbp-nav-pagination-active").eq(e).addClass("cbp-nav-pagination-active")),i.customPagination&&(e=i.options.scrollByPage?Math.ceil(i.sliderActive/i.cols):i.isEndSlider()?i.customPaginationItems.length-1:Math.floor(i.sliderActive/i.cols),i.customPaginationItems.removeClass(i.customPaginationClass).eq(e).addClass(i.customPaginationClass))},isRewindNav:function(){return!this.options.showNavigation||!(this.blocksOn.length<=this.cols)&&!!this.options.rewindNav},sliderItemsLength:function(){return this.blocksOn.length<=this.cols},sliderLayout:function(){var n=this;n.blocksOn.each(function(e,t){var i=g(t).data("cbp");i.leftNew=n.columnWidth*e,i.topNew=0,n.sliderFreeSpaces.push({topStart:i.heightAndGap})}),n.getFreeSpacesForSlider(),n.$ul.width(n.columnWidth*n.blocksOn.length-n.options.gapVertical)},getFreeSpacesForSlider:function(){this.freeSpaces=this.sliderFreeSpaces.slice(this.sliderActive,this.sliderActive+this.cols),this.freeSpaces.sort(function(e,t){return e.topStart>t.topStart?1:e.topStart<t.topStart?-1:void 0})},updateSliderPosition:function(){var e=-this.sliderActive*this.columnWidth;v.private.modernBrowser?this.$ul[0].style[v.private.transform]="translate3d("+e+"px, 0px, 0)":this.$ul[0].style.left=e+"px",this.getFreeSpacesForSlider(),this.resizeMainContainer()},dragSlider:function(){var i,n,t,r,a,o=this,s=g(m),l=!1,u={},c=!1;function d(e){o.$obj.removeClass("cbp-mode-slider-dragStart"),l=!0,0!==n?(t.one("click.cbp",function(e){return!1}),requestAnimationFrame(function(){o.jumpDragToSlider(n),o.$ul.one(v.private.transitionend,p)})):p.call(o),s.off(u.move),s.off(u.end)}function h(e){(8<(n=i-f(e).x)||n<-8)&&e.preventDefault(),o.isDrag=!0;var t=r-n;n<0&&n<r?t=(r-n)/5:0<n&&r-n<-a&&(t=(a+r-n)/5-a),v.private.modernBrowser?o.$ul[0].style[v.private.transform]="translate3d("+t+"px, 0px, 0)":o.$ul[0].style.left=t+"px"}function p(){if(l=!1,o.isDrag=!1,o.options.auto){if(o.mouseIsEntered)return;o.startSliderAuto()}}function f(e){return void 0!==e.originalEvent&&void 0!==e.originalEvent.touches&&(e=e.originalEvent.touches[0]),{x:e.pageX,y:e.pageY}}o.isDrag=!1,"ontouchstart"in e||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints?(u={start:"touchstart.cbp",move:"touchmove.cbp",end:"touchend.cbp"},c=!0):u={start:"mousedown.cbp",move:"mousemove.cbp",end:"mouseup.cbp"},o.$ul.on(u.start,function(e){o.sliderItemsLength()||(c||e.preventDefault(),o.options.auto&&o.stopSliderAuto(),l?g(t).one("click.cbp",function(){return!1}):(t=g(e.target),i=f(e).x,n=0,r=-o.sliderActive*o.columnWidth,a=o.columnWidth*(o.blocksOn.length-o.cols),s.on(u.move,h),s.on(u.end,d),o.$obj.addClass("cbp-mode-slider-dragStart")))})},sliderLayoutReset:function(){this.freeSpaces=[],this.sliderFreeSpaces=[]}})}(jQuery,window,document),"function"!=typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t}),function(){for(var a=0,e=["moz","webkit"],t=0;t<e.length&&!window.requestAnimationFrame;t++)window.requestAnimationFrame=window[e[t]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[t]+"CancelAnimationFrame"]||window[e[t]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,t){var i=(new Date).getTime(),n=Math.max(0,16-(i-a)),r=window.setTimeout(function(){e(i+n)},n);return a=i+n,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),function(n){"use strict";var r=n.fn.cubeportfolio.constructor;function t(t){(this.parent=t).filterLayout=this.filterLayout,t.registerEvent("computeBlocksFinish",function(e){t.blocksOn2On=t.blocksOnInitial.filter(e),t.blocksOn2Off=t.blocksOnInitial.not(e)})}t.prototype.filterLayout=function(){var e=this;function t(){e.blocks.removeClass("cbp-item-on2off cbp-item-off2on cbp-item-on2on").each(function(e,t){var i=n(t).data("cbp");i.left=i.leftNew,i.top=i.topNew,t.style.left=i.left+"px",t.style.top=i.top+"px",t.style[r.private.transform]=""}),e.blocksOff.addClass("cbp-item-off"),e.$obj.removeClass("cbp-animation-"+e.options.animationType),e.filterFinish()}e.$obj.addClass("cbp-animation-"+e.options.animationType),e.blocksOn2On.addClass("cbp-item-on2on").each(function(e,t){var i=n(t).data("cbp");t.style[r.private.transform]="translate3d("+(i.leftNew-i.left)+"px, "+(i.topNew-i.top)+"px, 0)"}),e.blocksOn2Off.addClass("cbp-item-on2off"),e.blocksOff2On=e.blocksOn.filter(".cbp-item-off").removeClass("cbp-item-off").addClass("cbp-item-off2on").each(function(e,t){var i=n(t).data("cbp");t.style.left=i.leftNew+"px",t.style.top=i.topNew+"px"}),e.blocksOn2Off.length?e.blocksOn2Off.last().data("cbp").wrapper.one(r.private.animationend,t):e.blocksOff2On.length?e.blocksOff2On.last().data("cbp").wrapper.one(r.private.animationend,t):e.blocksOn2On.length?e.blocksOn2On.last().one(r.private.transitionend,t):t(),e.resizeMainContainer()},t.prototype.destroy=function(){var e=this.parent;e.$obj.removeClass("cbp-animation-"+e.options.animationType)},r.plugins.animationClassic=function(e){return!r.private.modernBrowser||n.inArray(e.options.animationType,["boxShadow","fadeOut","flipBottom","flipOut","quicksand","scaleSides","skew"])<0?null:new t(e)}}(jQuery,(window,document)),function(r){"use strict";var a=r.fn.cubeportfolio.constructor;function t(e){(this.parent=e).filterLayout=this.filterLayout}t.prototype.filterLayout=function(){var n=this,e=n.$ul[0].cloneNode(!0);function t(){n.wrapper[0].removeChild(e),"sequentially"===n.options.animationType&&n.blocksOn.each(function(e,t){r(t).data("cbp").wrapper[0].style[a.private.animationDelay]=""}),n.$obj.removeClass("cbp-animation-"+n.options.animationType),n.filterFinish()}e.setAttribute("class","cbp-wrapper-helper"),n.wrapper[0].insertBefore(e,n.$ul[0]),requestAnimationFrame(function(){n.$obj.addClass("cbp-animation-"+n.options.animationType),n.blocksOff.addClass("cbp-item-off"),n.blocksOn.removeClass("cbp-item-off").each(function(e,t){var i=r(t).data("cbp");i.left=i.leftNew,i.top=i.topNew,t.style.left=i.left+"px",t.style.top=i.top+"px","sequentially"===n.options.animationType&&(i.wrapper[0].style[a.private.animationDelay]=60*e+"ms")}),n.blocksOn.length?n.blocksOn.last().data("cbp").wrapper.one(a.private.animationend,t):n.blocksOnInitial.length?n.blocksOnInitial.last().data("cbp").wrapper.one(a.private.animationend,t):t(),n.resizeMainContainer()})},t.prototype.destroy=function(){var e=this.parent;e.$obj.removeClass("cbp-animation-"+e.options.animationType)},a.plugins.animationClone=function(e){return!a.private.modernBrowser||r.inArray(e.options.animationType,["fadeOutTop","slideLeft","sequentially"])<0?null:new t(e)}}(jQuery,(window,document)),function(a){"use strict";var o=a.fn.cubeportfolio.constructor;function t(e){(this.parent=e).filterLayout=this.filterLayout}t.prototype.filterLayout=function(){var i=this,e=i.$ul.clone(!0,!0);e[0].setAttribute("class","cbp-wrapper-helper"),i.wrapper[0].insertBefore(e[0],i.$ul[0]);var n=e.find(".cbp-item").not(".cbp-item-off");function r(){i.wrapper[0].removeChild(e[0]),i.$obj.removeClass("cbp-animation-"+i.options.animationType),i.blocks.each(function(e,t){a(t).data("cbp").wrapper[0].style[o.private.animationDelay]=""}),i.filterFinish()}i.blocksAreSorted&&i.sortBlocks(n,"top","left"),n.children(".cbp-item-wrapper").each(function(e,t){t.style[o.private.animationDelay]=50*e+"ms"}),requestAnimationFrame(function(){i.$obj.addClass("cbp-animation-"+i.options.animationType),i.blocksOff.addClass("cbp-item-off"),i.blocksOn.removeClass("cbp-item-off").each(function(e,t){var i=a(t).data("cbp");i.left=i.leftNew,i.top=i.topNew,t.style.left=i.left+"px",t.style.top=i.top+"px",i.wrapper[0].style[o.private.animationDelay]=50*e+"ms"});var e=i.blocksOn.length,t=n.length;0===e&&0===t?r():e<t?n.last().children(".cbp-item-wrapper").one(o.private.animationend,r):i.blocksOn.last().data("cbp").wrapper.one(o.private.animationend,r),i.resizeMainContainer()})},t.prototype.destroy=function(){var e=this.parent;e.$obj.removeClass("cbp-animation-"+e.options.animationType)},o.plugins.animationCloneDelay=function(e){return!o.private.modernBrowser||a.inArray(e.options.animationType,["3dflip","flipOutDelay","foldLeft","frontRow","rotateRoom","rotateSides","scaleDown","slideDelay","unfold"])<0?null:new t(e)}}(jQuery,(window,document)),function(n){"use strict";var r=n.fn.cubeportfolio.constructor;function t(e){(this.parent=e).filterLayout=this.filterLayout}t.prototype.filterLayout=function(){var e=this,t=e.$ul[0].cloneNode(!0);function i(){e.wrapper[0].removeChild(t),e.$obj.removeClass("cbp-animation-"+e.options.animationType),e.filterFinish()}t.setAttribute("class","cbp-wrapper-helper"),e.wrapper[0].insertBefore(t,e.$ul[0]),requestAnimationFrame(function(){e.$obj.addClass("cbp-animation-"+e.options.animationType),e.blocksOff.addClass("cbp-item-off"),e.blocksOn.removeClass("cbp-item-off").each(function(e,t){var i=n(t).data("cbp");i.left=i.leftNew,i.top=i.topNew,t.style.left=i.left+"px",t.style.top=i.top+"px"}),e.blocksOn.length?e.$ul.one(r.private.animationend,i):e.blocksOnInitial.length?n(t).one(r.private.animationend,i):i(),e.resizeMainContainer()})},t.prototype.destroy=function(){var e=this.parent;e.$obj.removeClass("cbp-animation-"+e.options.animationType)},r.plugins.animationWrapper=function(e){return!r.private.modernBrowser||n.inArray(e.options.animationType,["bounceBottom","bounceLeft","bounceTop","moveLeft"])<0?null:new t(e)}}(jQuery,(window,document)),function(e){"use strict";var t=e.fn.cubeportfolio.constructor;function i(e){var t=this,i=e.options;t.parent=e,t.captionOn=i.caption,e.registerEvent("onMediaQueries",function(e){e&&e.hasOwnProperty("caption")?t.captionOn!==e.caption&&(t.destroy(),t.captionOn=e.caption,t.init()):t.captionOn!==i.caption&&(t.destroy(),t.captionOn=i.caption,t.init())}),t.init()}i.prototype.init=function(){""!=this.captionOn&&("expand"===this.captionOn||t.private.modernBrowser||(this.parent.options.caption=this.captionOn="minimal"),this.parent.$obj.addClass("cbp-caption-active cbp-caption-"+this.captionOn))},i.prototype.destroy=function(){this.parent.$obj.removeClass("cbp-caption-active cbp-caption-"+this.captionOn)},t.plugins.caption=function(e){return new i(e)}}(jQuery,(window,document)),function(l){"use strict";var e=l.fn.cubeportfolio.constructor;function t(s){(this.parent=s).registerEvent("initFinish",function(){s.$obj.on("click.cbp",".cbp-caption-defaultWrap",function(e){if(e.preventDefault(),!s.isAnimating){s.isAnimating=!0;var t=l(this),i=t.next(),n=t.parent(),r={position:"relative",height:i.outerHeight(!0)},a={position:"relative",height:0};if(s.$obj.addClass("cbp-caption-expand-active"),n.hasClass("cbp-caption-expand-open")){var o=a;a=r,r=o,n.removeClass("cbp-caption-expand-open")}i.css(r),s.$obj.one("pluginResize.cbp",function(){s.isAnimating=!1,s.$obj.removeClass("cbp-caption-expand-active"),0===r.height&&(n.removeClass("cbp-caption-expand-open"),i.attr("style",""))}),s.layoutAndAdjustment(!0),i.css(a),requestAnimationFrame(function(){n.addClass("cbp-caption-expand-open"),i.css(r),s.triggerEvent("gridAdjust"),s.triggerEvent("resizeGrid")})}})},!0)}t.prototype.destroy=function(){this.parent.$obj.find(".cbp-caption-defaultWrap").off("click.cbp").parent().removeClass("cbp-caption-expand-active")},e.plugins.captionExpand=function(e){return"expand"!==e.options.caption?null:new t(e)}}(jQuery,(window,document)),function(t){"use strict";var n=t.fn.cubeportfolio.constructor;function i(i){i.registerEvent("initEndWrite",function(){if(!(i.width<=0)){var e=t.Deferred();i.pushQueue("delayFrame",e),i.blocksOn.each(function(e,t){t.style[n.private.animationDelay]=e*i.options.displayTypeSpeed+"ms"}),i.$obj.addClass("cbp-displayType-bottomToTop"),i.blocksOn.last().one(n.private.animationend,function(){i.$obj.removeClass("cbp-displayType-bottomToTop"),i.blocksOn.each(function(e,t){t.style[n.private.animationDelay]=""}),e.resolve()})}},!0)}n.plugins.displayBottomToTop=function(e){return n.private.modernBrowser&&"bottomToTop"===e.options.displayType&&0!==e.blocksOn.length?new i(e):null}}(jQuery,(window,document)),function(i){"use strict";var n=i.fn.cubeportfolio.constructor;function t(t){t.registerEvent("initEndWrite",function(){if(!(t.width<=0)){var e=i.Deferred();t.pushQueue("delayFrame",e),t.obj.style[n.private.animationDuration]=t.options.displayTypeSpeed+"ms",t.$obj.addClass("cbp-displayType-fadeIn"),t.$obj.one(n.private.animationend,function(){t.$obj.removeClass("cbp-displayType-fadeIn"),t.obj.style[n.private.animationDuration]="",e.resolve()})}},!0)}n.plugins.displayFadeIn=function(e){return!n.private.modernBrowser||"lazyLoading"!==e.options.displayType&&"fadeIn"!==e.options.displayType||0===e.blocksOn.length?null:new t(e)}}(jQuery,(window,document)),function(i){"use strict";var n=i.fn.cubeportfolio.constructor;function t(t){t.registerEvent("initEndWrite",function(){if(!(t.width<=0)){var e=i.Deferred();t.pushQueue("delayFrame",e),t.obj.style[n.private.animationDuration]=t.options.displayTypeSpeed+"ms",t.$obj.addClass("cbp-displayType-fadeInToTop"),t.$obj.one(n.private.animationend,function(){t.$obj.removeClass("cbp-displayType-fadeInToTop"),t.obj.style[n.private.animationDuration]="",e.resolve()})}},!0)}n.plugins.displayFadeInToTop=function(e){return n.private.modernBrowser&&"fadeInToTop"===e.options.displayType&&0!==e.blocksOn.length?new t(e):null}}(jQuery,(window,document)),function(t){"use strict";var n=t.fn.cubeportfolio.constructor;function i(i){i.registerEvent("initEndWrite",function(){if(!(i.width<=0)){var e=t.Deferred();i.pushQueue("delayFrame",e),i.blocksOn.each(function(e,t){t.style[n.private.animationDelay]=e*i.options.displayTypeSpeed+"ms"}),i.$obj.addClass("cbp-displayType-sequentially"),i.blocksOn.last().one(n.private.animationend,function(){i.$obj.removeClass("cbp-displayType-sequentially"),i.blocksOn.each(function(e,t){t.style[n.private.animationDelay]=""}),e.resolve()})}},!0)}n.plugins.displaySequentially=function(e){return n.private.modernBrowser&&"sequentially"===e.options.displayType&&0!==e.blocksOn.length?new i(e):null}}(jQuery,(window,document)),function(c){"use strict";var e=c.fn.cubeportfolio.constructor;function t(e){var t=this;t.parent=e,t.filters=c(e.options.filters),t.filterData=[],e.registerEvent("afterPlugins",function(e){t.filterFromUrl(),t.registerFilter()}),e.registerEvent("resetFiltersVisual",function(){var r=e.options.defaultFilter.split("|");t.filters.each(function(e,t){var n=c(t).find(".cbp-filter-item");n.removeClass("cbp-filter-item-active"),c.each(r,function(e,t){var i=n.filter('[data-filter="'+t+'"]');if(i.length)return i.addClass("cbp-filter-item-active"),r.splice(e,1),!1})}),e.defaultFilter=e.options.defaultFilter})}t.prototype.registerFilter=function(){var s=this,l=s.parent,u=l.defaultFilter.split("|");s.wrap=s.filters.find(".cbp-l-filters-dropdownWrap").on({"mouseover.cbp":function(){c(this).addClass("cbp-l-filters-dropdownWrap-open")},"mouseleave.cbp":function(){c(this).removeClass("cbp-l-filters-dropdownWrap-open")}}),s.filters.each(function(e,n){var t=c(n),i="*",r=t.find(".cbp-filter-item"),a={};t.hasClass("cbp-l-filters-dropdown")&&(a.wrap=t.find(".cbp-l-filters-dropdownWrap"),a.header=t.find(".cbp-l-filters-dropdownHeader"),a.headerText=a.header.text()),l.$obj.cubeportfolio("showCounter",r),c.each(u,function(e,t){if(r.filter('[data-filter="'+t+'"]').length)return i=t,u.splice(e,1),!1}),c.data(n,"filterName",i),s.filterData.push(n),s.filtersCallback(a,r.filter('[data-filter="'+i+'"]'),r);var o=n.getAttribute("data-filter-parent");o&&(t.removeClass("cbp-l-subfilters--active"),o===s.parent.defaultFilter&&t.addClass("cbp-l-subfilters--active")),r.on("click.cbp",function(){var e=c(this);if(!e.hasClass("cbp-filter-item-active")&&!l.isAnimating){s.filtersCallback(a,e,r),c.data(n,"filterName",e.data("filter"));var t=c.map(s.filterData,function(e,t){var i=c(e),n=e.getAttribute("data-filter-parent");n&&(n===c.data(s.filterData[0],"filterName")?i.addClass("cbp-l-subfilters--active"):(i.removeClass("cbp-l-subfilters--active"),c.data(e,"filterName","*"),i.find(".cbp-filter-item").removeClass("cbp-filter-item-active")));var r=c.data(e,"filterName");return""!==r&&"*"!==r?r:null});t.length<1&&(t=["*"]);var i=t.join("|");l.defaultFilter!==i&&l.$obj.cubeportfolio("filter",i)}})})},t.prototype.filtersCallback=function(e,t,i){c.isEmptyObject(e)||(e.wrap.trigger("mouseleave.cbp"),e.headerText?e.headerText="":e.header.html(t.html())),i.removeClass("cbp-filter-item-active"),t.addClass("cbp-filter-item-active")},t.prototype.filterFromUrl=function(){var e=/#cbpf=(.*?)([#\?&]|$)/gi.exec(location.href);null!==e&&(this.parent.defaultFilter=decodeURIComponent(e[1]))},t.prototype.destroy=function(){this.filters.find(".cbp-filter-item").off(".cbp"),this.wrap.off(".cbp")},e.plugins.filters=function(e){return""===e.options.filters?null:new t(e)}}(jQuery,(window,document)),function(r){"use strict";function t(n){var t=n.options.gapVertical,i=n.options.gapHorizontal;n.registerEvent("onMediaQueries",function(e){n.options.gapVertical=e&&e.hasOwnProperty("gapVertical")?e.gapVertical:t,n.options.gapHorizontal=e&&e.hasOwnProperty("gapHorizontal")?e.gapHorizontal:i,n.blocks.each(function(e,t){var i=r(t).data("cbp");i.widthAndGap=i.width+n.options.gapVertical,i.heightAndGap=i.height+n.options.gapHorizontal})})}r.fn.cubeportfolio.constructor.plugins.changeGapOnMediaQueries=function(e){return new t(e)}}(jQuery,(window,document)),function(a){"use strict";var i={},e=a.fn.cubeportfolio.constructor;function t(e){var t=this;t.parent=e,t.options=a.extend({},i,t.parent.options.plugins.inlineSlider),t.runInit(),e.registerEvent("addItemsToDOM",function(){t.runInit()})}function o(e){var t=this;e.hasClass("cbp-slider-inline-ready")||(e.addClass("cbp-slider-inline-ready"),t.items=e.find(".cbp-slider-wrapper").children(".cbp-slider-item"),t.active=t.items.filter(".cbp-slider-item--active").index(),t.total=t.items.length-1,t.updateLeft(),e.find(".cbp-slider-next").on("click.cbp",function(e){e.preventDefault(),t.active<t.total?(t.active++,t.updateLeft()):t.active===t.total&&(t.active=0,t.updateLeft())}),e.find(".cbp-slider-prev").on("click.cbp",function(e){e.preventDefault(),0<t.active?(t.active--,t.updateLeft()):0===t.active&&(t.active=t.total,t.updateLeft())}))}o.prototype.updateLeft=function(){var i=this;i.items.removeClass("cbp-slider-item--active"),i.items.eq(i.active).addClass("cbp-slider-item--active"),i.items.each(function(e,t){t.style.left=e-i.active+"00%"})},t.prototype.runInit=function(){var r=this;r.parent.$obj.find(".cbp-slider-inline").not(".cbp-slider-inline-ready").each(function(e,t){var i=a(t),n=i.find(".cbp-slider-item--active").find("img")[0];n.hasAttribute("data-cbp-src")?r.parent.$obj.on("lazyLoad.cbp",function(e,t){t.src===n.src&&new o(i)}):new o(i)})},t.prototype.destroy=function(){this.parent.$obj.find(".cbp-slider-next").off("click.cbp"),this.parent.$obj.find(".cbp-slider-prev").off("click.cbp"),this.parent.$obj.off("lazyLoad.cbp"),this.parent.$obj.find(".cbp-slider-inline").each(function(e,t){var i=a(t);i.removeClass("cbp-slider-inline-ready");var n=i.find(".cbp-slider-item");n.removeClass("cbp-slider-item--active"),n.removeAttr("style"),n.eq(0).addClass("cbp-slider-item--active")})},e.plugins.inlineSlider=function(e){return new t(e)}}(jQuery,(window,document)),function(a,e){"use strict";var i={loadingClass:"cbp-lazyload",threshold:400},r=a.fn.cubeportfolio.constructor,t=a(e);function n(e){var t=this;t.parent=e,t.options=a.extend({},i,t.parent.options.plugins.lazyLoad),e.registerEvent("initFinish",function(){t.loadImages(),e.registerEvent("resizeMainContainer",function(){t.loadImages()}),e.registerEvent("filterFinish",function(){t.loadImages()}),r.private.lazyLoadScroll.initEvent({instance:t,fn:t.loadImages})},!0)}r.private.lazyLoadScroll=new r.private.publicEvents("scroll.cbplazyLoad",50),n.prototype.loadImages=function(){var r=this,e=r.parent.$obj.find("img").filter("[data-cbp-src]");0!==e.length&&(r.screenHeight=t.height(),e.each(function(e,t){var i=a(t.parentNode);if(r.isElementInScreen(t)){var n=t.getAttribute("data-cbp-src");null===r.parent.checkSrc(a("<img>").attr("src",n))?(r.removeLazyLoad(t,n),i.removeClass(r.options.loadingClass)):(i.addClass(r.options.loadingClass),a("<img>").on("load.cbp error.cbp",function(){r.removeLazyLoad(t,n,i)}).attr("src",n))}else i.addClass(r.options.loadingClass)}))},n.prototype.removeLazyLoad=function(e,t,i){var n=this;e.src=t,e.removeAttribute("data-cbp-src"),n.parent.removeAttrImage(e),n.parent.$obj.trigger("lazyLoad.cbp",e),i&&(r.private.modernBrowser?a(e).one(r.private.transitionend,function(){i.removeClass(n.options.loadingClass)}):i.removeClass(n.options.loadingClass))},n.prototype.isElementInScreen=function(e){var t=e.getBoundingClientRect(),i=t.bottom+this.options.threshold,n=this.screenHeight+i-(t.top-this.options.threshold);return 0<=i&&i<=n},n.prototype.destroy=function(){r.private.lazyLoadScroll.destroyEvent(this)},r.plugins.lazyLoad=function(e){return new n(e)}}(jQuery,window,document),function(o,a){"use strict";var t={element:"",action:"click",loadItems:3},s=o.fn.cubeportfolio.constructor;function i(e){var i=this;i.parent=e,i.options=o.extend({},t,i.parent.options.plugins.loadMore),i.loadMore=o(i.options.element).find(".cbp-l-loadMore-link"),0!==i.loadMore.length&&(i.loadItems=i.loadMore.find(".cbp-l-loadMore-loadItems"),"0"===i.loadItems.text()&&i.loadMore.addClass("cbp-l-loadMore-stop"),e.registerEvent("filterStart",function(t){i.populateItems().then(function(){var e=i.items.filter(i.parent.filterConcat(t)).length;0<e?(i.loadMore.removeClass("cbp-l-loadMore-stop"),i.loadItems.html(e)):i.loadMore.addClass("cbp-l-loadMore-stop")})}),i[i.options.action]())}i.prototype.populateItems=function(){var i=this;return i.items?o.Deferred().resolve():(i.items=o(),o.ajax({url:i.loadMore.attr("href"),type:"GET",dataType:"HTML"}).done(function(e){var t=o.map(e.split(/\r?\n/),function(e,t){return o.trim(e)}).join("");0!==t.length&&o.each(o.parseHTML(t),function(e,t){o(t).hasClass("cbp-item")?i.items=i.items.add(t):o.each(t.children,function(e,t){o(t).hasClass("cbp-item")&&(i.items=i.items.add(t))})})}).fail(function(){i.items=null,i.loadMore.removeClass("cbp-l-loadMore-loading")}))},i.prototype.populateInsertItems=function(e){var i=this,n=[],r=i.parent.defaultFilter,a=0;i.items.each(function(e,t){if(a===i.options.loadItems)return!1;r&&"*"!==r&&!o(t).filter(i.parent.filterConcat(r)).length||(n.push(t),i.items[e]=null,a++)}),i.items=i.items.map(function(e,t){return t}),0!==n.length?i.parent.$obj.cubeportfolio("append",n,e):i.loadMore.removeClass("cbp-l-loadMore-loading").addClass("cbp-l-loadMore-stop")},i.prototype.click=function(){var i=this;function t(){i.loadMore.removeClass("cbp-l-loadMore-loading");var e,t=i.parent.defaultFilter;0===(e=t&&"*"!==t?i.items.filter(i.parent.filterConcat(t)).length:i.items.length)?i.loadMore.addClass("cbp-l-loadMore-stop"):i.loadItems.html(e)}i.loadMore.on("click.cbp",function(e){e.preventDefault(),i.parent.isAnimating||i.loadMore.hasClass("cbp-l-loadMore-stop")||(i.loadMore.addClass("cbp-l-loadMore-loading"),i.populateItems().then(function(){i.populateInsertItems(t)}))})},i.prototype.auto=function(){var i=this,n=o(a),r=!1;function e(){if(!r&&!i.loadMore.hasClass("cbp-l-loadMore-stop")){var e=i.loadMore.offset().top-200;n.scrollTop()+n.height()<e||(r=!0,i.populateItems().then(function(){i.populateInsertItems(t)}).fail(function(){r=!1}))}}function t(){var e,t=i.parent.defaultFilter;0===(e=t&&"*"!==t?i.items.filter(i.parent.filterConcat(t)).length:i.items.length)?i.loadMore.removeClass("cbp-l-loadMore-loading").addClass("cbp-l-loadMore-stop"):(i.loadItems.html(e),n.trigger("scroll.loadMore")),r=!1,0===i.items.length&&(s.private.loadMoreScroll.destroyEvent(i),i.parent.$obj.off("filterComplete.cbp"))}s.private.loadMoreScroll=new s.private.publicEvents("scroll.loadMore",100),i.parent.$obj.one("initComplete.cbp",function(){i.loadMore.addClass("cbp-l-loadMore-loading").on("click.cbp",function(e){e.preventDefault()}),s.private.loadMoreScroll.initEvent({instance:i,fn:function(){i.parent.isAnimating||e()}}),i.parent.$obj.on("filterComplete.cbp",function(){e()}),e()})},i.prototype.destroy=function(){this.loadMore.off(".cbp"),s.private.loadMoreScroll&&s.private.loadMoreScroll.destroyEvent(this)},s.plugins.loadMore=function(e){var t=e.options.plugins;return e.options.loadMore&&(t.loadMore||(t.loadMore={}),t.loadMore.element=e.options.loadMore),e.options.loadMoreAction&&(t.loadMore||(t.loadMore={}),t.loadMore.action=e.options.loadMoreAction),t.loadMore&&void 0!==t.loadMore.selector&&(t.loadMore.element=t.loadMore.selector,delete t.loadMore.selector),t.loadMore&&t.loadMore.element?new i(e):null}}(jQuery,window,document),function(d,h,p){"use strict";var l=d.fn.cubeportfolio.constructor,c={delay:0},t={init:function(e,t){var r,a=this;if(a.cubeportfolio=e,a.type=t,a.isOpen=!1,a.options=a.cubeportfolio.options,"lightbox"===t&&(a.cubeportfolio.registerEvent("resizeWindow",function(){a.resizeImage()}),a.localOptions=d.extend({},c,a.cubeportfolio.options.plugins.lightbox)),"singlePageInline"!==t){if(a.createMarkup(),"singlePage"===t){if(a.cubeportfolio.registerEvent("resizeWindow",function(){if(a.options.singlePageStickyNavigation){var e=a.contentWrap[0].clientWidth;0<e&&(a.navigationWrap.width(e),a.navigation.width(e))}}),a.options.singlePageDeeplinking)if(a.url=location.href,"#"===a.url.slice(-1)&&(a.url=a.url.slice(0,-1)),u=(l=a.url.split("#cbp=")).shift(),d.each(l,function(e,n){if(a.cubeportfolio.blocksOn.each(function(e,t){var i=d(t).find(a.options.singlePageDelegate+'[href="'+n+'"]');if(i.length)return r=i,!1}),r)return!1}),r){a.url=u;var i=r,n=i.attr("data-cbp-singlePage"),o=[];n?o=i.closest(d(".cbp-item")).find('[data-cbp-singlePage="'+n+'"]'):a.cubeportfolio.blocksOn.each(function(e,t){var i=d(t);i.not(".cbp-item-off")&&i.find(a.options.singlePageDelegate).each(function(e,t){d(t).attr("data-cbp-singlePage")||o.push(t)})}),a.openSinglePage(o,r[0])}else if(l.length){var s=p.createElement("a");s.setAttribute("href",l[0]),a.openSinglePage([s],s)}a.localOptions=d.extend({},c,a.cubeportfolio.options.plugins.singlePage)}}else{if(a.height=0,a.createMarkupSinglePageInline(),a.cubeportfolio.registerEvent("resizeGrid",function(){a.isOpen&&a.close()}),a.options.singlePageInlineDeeplinking){a.url=location.href,"#"===a.url.slice(-1)&&(a.url=a.url.slice(0,-1));var l,u=(l=a.url.split("#cbpi=")).shift();d.each(l,function(e,n){if(a.cubeportfolio.blocksOn.each(function(e,t){var i=d(t).find(a.options.singlePageInlineDelegate+'[href="'+n+'"]');if(i.length)return r=i,!1}),r)return!1}),r&&a.cubeportfolio.registerEvent("initFinish",function(){a.openSinglePageInline(a.cubeportfolio.blocksOn,r[0])},!0)}a.localOptions=d.extend({},c,a.cubeportfolio.options.plugins.singlePageInline)}},createMarkup:function(){var o=this,e="";if("singlePage"===o.type&&"left"!==o.options.singlePageAnimation&&(e=" cbp-popup-singlePage-"+o.options.singlePageAnimation),o.wrap=d("<div/>",{class:"cbp-popup-wrap cbp-popup-"+o.type+e,"data-action":"lightbox"===o.type?"close":""}).on("click.cbp",function(e){if(!o.stopEvents){var t=d(e.target).attr("data-action");o[t]&&(o[t](),e.preventDefault())}}),"singlePage"===o.type?(o.contentWrap=d("<div/>",{class:"cbp-popup-content-wrap"}).appendTo(o.wrap),"ios"===l.private.browser&&o.contentWrap.css("overflow","auto"),o.content=d("<div/>",{class:"cbp-popup-content"}).appendTo(o.contentWrap)):o.content=d("<div/>",{class:"cbp-popup-content"}).appendTo(o.wrap),d("<div/>",{class:"cbp-popup-loadingBox"}).appendTo(o.wrap),"ie8"===l.private.browser&&(o.bg=d("<div/>",{class:"cbp-popup-ie8bg","data-action":"lightbox"===o.type?"close":""}).appendTo(o.wrap)),"singlePage"===o.type&&!1===o.options.singlePageStickyNavigation?o.navigationWrap=d("<div/>",{class:"cbp-popup-navigation-wrap"}).appendTo(o.contentWrap):o.navigationWrap=d("<div/>",{class:"cbp-popup-navigation-wrap"}).appendTo(o.wrap),o.navigation=d("<div/>",{class:"cbp-popup-navigation"}).appendTo(o.navigationWrap),o.closeButton=d("<div/>",{class:"cbp-popup-close",title:"Close (Esc arrow key)","data-action":"close"}).appendTo(o.navigation),o.nextButton=d("<div/>",{class:"cbp-popup-next",title:"Next (Right arrow key)","data-action":"next"}).appendTo(o.navigation),o.prevButton=d("<div/>",{class:"cbp-popup-prev",title:"Previous (Left arrow key)","data-action":"prev"}).appendTo(o.navigation),"singlePage"===o.type){o.options.singlePageCounter&&(o.counter=d(o.options.singlePageCounter).appendTo(o.navigation),o.counter.text("")),o.content.on("click.cbp",o.options.singlePageDelegate,function(e){e.preventDefault();var t,i,n=o.dataArray.length,r=this.getAttribute("href");for(t=0;t<n;t++)if(o.dataArray[t].url===r){i=t;break}if(void 0===i){var a=p.createElement("a");a.setAttribute("href",r),o.dataArray=[{url:r,element:a}],o.counterTotal=1,o.nextButton.hide(),o.prevButton.hide(),o.singlePageJumpTo(0)}else o.singlePageJumpTo(i-o.current)});var t=!1;try{var i=Object.defineProperty({},"passive",{get:function(){t={passive:!0}}});h.addEventListener("testPassive",null,i),h.removeEventListener("testPassive",null,i)}catch(e){}var n="onwheel"in p.createElement("div")?"wheel":"mousewheel";o.contentWrap[0].addEventListener(n,function(e){e.stopImmediatePropagation()},t)}d(p).on("keydown.cbp",function(e){o.isOpen&&(o.stopEvents||(a&&e.stopImmediatePropagation(),37===e.keyCode?o.prev():39===e.keyCode?o.next():27===e.keyCode&&o.close()))})},createMarkupSinglePageInline:function(){var i=this;i.wrap=d("<div/>",{class:"cbp-popup-singlePageInline"}).on("click.cbp",function(e){if(!i.stopEvents){var t=d(e.target).attr("data-action");t&&i[t]&&(i[t](),e.preventDefault())}}),i.content=d("<div/>",{class:"cbp-popup-content"}).appendTo(i.wrap),i.navigation=d("<div/>",{class:"cbp-popup-navigation"}).appendTo(i.wrap),i.closeButton=d("<div/>",{class:"cbp-popup-close",title:"Close (Esc arrow key)","data-action":"close"}).appendTo(i.navigation)},destroy:function(){var e=this,t=d("body");d(p).off("keydown.cbp"),t.off("click.cbp",e.options.lightboxDelegate),t.off("click.cbp",e.options.singlePageDelegate),e.content.off("click.cbp",e.options.singlePageDelegate),e.cubeportfolio.$obj.off("click.cbp",e.options.singlePageInlineDelegate),e.cubeportfolio.$obj.off("click.cbp",e.options.lightboxDelegate),e.cubeportfolio.$obj.off("click.cbp",e.options.singlePageDelegate),e.cubeportfolio.$obj.removeClass("cbp-popup-isOpening"),e.cubeportfolio.$obj.find(".cbp-item").removeClass("cbp-singlePageInline-active"),e.wrap.remove()},openLightbox:function(e,t){var s,i,l=this,u=0,c=[];if(!l.isOpen){if(a=!0,l.isOpen=!0,l.stopEvents=!1,l.dataArray=[],(l.current=null)===(s=t.getAttribute("href")))throw new Error("HEI! Your clicked element doesn't have a href attribute.");d.each(e,function(e,t){var i,n=t.getAttribute("href"),r=n,a="isImage";if(-1===d.inArray(n,c)){if(s===n)l.current=u;else if(!l.options.lightboxGallery)return;if(/youtu\.?be/i.test(n)){var o=n.lastIndexOf("v=")+2;1===o&&(o=n.lastIndexOf("/")+1),i=n.substring(o),/autoplay=/i.test(i)||(i+="&autoplay=1"),r="//www.youtube.com/embed/"+(i=i.replace(/\?|&/,"?")),a="isYoutube"}else/vimeo\.com/i.test(n)?(i=n.substring(n.lastIndexOf("/")+1),/autoplay=/i.test(i)||(i+="&autoplay=1"),r="//player.vimeo.com/video/"+(i=i.replace(/\?|&/,"?")),a="isVimeo"):/www\.ted\.com/i.test(n)?(r="http://embed.ted.com/talks/"+n.substring(n.lastIndexOf("/")+1)+".html",a="isTed"):/soundcloud\.com/i.test(n)?(r=n,a="isSoundCloud"):/(\.mp4)|(\.ogg)|(\.ogv)|(\.webm)/i.test(n)?(r=-1!==n.indexOf("|")?n.split("|"):n.split("%7C"),a="isSelfHostedVideo"):/\.mp3$/i.test(n)&&(r=n,a="isSelfHostedAudio");l.dataArray.push({src:r,title:t.getAttribute(l.options.lightboxTitleSrc),type:a}),u++}c.push(n)}),l.counterTotal=l.dataArray.length,1===l.counterTotal?(l.nextButton.hide(),l.prevButton.hide(),l.dataActionImg=""):(l.nextButton.show(),l.prevButton.show(),l.dataActionImg='data-action="next"'),l.wrap.appendTo(p.body),l.scrollTop=d(h).scrollTop(),l.originalStyle=d("html").attr("style"),d("html").css({overflow:"hidden",marginRight:h.innerWidth-d(p).width()}),l.wrap.addClass("cbp-popup-transitionend"),l.wrap.show(),i=l.dataArray[l.current],l[i.type](i)}},openSinglePage:function(e,t){var n,r=this,a=0,o=[];if(!r.isOpen){if(r.cubeportfolio.singlePageInline&&r.cubeportfolio.singlePageInline.isOpen&&r.cubeportfolio.singlePageInline.close(),r.isOpen=!0,r.stopEvents=!1,r.dataArray=[],(r.current=null)===(n=t.getAttribute("href")))throw new Error("HEI! Your clicked element doesn't have a href attribute.");if(d.each(e,function(e,t){var i=t.getAttribute("href");-1===d.inArray(i,o)&&(n===i&&(r.current=a),r.dataArray.push({url:i,element:t}),a++),o.push(i)}),r.counterTotal=r.dataArray.length,1===r.counterTotal?(r.nextButton.hide(),r.prevButton.hide()):(r.nextButton.show(),r.prevButton.show()),r.wrap.appendTo(p.body),r.scrollTop=d(h).scrollTop(),r.contentWrap.scrollTop(0),r.wrap.show(),r.finishOpen=2,r.navigationMobile=d(),r.wrap.one(l.private.transitionend,function(){d("html").css({overflow:"hidden",marginRight:h.innerWidth-d(p).width()}),r.wrap.addClass("cbp-popup-transitionend"),r.options.singlePageStickyNavigation&&(r.wrap.addClass("cbp-popup-singlePage-sticky"),r.navigationWrap.width(r.contentWrap[0].clientWidth)),r.finishOpen--,r.finishOpen<=0&&r.updateSinglePageIsOpen.call(r)}),"ie8"!==l.private.browser&&"ie9"!==l.private.browser||(d("html").css({overflow:"hidden",marginRight:h.innerWidth-d(p).width()}),r.wrap.addClass("cbp-popup-transitionend"),r.options.singlePageStickyNavigation&&(r.navigationWrap.width(r.contentWrap[0].clientWidth),setTimeout(function(){r.wrap.addClass("cbp-popup-singlePage-sticky")},1e3)),r.finishOpen--),r.wrap.addClass("cbp-popup-loading"),r.wrap.offset(),r.wrap.addClass("cbp-popup-singlePage-open"),r.options.singlePageDeeplinking&&(r.url=r.url.split("#cbp=")[0],location.href=r.url+"#cbp="+r.dataArray[r.current].url),d.isFunction(r.options.singlePageCallback)&&r.options.singlePageCallback.call(r,r.dataArray[r.current].url,r.dataArray[r.current].element),"ios"===l.private.browser){var s=r.contentWrap[0];s.addEventListener("touchstart",function(){var e=s.scrollTop,t=s.scrollHeight,i=e+s.offsetHeight;0===e?s.scrollTop=1:i===t&&(s.scrollTop=e-1)})}}},openSinglePageInline:function(e,t,i){var n,r,a,o=this;if(i=i||!1,o.fromOpen=i,o.storeBlocks=e,o.storeCurrentBlock=t,o.isOpen)return r=o.cubeportfolio.blocksOn.index(d(t).closest(".cbp-item")),void(o.dataArray[o.current].url!==t.getAttribute("href")||o.current!==r?o.cubeportfolio.singlePageInline.close("open",{blocks:e,currentBlock:t,fromOpen:!0}):o.close());if(o.isOpen=!0,o.stopEvents=!1,o.dataArray=[],(o.current=null)===(n=t.getAttribute("href")))throw new Error("HEI! Your clicked element doesn't have a href attribute.");if(a=d(t).closest(".cbp-item")[0],e.each(function(e,t){a===t&&(o.current=e)}),o.dataArray[o.current]={url:n,element:t},d(o.dataArray[o.current].element).parents(".cbp-item").addClass("cbp-singlePageInline-active"),o.counterTotal=e.length,o.wrap.insertBefore(o.cubeportfolio.wrapper),o.topDifference=0,"top"===o.options.singlePageInlinePosition)o.blocksToMove=e,o.top=0;else if("bottom"===o.options.singlePageInlinePosition)o.blocksToMove=d(),o.top=o.cubeportfolio.height;else if("above"===o.options.singlePageInlinePosition){var s=d(e[o.current]).data("cbp").top;o.top=s,e.each(function(e,t){var i=d(t).data("cbp"),n=i.top,r=n+i.heightAndGap;s<=n||r>o.top&&(o.top=r,o.topDifference=o.top-s)}),o.blocksToMove=d(),e.each(function(e,t){if(e!==o.current){var i=d(t).data("cbp");i.top+i.heightAndGap>o.top&&(o.blocksToMove=o.blocksToMove.add(t))}else o.blocksToMove=o.blocksToMove.add(t)}),o.top=Math.max(o.top-o.options.gapHorizontal,0)}else{var l=d(e[o.current]).data("cbp"),u=l.top+l.heightAndGap;o.top=u,o.blocksToMove=d(),e.each(function(e,t){var i=d(t).data("cbp"),n=i.top,r=n+i.height;r<=u||(n>=u-i.height/2?o.blocksToMove=o.blocksToMove.add(t):u<r&&n<u&&(r>o.top&&(o.top=r),r-u>o.topDifference&&(o.topDifference=r-u)))})}if(o.wrap[0].style.height=o.wrap.outerHeight(!0)+"px",o.deferredInline=d.Deferred(),o.options.singlePageInlineInFocus){o.scrollTop=d(h).scrollTop();var c=o.cubeportfolio.$obj.offset().top+o.top-100;o.scrollTop!==c?d("html,body").animate({scrollTop:c},350).promise().then(function(){o.resizeSinglePageInline(),o.deferredInline.resolve()}):(o.resizeSinglePageInline(),o.deferredInline.resolve())}else o.resizeSinglePageInline(),o.deferredInline.resolve();o.cubeportfolio.$obj.addClass("cbp-popup-singlePageInline-open"),o.wrap.css({top:o.top}),o.options.singlePageInlineDeeplinking&&(o.url=o.url.split("#cbpi=")[0],location.href=o.url+"#cbpi="+o.dataArray[o.current].url),d.isFunction(o.options.singlePageInlineCallback)&&o.options.singlePageInlineCallback.call(o,o.dataArray[o.current].url,o.dataArray[o.current].element)},resizeSinglePageInline:function(){var i=this;i.height=0===i.top||i.top===i.cubeportfolio.height?i.wrap.outerHeight(!0):i.wrap.outerHeight(!0)-i.options.gapHorizontal,i.height+=i.topDifference,i.storeBlocks.each(function(e,t){l.private.modernBrowser?t.style[l.private.transform]="":t.style.marginTop=""}),i.blocksToMove.each(function(e,t){l.private.modernBrowser?t.style[l.private.transform]="translate3d(0px, "+i.height+"px, 0)":t.style.marginTop=i.height+"px"}),i.cubeportfolio.obj.style.height=i.cubeportfolio.height+i.height+"px"},revertResizeSinglePageInline:function(){this.deferredInline=d.Deferred(),this.storeBlocks.each(function(e,t){l.private.modernBrowser?t.style[l.private.transform]="":t.style.marginTop=""}),this.cubeportfolio.obj.style.height=this.cubeportfolio.height+"px"},appendScriptsToWrap:function(n){var r=this,a=0,o=function(e){var t=p.createElement("script"),i=e.src;t.type="text/javascript",t.readyState?t.onreadystatechange=function(){"loaded"!=t.readyState&&"complete"!=t.readyState||(t.onreadystatechange=null,n[++a]&&o(n[a]))}:t.onload=function(){n[++a]&&o(n[a])},i?t.src=i:t.text=e.text,r.content[0].appendChild(t)};o(n[0])},updateSinglePage:function(e,t,i){var n,r=this;r.content.addClass("cbp-popup-content").removeClass("cbp-popup-content-basic"),!1===i&&r.content.removeClass("cbp-popup-content").addClass("cbp-popup-content-basic"),r.counter&&(n=d(r.getCounterMarkup(r.options.singlePageCounter,r.current+1,r.counterTotal)),r.counter.text(n.text())),r.fromAJAX={html:e,scripts:t},r.finishOpen--,r.finishOpen<=0&&r.updateSinglePageIsOpen.call(r)},updateSinglePageIsOpen:function(){var e,t=this;t.wrap.addClass("cbp-popup-ready"),t.wrap.removeClass("cbp-popup-loading"),t.content.html(t.fromAJAX.html),t.fromAJAX.scripts&&t.appendScriptsToWrap(t.fromAJAX.scripts),t.fromAJAX={},t.cubeportfolio.$obj.trigger("updateSinglePageStart.cbp"),(e=t.content.find(".cbp-slider")).length?(e.find(".cbp-slider-item").addClass("cbp-item"),t.slider=e.cubeportfolio({layoutMode:"slider",mediaQueries:[{width:1,cols:1}],gapHorizontal:0,gapVertical:0,caption:"",coverRatio:""})):t.slider=null,t.checkForSocialLinks(t.content),t.cubeportfolio.$obj.trigger("updateSinglePageComplete.cbp")},checkForSocialLinks:function(e){this.createFacebookShare(e.find(".cbp-social-fb")),this.createTwitterShare(e.find(".cbp-social-twitter")),this.createGooglePlusShare(e.find(".cbp-social-googleplus")),this.createPinterestShare(e.find(".cbp-social-pinterest"))},createFacebookShare:function(e){e.length&&!e.attr("onclick")&&e.attr("onclick","window.open('http://www.facebook.com/sharer.php?u="+encodeURIComponent(h.location.href)+"', '_blank', 'top=100,left=100,toolbar=0,status=0,width=620,height=400'); return false;")},createTwitterShare:function(e){e.length&&!e.attr("onclick")&&e.attr("onclick","window.open('https://twitter.com/intent/tweet?source="+encodeURIComponent(h.location.href)+"&text="+encodeURIComponent(p.title)+"', '_blank', 'top=100,left=100,toolbar=0,status=0,width=620,height=300'); return false;")},createGooglePlusShare:function(e){e.length&&!e.attr("onclick")&&e.attr("onclick","window.open('https://plus.google.com/share?url="+encodeURIComponent(h.location.href)+"', '_blank', 'top=100,left=100,toolbar=0,status=0,width=620,height=450'); return false;")},createPinterestShare:function(e){if(e.length&&!e.attr("onclick")){var t="",i=this.content.find("img")[0];i&&(t=i.src),e.attr("onclick","window.open('http://pinterest.com/pin/create/button/?url="+encodeURIComponent(h.location.href)+"&media="+t+"', '_blank', 'top=100,left=100,toolbar=0,status=0,width=620,height=400'); return false;")}},updateSinglePageInline:function(e,t){var i=this;i.content.html(e),t&&i.appendScriptsToWrap(t),i.cubeportfolio.$obj.trigger("updateSinglePageInlineStart.cbp"),0!==i.localOptions.delay?setTimeout(function(){i.singlePageInlineIsOpen.call(i)},i.localOptions.delay):i.singlePageInlineIsOpen.call(i)},singlePageInlineIsOpen:function(){var t=this;function i(){t.wrap.addClass("cbp-popup-singlePageInline-ready"),t.wrap[0].style.height="",t.resizeSinglePageInline(),t.cubeportfolio.$obj.trigger("updateSinglePageInlineComplete.cbp")}t.cubeportfolio.loadImages(t.wrap,function(){var e=t.content.find(".cbp-slider");e.length?(e.find(".cbp-slider-item").addClass("cbp-item"),e.one("initComplete.cbp",function(){t.deferredInline.done(i)}),e.on("pluginResize.cbp",function(){t.deferredInline.done(i)}),t.slider=e.cubeportfolio({layoutMode:"slider",displayType:"default",mediaQueries:[{width:1,cols:1}],gapHorizontal:0,gapVertical:0,caption:"",coverRatio:""})):(t.slider=null,t.deferredInline.done(i)),t.checkForSocialLinks(t.content)})},isImage:function(e){var t=this;new Image,t.tooggleLoading(!0),t.cubeportfolio.loadImages(d('<div><img src="'+e.src+'"></div>'),function(){t.updateImagesMarkup(e.src,e.title,t.getCounterMarkup(t.options.lightboxCounter,t.current+1,t.counterTotal)),t.tooggleLoading(!1)})},isVimeo:function(e){this.updateVideoMarkup(e.src,e.title,this.getCounterMarkup(this.options.lightboxCounter,this.current+1,this.counterTotal))},isYoutube:function(e){this.updateVideoMarkup(e.src,e.title,this.getCounterMarkup(this.options.lightboxCounter,this.current+1,this.counterTotal))},isTed:function(e){this.updateVideoMarkup(e.src,e.title,this.getCounterMarkup(this.options.lightboxCounter,this.current+1,this.counterTotal))},isSoundCloud:function(e){this.updateVideoMarkup(e.src,e.title,this.getCounterMarkup(this.options.lightboxCounter,this.current+1,this.counterTotal))},isSelfHostedVideo:function(e){this.updateSelfHostedVideo(e.src,e.title,this.getCounterMarkup(this.options.lightboxCounter,this.current+1,this.counterTotal))},isSelfHostedAudio:function(e){this.updateSelfHostedAudio(e.src,e.title,this.getCounterMarkup(this.options.lightboxCounter,this.current+1,this.counterTotal))},getCounterMarkup:function(e,t,i){if(!e.length)return"";var n={current:t,total:i};return e.replace(/\{\{current}}|\{\{total}}/gi,function(e){return n[e.slice(2,-2)]})},updateSelfHostedVideo:function(e,t,i){var n;this.wrap.addClass("cbp-popup-lightbox-isIframe");var r='<div class="cbp-popup-lightbox-iframe"><video controls="controls" height="auto" style="width: 100%">';for(n=0;n<e.length;n++)/(\.mp4)/i.test(e[n])?r+='<source src="'+e[n]+'" type="video/mp4">':/(\.ogg)|(\.ogv)/i.test(e[n])?r+='<source src="'+e[n]+'" type="video/ogg">':/(\.webm)/i.test(e[n])&&(r+='<source src="'+e[n]+'" type="video/webm">');r+='Your browser does not support the video tag.</video><div class="cbp-popup-lightbox-bottom">'+(t?'<div class="cbp-popup-lightbox-title">'+t+"</div>":"")+i+"</div></div>",this.content.html(r),this.wrap.addClass("cbp-popup-ready"),this.preloadNearbyImages()},updateSelfHostedAudio:function(e,t,i){this.wrap.addClass("cbp-popup-lightbox-isIframe");var n='<div class="cbp-popup-lightbox-iframe"><div class="cbp-misc-video"><audio controls="controls" height="auto" style="width: 75%"><source src="'+e+'" type="audio/mpeg">Your browser does not support the audio tag.</audio></div><div class="cbp-popup-lightbox-bottom">'+(t?'<div class="cbp-popup-lightbox-title">'+t+"</div>":"")+i+"</div></div>";this.content.html(n),this.wrap.addClass("cbp-popup-ready"),this.preloadNearbyImages()},updateVideoMarkup:function(e,t,i){this.wrap.addClass("cbp-popup-lightbox-isIframe");var n='<div class="cbp-popup-lightbox-iframe"><iframe src="'+e+'" frameborder="0" allowfullscreen scrolling="no"></iframe><div class="cbp-popup-lightbox-bottom">'+(t?'<div class="cbp-popup-lightbox-title">'+t+"</div>":"")+i+"</div></div>";this.content.html(n),this.wrap.addClass("cbp-popup-ready"),this.preloadNearbyImages()},updateImagesMarkup:function(e,t,i){this.wrap.removeClass("cbp-popup-lightbox-isIframe");var n='<div class="cbp-popup-lightbox-figure"><img src="'+e+'" class="cbp-popup-lightbox-img" '+this.dataActionImg+' /><div class="cbp-popup-lightbox-bottom">'+(t?'<div class="cbp-popup-lightbox-title">'+t+"</div>":"")+i+"</div></div>";this.content.html(n),this.wrap.addClass("cbp-popup-ready"),this.resizeImage(),this.preloadNearbyImages()},next:function(){this[this.type+"JumpTo"](1)},prev:function(){this[this.type+"JumpTo"](-1)},lightboxJumpTo:function(e){var t;this.current=this.getIndex(this.current+e),this[(t=this.dataArray[this.current]).type](t)},singlePageJumpTo:function(e){var t=this;t.current=t.getIndex(t.current+e),d.isFunction(t.options.singlePageCallback)&&(t.resetWrap(),t.contentWrap.scrollTop(0),t.wrap.addClass("cbp-popup-loading"),t.slider&&l.private.resize.destroyEvent(d.data(t.slider[0],"cubeportfolio")),t.options.singlePageCallback.call(t,t.dataArray[t.current].url,t.dataArray[t.current].element),t.options.singlePageDeeplinking&&(location.href=t.url+"#cbp="+t.dataArray[t.current].url))},resetWrap:function(){"singlePage"===this.type&&this.options.singlePageDeeplinking&&(location.href=this.url+"#"),"singlePageInline"===this.type&&this.options.singlePageInlineDeeplinking&&(location.href=this.url+"#")},getIndex:function(e){return(e%=this.counterTotal)<0&&(e=this.counterTotal+e),e},close:function(t,e){var i=this;function n(){i.slider&&l.private.resize.destroyEvent(d.data(i.slider[0],"cubeportfolio")),i.content.html(""),i.wrap.detach(),i.cubeportfolio.$obj.removeClass("cbp-popup-singlePageInline-open cbp-popup-singlePageInline-close"),i.isOpen=!1,"promise"===t&&d.isFunction(e.callback)&&e.callback.call(i.cubeportfolio)}function r(){var e=d(h).scrollTop();i.resetWrap(),d(h).scrollTop(e),i.options.singlePageInlineInFocus&&"promise"!==t?d("html,body").animate({scrollTop:i.scrollTop},350).promise().then(function(){n()}):n()}"singlePageInline"===i.type?"open"===t?(i.wrap.removeClass("cbp-popup-singlePageInline-ready"),d(i.dataArray[i.current].element).closest(".cbp-item").removeClass("cbp-singlePageInline-active"),i.isOpen=!1,i.openSinglePageInline(e.blocks,e.currentBlock,e.fromOpen)):(i.height=0,i.revertResizeSinglePageInline(),i.wrap.removeClass("cbp-popup-singlePageInline-ready"),i.cubeportfolio.$obj.addClass("cbp-popup-singlePageInline-close"),i.cubeportfolio.$obj.find(".cbp-item").removeClass("cbp-singlePageInline-active"),l.private.modernBrowser?i.wrap.one(l.private.transitionend,function(){r()}):r()):"singlePage"===i.type?(i.resetWrap(),i.stopScroll=!0,i.wrap.removeClass("cbp-popup-ready cbp-popup-transitionend cbp-popup-singlePage-open cbp-popup-singlePage-sticky"),d("html").css({overflow:"",marginRight:"",position:""}),d(h).scrollTop(i.scrollTop),"ie8"!==l.private.browser&&"ie9"!==l.private.browser||(i.slider&&l.private.resize.destroyEvent(d.data(i.slider[0],"cubeportfolio")),i.content.html(""),i.wrap.detach(),i.isOpen=!1),i.wrap.one(l.private.transitionend,function(){i.slider&&l.private.resize.destroyEvent(d.data(i.slider[0],"cubeportfolio")),i.content.html(""),i.wrap.detach(),i.isOpen=!1})):(a=!1,i.originalStyle?d("html").attr("style",i.originalStyle):d("html").css({overflow:"",marginRight:""}),d(h).scrollTop(i.scrollTop),i.slider&&l.private.resize.destroyEvent(d.data(i.slider[0],"cubeportfolio")),i.content.html(""),i.wrap.detach(),i.isOpen=!1)},tooggleLoading:function(e){this.stopEvents=e,this.wrap[e?"addClass":"removeClass"]("cbp-popup-loading")},resizeImage:function(){if(this.isOpen){var e=this.content.find("img"),t=e.parent(),i=d(h).height()-(t.outerHeight(!0)-t.height())-this.content.find(".cbp-popup-lightbox-bottom").outerHeight(!0);e.css("max-height",i+"px")}},preloadNearbyImages:function(){for(var e=this,t=[e.getIndex(e.current+1),e.getIndex(e.current+2),e.getIndex(e.current+3),e.getIndex(e.current-1),e.getIndex(e.current-2),e.getIndex(e.current-3)],i=t.length-1;0<=i;i--)"isImage"===e.dataArray[t[i]].type&&e.cubeportfolio.checkSrc(e.dataArray[t[i]])}};function i(e){var t=this;!1===(t.parent=e).options.lightboxShowCounter&&(e.options.lightboxCounter=""),!1===e.options.singlePageShowCounter&&(e.options.singlePageCounter=""),e.registerEvent("initStartRead",function(){t.run()},!0)}var a=!1,n=!1,r=!1;i.prototype.run=function(){var o=this,s=o.parent,e=d(p.body);s.lightbox=null,s.options.lightboxDelegate&&!n&&(n=!0,s.lightbox=Object.create(t),s.lightbox.init(s,"lightbox"),e.on("click.cbp",s.options.lightboxDelegate,function(e){e.preventDefault();var t=d(this),n=t.attr("data-cbp-lightbox"),i=o.detectScope(t),r=i.data("cubeportfolio"),a=[];r?r.blocksOn.each(function(e,t){var i=d(t);i.not(".cbp-item-off")&&i.find(s.options.lightboxDelegate).each(function(e,t){n&&d(t).attr("data-cbp-lightbox")!==n||a.push(t)})}):a=n?i.find(s.options.lightboxDelegate+"[data-cbp-lightbox="+n+"]"):i.find(s.options.lightboxDelegate),s.lightbox.openLightbox(a,t[0])})),s.singlePage=null,s.options.singlePageDelegate&&!r&&(r=!0,s.singlePage=Object.create(t),s.singlePage.init(s,"singlePage"),e.on("click.cbp",s.options.singlePageDelegate,function(e){e.preventDefault();var t=d(this),n=t.attr("data-cbp-singlePage"),i=o.detectScope(t),r=i.data("cubeportfolio"),a=[];r?r.blocksOn.each(function(e,t){var i=d(t);i.not(".cbp-item-off")&&i.find(s.options.singlePageDelegate).each(function(e,t){n&&d(t).attr("data-cbp-singlePage")!==n||a.push(t)})}):a=n?i.find(s.options.singlePageDelegate+"[data-cbp-singlePage="+n+"]"):i.find(s.options.singlePageDelegate),s.singlePage.openSinglePage(a,t[0])})),s.singlePageInline=null,s.options.singlePageInlineDelegate&&(s.singlePageInline=Object.create(t),s.singlePageInline.init(s,"singlePageInline"),s.$obj.on("click.cbp",s.options.singlePageInlineDelegate,function(e){e.preventDefault();var t=d.data(this,"cbp-locked"),i=d.data(this,"cbp-locked",+new Date);(!t||300<i-t)&&s.singlePageInline.openSinglePageInline(s.blocksOn,this)}))},i.prototype.detectScope=function(e){var t,i,n;return(t=e.closest(".cbp-popup-singlePageInline")).length?(n=e.closest(".cbp",t[0])).length?n:t:(i=e.closest(".cbp-popup-singlePage")).length?(n=e.closest(".cbp",i[0])).length?n:i:(n=e.closest(".cbp")).length?n:d(p.body)},i.prototype.destroy=function(){var e=this.parent;d(p.body).off("click.cbp"),r=n=!1,e.lightbox&&e.lightbox.destroy(),e.singlePage&&e.singlePage.destroy(),e.singlePageInline&&e.singlePageInline.destroy()},l.plugins.popUp=function(e){return new i(e)}}(jQuery,window,document),function(s){"use strict";var e=s.fn.cubeportfolio.constructor;function t(e){var i=this;i.parent=e,i.searchInput=s(e.options.search),i.searchInput.each(function(e,t){var i=t.getAttribute("data-search");i=i||"*",s.data(t,"searchData",{value:t.value,el:i})});var n=null;i.searchInput.on("keyup.cbp paste.cbp",function(e){e.preventDefault();var t=s(this);clearTimeout(n),n=setTimeout(function(){i.runEvent.call(i,t)},350)}),i.searchNothing=i.searchInput.siblings(".cbp-search-nothing").detach(),i.searchNothingHeight=null,i.searchNothingHTML=i.searchNothing.html(),i.searchInput.siblings(".cbp-search-icon").on("click.cbp",function(e){e.preventDefault(),i.runEvent.call(i,s(this).prev().val(""))})}t.prototype.runEvent=function(e){var n=this,r=e.val(),a=e.data("searchData"),o=new RegExp(r,"i");a.value===r||n.parent.isAnimating||(0<(a.value=r).length?e.attr("value",r):e.removeAttr("value"),n.parent.$obj.cubeportfolio("filter",function(e){var t=e.filter(function(e,t){if(-1<s(t).find(a.el).text().search(o))return!0});if(0===t.length&&n.searchNothing.length){var i=n.searchNothingHTML.replace("{{query}}",r);n.searchNothing.html(i),n.searchNothing.appendTo(n.parent.$obj),null===n.searchNothingHeight&&(n.searchNothingHeight=n.searchNothing.outerHeight(!0)),n.parent.registerEvent("resizeMainContainer",function(){n.parent.height=n.parent.height+n.searchNothingHeight,n.parent.obj.style.height=n.parent.height+"px"},!0)}else n.searchNothing.detach();return n.parent.triggerEvent("resetFiltersVisual"),t},function(){e.trigger("keyup.cbp")}))},t.prototype.destroy=function(){this.searchInput.off(".cbp"),this.searchInput.next(".cbp-search-icon").off(".cbp"),this.searchInput.each(function(e,t){s.removeData(t)})},e.plugins.search=function(e){return""===e.options.search?null:new t(e)}}(jQuery,(window,document)),function(r){"use strict";var n={pagination:"",paginationClass:"cbp-pagination-active"},e=r.fn.cubeportfolio.constructor;function t(e){var t=this;t.parent=e,t.options=r.extend({},n,t.parent.options.plugins.slider);var i=r(t.options.pagination);0<i.length&&(t.parent.customPagination=i,t.parent.customPaginationItems=i.children(),t.parent.customPaginationClass=t.options.paginationClass,t.parent.customPaginationItems.on("click.cbp",function(e){e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation(),t.parent.sliderStopEvents||t.parent.jumpToSlider(r(this))})),t.parent.registerEvent("gridAdjust",function(){t.sliderMarkup.call(t.parent),t.parent.registerEvent("gridAdjust",function(){t.updateSlider.call(t.parent)})},!0)}t.prototype.sliderMarkup=function(){var n=this;n.sliderStopEvents=!1,n.sliderActive=0,n.$obj.one("initComplete.cbp",function(){n.$obj.addClass("cbp-mode-slider")}),n.nav=r("<div/>",{class:"cbp-nav"}),n.nav.on("click.cbp","[data-slider-action]",function(e){if(e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation(),!n.sliderStopEvents){var t=r(this),i=t.attr("data-slider-action");n[i+"Slider"]&&n[i+"Slider"](t)}}),n.options.showNavigation&&(n.controls=r("<div/>",{class:"cbp-nav-controls"}),n.navPrev=r("<div/>",{class:"cbp-nav-prev","data-slider-action":"prev"}).appendTo(n.controls),n.navNext=r("<div/>",{class:"cbp-nav-next","data-slider-action":"next"}).appendTo(n.controls),n.controls.appendTo(n.nav)),n.options.showPagination&&(n.navPagination=r("<div/>",{class:"cbp-nav-pagination"}).appendTo(n.nav)),(n.controls||n.navPagination)&&n.nav.appendTo(n.$obj),n.updateSliderPagination(),n.options.auto&&(n.options.autoPauseOnHover&&(n.mouseIsEntered=!1,n.$obj.on("mouseenter.cbp",function(e){n.mouseIsEntered=!0,n.stopSliderAuto()}).on("mouseleave.cbp",function(e){n.mouseIsEntered=!1,n.startSliderAuto()})),n.startSliderAuto()),n.options.drag&&e.private.modernBrowser&&n.dragSlider()},t.prototype.updateSlider=function(){this.updateSliderPosition(),this.updateSliderPagination()},t.prototype.destroy=function(){this.parent.customPaginationItems&&this.parent.customPaginationItems.off(".cbp"),(this.parent.controls||this.parent.navPagination)&&(this.parent.nav.off(".cbp"),this.parent.nav.remove())},e.plugins.slider=function(e){return"slider"!==e.options.layoutMode?null:new t(e)}}(jQuery,(window,document)),function(d){"use strict";var e={element:""},t=d.fn.cubeportfolio.constructor;function i(t){var i=this;i.parent=t,i.options=d.extend({},e,i.parent.options.plugins.sort),i.element=d(i.options.element),0!==i.element.length&&(i.sort="",i.sortBy="string:asc",i.element.on("click.cbp",".cbp-sort-item",function(e){e.preventDefault(),i.target=e.target,d(i.target).hasClass("cbp-l-dropdown-item--active")||t.isAnimating||(i.processSort(),t.$obj.cubeportfolio("filter",t.defaultFilter))}),t.registerEvent("triggerSort",function(){i.target&&(i.processSort(),t.$obj.cubeportfolio("filter",t.defaultFilter))}),i.dropdownWrap=i.element.find(".cbp-l-dropdown-wrap").on({"mouseover.cbp":function(){d(this).addClass("cbp-l-dropdown-wrap--open")},"mouseleave.cbp":function(){d(this).removeClass("cbp-l-dropdown-wrap--open")}}),i.dropdownHeader=i.element.find(".cbp-l-dropdown-header"))}i.prototype.processSort=function(){var r=this,e=r.parent,t=(u=r.target).hasAttribute("data-sort"),i=u.hasAttribute("data-sortBy");if(t&&i)r.sort=u.getAttribute("data-sort"),r.sortBy=u.getAttribute("data-sortBy");else if(t)r.sort=u.getAttribute("data-sort");else{if(!i)return;r.sortBy=u.getAttribute("data-sortBy")}var n=r.sortBy.split(":"),a="string",o=1;if("int"===n[0]?a="int":"float"===n[0]&&(a="float"),"desc"===n[1]&&(o=-1),r.sort){var s=[];e.blocks.each(function(e,t){var i=d(t),n=i.find(r.sort).text();"int"===a&&(n=parseInt(n,10)),"float"===a&&(n=parseFloat(n,10)),s.push({sortText:n,data:i.data("cbp")})}),s.sort(function(e,t){var i=e.sortText,n=t.sortText;return"string"===a&&(i=i.toUpperCase(),n=n.toUpperCase()),i<n?-o:n<i?o:0}),d.each(s,function(e,t){t.data.index=e})}else{var l=[];-1===o&&(e.blocks.each(function(e,t){l.push(d(t).data("cbp").indexInitial)}),l.sort(function(e,t){return t-e})),e.blocks.each(function(e,t){var i=d(t).data("cbp");i.index=-1===o?l[i.indexInitial]:i.indexInitial})}e.sortBlocks(e.blocks,"index"),r.dropdownWrap.trigger("mouseleave.cbp");var u=d(r.target),c=d(r.target).parent();c.hasClass("cbp-l-dropdown-list")?(r.dropdownHeader.html(u.html()),u.addClass("cbp-l-dropdown-item--active").siblings(".cbp-l-dropdown-item").removeClass("cbp-l-dropdown-item--active")):c.hasClass("cbp-l-direction")&&(0===u.index()?c.addClass("cbp-l-direction--second").removeClass("cbp-l-direction--first"):c.addClass("cbp-l-direction--first").removeClass("cbp-l-direction--second"))},i.prototype.destroy=function(){this.element.off("click.cbp")},t.plugins.sort=function(e){return new i(e)}}(jQuery,(window,document)),function(r){"use strict";r("#js-grid-lightbox-gallery").cubeportfolio({filters:"#js-filters-lightbox-gallery",layoutMode:"grid",defaultFilter:"*",animationType:"fadeOut",gapHorizontal:10,gapVertical:10,gridAdjustment:"responsive",mediaQueries:[{width:1500,cols:3},{width:1100,cols:3},{width:800,cols:3},{width:480,cols:3},{width:400,cols:2},{width:350,cols:1},{width:300,cols:1,options:{caption:""}}],caption:"overlayBottom",displayType:"default",displayTypeSpeed:100,lightboxDelegate:".cbp-lightbox",lightboxGallery:!0,lightboxTitleSrc:"data-title",lightboxCounter:'<div class="cbp-popup-lightbox-counter">{{current}} of {{total}}</div>',singlePageInlineDelegate:".cbp-singlePageInline",singlePageInlineDeeplinking:!0,singlePageInlinePosition:"below",singlePageInlineInFocus:!0,singlePageInlineCallback:function(e){var n=this;r.ajax({url:e,type:"GET",dataType:"html",timeout:3e4}).done(function(e){n.updateSinglePageInline(e);var t=r(".video-js");if(t.length)for(var i=0;i<t.length;i+=1)videojs(t[i]).ready(function(){this.videoJsResolutionSwitcher()})}).fail(function(){n.updateSinglePageInline("AJAX Error! Please refresh the page!")})},plugins:{sort:{element:"#js-sort"}}})}(jQuery,(window,document));