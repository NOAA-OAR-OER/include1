function MarkerClusterer(e,t,r){this.extend(MarkerClusterer,google.maps.OverlayView),this.map_=e,this.markers_=[],this.clusters_=[],this.sizes=[53,56,66,78,90],this.styles_=[],this.ready_=!1;var s=r||{};this.gridSize_=s.gridSize||60,this.minClusterSize_=s.minimumClusterSize||2,this.maxZoom_=s.maxZoom||null,this.styles_=s.styles||[],this.imagePath_=s.imagePath||this.MARKER_CLUSTER_IMAGE_PATH_,this.imageExtension_=s.imageExtension||this.MARKER_CLUSTER_IMAGE_EXTENSION_,this.zoomOnClick_=!0,null!=s.zoomOnClick&&(this.zoomOnClick_=s.zoomOnClick),this.averageCenter_=!1,null!=s.averageCenter&&(this.averageCenter_=s.averageCenter),this.setupStyles_(),this.setMap(e),this.prevZoom_=this.map_.getZoom();var a=this;google.maps.event.addListener(this.map_,"zoom_changed",function(){var e=a.map_.getZoom();a.prevZoom_!=e&&(a.prevZoom_=e,a.resetViewport())}),google.maps.event.addListener(this.map_,"idle",function(){a.redraw()}),t&&t.length&&this.addMarkers(t,!1)}function Cluster(e){this.markerClusterer_=e,this.map_=e.getMap(),this.gridSize_=e.getGridSize(),this.minClusterSize_=e.getMinClusterSize(),this.averageCenter_=e.isAverageCenter(),this.center_=null,this.markers_=[],this.bounds_=null,this.clusterIcon_=new ClusterIcon(this,e.getStyles(),e.getGridSize())}function ClusterIcon(e,t,r){e.getMarkerClusterer().extend(ClusterIcon,google.maps.OverlayView),this.styles_=t,this.padding_=r||0,this.cluster_=e,this.center_=null,this.map_=e.getMap(),this.div_=null,this.sums_=null,this.visible_=!1,this.setMap(this.map_)}!function($){$.activmap={defaults:{places:[],lat:51.5286416,lng:-.1015987,zoom:6,maxZoom:12,cluster:!0,mapType:"roadmap",posPanel:"left",showPanel:!0,radius:0,country:null,autogeolocate:!1,icon:"images/icons/marker-hotel.png",styles:[{featureType:"landscape.man_made",elementType:"geometry",stylers:[{color:"#f7f1df"}]},{featureType:"landscape.natural",elementType:"geometry",stylers:[{color:"#d0e3b4"}]},{featureType:"landscape.natural.terrain",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"on"}]},{featureType:"poi.business",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"poi.medical",elementType:"geometry",stylers:[{color:"#fbd3da"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#bde6ab"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"on"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#ffe15f"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#efd151"}]},{featureType:"road.arterial",elementType:"geometry.fill",stylers:[{color:"#ffffff"}]},{featureType:"road.local",elementType:"geometry.fill",stylers:[{color:"black"}]},{featureType:"transit.station.airport",elementType:"geometry.fill",stylers:[{color:"#cfb2db"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#a2daf2"}]}],request:"large",locationTypes:["geocode","establishment"]}},$.arrayIntersect=function(e,t){return $.grep(e,function(e){return-1<$.inArray(e,t)})},$.fn.extend({activmap:function(settings){var s=$.extend({},$.activmap.defaults,settings),init_latlng=new google.maps.LatLng(s.lat,s.lng),latlng=init_latlng,opendInfoWindow=null,markers=[],infoWindow=[],ids=[],markerCluster,bounds,num_places=0,old_results=0,mapTypeId=google.maps.MapTypeId.ROADMAP;"satellite"!=s.mapType&&"perspective"!=s.mapType||(mapTypeId=google.maps.MapTypeId.HYBRID);var map=new google.maps.Map(document.getElementById("activmap-canvas"),{zoom:s.zoom,maxZoom:s.maxZoom,center:latlng,mapTypeId:mapTypeId,mapTypeControl:!1,streetViewControl:!1,styles:s.styles});"perspective"==s.mapType&&map.setTilt(45);var activmap_canvas=$("#activmap-canvas"),activmap_places=$("#activmap-places"),map_w=activmap_canvas.width(),cont_w=activmap_places.outerWidth();s.showPanel?("left"==s.posPanel&&(activmap_places.css({left:-cont_w,right:"auto"}),activmap_canvas.css({float:"right"})),"right"==s.posPanel&&(activmap_places.css({right:-cont_w,left:"auto"}),activmap_canvas.css({float:"left"}))):activmap_places.hide(),$('input[name="activmap_radius"]').length&&$('input[name="activmap_radius"]').prop("checked",!1).each(function(){s.radius==$(this).val()&&$(this).prop("checked",!0)}),_sort_by_dist=function(e,t){return e.dist<t.dist?-1:e.dist>t.dist?1:0},_order=function(){$.each(s.places,function(e,t){t.dist=_get_distance(t.marker.position,latlng)}),$(".activmap-place").remove(),$.each(s.places,function(e,t){activmap_places.append(t.html),t.isVisible&&$("#activmap-place_"+t.id).show()})},_init=function(){function e(e){initialLocation=(1==e?console.log("Geolocation service failed."):console.log("Your browser doesn't support geolocation."),latlng),map.setCenter(initialLocation)}if($.each(s.places,function(e,r){r.num_tags=0,r.id=e;var t,a=new google.maps.LatLng(r.lat,r.lng),o=""!=r.icon&&null!=r.icon?r.icon:s.icon,i=new google.maps.Marker({map:map,position:a,icon:o,title:r.title});t=null!=r.img&&""!=r.img?'<div class="activmap-brand"><img src="'+r.img+'"></div><h4 class="activmap-title">'+r.title+"</h4>":'<h4 class="activmap-title">'+r.title+"</h4>",null!=r.address&&""!=r.address&&(t+=r.address+"<br>"),null!=r.phone&&""!=r.phone&&(t+=r.phone+"<br>"),null!=r.url&&""!=r.url&&(t+='<a href="'+r.url+'" target="_blank">'+r.url+"</a><br>"),null!=r.custom_content&&""!=r.custom_content&&(t+=r.custom_content+"<br />"),infoWindow[e]=new google.maps.InfoWindow({content:t,position:a}),google.maps.event.addListener(i,"click",function(){null!=opendInfoWindow&&opendInfoWindow.close(),infoWindow[e].open(map,i),opendInfoWindow=infoWindow[e],$(".activmap-place").removeClass("active"),$("#activmap-place_"+e).addClass("active"),activmap_places.scrollTop(activmap_places.scrollTop()+$("#activmap-place_"+e).position().top)}),i.setVisible(!1),r.marker=i,markers.push(i),r.html='<div class="activmap-place" id="activmap-place_'+e+'"><h3>'+r.title+"</h3><p>"+r.address+"</p></div>",$.each(r.tags,function(e,t){void 0===ids[t]&&(ids[t]=[]),ids[t].push(r.id)})}),s.cluster&&(markerCluster=new MarkerClusterer(map,markers,{maxZoom:12,gridSize:40})),_order(),_geolocate=function(){navigator.geolocation?(browserSupportFlag=!0,navigator.geolocation.getCurrentPosition(function(e){initialLocation=new google.maps.LatLng(e.coords.latitude,e.coords.longitude),latlng=initialLocation,_order(),$('input[name="marker_type[]"], select[name="marker_type[]"]').each(function(){_update_places_tag($(this))}),_update_map(),map.setCenter(initialLocation)},function(){e(browserSupportFlag)})):(browserSupportFlag=!1,e(browserSupportFlag))},1==s.autogeolocate&&_geolocate(),$("#activmap-geolocate").length&&$("#activmap-geolocate").on("click",function(){_geolocate()}),$("#activmap-target").length&&$("#activmap-target").on("click",function(){_update_map()}),$("#activmap-location").length){if(null!==s.country)var t={types:s.locationTypes,componentRestrictions:{country:s.country}};else t={types:s.locationTypes};var r=document.getElementById("activmap-location");autocomplete=new google.maps.places.Autocomplete(r,t),google.maps.event.addListener(autocomplete,"place_changed",function(){var e=autocomplete.getPlace();e.geometry.viewport?map.fitBounds(e.geometry.viewport):(latlng=e.geometry.location,map.setCenter(e.geometry.location),map.setZoom(s.zoom),$(".activmap-place").length&&_order(),$('input[name="marker_type[]"], select[name="marker_type[]"]').each(function(){_update_places_tag($(this))}),_update_map())})}$('input[name="activmap_radius"]').on("change",function(){s.radius=$(this).val(),$('input[name="marker_type[]"], select[name="marker_type[]"]').each(function(){_update_places_tag($(this))}),_update_map()}),$('input[name="marker_type[]"], select[name="marker_type[]"]').on("change",function(){_update_places_tag($(this)),_update_map()}),$("#activmap-reset").on("click",function(){return $('input[name="marker_type[]"], select[name="marker_type[]"]').prop("checked",!0),$('input[name="marker_type[]"], select[name="marker_type[]"]').each(function(){_update_places_tag($(this))}),latlng=init_latlng,map.setCenter(latlng),map.setZoom(s.zoom),_update_map(),!1}),$(document).on("click",".activmap-place",function(){var e=$(this).attr("id").replace("activmap-place_","");google.maps.event.trigger(markers[e],"click")}),$(window).on("resize",function(){_update_map()}),$('input[name="marker_type[]"]:checked').add($('select[name="marker_type[]"]').prop("selected",!0)).each(function(){_update_places_tag($(this))}),_update_map()},_rad=function(e){return e*Math.PI/180},_get_distance=function(e,t){var r=_rad(t.lat()-e.lat()),s=_rad(t.lng()-e.lng()),a=Math.sin(r/2)*Math.sin(r/2)+Math.cos(_rad(e.lat()))*Math.cos(_rad(t.lat()))*Math.sin(s/2)*Math.sin(s/2);return 2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))*6378137},_update_map=function(){map_w=$("#activmap-wrapper").width(),0<num_places?0==old_results?s.showPanel?("left"==s.posPanel&&activmap_places.stop(!0,!0).animate({left:0},600),"right"==s.posPanel&&activmap_places.stop(!0,!0).animate({right:0},600),activmap_places.is(":visible")?activmap_canvas.animate({width:map_w-cont_w},600,function(){map.fitBounds(bounds),s.cluster&&markerCluster.repaint()}):(map.fitBounds(bounds),s.cluster&&markerCluster.repaint())):(map.fitBounds(bounds),s.cluster&&markerCluster.repaint()):(s.showPanel&&activmap_places.is(":visible")?activmap_canvas.width(map_w-cont_w):activmap_canvas.width(map_w),map.fitBounds(bounds),s.cluster&&markerCluster.repaint()):(null!=opendInfoWindow&&opendInfoWindow.close(),s.showPanel&&activmap_places.is(":visible")?(activmap_canvas.animate({width:map_w},600),"left"==s.posPanel&&activmap_places.animate({left:-cont_w},600),"right"==s.posPanel&&activmap_places.animate({right:-cont_w},600)):activmap_canvas.width(map_w),s.cluster&&markerCluster.repaint(),map.setZoom(s.zoom),map.setCenter(latlng));var e=google.maps.event.addListener(map,"idle",function(){16<map.getZoom()&&map.setZoom(16),google.maps.event.removeListener(e)});old_results=num_places},_update_places_tag=function(e){var t,r=0,a=[],o=[];$('input[name="marker_type[]"]:checked').add($('select[name="marker_type[]"]').prop("selected",!0)).each(function(){""!=(t=$(this).val())&&(void 0===ids[t]&&(ids[t]=[]),0==r?a=$.merge([],ids[t]):("strict"==s.request&&(a=$.arrayIntersect(ids[t],a)),"large"==s.request&&(o=$.merge([],ids[t]),a=$.merge(o,a))),r++)}),$.each(s.places,function(e,t){t.num_tags=0,(t.dist=0)<=$.inArray(t.id,a)?(t.dist=_get_distance(t.marker.position,latlng),0==s.radius||t.dist<=1e3*s.radius?(t.num_tags++,t.marker.setVisible(!0),t.isVisible=!0,$("#activmap-place_"+t.id).show()):(0<t.num_tags&&t.num_tags--,0==t.num_tags&&(t.marker.setVisible(!1),t.isVisible=!1,$("#activmap-place_"+t.id).hide()))):(0<t.num_tags&&t.num_tags--,0==t.num_tags&&(t.marker.setVisible(!1),t.isVisible=!1,$("#activmap-place_"+t.id).hide()))}),bounds=new google.maps.LatLngBounds,r=0,$.each(s.places,function(e,t){1==t.isVisible&&(bounds.extend(t.marker.getPosition()),r++)}),num_places=r,$("#activmap-results-num").html(r+" result(s)")},Array.isArray(s.places)?_init():$.ajax({url:s.places,dataType:"json",cache:!1,error:function(e,t,r){console.log(e),console.log(t),console.log(r)},success:function(data){var obj=eval(data);s.places=obj.places,_init()}})}})}(jQuery),MarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_PATH_="https://googlemaps.github.io/js-marker-clusterer/images/m",MarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_EXTENSION_="png",MarkerClusterer.prototype.extend=function(e,t){return function(e){for(var t in e.prototype)this.prototype[t]=e.prototype[t];return this}.apply(e,[t])},MarkerClusterer.prototype.onAdd=function(){this.setReady_(!0)},MarkerClusterer.prototype.draw=function(){},MarkerClusterer.prototype.setupStyles_=function(){if(!this.styles_.length)for(var e,t=0;e=this.sizes[t];t++)this.styles_.push({url:this.imagePath_+(t+1)+"."+this.imageExtension_,height:e,width:e})},MarkerClusterer.prototype.fitMapToMarkers=function(){for(var e,t=this.getMarkers(),r=new google.maps.LatLngBounds,s=0;e=t[s];s++)r.extend(e.getPosition());this.map_.fitBounds(r)},MarkerClusterer.prototype.setStyles=function(e){this.styles_=e},MarkerClusterer.prototype.getStyles=function(){return this.styles_},MarkerClusterer.prototype.isZoomOnClick=function(){return this.zoomOnClick_},MarkerClusterer.prototype.isAverageCenter=function(){return this.averageCenter_},MarkerClusterer.prototype.getMarkers=function(){return this.markers_},MarkerClusterer.prototype.getTotalMarkers=function(){return this.markers_.length},MarkerClusterer.prototype.setMaxZoom=function(e){this.maxZoom_=e},MarkerClusterer.prototype.getMaxZoom=function(){return this.maxZoom_},MarkerClusterer.prototype.calculator_=function(e,t){for(var r=0,s=e.length,a=s;0!==a;)a=parseInt(a/10,10),r++;return{text:s,index:r=Math.min(r,t)}},MarkerClusterer.prototype.setCalculator=function(e){this.calculator_=e},MarkerClusterer.prototype.getCalculator=function(){return this.calculator_},MarkerClusterer.prototype.addMarkers=function(e,t){for(var r,s=0;r=e[s];s++)this.pushMarkerTo_(r);t||this.redraw()},MarkerClusterer.prototype.pushMarkerTo_=function(e){if(e.isAdded=!1,e.draggable){var t=this;google.maps.event.addListener(e,"dragend",function(){e.isAdded=!1,t.repaint()})}this.markers_.push(e)},MarkerClusterer.prototype.addMarker=function(e,t){this.pushMarkerTo_(e),t||this.redraw()},MarkerClusterer.prototype.removeMarker_=function(e){var t=-1;if(this.markers_.indexOf)t=this.markers_.indexOf(e);else for(var r,s=0;r=this.markers_[s];s++)if(r==e){t=s;break}return-1!=t&&(e.setMap(null),this.markers_.splice(t,1),!0)},MarkerClusterer.prototype.removeMarker=function(e,t){var r=this.removeMarker_(e);return!(t||!r||(this.resetViewport(),this.redraw(),0))},MarkerClusterer.prototype.removeMarkers=function(e,t){for(var r,s=!1,a=0;r=e[a];a++){var o=this.removeMarker_(r);s=s||o}return!t&&s?(this.resetViewport(),this.redraw(),!0):void 0},MarkerClusterer.prototype.setReady_=function(e){this.ready_||(this.ready_=e,this.createClusters_())},MarkerClusterer.prototype.getTotalClusters=function(){return this.clusters_.length},MarkerClusterer.prototype.getMap=function(){return this.map_},MarkerClusterer.prototype.setMap=function(e){this.map_=e},MarkerClusterer.prototype.getGridSize=function(){return this.gridSize_},MarkerClusterer.prototype.setGridSize=function(e){this.gridSize_=e},MarkerClusterer.prototype.getMinClusterSize=function(){return this.minClusterSize_},MarkerClusterer.prototype.setMinClusterSize=function(e){this.minClusterSize_=e},MarkerClusterer.prototype.getExtendedBounds=function(e){var t=this.getProjection(),r=new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng()),s=new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng()),a=t.fromLatLngToDivPixel(r);a.x+=this.gridSize_,a.y-=this.gridSize_;var o=t.fromLatLngToDivPixel(s);o.x-=this.gridSize_,o.y+=this.gridSize_;var i=t.fromDivPixelToLatLng(a),n=t.fromDivPixelToLatLng(o);return e.extend(i),e.extend(n),e},MarkerClusterer.prototype.isMarkerInBounds_=function(e,t){return t.contains(e.getPosition())},MarkerClusterer.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers_=[]},MarkerClusterer.prototype.resetViewport=function(e){for(var t,r=0;t=this.clusters_[r];r++)t.remove();var s;for(r=0;s=this.markers_[r];r++)s.isAdded=!1,e&&s.setMap(null);this.clusters_=[]},MarkerClusterer.prototype.repaint=function(){var r=this.clusters_.slice();this.clusters_.length=0,this.resetViewport(),this.redraw(),window.setTimeout(function(){for(var e,t=0;e=r[t];t++)e.remove()},0)},MarkerClusterer.prototype.redraw=function(){this.createClusters_()},MarkerClusterer.prototype.distanceBetweenPoints_=function(e,t){if(!e||!t)return 0;var r=(t.lat()-e.lat())*Math.PI/180,s=(t.lng()-e.lng())*Math.PI/180,a=Math.sin(r/2)*Math.sin(r/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(t.lat()*Math.PI/180)*Math.sin(s/2)*Math.sin(s/2);return 2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))*6371},MarkerClusterer.prototype.addToClosestCluster_=function(e){for(var t=4e4,r=null,s=(e.getPosition(),0);i=this.clusters_[s];s++){var a=i.getCenter();if(a){var o=this.distanceBetweenPoints_(a,e.getPosition());o<t&&(t=o,r=i)}}var i;r&&r.isMarkerInClusterBounds(e)?r.addMarker(e):((i=new Cluster(this)).addMarker(e),this.clusters_.push(i))},MarkerClusterer.prototype.createClusters_=function(){if(this.ready_)for(var e,t=new google.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),this.map_.getBounds().getNorthEast()),r=this.getExtendedBounds(t),s=0;e=this.markers_[s];s++)!e.isAdded&&this.isMarkerInBounds_(e,r)&&this.addToClosestCluster_(e)},Cluster.prototype.isMarkerAlreadyAdded=function(e){if(this.markers_.indexOf)return-1!=this.markers_.indexOf(e);for(var t,r=0;t=this.markers_[r];r++)if(t==e)return!0;return!1},Cluster.prototype.addMarker=function(e){if(this.isMarkerAlreadyAdded(e))return!1;if(this.center_){if(this.averageCenter_){var t=this.markers_.length+1,r=(this.center_.lat()*(t-1)+e.getPosition().lat())/t,s=(this.center_.lng()*(t-1)+e.getPosition().lng())/t;this.center_=new google.maps.LatLng(r,s),this.calculateBounds_()}}else this.center_=e.getPosition(),this.calculateBounds_();e.isAdded=!0,this.markers_.push(e);var a=this.getVisibleMarkers(),o=a.length;if(o<this.minClusterSize_&&e.getMap()!=this.map_&&e.setMap(this.map_),o==this.minClusterSize_)for(var i=0;i<o;i++)a[i].setMap(null);return o>=this.minClusterSize_&&e.setMap(null),this.updateIcon(),!0},Cluster.prototype.getMarkerClusterer=function(){return this.markerClusterer_},Cluster.prototype.getBounds=function(){for(var e,t=new google.maps.LatLngBounds(this.center_,this.center_),r=this.getMarkers(),s=0;e=r[s];s++)t.extend(e.getPosition());return t},Cluster.prototype.remove=function(){this.clusterIcon_.remove(),this.markers_.length=0,delete this.markers_},Cluster.prototype.getSize=function(){return this.markers_.length},Cluster.prototype.getMarkers=function(){return this.markers_},Cluster.prototype.getVisibleMarkers=function(){var e=[];for(var t in this.markers_){var r=this.markers_[t];r.visible&&e.push(r)}return e},Cluster.prototype.getCenter=function(){return this.center_},Cluster.prototype.calculateBounds_=function(){var e=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(e)},Cluster.prototype.isMarkerInClusterBounds=function(e){return this.bounds_.contains(e.getPosition())},Cluster.prototype.getMap=function(){return this.map_},Cluster.prototype.updateIcon=function(){var e=this.map_.getZoom(),t=this.markerClusterer_.getMaxZoom(),r=this.getVisibleMarkers();if(t&&t<e)for(var s,a=0;s=r[a];a++)s.setMap(this.map_);else{if(this.markers_.length<this.minClusterSize_)return void this.clusterIcon_.hide();var o=this.markerClusterer_.getStyles().length,i=this.markerClusterer_.getCalculator()(r,o);"0"==i.text?this.clusterIcon_.hide():(this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.setSums(i),this.clusterIcon_.show())}},ClusterIcon.prototype.triggerClusterClick=function(e){var t=this.cluster_.getMarkerClusterer();google.maps.event.trigger(t,"clusterclick",this.cluster_,e),t.isZoomOnClick()&&this.map_.fitBounds(this.cluster_.getBounds())},ClusterIcon.prototype.onAdd=function(){if(this.div_=document.createElement("DIV"),this.visible_){var e=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(e),this.div_.innerHTML=this.sums_.text}this.getPanes().overlayMouseTarget.appendChild(this.div_);var t=this;google.maps.event.addDomListener(this.div_,"click",function(e){t.triggerClusterClick(e)})},ClusterIcon.prototype.getPosFromLatLng_=function(e){var t=this.getProjection().fromLatLngToDivPixel(e);return"object"==typeof this.iconAnchor_&&2===this.iconAnchor_.length?(t.x-=this.iconAnchor_[0],t.y-=this.iconAnchor_[1]):(t.x-=parseInt(this.width_/2,10),t.y-=parseInt(this.height_/2,10)),t},ClusterIcon.prototype.draw=function(){if(this.visible_){var e=this.getPosFromLatLng_(this.center_);this.div_.style.top=e.y+"px",this.div_.style.left=e.x+"px"}},ClusterIcon.prototype.hide=function(){this.div_&&(this.div_.style.display="none"),this.visible_=!1},ClusterIcon.prototype.show=function(){if(this.div_){var e=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(e),this.div_.style.display=""}this.visible_=!0},ClusterIcon.prototype.remove=function(){this.setMap(null)},ClusterIcon.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),this.div_.parentNode.removeChild(this.div_),this.div_=null)},ClusterIcon.prototype.setSums=function(e){this.sums_=e,this.text_=e.text,this.index_=e.index,this.div_&&(this.div_.innerHTML=e.text),this.useStyle()},ClusterIcon.prototype.useStyle=function(){var e=Math.max(0,this.sums_.index-1);e=Math.min(this.styles_.length-1,e);var t=this.styles_[e];this.url_=t.url,this.height_=t.height,this.width_=t.width,this.textColor_=t.textColor,this.anchor_=t.anchor,this.textSize_=t.textSize,this.backgroundPosition_=t.backgroundPosition,this.iconAnchor_=t.iconAnchor},ClusterIcon.prototype.setCenter=function(e){this.center_=e},ClusterIcon.prototype.createCss=function(e){var t=[];t.push("background-image:url("+this.url_+");");var r=this.backgroundPosition_?this.backgroundPosition_:"0 0";t.push("background-position:"+r+";"),"object"==typeof this.anchor_?("number"==typeof this.anchor_[0]&&0<this.anchor_[0]&&this.anchor_[0]<this.height_?t.push("height:"+(this.height_-this.anchor_[0])+"px; padding-top:"+this.anchor_[0]+"px;"):"number"==typeof this.anchor_[0]&&this.anchor_[0]<0&&-this.anchor_[0]<this.height_?t.push("height:"+this.height_+"px; line-height:"+(this.height_+this.anchor_[0])+"px;"):t.push("height:"+this.height_+"px; line-height:"+this.height_+"px;"),"number"==typeof this.anchor_[1]&&0<this.anchor_[1]&&this.anchor_[1]<this.width_?t.push("width:"+(this.width_-this.anchor_[1])+"px; padding-left:"+this.anchor_[1]+"px;"):t.push("width:"+this.width_+"px; text-align:center;")):t.push("height:"+this.height_+"px; line-height:"+this.height_+"px; width:"+this.width_+"px; text-align:center;");var s=this.textColor_?this.textColor_:"black",a=this.textSize_?this.textSize_:11;return t.push("cursor:pointer; top:"+e.y+"px; left:"+e.x+"px; color:"+s+"; position:absolute; font-size:"+a+"px; font-family:Arial,sans-serif; font-weight:bold"),t.join("")},(window.MarkerClusterer=MarkerClusterer).prototype.addMarker=MarkerClusterer.prototype.addMarker,MarkerClusterer.prototype.addMarkers=MarkerClusterer.prototype.addMarkers,MarkerClusterer.prototype.clearMarkers=MarkerClusterer.prototype.clearMarkers,MarkerClusterer.prototype.fitMapToMarkers=MarkerClusterer.prototype.fitMapToMarkers,MarkerClusterer.prototype.getCalculator=MarkerClusterer.prototype.getCalculator,MarkerClusterer.prototype.getGridSize=MarkerClusterer.prototype.getGridSize,MarkerClusterer.prototype.getExtendedBounds=MarkerClusterer.prototype.getExtendedBounds,MarkerClusterer.prototype.getMap=MarkerClusterer.prototype.getMap,MarkerClusterer.prototype.getMarkers=MarkerClusterer.prototype.getMarkers,MarkerClusterer.prototype.getMaxZoom=MarkerClusterer.prototype.getMaxZoom,MarkerClusterer.prototype.getStyles=MarkerClusterer.prototype.getStyles,MarkerClusterer.prototype.getTotalClusters=MarkerClusterer.prototype.getTotalClusters,MarkerClusterer.prototype.getTotalMarkers=MarkerClusterer.prototype.getTotalMarkers,MarkerClusterer.prototype.redraw=MarkerClusterer.prototype.redraw,MarkerClusterer.prototype.removeMarker=MarkerClusterer.prototype.removeMarker,MarkerClusterer.prototype.removeMarkers=MarkerClusterer.prototype.removeMarkers,MarkerClusterer.prototype.resetViewport=MarkerClusterer.prototype.resetViewport,MarkerClusterer.prototype.repaint=MarkerClusterer.prototype.repaint,MarkerClusterer.prototype.setCalculator=MarkerClusterer.prototype.setCalculator,MarkerClusterer.prototype.setGridSize=MarkerClusterer.prototype.setGridSize,MarkerClusterer.prototype.setMaxZoom=MarkerClusterer.prototype.setMaxZoom,MarkerClusterer.prototype.onAdd=MarkerClusterer.prototype.onAdd,MarkerClusterer.prototype.draw=MarkerClusterer.prototype.draw,Cluster.prototype.getCenter=Cluster.prototype.getCenter,Cluster.prototype.getSize=Cluster.prototype.getSize,Cluster.prototype.getMarkers=Cluster.prototype.getMarkers,Cluster.prototype.getVisibleMarkers=Cluster.prototype.getVisibleMarkers,ClusterIcon.prototype.onAdd=ClusterIcon.prototype.onAdd,ClusterIcon.prototype.draw=ClusterIcon.prototype.draw,ClusterIcon.prototype.onRemove=ClusterIcon.prototype.onRemove;